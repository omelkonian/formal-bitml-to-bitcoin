<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>SecureCompilation.ComputationalSoundness</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/formal-bitml-to-bitcoin/tree/master/SecureCompilation/ComputationalSoundness.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--allow-unsolved-metas</a> <a id="36" class="Symbol">#-}</a>
<a id="40" class="Keyword">open</a> <a id="45" class="Keyword">import</a> <a id="52" href="Prelude.Init.html" class="Module">Prelude.Init</a>
<a id="65" class="Keyword">open</a> <a id="70" href="Prelude.Init.html#7254" class="Module">L.Mem</a>
<a id="76" class="Keyword">open</a> <a id="81" class="Keyword">import</a> <a id="88" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>
<a id="102" class="Keyword">open</a> <a id="107" class="Keyword">import</a> <a id="114" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>
<a id="128" class="Keyword">open</a> <a id="133" class="Keyword">import</a> <a id="140" href="Prelude.Traces.html" class="Module">Prelude.Traces</a>
<a id="155" class="Keyword">open</a> <a id="160" class="Keyword">import</a> <a id="167" href="Prelude.InferenceRules.html" class="Module">Prelude.InferenceRules</a>
<a id="190" class="Keyword">open</a> <a id="195" class="Keyword">import</a> <a id="202" href="Prelude.Validity.html" class="Module">Prelude.Validity</a>
<a id="219" class="Keyword">open</a> <a id="224" class="Keyword">import</a> <a id="231" href="Prelude.General.html" class="Module">Prelude.General</a>

<a id="248" class="Keyword">open</a> <a id="253" class="Keyword">import</a> <a id="260" href="Bitcoin.html" class="Module">Bitcoin</a>
<a id="268" class="Keyword">open</a> <a id="273" class="Keyword">import</a> <a id="280" href="SecureCompilation.ModuleParameters.html" class="Module">SecureCompilation.ModuleParameters</a> <a id="315" class="Keyword">using</a> <a id="321" class="Symbol">(</a><a id="322" href="SecureCompilation.ModuleParameters.html#209" class="Record">⋯</a><a id="323" class="Symbol">)</a>

<a id="326" class="Keyword">module</a> <a id="333" href="SecureCompilation.ComputationalSoundness.html" class="Module">SecureCompilation.ComputationalSoundness</a> <a id="374" class="Symbol">(</a><a id="375" href="SecureCompilation.ComputationalSoundness.html#375" class="Bound">⋯</a> <a id="377" class="Symbol">:</a> <a id="379" href="SecureCompilation.ModuleParameters.html#209" class="Record">⋯</a><a id="380" class="Symbol">)</a> <a id="382" class="Symbol">(</a><a id="383" class="Keyword">let</a> <a id="387" class="Keyword">open</a> <a id="392" href="SecureCompilation.ModuleParameters.html#209" class="Module">⋯</a> <a id="394" href="SecureCompilation.ComputationalSoundness.html#375" class="Bound">⋯</a><a id="395" class="Symbol">)</a> <a id="397" class="Keyword">where</a>

<a id="404" class="Keyword">open</a> <a id="409" class="Keyword">import</a> <a id="416" href="SymbolicModel.html" class="Module">SymbolicModel</a> <a id="430" href="SecureCompilation.ModuleParameters.html#282" class="Field">⋯′</a> as <a id="S"></a><a id="436" href="SecureCompilation.ComputationalSoundness.html#436" class="Module">S</a>
<a id="438" class="Keyword">open</a> <a id="443" class="Keyword">import</a> <a id="450" href="ComputationalModel.html" class="Module">ComputationalModel</a> <a id="469" href="SecureCompilation.ModuleParameters.html#282" class="Field">⋯′</a> <a id="472" href="SecureCompilation.ModuleParameters.html#450" class="Field">finPart</a> <a id="480" href="SecureCompilation.ModuleParameters.html#487" class="Field">keypairs</a> as <a id="C"></a><a id="492" href="SecureCompilation.ComputationalSoundness.html#492" class="Module">C</a>
<a id="494" class="Keyword">open</a> <a id="499" class="Keyword">import</a> <a id="506" href="Coherence.html" class="Module">Coherence</a> <a id="516" href="SecureCompilation.ComputationalSoundness.html#375" class="Bound">⋯</a>
<a id="518" class="Keyword">open</a> <a id="523" class="Keyword">import</a> <a id="530" href="SecureCompilation.Parsing.html" class="Module">SecureCompilation.Parsing</a> <a id="556" href="SecureCompilation.ComputationalSoundness.html#375" class="Bound">⋯</a>
<a id="558" class="Keyword">open</a> <a id="563" class="Keyword">import</a> <a id="570" href="SecureCompilation.Backtranslation.html" class="Module">SecureCompilation.Backtranslation</a> <a id="604" href="SecureCompilation.ComputationalSoundness.html#375" class="Bound">⋯</a>

<a id="607" class="Keyword">module</a> <a id="614" href="SecureCompilation.ComputationalSoundness.html#614" class="Module">_</a> <a id="616" href="SecureCompilation.ComputationalSoundness.html#616" class="Bound">Adv</a> <a id="620" class="Symbol">(</a><a id="621" href="SecureCompilation.ComputationalSoundness.html#621" class="Bound">Adv∉</a> <a id="626" class="Symbol">:</a> <a id="628" href="SecureCompilation.ComputationalSoundness.html#616" class="Bound">Adv</a> <a id="632" href="Data.List.Membership.Setoid.html#945" class="Function Operator">∉</a> <a id="634" href="BitML.BasicTypes.html#785" class="Function">Hon</a><a id="637" class="Symbol">)</a> <a id="639" class="Keyword">where</a>
  <a id="647" class="Keyword">open</a> <a id="652" href="SymbolicModel.Strategy.html#1699" class="Module">S.AdvM</a> <a id="659" href="SecureCompilation.ComputationalSoundness.html#616" class="Bound">Adv</a> <a id="663" href="SecureCompilation.ComputationalSoundness.html#621" class="Bound">Adv∉</a> <a id="668" class="Keyword">renaming</a> <a id="677" class="Symbol">(</a><a id="678" href="SymbolicModel.Strategy.html#3872" class="Datatype Operator">_-conforms-to-_</a> <a id="694" class="Symbol">to</a> <a id="697" class="Datatype Operator">_~ˢ_</a><a id="701" class="Symbol">;</a> <a id="703" href="SymbolicModel.Strategy.html#1759" class="Record">AdversaryStrategy</a> <a id="721" class="Symbol">to</a> <a id="724" class="Record">AdvStrategyˢ</a><a id="736" class="Symbol">)</a>
  <a id="740" class="Keyword">open</a> <a id="745" href="ComputationalModel.Strategy.html#2608" class="Module">C.AdvM</a> <a id="752" href="SecureCompilation.ComputationalSoundness.html#616" class="Bound">Adv</a> <a id="756" href="SecureCompilation.ComputationalSoundness.html#621" class="Bound">Adv∉</a> <a id="761" class="Keyword">renaming</a> <a id="770" class="Symbol">(</a><a id="771" href="ComputationalModel.Strategy.html#5434" class="Function Operator">_-conforms-to-_</a> <a id="787" class="Symbol">to</a> <a id="790" class="Function Operator">_~ᶜ_</a><a id="794" class="Symbol">;</a> <a id="796" href="ComputationalModel.Strategy.html#2668" class="Record">AdversaryStrategy</a> <a id="814" class="Symbol">to</a> <a id="817" class="Record">AdvStrategyᶜ</a><a id="829" class="Symbol">)</a>

  <a id="834" class="Keyword">module</a> <a id="841" href="SecureCompilation.ComputationalSoundness.html#841" class="Module">_</a> <a id="843" class="Symbol">(</a><a id="844" href="SecureCompilation.ComputationalSoundness.html#844" class="Bound">Σˢ</a> <a id="847" class="Symbol">:</a> <a id="849" href="SymbolicModel.Strategy.html#1443" class="Function">S.HonestStrategies</a><a id="867" class="Symbol">)</a>
           <a id="880" class="Symbol">(</a><a id="881" href="SecureCompilation.ComputationalSoundness.html#881" class="Bound">𝕧Σˢ</a> <a id="885" class="Symbol">:</a> <a id="887" class="Symbol">∀</a> <a id="889" class="Symbol">{</a><a id="890" href="SecureCompilation.ComputationalSoundness.html#890" class="Bound">A</a><a id="891" class="Symbol">}</a> <a id="893" class="Symbol">(</a><a id="894" href="SecureCompilation.ComputationalSoundness.html#894" class="Bound">A∈</a> <a id="897" class="Symbol">:</a> <a id="899" href="SecureCompilation.ComputationalSoundness.html#890" class="Bound">A</a> <a id="901" href="Data.List.Membership.Setoid.html#896" class="Function Operator">∈</a> <a id="903" href="BitML.BasicTypes.html#785" class="Function">Hon</a><a id="906" class="Symbol">)</a> <a id="908" class="Symbol">→</a> <a id="910" href="Prelude.Validity.html#343" class="Field">Valid</a> <a id="916" class="Symbol">(</a><a id="917" href="SecureCompilation.ComputationalSoundness.html#844" class="Bound">Σˢ</a> <a id="920" href="SecureCompilation.ComputationalSoundness.html#894" class="Bound">A∈</a><a id="922" class="Symbol">))</a>
           <a id="936" class="Symbol">(</a><a id="937" href="SecureCompilation.ComputationalSoundness.html#937" class="Bound">Σᶜₐ</a> <a id="941" class="Symbol">:</a> <a id="943" href="SecureCompilation.ComputationalSoundness.html#817" class="Record">AdvStrategyᶜ</a><a id="955" class="Symbol">)</a> <a id="957" class="Keyword">where</a>

    <a id="968" class="Comment">-- [T0D0] missing translation for adversarial strategy</a>
    <a id="1027" class="Keyword">postulate</a> <a id="1037" href="SecureCompilation.ComputationalSoundness.html#1037" class="Postulate">ℵₐ</a> <a id="1040" class="Symbol">:</a> <a id="1042" href="SecureCompilation.ComputationalSoundness.html#817" class="Record">AdvStrategyᶜ</a> <a id="1055" class="Symbol">→</a> <a id="1057" href="SecureCompilation.ComputationalSoundness.html#724" class="Record">AdvStrategyˢ</a>

    <a id="1075" href="SecureCompilation.ComputationalSoundness.html#1075" class="Function">Σˢₐ</a> <a id="1079" class="Symbol">:</a> <a id="1081" href="SecureCompilation.ComputationalSoundness.html#724" class="Record">AdvStrategyˢ</a>
    <a id="1098" href="SecureCompilation.ComputationalSoundness.html#1075" class="Function">Σˢₐ</a> <a id="1102" class="Symbol">=</a> <a id="1104" href="SecureCompilation.ComputationalSoundness.html#1037" class="Postulate">ℵₐ</a> <a id="1107" href="SecureCompilation.ComputationalSoundness.html#937" class="Bound">Σᶜₐ</a>

    <a id="1116" href="SecureCompilation.ComputationalSoundness.html#1116" class="Function">Σᶜ</a> <a id="1119" class="Symbol">:</a> <a id="1121" href="ComputationalModel.Strategy.html#2425" class="Function">C.HonestStrategies</a>
    <a id="1144" href="SecureCompilation.ComputationalSoundness.html#1116" class="Function">Σᶜ</a> <a id="1147" href="SecureCompilation.ComputationalSoundness.html#1147" class="Bound">A∈</a> <a id="1150" class="Symbol">=</a> <a id="1152" href="SecureCompilation.Backtranslation.html#728" class="Function">ℵ</a> <a id="1154" href="SecureCompilation.ComputationalSoundness.html#1147" class="Bound">A∈</a> <a id="1157" class="Symbol">(</a><a id="1158" href="SecureCompilation.ComputationalSoundness.html#844" class="Bound">Σˢ</a> <a id="1161" href="SecureCompilation.ComputationalSoundness.html#1147" class="Bound">A∈</a> <a id="1164" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1166" href="SecureCompilation.ComputationalSoundness.html#881" class="Bound">𝕧Σˢ</a> <a id="1170" href="SecureCompilation.ComputationalSoundness.html#1147" class="Bound">A∈</a><a id="1172" class="Symbol">)</a> <a id="1174" class="Symbol">.</a><a id="1175" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a>

    <a id="1186" class="Comment">-- [T0D0] overcome non-constructive formulation of the original proof</a>
    <a id="1260" href="SecureCompilation.ComputationalSoundness.html#1260" class="Function">soundness</a> <a id="1270" class="Symbol">:</a>

        <a id="1281" href="ComputationalModel.Run.html#4351" class="Generalizable">Rᶜ</a> <a id="1284" href="SecureCompilation.ComputationalSoundness.html#790" class="Function Operator">~ᶜ</a> <a id="1287" href="SecureCompilation.ComputationalSoundness.html#937" class="Bound">Σᶜₐ</a> <a id="1291" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1293" href="SecureCompilation.ComputationalSoundness.html#1116" class="Function">Σᶜ</a>
        <a id="1304" href="Prelude.InferenceRules.html#12810" class="Function Operator">────────────────────────────────────────────────────</a>
        <a id="1365" href="Data.Product.html#1378" class="Function">∃</a> <a id="1367" class="Symbol">λ</a> <a id="1369" class="Symbol">(</a><a id="1370" href="SecureCompilation.ComputationalSoundness.html#1370" class="Bound">Rˢ</a> <a id="1373" class="Symbol">:</a> <a id="1375" href="SymbolicModel.Run.Base.html#430" class="Function">S.Run</a><a id="1380" class="Symbol">)</a> <a id="1382" class="Symbol">→</a> <a id="1384" class="Symbol">(</a><a id="1385" href="SecureCompilation.ComputationalSoundness.html#1370" class="Bound">Rˢ</a> <a id="1388" href="SecureCompilation.ComputationalSoundness.html#697" class="Datatype Operator">~ˢ</a> <a id="1391" href="SecureCompilation.ComputationalSoundness.html#1075" class="Function">Σˢₐ</a> <a id="1395" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1397" href="SecureCompilation.ComputationalSoundness.html#844" class="Bound">Σˢ</a><a id="1399" class="Symbol">)</a> <a id="1401" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="1403" class="Symbol">(</a><a id="1404" href="SecureCompilation.ComputationalSoundness.html#1370" class="Bound">Rˢ</a> <a id="1407" href="Coherence.Relation.html#5522" class="Function Operator">~</a> <a id="1409" href="ComputationalModel.Run.html#4351" class="Generalizable">Rᶜ</a><a id="1411" class="Symbol">)</a>

    <a id="1418" href="SecureCompilation.ComputationalSoundness.html#1260" class="Function">soundness</a> <a id="1428" class="Symbol">{</a><a id="1429" href="SecureCompilation.ComputationalSoundness.html#1429" class="Bound">Rᶜ</a><a id="1431" class="Symbol">}</a> <a id="1433" href="SecureCompilation.ComputationalSoundness.html#1433" class="Bound">∃R~ᶜ</a><a id="1437" class="Symbol">@(</a><a id="1439" href="SecureCompilation.ComputationalSoundness.html#1439" class="Bound">Rᶜ⋯</a> <a id="1443" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1445" href="SecureCompilation.ComputationalSoundness.html#1445" class="Bound">prefix</a> <a id="1452" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1454" href="SecureCompilation.ComputationalSoundness.html#1454" class="Bound">R~ᶜ</a><a id="1457" class="Symbol">)</a>
      <a id="1465" class="Keyword">with</a> <a id="1470" href="SecureCompilation.ComputationalSoundness.html#1470" class="Bound">Rˢ</a> <a id="1473" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1475" href="SecureCompilation.ComputationalSoundness.html#1475" class="Bound">Rˢ~Rᶜ</a> ← <a id="1483" href="SecureCompilation.Parsing.Completeness.html#770" class="Function">parseRun</a> <a id="1492" href="SecureCompilation.ComputationalSoundness.html#1429" class="Bound">Rᶜ</a>
      <a id="1501" class="Symbol">=</a> <a id="1503" href="SecureCompilation.ComputationalSoundness.html#1470" class="Bound">Rˢ</a> <a id="1506" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1508" href="SecureCompilation.ComputationalSoundness.html#1540" class="Function">R~ˢ</a> <a id="1512" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1514" href="SecureCompilation.ComputationalSoundness.html#1475" class="Bound">Rˢ~Rᶜ</a>
      <a id="1526" class="Keyword">where</a>
        <a id="1540" href="SecureCompilation.ComputationalSoundness.html#1540" class="Function">R~ˢ</a> <a id="1544" class="Symbol">:</a> <a id="1546" href="SecureCompilation.ComputationalSoundness.html#1470" class="Bound">Rˢ</a> <a id="1549" href="SecureCompilation.ComputationalSoundness.html#697" class="Datatype Operator">~ˢ</a> <a id="1552" href="SecureCompilation.ComputationalSoundness.html#1075" class="Function">Σˢₐ</a> <a id="1556" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1558" href="SecureCompilation.ComputationalSoundness.html#844" class="Bound">Σˢ</a>
        <a id="1569" href="SecureCompilation.ComputationalSoundness.html#1540" class="Function">R~ˢ</a> <a id="1573" class="Keyword">with</a> <a id="1578" href="Prelude.General.html#6867" class="InductiveConstructor Operator">⟫</a> <a id="1580" href="SecureCompilation.ComputationalSoundness.html#1454" class="Bound">R~ᶜ</a>
        <a id="1592" class="Comment">-- T0D0: induction in tandem with `parseRun` needed here</a>
        <a id="1657" href="SecureCompilation.ComputationalSoundness.html#1540" class="Function">...</a> <a id="1661" class="Symbol">|</a> <a id="1663" href="Prelude.General.html#6867" class="InductiveConstructor Operator">⟫</a> <a id="1665" href="ComputationalModel.Strategy.html#3955" class="InductiveConstructor">base</a> <a id="1670" class="Symbol">{</a><a id="1671" href="SecureCompilation.ComputationalSoundness.html#1671" class="Bound">R</a><a id="1672" class="Symbol">}</a> <a id="1674" href="SecureCompilation.ComputationalSoundness.html#1674" class="Bound">cinit</a> <a id="1680" class="Symbol">=</a> <a id="1682" class="Hole">{!base ?!}</a>
        <a id="1701" href="SecureCompilation.ComputationalSoundness.html#1540" class="Function">...</a> <a id="1705" class="Symbol">|</a> <a id="1707" href="Prelude.General.html#6867" class="InductiveConstructor Operator">⟫</a> <a id="1709" href="ComputationalModel.Strategy.html#4051" class="InductiveConstructor">step</a> <a id="1714" class="Symbol">{</a><a id="1715" href="SecureCompilation.ComputationalSoundness.html#1715" class="Bound">R</a><a id="1716" class="Symbol">}</a> <a id="1718" href="SecureCompilation.ComputationalSoundness.html#1718" class="Bound">h1</a> <a id="1721" href="SecureCompilation.ComputationalSoundness.html#1721" class="Bound">h2</a> <a id="1724" href="SecureCompilation.ComputationalSoundness.html#1724" class="Bound">h3</a> <a id="1727" class="Symbol">=</a> <a id="1729" class="Hole">{!step ? ?!}</a>
        <a id="1750" href="SecureCompilation.ComputationalSoundness.html#1540" class="Function">...</a> <a id="1754" class="Symbol">|</a> <a id="1756" href="Prelude.General.html#6867" class="InductiveConstructor Operator">⟫</a> <a id="1758" href="ComputationalModel.Strategy.html#4394" class="InductiveConstructor">oracle-adv</a> <a id="1769" class="Symbol">{</a><a id="1770" href="SecureCompilation.ComputationalSoundness.html#1770" class="Bound">R</a><a id="1771" class="Symbol">}{</a><a id="1773" href="SecureCompilation.ComputationalSoundness.html#1773" class="Bound">m</a><a id="1774" class="Symbol">}{</a><a id="1776" href="SecureCompilation.ComputationalSoundness.html#1776" class="Bound">hm</a><a id="1778" class="Symbol">}</a> <a id="1780" href="SecureCompilation.ComputationalSoundness.html#1780" class="Bound">h1</a> <a id="1783" href="SecureCompilation.ComputationalSoundness.html#1783" class="Bound">h2</a> <a id="1786" href="SecureCompilation.ComputationalSoundness.html#1786" class="Bound">h3</a> <a id="1789" href="SecureCompilation.ComputationalSoundness.html#1789" class="Bound">h4</a> <a id="1792" class="Symbol">=</a> <a id="1794" class="Hole">{!step ?!}</a>
        <a id="1813" href="SecureCompilation.ComputationalSoundness.html#1540" class="Function">...</a> <a id="1817" class="Symbol">|</a> <a id="1819" href="Prelude.General.html#6867" class="InductiveConstructor Operator">⟫</a> <a id="1821" href="ComputationalModel.Strategy.html#4937" class="InductiveConstructor">oracle-hon</a> <a id="1832" class="Symbol">{</a><a id="1833" href="SecureCompilation.ComputationalSoundness.html#1833" class="Bound">R</a><a id="1834" class="Symbol">}{</a><a id="1836" href="SecureCompilation.ComputationalSoundness.html#1836" class="Bound">A</a><a id="1837" class="Symbol">}{</a><a id="1839" href="SecureCompilation.ComputationalSoundness.html#1839" class="Bound">A∈</a><a id="1841" class="Symbol">}{</a><a id="1843" href="SecureCompilation.ComputationalSoundness.html#1843" class="Bound">m</a><a id="1844" class="Symbol">}{</a><a id="1846" href="SecureCompilation.ComputationalSoundness.html#1846" class="Bound">hm</a><a id="1848" class="Symbol">}</a> <a id="1850" href="SecureCompilation.ComputationalSoundness.html#1850" class="Bound">h1</a> <a id="1853" href="SecureCompilation.ComputationalSoundness.html#1853" class="Bound">h2</a> <a id="1856" href="SecureCompilation.ComputationalSoundness.html#1856" class="Bound">h3</a> <a id="1859" class="Symbol">=</a> <a id="1861" class="Hole">{!!}</a>
</pre></body></html>