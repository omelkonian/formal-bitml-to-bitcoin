<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>SymbolicModel.Mappings.Base</title><link rel="stylesheet" href="css/Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="Prelude.Init.html" class="Module">Prelude.Init</a>
<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>
<a id="52" class="Keyword">open</a> <a id="57" class="Keyword">import</a> <a id="64" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>
<a id="78" class="Keyword">open</a> <a id="83" class="Keyword">import</a> <a id="90" href="Prelude.Validity.html" class="Module">Prelude.Validity</a>
<a id="107" class="Keyword">open</a> <a id="112" class="Keyword">import</a> <a id="119" href="Prelude.Collections.html" class="Module">Prelude.Collections</a>
<a id="139" class="Keyword">open</a> <a id="144" class="Keyword">import</a> <a id="151" href="Prelude.InferenceRules.html" class="Module">Prelude.InferenceRules</a>
<a id="174" class="Keyword">open</a> <a id="179" class="Keyword">import</a> <a id="186" href="Prelude.Traces.html" class="Module">Prelude.Traces</a>

<a id="202" class="Keyword">open</a> <a id="207" class="Keyword">import</a> <a id="214" href="Bitcoin.html" class="Module">Bitcoin</a>

<a id="223" class="Keyword">module</a> <a id="230" href="SymbolicModel.Mappings.Base.html" class="Module">SymbolicModel.Mappings.Base</a>
  <a id="260" class="Symbol">(</a><a id="261" href="SymbolicModel.Mappings.Base.html#261" class="Bound">Participant</a> <a id="273" class="Symbol">:</a> <a id="275" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="278" class="Symbol">)</a>
  <a id="282" class="Symbol">⦃</a> <a id="284" href="SymbolicModel.Mappings.Base.html#284" class="Bound">_</a> <a id="286" class="Symbol">:</a> <a id="288" href="Prelude.DecEq.Core.html#97" class="Record">DecEq</a> <a id="294" href="SymbolicModel.Mappings.Base.html#261" class="Bound">Participant</a> <a id="306" class="Symbol">⦄</a>
  <a id="310" class="Symbol">(</a><a id="311" href="SymbolicModel.Mappings.Base.html#311" class="Bound">Honest</a> <a id="318" class="Symbol">:</a> <a id="320" href="Data.List.NonEmpty.Base.html#1079" class="Record">List⁺</a> <a id="326" href="SymbolicModel.Mappings.Base.html#261" class="Bound">Participant</a><a id="337" class="Symbol">)</a>
  <a id="341" class="Keyword">where</a>

<a id="348" class="Keyword">open</a> <a id="353" class="Keyword">import</a> <a id="360" href="SymbolicModel.Run.html" class="Module">SymbolicModel.Run</a> <a id="378" href="SymbolicModel.Mappings.Base.html#261" class="Bound">Participant</a> <a id="390" href="SymbolicModel.Mappings.Base.html#311" class="Bound">Honest</a>
<a id="397" class="Keyword">open</a> <a id="402" class="Keyword">import</a> <a id="409" href="SymbolicModel.Accessors.html" class="Module">SymbolicModel.Accessors</a> <a id="433" href="SymbolicModel.Mappings.Base.html#261" class="Bound">Participant</a> <a id="445" href="SymbolicModel.Mappings.Base.html#311" class="Bound">Honest</a>
<a id="452" class="Keyword">open</a> <a id="457" class="Keyword">import</a> <a id="464" href="SymbolicModel.Collections.html" class="Module">SymbolicModel.Collections</a> <a id="490" href="SymbolicModel.Mappings.Base.html#261" class="Bound">Participant</a> <a id="502" href="SymbolicModel.Mappings.Base.html#311" class="Bound">Honest</a>

<a id="510" class="Keyword">private</a> <a id="518" class="Keyword">variable</a> <a id="527" href="SymbolicModel.Mappings.Base.html#527" class="Generalizable">X</a> <a id="529" class="Symbol">:</a> <a id="531" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="535" href="Prelude.Init.html#330" class="Generalizable">ℓ</a>

<a id="Txout"></a><a id="538" href="SymbolicModel.Mappings.Base.html#538" class="Function">Txout</a> <a id="544" class="Symbol">:</a> <a id="546" class="Symbol">⦃</a> <a id="548" href="SymbolicModel.Mappings.Base.html#527" class="Generalizable">X</a> <a id="550" href="Prelude.Collections.html#122" class="Record Operator">has</a> <a id="554" href="BitML.BasicTypes.html#333" class="Function">Name</a> <a id="559" class="Symbol">⦄</a> <a id="561" class="Symbol">→</a> <a id="563" href="Prelude.Init.html#11891" class="Function">Pred₀</a> <a id="569" href="SymbolicModel.Mappings.Base.html#527" class="Generalizable">X</a>
<a id="571" href="SymbolicModel.Mappings.Base.html#538" class="Function">Txout</a> <a id="577" href="SymbolicModel.Mappings.Base.html#577" class="Bound">x</a> <a id="579" class="Symbol">=</a> <a id="581" href="BitML.Contracts.Helpers.html#5031" class="Function">namesʳ</a> <a id="588" href="SymbolicModel.Mappings.Base.html#577" class="Bound">x</a> <a id="590" href="Prelude.Lists.Mappings.html#708" class="Function Operator">↦</a> <a id="592" href="Bitcoin.Tx.Base.html#1793" class="Record">TxInput′</a>

<a id="Sechash"></a><a id="602" href="SymbolicModel.Mappings.Base.html#602" class="Function">Sechash</a> <a id="610" class="Symbol">:</a> <a id="612" class="Symbol">⦃</a> <a id="614" href="SymbolicModel.Mappings.Base.html#527" class="Generalizable">X</a> <a id="616" href="Prelude.Collections.html#122" class="Record Operator">has</a> <a id="620" href="BitML.BasicTypes.html#333" class="Function">Name</a> <a id="625" class="Symbol">⦄</a> <a id="627" class="Symbol">→</a> <a id="629" href="Prelude.Init.html#11891" class="Function">Pred₀</a> <a id="635" href="SymbolicModel.Mappings.Base.html#527" class="Generalizable">X</a>
<a id="637" href="SymbolicModel.Mappings.Base.html#602" class="Function">Sechash</a> <a id="645" href="SymbolicModel.Mappings.Base.html#645" class="Bound">x</a> <a id="647" class="Symbol">=</a> <a id="649" href="BitML.Contracts.Helpers.html#4962" class="Function">namesˡ</a> <a id="656" href="SymbolicModel.Mappings.Base.html#645" class="Bound">x</a> <a id="658" href="Prelude.Lists.Mappings.html#708" class="Function Operator">↦</a> <a id="660" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a>

<a id="𝕂"></a><a id="663" href="SymbolicModel.Mappings.Base.html#663" class="Function">𝕂</a> <a id="665" class="Symbol">:</a> <a id="667" href="Prelude.Init.html#11891" class="Function">Pred₀</a> <a id="673" href="BitML.Contracts.Types.html#1823" class="Datatype">Precondition</a>
<a id="686" href="SymbolicModel.Mappings.Base.html#663" class="Function">𝕂</a> <a id="688" href="SymbolicModel.Mappings.Base.html#688" class="Bound">g</a> <a id="690" class="Symbol">=</a> <a id="692" href="BitML.Contracts.Helpers.html#3379" class="Function">nub-participants</a> <a id="709" href="SymbolicModel.Mappings.Base.html#688" class="Bound">g</a> <a id="711" href="Prelude.Lists.Mappings.html#708" class="Function Operator">↦</a> <a id="713" href="Bitcoin.Crypto.html#345" class="Record">KeyPair</a>

<a id="𝕂²′"></a><a id="722" href="SymbolicModel.Mappings.Base.html#722" class="Function">𝕂²′</a> <a id="726" class="Symbol">:</a> <a id="728" href="Prelude.Init.html#11891" class="Function">Pred₀</a> <a id="734" href="BitML.Contracts.Types.html#2400" class="Record">Advertisement</a>
<a id="748" href="SymbolicModel.Mappings.Base.html#722" class="Function">𝕂²′</a> <a id="752" class="Symbol">(</a><a id="753" href="BitML.Contracts.Types.html#2440" class="InductiveConstructor Operator">⟨</a> <a id="755" href="SymbolicModel.Mappings.Base.html#755" class="Bound">g</a> <a id="757" href="BitML.Contracts.Types.html#2440" class="InductiveConstructor Operator">⟩</a> <a id="759" href="SymbolicModel.Mappings.Base.html#759" class="Bound">c</a><a id="760" class="Symbol">)</a> <a id="762" class="Symbol">=</a> <a id="764" href="BitML.Contracts.Helpers.html#17021" class="Function">subtermsᶜ′</a> <a id="775" href="SymbolicModel.Mappings.Base.html#759" class="Bound">c</a> <a id="777" href="Prelude.Lists.Mappings.html#708" class="Function Operator">↦</a> <a id="779" href="BitML.Contracts.Helpers.html#3379" class="Function">nub-participants</a> <a id="796" href="SymbolicModel.Mappings.Base.html#755" class="Bound">g</a> <a id="798" href="Prelude.Lists.Mappings.html#708" class="Function Operator">↦</a> <a id="800" href="Bitcoin.Crypto.html#345" class="Record">KeyPair</a>

<a id="𝕂²"></a><a id="809" href="SymbolicModel.Mappings.Base.html#809" class="Function">𝕂²</a> <a id="812" class="Symbol">:</a> <a id="814" class="Symbol">⦃</a> <a id="816" href="SymbolicModel.Mappings.Base.html#527" class="Generalizable">X</a> <a id="818" href="Prelude.Collections.html#122" class="Record Operator">has</a> <a id="822" href="BitML.Contracts.Types.html#2400" class="Record">Advertisement</a> <a id="836" class="Symbol">⦄</a> <a id="838" class="Symbol">→</a> <a id="840" href="Prelude.Init.html#11891" class="Function">Pred₀</a> <a id="846" href="SymbolicModel.Mappings.Base.html#527" class="Generalizable">X</a>
<a id="848" href="SymbolicModel.Mappings.Base.html#809" class="Function">𝕂²</a> <a id="851" href="SymbolicModel.Mappings.Base.html#851" class="Bound">x</a> <a id="853" class="Symbol">=</a> <a id="855" href="BitML.Semantics.Configurations.Helpers.html#9849" class="Function">advertisements</a> <a id="870" href="SymbolicModel.Mappings.Base.html#851" class="Bound">x</a> <a id="872" href="Prelude.Lists.Mappings.html#586" class="Function Operator">↦′</a> <a id="875" href="SymbolicModel.Mappings.Base.html#722" class="Function">𝕂²′</a>

<a id="880" class="Comment">-- Well-formed terms, where we can provide mappings txout,sechash,κ.</a>
<a id="949" class="Keyword">record</a> <a id="𝕎"></a><a id="956" href="SymbolicModel.Mappings.Base.html#956" class="Record">𝕎</a> <a id="958" class="Symbol">⦃</a> <a id="960" href="SymbolicModel.Mappings.Base.html#960" class="Bound">_</a> <a id="962" class="Symbol">:</a> <a id="964" href="SymbolicModel.Mappings.Base.html#527" class="Generalizable">X</a> <a id="966" href="Prelude.Collections.html#122" class="Record Operator">has</a> <a id="970" href="BitML.BasicTypes.html#333" class="Function">Name</a> <a id="975" class="Symbol">⦄</a> <a id="977" class="Symbol">⦃</a> <a id="979" href="SymbolicModel.Mappings.Base.html#979" class="Bound">_</a> <a id="981" class="Symbol">:</a> <a id="983" href="SymbolicModel.Mappings.Base.html#527" class="Generalizable">X</a> <a id="985" href="Prelude.Collections.html#122" class="Record Operator">has</a> <a id="989" href="BitML.Contracts.Types.html#2400" class="Record">Advertisement</a> <a id="1003" class="Symbol">⦄</a> <a id="1005" class="Symbol">(</a><a id="1006" href="SymbolicModel.Mappings.Base.html#1006" class="Bound">x</a> <a id="1008" class="Symbol">:</a> <a id="1010" href="SymbolicModel.Mappings.Base.html#527" class="Generalizable">X</a><a id="1011" class="Symbol">)</a> <a id="1013" class="Symbol">:</a> <a id="1015" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1019" class="Keyword">where</a>
  <a id="1027" class="Keyword">constructor</a> <a id="[txout:_∣sechash:_∣κ:_]"></a><a id="1039" href="SymbolicModel.Mappings.Base.html#1039" class="InductiveConstructor Operator">[txout:_∣sechash:_∣κ:_]</a>
  <a id="1065" class="Keyword">field</a>
    <a id="𝕎.txout"></a><a id="1075" href="SymbolicModel.Mappings.Base.html#1075" class="Field">txout</a>   <a id="1083" class="Symbol">:</a> <a id="1085" href="SymbolicModel.Mappings.Base.html#538" class="Function">Txout</a>   <a id="1093" href="SymbolicModel.Mappings.Base.html#1006" class="Bound">x</a>
    <a id="𝕎.sechash"></a><a id="1099" href="SymbolicModel.Mappings.Base.html#1099" class="Field">sechash</a> <a id="1107" class="Symbol">:</a> <a id="1109" href="SymbolicModel.Mappings.Base.html#602" class="Function">Sechash</a> <a id="1117" href="SymbolicModel.Mappings.Base.html#1006" class="Bound">x</a>
    <a id="𝕎.κ"></a><a id="1123" href="SymbolicModel.Mappings.Base.html#1123" class="Field">κ</a>       <a id="1131" class="Symbol">:</a> <a id="1133" href="SymbolicModel.Mappings.Base.html#809" class="Function">𝕂²</a>      <a id="1141" href="SymbolicModel.Mappings.Base.html#1006" class="Bound">x</a>

<a id="ℝ"></a><a id="1144" href="SymbolicModel.Mappings.Base.html#1144" class="Function">ℝ</a> <a id="1146" class="Symbol">=</a> <a id="1148" href="Prelude.Init.html#11891" class="Function">Pred₀</a> <a id="1154" href="SymbolicModel.Run.Base.html#408" class="Function">Run</a> <a id="1158" href="Function.Base.html#4562" class="Function Operator">∋</a> <a id="1160" href="SymbolicModel.Mappings.Base.html#956" class="Record">𝕎</a>
<a id="1162" class="Keyword">module</a> <a id="ℝ"></a><a id="1169" href="SymbolicModel.Mappings.Base.html#1169" class="Module">ℝ</a> <a id="1171" class="Symbol">(</a><a id="1172" href="SymbolicModel.Mappings.Base.html#1172" class="Bound">𝕣</a> <a id="1174" class="Symbol">:</a> <a id="1176" href="SymbolicModel.Mappings.Base.html#1144" class="Function">ℝ</a> <a id="1178" href="SymbolicModel.Run.Base.html#435" class="Generalizable">R</a><a id="1179" class="Symbol">)</a> <a id="1181" class="Keyword">where</a>
  <a id="1189" class="Keyword">open</a> <a id="1194" href="SymbolicModel.Mappings.Base.html#956" class="Module">𝕎</a> <a id="1196" href="SymbolicModel.Mappings.Base.html#1172" class="Bound">𝕣</a> <a id="1198" class="Keyword">public</a> <a id="1205" class="Keyword">renaming</a> <a id="1214" class="Symbol">(</a><a id="1215" href="SymbolicModel.Mappings.Base.html#1075" class="Field">txout</a> <a id="1221" class="Symbol">to</a> <a id="1224" class="Field">txout′</a><a id="1230" class="Symbol">;</a> <a id="1232" href="SymbolicModel.Mappings.Base.html#1099" class="Field">sechash</a> <a id="1240" class="Symbol">to</a> <a id="1243" class="Field">sechash′</a><a id="1251" class="Symbol">;</a> <a id="1253" href="SymbolicModel.Mappings.Base.html#1123" class="Field">κ</a> <a id="1255" class="Symbol">to</a> <a id="1258" class="Field">κ′</a><a id="1260" class="Symbol">)</a>

<a id="1263" class="Keyword">instance</a>
  <a id="ℝ∙Cfg"></a><a id="1274" href="SymbolicModel.Mappings.Base.html#1274" class="Function">ℝ∙Cfg</a> <a id="1280" class="Symbol">:</a> <a id="1282" class="Symbol">(</a><a id="1283" href="SymbolicModel.Mappings.Base.html#1144" class="Function">ℝ</a> <a id="1285" href="SymbolicModel.Run.Base.html#435" class="Generalizable">R</a><a id="1286" class="Symbol">)</a> <a id="1288" href="SymbolicModel.Accessors.html#643" class="Function Operator">∙Cfg</a>
  <a id="1295" href="SymbolicModel.Mappings.Base.html#1274" class="Function">ℝ∙Cfg</a> <a id="1301" class="Symbol">{</a><a id="1302" class="Argument">R</a> <a id="1304" class="Symbol">=</a> <a id="1306" href="SymbolicModel.Mappings.Base.html#1306" class="Bound">R</a><a id="1307" class="Symbol">}</a> <a id="1309" class="Symbol">=</a> <a id="1311" href="SymbolicModel.Accessors.html#655" class="Function Operator">∙cfg=</a> <a id="1317" class="Symbol">(</a><a id="1318" href="Function.Base.html#636" class="Function">const</a> <a id="1324" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="1326" href="SymbolicModel.Mappings.Base.html#1306" class="Bound">R</a> <a id="1328" href="SymbolicModel.Accessors.html#649" class="Function Operator">∙cfg</a><a id="1332" class="Symbol">)</a>

<a id="ℾᵗ"></a><a id="1335" href="SymbolicModel.Mappings.Base.html#1335" class="Function">ℾᵗ</a> <a id="1338" class="Symbol">=</a> <a id="1340" href="Prelude.Init.html#11891" class="Function">Pred₀</a> <a id="1346" href="BitML.Semantics.Configurations.Types.html#2096" class="Function">Cfgᵗ</a> <a id="1351" href="Function.Base.html#4562" class="Function Operator">∋</a> <a id="1353" href="SymbolicModel.Mappings.Base.html#956" class="Record">𝕎</a>
<a id="1355" class="Keyword">module</a> <a id="ℾᵗ"></a><a id="1362" href="SymbolicModel.Mappings.Base.html#1362" class="Module">ℾᵗ</a> <a id="1365" class="Symbol">(</a><a id="1366" href="SymbolicModel.Mappings.Base.html#1366" class="Bound">ℽ</a> <a id="1368" class="Symbol">:</a> <a id="1370" href="SymbolicModel.Mappings.Base.html#1335" class="Function">ℾᵗ</a> <a id="1373" href="BitML.Semantics.Configurations.Types.html#1919" class="Generalizable">Γₜ</a><a id="1375" class="Symbol">)</a> <a id="1377" class="Keyword">where</a>
  <a id="1385" class="Keyword">open</a> <a id="1390" href="SymbolicModel.Mappings.Base.html#956" class="Module">𝕎</a> <a id="1392" href="SymbolicModel.Mappings.Base.html#1366" class="Bound">ℽ</a> <a id="1394" class="Keyword">public</a> <a id="1401" class="Keyword">renaming</a> <a id="1410" class="Symbol">(</a><a id="1411" href="SymbolicModel.Mappings.Base.html#1075" class="Field">txout</a> <a id="1417" class="Symbol">to</a> <a id="1420" class="Field">txoutΓ</a><a id="1426" class="Symbol">;</a> <a id="1428" href="SymbolicModel.Mappings.Base.html#1099" class="Field">sechash</a> <a id="1436" class="Symbol">to</a> <a id="1439" class="Field">sechashΓ</a><a id="1447" class="Symbol">;</a> <a id="1449" href="SymbolicModel.Mappings.Base.html#1123" class="Field">κ</a> <a id="1451" class="Symbol">to</a> <a id="1454" class="Field">κΓ</a><a id="1456" class="Symbol">)</a>

<a id="ℾ"></a><a id="1459" href="SymbolicModel.Mappings.Base.html#1459" class="Function">ℾ</a> <a id="1461" class="Symbol">=</a> <a id="1463" href="Prelude.Init.html#11891" class="Function">Pred₀</a> <a id="1469" href="BitML.Semantics.Configurations.Types.html#2076" class="Function">Cfg</a> <a id="1473" href="Function.Base.html#4562" class="Function Operator">∋</a> <a id="1475" href="SymbolicModel.Mappings.Base.html#956" class="Record">𝕎</a>
<a id="1477" class="Keyword">module</a> <a id="ℾ"></a><a id="1484" href="SymbolicModel.Mappings.Base.html#1484" class="Module">ℾ</a> <a id="1486" class="Symbol">(</a><a id="1487" href="SymbolicModel.Mappings.Base.html#1487" class="Bound">ℽ</a> <a id="1489" class="Symbol">:</a> <a id="1491" href="SymbolicModel.Mappings.Base.html#1459" class="Function">ℾ</a> <a id="1493" href="BitML.Semantics.Configurations.Types.html#1520" class="Generalizable">Γ</a><a id="1494" class="Symbol">)</a> <a id="1496" class="Keyword">where</a>
  <a id="1504" class="Keyword">open</a> <a id="1509" href="SymbolicModel.Mappings.Base.html#956" class="Module">𝕎</a> <a id="1511" href="SymbolicModel.Mappings.Base.html#1487" class="Bound">ℽ</a> <a id="1513" class="Keyword">public</a> <a id="1520" class="Keyword">renaming</a> <a id="1529" class="Symbol">(</a><a id="1530" href="SymbolicModel.Mappings.Base.html#1075" class="Field">txout</a> <a id="1536" class="Symbol">to</a> <a id="1539" class="Field">txoutΓ</a><a id="1545" class="Symbol">;</a> <a id="1547" href="SymbolicModel.Mappings.Base.html#1099" class="Field">sechash</a> <a id="1555" class="Symbol">to</a> <a id="1558" class="Field">sechashΓ</a><a id="1566" class="Symbol">;</a> <a id="1568" href="SymbolicModel.Mappings.Base.html#1123" class="Field">κ</a> <a id="1570" class="Symbol">to</a> <a id="1573" class="Field">κΓ</a><a id="1575" class="Symbol">)</a>

<a id="𝔾"></a><a id="1578" href="SymbolicModel.Mappings.Base.html#1578" class="Function">𝔾</a> <a id="1580" class="Symbol">:</a> <a id="1582" href="Prelude.Init.html#11891" class="Function">Pred₀</a> <a id="1588" href="BitML.Contracts.Types.html#2612" class="Function">Ad</a>
<a id="1591" href="SymbolicModel.Mappings.Base.html#1578" class="Function">𝔾</a> <a id="1593" href="SymbolicModel.Mappings.Base.html#1593" class="Bound">ad</a> <a id="1596" class="Symbol">=</a> <a id="1598" href="Prelude.Validity.html#302" class="Field">Valid</a> <a id="1604" href="SymbolicModel.Mappings.Base.html#1593" class="Bound">ad</a> <a id="1607" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1609" href="SymbolicModel.Mappings.Base.html#538" class="Function">Txout</a> <a id="1615" class="Symbol">(</a><a id="1616" href="SymbolicModel.Mappings.Base.html#1593" class="Bound">ad</a> <a id="1619" class="Symbol">.</a><a id="1620" href="BitML.Contracts.Types.html#2457" class="Field">G</a><a id="1621" class="Symbol">)</a> <a id="1623" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1625" href="SymbolicModel.Mappings.Base.html#602" class="Function">Sechash</a> <a id="1633" class="Symbol">(</a><a id="1634" href="SymbolicModel.Mappings.Base.html#1593" class="Bound">ad</a> <a id="1637" class="Symbol">.</a><a id="1638" href="BitML.Contracts.Types.html#2457" class="Field">G</a><a id="1639" class="Symbol">)</a> <a id="1641" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1643" href="SymbolicModel.Mappings.Base.html#722" class="Function">𝕂²′</a> <a id="1647" href="SymbolicModel.Mappings.Base.html#1593" class="Bound">ad</a>
</pre></body></html>