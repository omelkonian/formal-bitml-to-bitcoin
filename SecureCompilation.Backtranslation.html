<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>SecureCompilation.Backtranslation</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/formal-bitml-to-bitcoin/tree/master/SecureCompilation/Backtranslation.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Comment">---------------------------------------------------------</a>
<a id="59" class="Comment">-- Translating symbolic strategies to computational ones.</a>
<a id="117" class="Comment">---------------------------------------------------------</a>
<a id="175" class="Keyword">open</a> <a id="180" class="Keyword">import</a> <a id="187" href="Prelude.Init.html" class="Module">Prelude.Init</a>
<a id="200" class="Keyword">open</a> <a id="205" class="Keyword">import</a> <a id="212" href="Prelude.Membership.html" class="Module">Prelude.Membership</a>
<a id="231" class="Keyword">open</a> <a id="236" class="Keyword">import</a> <a id="243" href="Prelude.Validity.html" class="Module">Prelude.Validity</a>

<a id="261" class="Keyword">open</a> <a id="266" class="Keyword">import</a> <a id="273" href="SecureCompilation.ModuleParameters.html" class="Module">SecureCompilation.ModuleParameters</a> <a id="308" class="Keyword">using</a> <a id="314" class="Symbol">(</a><a id="315" href="SecureCompilation.ModuleParameters.html#209" class="Record">⋯</a><a id="316" class="Symbol">)</a>

<a id="319" class="Keyword">module</a> <a id="326" href="SecureCompilation.Backtranslation.html" class="Module">SecureCompilation.Backtranslation</a> <a id="360" class="Symbol">(</a><a id="361" href="SecureCompilation.Backtranslation.html#361" class="Bound">⋯</a> <a id="363" class="Symbol">:</a> <a id="365" href="SecureCompilation.ModuleParameters.html#209" class="Record">⋯</a><a id="366" class="Symbol">)</a> <a id="368" class="Symbol">(</a><a id="369" class="Keyword">let</a> <a id="373" class="Keyword">open</a> <a id="378" href="SecureCompilation.ModuleParameters.html#209" class="Module">⋯</a> <a id="380" href="SecureCompilation.Backtranslation.html#361" class="Bound">⋯</a><a id="381" class="Symbol">)</a> <a id="383" class="Keyword">where</a>

<a id="390" class="Keyword">open</a> <a id="395" class="Keyword">import</a> <a id="402" href="SymbolicModel.html" class="Module">SymbolicModel</a> <a id="416" href="SecureCompilation.ModuleParameters.html#282" class="Field">⋯′</a> as <a id="S"></a><a id="422" href="SecureCompilation.Backtranslation.html#422" class="Module">S</a>
<a id="424" class="Keyword">open</a> <a id="429" class="Keyword">import</a> <a id="436" href="SymbolicModel.Stripping.html" class="Module">SymbolicModel.Stripping</a> <a id="460" href="SecureCompilation.ModuleParameters.html#282" class="Field">⋯′</a>
<a id="463" class="Keyword">open</a> <a id="468" class="Keyword">import</a> <a id="475" href="ComputationalModel.html" class="Module">ComputationalModel</a> <a id="494" href="SecureCompilation.ModuleParameters.html#282" class="Field">⋯′</a> <a id="497" href="SecureCompilation.ModuleParameters.html#450" class="Field">finPart</a> <a id="505" href="SecureCompilation.ModuleParameters.html#487" class="Field">keypairs</a> as <a id="C"></a><a id="517" href="SecureCompilation.Backtranslation.html#517" class="Module">C</a>
<a id="519" class="Keyword">open</a> <a id="524" class="Keyword">import</a> <a id="531" href="Coherence.html" class="Module">Coherence</a> <a id="541" href="SecureCompilation.Backtranslation.html#361" class="Bound">⋯</a>
<a id="543" class="Keyword">open</a> <a id="548" class="Keyword">import</a> <a id="555" href="SecureCompilation.Parsing.html" class="Module">SecureCompilation.Parsing</a> <a id="581" href="SecureCompilation.Backtranslation.html#361" class="Bound">⋯</a>
  <a id="585" class="Keyword">using</a> <a id="591" class="Symbol">(</a><a id="592" href="SecureCompilation.Parsing.Completeness.html#770" class="Function">parseRun</a><a id="600" class="Symbol">)</a>

<a id="603" class="Keyword">module</a> <a id="610" href="SecureCompilation.Backtranslation.html#610" class="Module">_</a> <a id="612" class="Symbol">{</a><a id="613" href="SecureCompilation.Backtranslation.html#613" class="Bound">A</a><a id="614" class="Symbol">}</a> <a id="616" class="Symbol">(</a><a id="617" href="SecureCompilation.Backtranslation.html#617" class="Bound">A∈</a> <a id="620" class="Symbol">:</a> <a id="622" href="SecureCompilation.Backtranslation.html#613" class="Bound">A</a> <a id="624" href="Prelude.Membership.html#428" class="Field Operator">∈</a> <a id="626" href="BitML.BasicTypes.html#785" class="Function">Hon</a><a id="629" class="Symbol">)</a> <a id="631" class="Keyword">where</a>

  <a id="640" class="Keyword">open</a> <a id="645" class="Keyword">import</a> <a id="652" href="SecureCompilation.Backtranslation.Unparsing.html" class="Module">SecureCompilation.Backtranslation.Unparsing</a> <a id="696" href="SecureCompilation.Backtranslation.html#361" class="Bound">⋯</a> <a id="698" href="SecureCompilation.Backtranslation.html#613" class="Bound">A</a>
    <a id="704" class="Keyword">using</a> <a id="710" class="Symbol">(</a><a id="711" href="SecureCompilation.Backtranslation.Unparsing.html#12249" class="Function">unparseMoves</a><a id="723" class="Symbol">)</a>

  <a id="728" href="SecureCompilation.Backtranslation.html#728" class="Function">ℵ</a> <a id="730" class="Symbol">:</a> <a id="732" href="Prelude.Validity.html#765" class="Function">𝕍</a> <a id="734" class="Symbol">(</a><a id="735" href="SymbolicModel.Strategy.html#569" class="Record">S.ParticipantStrategy</a> <a id="757" href="SecureCompilation.Backtranslation.html#613" class="Bound">A</a><a id="758" class="Symbol">)</a> <a id="760" class="Symbol">→</a> <a id="762" href="Prelude.Validity.html#765" class="Function">𝕍</a> <a id="764" class="Symbol">(</a><a id="765" href="ComputationalModel.Strategy.html#1258" class="Record">C.ParticipantStrategy</a> <a id="787" href="SecureCompilation.Backtranslation.html#613" class="Bound">A</a><a id="788" class="Symbol">)</a>
  <a id="792" href="SecureCompilation.Backtranslation.html#728" class="Function">ℵ</a> <a id="794" class="Symbol">(</a><a id="795" href="SecureCompilation.Backtranslation.html#795" class="Bound">Σˢ</a> <a id="798" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="800" href="SecureCompilation.Backtranslation.html#800" class="Bound">𝕧ˢ</a><a id="802" class="Symbol">@(_</a> <a id="806" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="808" href="SecureCompilation.Backtranslation.html#808" class="Bound">rule-abiding</a> <a id="821" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="823" class="Symbol">_))</a> <a id="827" class="Symbol">=</a> <a id="829" href="SecureCompilation.Backtranslation.html#1527" class="Function">Σᶜ</a> <a id="832" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="834" href="SecureCompilation.Backtranslation.html#1600" class="Postulate">𝕧ᶜ</a>
    <a id="841" class="Keyword">where</a>
      <a id="853" href="SecureCompilation.Backtranslation.html#853" class="Function">go</a> <a id="856" class="Symbol">:</a> <a id="858" href="ComputationalModel.Run.html#4253" class="Datatype">CRun</a> <a id="863" class="Symbol">→</a> <a id="865" href="ComputationalModel.Run.html#1329" class="Function">C.Labels</a>
      <a id="880" href="SecureCompilation.Backtranslation.html#853" class="Function">go</a> <a id="883" href="SecureCompilation.Backtranslation.html#883" class="Bound">Rᶜ</a> <a id="886" class="Symbol">=</a>
        <a id="896" class="Keyword">let</a>
          <a id="910" href="SecureCompilation.Backtranslation.html#910" class="Bound">Rᶜ∗</a> <a id="914" class="Symbol">:</a> <a id="916" href="ComputationalModel.Run.html#4253" class="Datatype">CRun</a>
          <a id="931" href="SecureCompilation.Backtranslation.html#910" class="Bound">Rᶜ∗</a> <a id="935" class="Symbol">=</a> <a id="937" href="SecureCompilation.Backtranslation.html#883" class="Bound">Rᶜ</a> <a id="940" class="Comment">-- ∗</a>

          <a id="956" class="Comment">-- (1) parse run Rᶜ∗ to obtain a corresponding symbolic run Rˢ∗</a>
          <a id="1030" href="SecureCompilation.Backtranslation.html#1030" class="Bound">Rˢ</a> <a id="1033" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1035" href="SecureCompilation.Backtranslation.html#1035" class="Bound">Rˢ~Rᶜ</a> <a id="1041" class="Symbol">=</a> <a id="1043" href="SecureCompilation.Parsing.Completeness.html#770" class="Function">parseRun</a> <a id="1052" href="SecureCompilation.Backtranslation.html#910" class="Bound">Rᶜ∗</a>
          <a id="1066" href="SecureCompilation.Backtranslation.html#1066" class="Bound">Rˢ∗</a> <a id="1070" class="Symbol">=</a> <a id="1072" href="SecureCompilation.Backtranslation.html#1030" class="Bound">Rˢ</a> <a id="1075" href="SymbolicModel.Stripping.html#700" class="Field Operator">∗</a>

          <a id="1088" class="Comment">-- (3) evaluate Λˢ = Σˢ(Rˢ∗)</a>
          <a id="1127" href="SecureCompilation.Backtranslation.html#1127" class="Bound">Λˢ</a> <a id="1130" class="Symbol">:</a> <a id="1132" href="BitML.Semantics.Label.html#1619" class="Function">S.Labels</a>
          <a id="1151" href="SecureCompilation.Backtranslation.html#1127" class="Bound">Λˢ</a> <a id="1154" class="Symbol">=</a> <a id="1156" href="SecureCompilation.Backtranslation.html#795" class="Bound">Σˢ</a> <a id="1159" class="Symbol">.</a><a id="1160" href="SymbolicModel.Strategy.html#628" class="Field">S.Σ</a> <a id="1164" href="SecureCompilation.Backtranslation.html#1066" class="Bound">Rˢ∗</a>

          <a id="1179" href="SecureCompilation.Backtranslation.html#1179" class="Bound">Λˢ′</a> <a id="1183" class="Symbol">:</a> <a id="1185" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="1190" class="Symbol">(</a><a id="1191" href="Data.Product.html#1378" class="Function">∃</a> <a id="1193" class="Symbol">λ</a> <a id="1195" href="SecureCompilation.Backtranslation.html#1195" class="Bound">α</a> <a id="1197" class="Symbol">→</a> <a id="1199" href="Data.Product.html#1378" class="Function">∃</a> <a id="1201" class="Symbol">(</a><a id="1202" href="SecureCompilation.Backtranslation.html#1030" class="Bound">Rˢ</a> <a id="1205" href="SymbolicModel.Run.Base.html#1301" class="Function Operator">——[</a> <a id="1209" href="SecureCompilation.Backtranslation.html#1195" class="Bound">α</a> <a id="1211" href="SymbolicModel.Run.Base.html#1301" class="Function Operator">]→_</a><a id="1214" class="Symbol">))</a>
          <a id="1227" href="SecureCompilation.Backtranslation.html#1179" class="Bound">Λˢ′</a> <a id="1231" class="Symbol">=</a> <a id="1233" href="Prelude.Membership.html#1363" class="Field">mapWith∈</a> <a id="1242" href="SecureCompilation.Backtranslation.html#1127" class="Bound">Λˢ</a> <a id="1245" class="Symbol">(</a><a id="1246" href="Data.Product.html#2256" class="Function Operator">-,_</a> <a id="1250" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="1252" href="SecureCompilation.Backtranslation.html#808" class="Bound">rule-abiding</a> <a id="1265" class="Symbol">{</a><a id="1266" class="Argument">R</a> <a id="1268" class="Symbol">=</a> <a id="1270" href="SecureCompilation.Backtranslation.html#1030" class="Bound">Rˢ</a><a id="1272" class="Symbol">})</a>

          <a id="1286" class="Comment">-- (4) convert the symbolic actions Λˢ into computational actions Λᶜ</a>
          <a id="1365" class="Comment">-- when Λˢ contains A:{G}C,Δ or A:{G}C,x follow stipulation protocol</a>
          <a id="1444" href="SecureCompilation.Backtranslation.html#1444" class="Bound">Λᶜ</a> <a id="1447" class="Symbol">:</a> <a id="1449" href="ComputationalModel.Run.html#1329" class="Function">C.Labels</a>
          <a id="1468" href="SecureCompilation.Backtranslation.html#1444" class="Bound">Λᶜ</a> <a id="1471" class="Symbol">=</a> <a id="1473" href="SecureCompilation.Backtranslation.Unparsing.html#12249" class="Function">unparseMoves</a> <a id="1486" href="SecureCompilation.Backtranslation.html#1035" class="Bound">Rˢ~Rᶜ</a> <a id="1492" href="SecureCompilation.Backtranslation.html#1179" class="Bound">Λˢ′</a>
        <a id="1504" class="Keyword">in</a>
          <a id="1517" href="SecureCompilation.Backtranslation.html#1444" class="Bound">Λᶜ</a>

      <a id="1527" href="SecureCompilation.Backtranslation.html#1527" class="Function">Σᶜ</a> <a id="1530" class="Symbol">:</a> <a id="1532" href="ComputationalModel.Strategy.html#1258" class="Record">C.ParticipantStrategy</a> <a id="1554" href="SecureCompilation.Backtranslation.html#613" class="Bound">A</a>
      <a id="1562" href="SecureCompilation.Backtranslation.html#1527" class="Function">Σᶜ</a> <a id="1565" class="Symbol">=</a> <a id="1567" class="Keyword">record</a> <a id="1574" class="Symbol">{</a><a id="1575" href="ComputationalModel.Strategy.html#1317" class="Field">Σ</a> <a id="1577" class="Symbol">=</a> <a id="1579" href="SecureCompilation.Backtranslation.html#853" class="Function">go</a><a id="1581" class="Symbol">}</a>

      <a id="1590" class="Keyword">postulate</a> <a id="1600" href="SecureCompilation.Backtranslation.html#1600" class="Postulate">𝕧ᶜ</a> <a id="1603" class="Symbol">:</a> <a id="1605" href="Prelude.Validity.html#343" class="Field">Valid</a> <a id="1611" href="SecureCompilation.Backtranslation.html#1527" class="Function">Σᶜ</a>
</pre></body></html>