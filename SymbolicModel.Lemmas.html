<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>SymbolicModel.Lemmas</title><link rel="stylesheet" href="css/Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Lemmas related to BitML&#39;s symbolic model.</a>
<a id="119" class="Comment">------------------------------------------------------------------------</a>
<a id="192" class="Symbol">{-#</a> <a id="196" class="Keyword">OPTIONS</a> <a id="204" class="Pragma">--allow-unsolved-metas</a> <a id="227" class="Symbol">#-}</a>

<a id="232" class="Keyword">open</a> <a id="237" class="Keyword">import</a> <a id="244" href="Data.List.html" class="Module">Data.List</a> <a id="254" class="Keyword">using</a> <a id="260" class="Symbol">(</a><a id="261" href="Data.List.Base.html#4297" class="Function">length</a><a id="267" class="Symbol">;</a> <a id="269" href="Data.List.Base.html#1497" class="Function">map</a><a id="272" class="Symbol">;</a> <a id="274" href="Data.List.Base.html#3883" class="Function">concatMap</a><a id="283" class="Symbol">;</a> <a id="285" href="Data.List.Base.html#1763" class="Function Operator">_++_</a><a id="289" class="Symbol">;</a> <a id="291" href="Data.List.Base.html#3243" class="Function">zip</a><a id="294" class="Symbol">)</a>
<a id="296" class="Keyword">open</a> <a id="301" class="Keyword">import</a> <a id="308" href="Data.List.Membership.Propositional.html" class="Module">Data.List.Membership.Propositional</a> <a id="343" class="Keyword">using</a> <a id="349" class="Symbol">(</a><a id="350" href="Data.List.Membership.Setoid.html#882" class="Function Operator">_∈_</a><a id="353" class="Symbol">;</a> <a id="355" href="Data.List.Membership.Setoid.html#931" class="Function Operator">_∉_</a><a id="358" class="Symbol">;</a> <a id="360" href="Data.List.Membership.Setoid.html#1123" class="Function">mapWith∈</a><a id="368" class="Symbol">)</a>

<a id="371" class="Keyword">open</a> <a id="376" class="Keyword">import</a> <a id="383" href="Prelude.Init.html" class="Module">Prelude.Init</a>
<a id="396" class="Keyword">open</a> <a id="401" class="Keyword">import</a> <a id="408" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>
<a id="422" class="Keyword">open</a> <a id="427" class="Keyword">import</a> <a id="434" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>
<a id="448" class="Keyword">open</a> <a id="453" class="Keyword">import</a> <a id="460" href="Prelude.Set%2527.html" class="Module">Prelude.Set&#39;</a>

<a id="474" class="Keyword">open</a> <a id="479" class="Keyword">import</a> <a id="486" href="BitML.BasicTypes.html" class="Module">BitML.BasicTypes</a>

<a id="504" class="Keyword">module</a> <a id="511" href="SymbolicModel.Lemmas.html" class="Module">SymbolicModel.Lemmas</a>
  <a id="534" class="Symbol">(</a><a id="535" href="SymbolicModel.Lemmas.html#535" class="Bound">Participant</a> <a id="547" class="Symbol">:</a> <a id="549" class="PrimitiveType">Set</a><a id="552" class="Symbol">)</a>
  <a id="556" class="Symbol">{{</a><a id="558" href="SymbolicModel.Lemmas.html#558" class="Bound">_</a> <a id="560" class="Symbol">:</a> <a id="562" href="Prelude.DecEq.html#553" class="Record">DecEq</a> <a id="568" href="SymbolicModel.Lemmas.html#535" class="Bound">Participant</a><a id="579" class="Symbol">}}</a>
  <a id="584" class="Symbol">(</a><a id="585" href="SymbolicModel.Lemmas.html#585" class="Bound">Honest</a> <a id="592" class="Symbol">:</a> <a id="594" href="Data.List.NonEmpty.html#1318" class="Record">List⁺</a> <a id="600" href="SymbolicModel.Lemmas.html#535" class="Bound">Participant</a><a id="611" class="Symbol">)</a>
  <a id="615" class="Keyword">where</a>

<a id="622" class="Keyword">open</a> <a id="627" class="Keyword">import</a> <a id="634" href="SymbolicModel.Strategy.html" class="Module">SymbolicModel.Strategy</a> <a id="657" href="SymbolicModel.Lemmas.html#535" class="Bound">Participant</a> <a id="669" href="SymbolicModel.Lemmas.html#585" class="Bound">Honest</a> <a id="676" class="Symbol">as</a> <a id="SM"></a><a id="679" href="SymbolicModel.Lemmas.html#679" class="Module">SM</a>

<a id="683" class="Comment">----------------------------------------</a>
<a id="724" class="Comment">-- Lemma 3</a>

<a id="736" class="Keyword">module</a> <a id="743" href="SymbolicModel.Lemmas.html#743" class="Module">_</a> <a id="745" class="Symbol">(</a><a id="746" href="SymbolicModel.Lemmas.html#746" class="Bound">α≢₁</a> <a id="750" class="Symbol">:</a> <a id="752" class="Symbol">∀</a> <a id="754" href="SymbolicModel.Lemmas.html#754" class="Bound">A</a> <a id="756" href="SymbolicModel.Lemmas.html#756" class="Bound">s</a>      <a id="763" class="Symbol">→</a> <a id="765" href="BitML.Semantics.Label.html#2206" class="Generalizable">α</a> <a id="767" href="Relation.Binary.PropositionalEquality.Core.html#840" class="Function Operator">≢</a> <a id="769" href="BitML.Semantics.Label.html#1681" class="InductiveConstructor Operator">auth-rev[</a> <a id="779" href="SymbolicModel.Lemmas.html#754" class="Bound">A</a> <a id="781" href="BitML.Semantics.Label.html#1681" class="InductiveConstructor Operator">,</a> <a id="783" href="SymbolicModel.Lemmas.html#756" class="Bound">s</a> <a id="785" href="BitML.Semantics.Label.html#1681" class="InductiveConstructor Operator">]</a><a id="786" class="Symbol">)</a>
         <a id="797" class="Symbol">(</a><a id="798" href="SymbolicModel.Lemmas.html#798" class="Bound">α≢₂</a> <a id="802" class="Symbol">:</a> <a id="804" class="Symbol">∀</a> <a id="806" href="SymbolicModel.Lemmas.html#806" class="Bound">A</a> <a id="808" href="SymbolicModel.Lemmas.html#808" class="Bound">⟨G⟩C</a> <a id="813" href="SymbolicModel.Lemmas.html#813" class="Bound">Δ</a> <a id="815" class="Symbol">→</a> <a id="817" href="BitML.Semantics.Label.html#2206" class="Generalizable">α</a> <a id="819" href="Relation.Binary.PropositionalEquality.Core.html#840" class="Function Operator">≢</a> <a id="821" href="BitML.Semantics.Label.html#1351" class="InductiveConstructor Operator">auth-commit[</a> <a id="834" href="SymbolicModel.Lemmas.html#806" class="Bound">A</a> <a id="836" href="BitML.Semantics.Label.html#1351" class="InductiveConstructor Operator">,</a> <a id="838" href="SymbolicModel.Lemmas.html#808" class="Bound">⟨G⟩C</a> <a id="843" href="BitML.Semantics.Label.html#1351" class="InductiveConstructor Operator">,</a> <a id="845" href="SymbolicModel.Lemmas.html#813" class="Bound">Δ</a> <a id="847" href="BitML.Semantics.Label.html#1351" class="InductiveConstructor Operator">]</a><a id="848" class="Symbol">)</a> <a id="850" class="Keyword">where</a>

  <a id="859" href="SymbolicModel.Lemmas.html#859" class="Function">strip-preserves-semantics</a> <a id="885" class="Symbol">:</a>
      <a id="893" class="Symbol">(</a> <a id="895" class="Symbol">∀</a> <a id="897" href="SymbolicModel.Lemmas.html#897" class="Bound">T′</a> <a id="900" class="Symbol">→</a> <a id="902" href="SymbolicModel.Strategy.html#1290" class="Generalizable">R</a>   <a id="906" href="SymbolicModel.Strategy.html#2484" class="Function Operator">——→[</a> <a id="911" href="SymbolicModel.Lemmas.html#765" class="Bound">α</a> <a id="913" href="SymbolicModel.Strategy.html#2484" class="Function Operator">]</a> <a id="915" href="SymbolicModel.Lemmas.html#897" class="Bound">T′</a>
               <a id="933" class="Comment">--------------------</a>
             <a id="967" class="Symbol">→</a> <a id="969" href="SymbolicModel.Strategy.html#1290" class="Generalizable">R</a> <a id="971" href="SymbolicModel.Strategy.html#1999" class="Field Operator">∗</a> <a id="973" href="SymbolicModel.Strategy.html#2484" class="Function Operator">——→[</a> <a id="978" href="SymbolicModel.Lemmas.html#765" class="Bound">α</a> <a id="980" href="SymbolicModel.Strategy.html#2484" class="Function Operator">]</a> <a id="982" href="SymbolicModel.Lemmas.html#897" class="Bound">T′</a> <a id="985" href="SymbolicModel.Strategy.html#1999" class="Field Operator">∗</a> <a id="987" class="Symbol">)</a>

    <a id="994" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="996" class="Symbol">(</a> <a id="998" class="Symbol">∀</a> <a id="1000" href="SymbolicModel.Lemmas.html#1000" class="Bound">T′</a> <a id="1003" class="Symbol">→</a> <a id="1005" href="SymbolicModel.Strategy.html#1290" class="Generalizable">R</a> <a id="1007" href="SymbolicModel.Strategy.html#1999" class="Field Operator">∗</a> <a id="1009" href="SymbolicModel.Strategy.html#2484" class="Function Operator">——→[</a> <a id="1014" href="SymbolicModel.Lemmas.html#765" class="Bound">α</a> <a id="1016" href="SymbolicModel.Strategy.html#2484" class="Function Operator">]</a> <a id="1018" href="SymbolicModel.Lemmas.html#1000" class="Bound">T′</a>
               <a id="1036" class="Comment">--------------------------</a>
             <a id="1076" class="Symbol">→</a> <a id="1078" href="Data.Product.html#1788" class="Function">∃[</a> <a id="1081" href="SymbolicModel.Lemmas.html#1081" class="Bound">T″</a> <a id="1084" href="Data.Product.html#1788" class="Function">]</a> <a id="1086" class="Symbol">(</a> <a id="1088" class="Symbol">(</a><a id="1089" href="SymbolicModel.Strategy.html#1290" class="Generalizable">R</a> <a id="1091" href="SymbolicModel.Strategy.html#2484" class="Function Operator">——→[</a> <a id="1096" href="SymbolicModel.Lemmas.html#765" class="Bound">α</a> <a id="1098" href="SymbolicModel.Strategy.html#2484" class="Function Operator">]</a> <a id="1100" href="SymbolicModel.Lemmas.html#1081" class="Bound">T″</a><a id="1102" class="Symbol">)</a>
                       <a id="1127" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1129" href="SymbolicModel.Lemmas.html#1000" class="Bound">T′</a> <a id="1132" href="SymbolicModel.Strategy.html#1999" class="Field Operator">∗</a> <a id="1134" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="1136" href="SymbolicModel.Lemmas.html#1081" class="Bound">T″</a> <a id="1139" href="SymbolicModel.Strategy.html#1999" class="Field Operator">∗</a> <a id="1141" class="Symbol">))</a>
  <a id="1146" href="SymbolicModel.Lemmas.html#859" class="Function">strip-preserves-semantics</a> <a id="1172" class="Symbol">=</a> <a id="1174" class="Symbol">{!!}</a>

<a id="1180" class="Comment">{-
  strip-preserves-semantics {R = R} = pr₁ , pr₂
    where
      strip-→ : Γ —→[ α ] Γ′
            ------------------------------------------------
          → Γ ∗ —→[ α ] Γ′ ∗
      strip-→ ([C-AuthRev] {s = s} {A = A} _)
        = ⊥-elim (α≢₁ A s refl)
      strip-→ ([C-AuthCommit] {A = A} {ci = ci} {pi = pi} {ad = ad} {secrets = secrets}  _ _)
        = ⊥-elim (α≢₂ A (ci , pi , ad) secrets refl)

      strip-→ [C-Withdraw]          = [C-Withdraw]
      strip-→ ([C-AuthControl] x)   = [C-AuthControl] x
      strip-→ [DEP-AuthJoin]        = [DEP-AuthJoin]
      strip-→ [DEP-Join]            = [DEP-Join]
      strip-→ [DEP-AuthDivide]      = [DEP-AuthDivide]
      strip-→ [DEP-Divide]          = [DEP-Divide]
      strip-→ [DEP-AuthDonate]      = [DEP-AuthDonate]
      strip-→ [DEP-Donate]          = [DEP-Donate]
      strip-→ [DEP-AuthDestroy]     = [DEP-AuthDestroy]
      strip-→ [DEP-Destroy]         = [DEP-Destroy]
      strip-→ ([C-Advertise] x x₁)  = [C-Advertise] x x₁

      strip-→ ([C-AuthInit] {dsˡ = dsˡ} {dsʳ = dsʳ} {ad = ad} {Γ = Γ} {p = refl} x x₁) =
        [C-AuthInit] {dsˡ = dsˡ} {dsʳ = dsʳ} {p = refl} x (strip-committedParticipants₂ {Γp = Γ} {ad = ad} x₁)

      strip-→ ([C-Init] {ad = ad} {Δ = Δ} x x₁ x₂) =
        [C-Init] x (strip-committedParticipants₂ {Γp = Δ} {ad = ad} x₁)
                   (strip-spentForStipulation₂ {ad = ad} {Δ = Δ} x₂)

      strip-→ ([C-Split] {vs = vs} {Γ = Γ} {cases = cases} refl refl)
        rewrite strip-cases {cs′ = casesToContracts cases} {Γ = Γ}
              = [C-Split] refl refl

      strip-→ ([C-PutRev] {Γ = Γ} {ds′ = ds′} {Δ = ss} pr x x₁ x₂)
        rewrite strip-ds {ds′ = ds′} {Γ = V.toList ss ∣∣ˢˢ Γ}
              | strip-ss {ss = V.toList ss} {Γ = Γ}
              = [C-PutRev] {Γ = Γ ∗} {ds′ = ds′} {Δ = ss} pr x x₁ x₂

      strip-→ ([C-Control] {contract = c} {i = i})
        rewrite strip-b {Γ = ⟨ c ⟩ᶜ} {ps = authDecorations (c ‼ i)} {i = 0F} {j = i}
              = [C-Control]

      strip-→ₜ : Γ      at t —→ₜ[ α ] Γ′      at t′
               → (Γ ∗) at t —→ₜ[ α ] (Γ′ ∗) at t′
      strip-→ₜ ([Action] Γ→) = [Action] (strip-→ Γ→)
      strip-→ₜ [Delay]       = [Delay]
      strip-→ₜ {t = t} {t′ = t′} ([Timeout] {Γ = Γ} {Γ′ = Γ′} ∀≤t c‼i→)
          = [Timeout] {Γ = Γ ∗} {Γ′ = Γ′ ∗} ∀≤t (strip-→ c‼i→)

      pr₁ : ∀ T′
        → R   ——→[ α ] T′
          -----------------
        → R ∗ ——→[ α ] T′ ∗ᵗ
      pr₁ T′ R→ rewrite strip-lastCfg {R}
                      = strip-→ₜ R→

      pr0 : ∀ (Γ₀ : Configuration Iᶜᶠ[ ads , cs , ds ])
        → Γ₀ —→[ α ] Γ′
        → Γ₀ ≡ Γ ∗
          ---------------------------------
        → ∃[ Γ″ ] ( (Γ —→[ α ] Γ″)
                  × Γ′ ∗ ≡ Γ″ ∗ )
      pr0 {Γ′ = Γ′} {Γ = Γ} Γ₀ Γ→ Γ₀≡
        with Γ→
      ... | _ = {!!}
      -- ... | [C-AuthRev] {s = s} {A = A} _
      --     = ⊥-elim (α≢₁ A s refl)
      -- ... | [C-AuthCommit] {A = A} {ci = ci} {pi = pi} {ad = ad} {secrets = secrets} _ _
      --     = ⊥-elim (α≢₂ A (ci , pi , ad) secrets refl)
      -- ... | [C-Withdraw] {v = v} {A = A} {Γ = γ∗}
      --     = let l = ⟨ A , v ⟩ᵈ
      --       in case destruct-γ∗ {Γ = Γ} {Γ₀ = Γ₀} {l = ⟨ [ withdraw A ] ⟩ᶜ} {γ∗ = γ∗}
      --                           {pr = refl &amp; refl &amp; refl &amp; refl &amp; refl &amp; refl}
      --                           Γ₀≡ refl
      --          of λ { (γ , refl , refl) →
      --                    (l ∣∣ γ ∶- refl &amp; refl &amp; refl &amp; refl &amp; refl &amp; refl)
      --                  , [C-Withdraw] {v = v} {A = A} {Γ = γ}
      --                  , strip-strip-rewrite {l = l} {γ = γ} {pr = refl &amp; refl &amp; refl &amp; refl &amp; refl &amp; refl} }
      -- ... | [C-AuthControl] {A = A} {Γ = γ∗} {ci = ci} {contract = c} {i = i} p
      --     = let l = ⟨ c  ⟩ᶜ ∣∣ A auth[ c ▷ᵇ i ]∶- refl &amp; refl &amp; refl &amp; refl &amp; refl &amp; refl
      --                       ∶- refl &amp; refl &amp; refl &amp; \\-same {[ ci , c ]} &amp; refl &amp; refl
      --           in case destruct-γ∗ {Γ = Γ} {Γ₀ = Γ₀} {l = ⟨ c ⟩ᶜ} {γ∗ = γ∗}
      --                               {pr = refl &amp; refl &amp; refl &amp; refl &amp; refl &amp; refl}
      --                               Γ₀≡ refl
      --              of λ { (γ , refl , refl) →
      --                        (l ∣∣ γ ∶- refl &amp; refl &amp; refl &amp; refl &amp; refl &amp; refl)
      --                      , [C-AuthControl] {A = A} {Γ = γ} {contract = c} {i = i} p
      --                      , strip-strip-rewrite {l = l} {γ = γ} {pr = refl &amp; refl &amp; refl &amp; refl &amp; refl &amp; refl} }

      pr1 : ∀ {Γ₀ : Configuration Iᶜᶠ[ ads , cs , ds ]}
        → Γ₀ at t —→ₜ[ α ] Γ′ at t′
        → Γ₀ ≡ Γ ∗
          ------------------------------------
        → ∃[ Γ″ ] ( (Γ at t —→ₜ[ α ] Γ″ at t′)
                  × (Γ′ ∗ ≡ Γ″ ∗) )
      pr1 {Γ′ = Γ′} {Γ = Γ} {Γ₀ = Γ₀} Γ→ₜ Γ₀≡ with Γ→ₜ
      ... | [Action] Γ→
          = case pr0 {Γ′ = Γ′} {Γ = Γ} Γ₀ Γ→ Γ₀≡
            of λ { (Γ″ , Γ→Γ″ , Γ≡) → Γ″ , [Action] Γ→Γ″ , Γ≡ }
      ... | [Delay] {δ = δ} = case Γ₀≡ of λ { refl → Γ , [Delay] {δ = δ} , strip-idempotent Γ }
      ... | [Timeout] {Γ = γ∗} {Γ′ = .Γ′} {contract = c} {i = i} ∀t Γ→
        with destruct-γ∗ {Γ = Γ} {Γ₀ = Γ₀} {l = ⟨ c ⟩ᶜ} {γ∗ = γ∗}
                         {pr = refl &amp; refl &amp; refl &amp; refl &amp; refl &amp; refl}
                         Γ₀≡ refl
      ... | γ , refl , refl
        with pr0 {Γ′ = Γ′}
                 {Γ = ⟨ [ c ‼ i ] ⟩ᶜ ∣∣ γ ∶- refl &amp; refl &amp; refl &amp; refl &amp; refl &amp; refl}
                 (⟨ [ c ‼ i ] ⟩ᶜ ∣∣ γ∗ ∶- refl &amp; refl &amp; refl &amp; refl &amp; refl &amp; refl)
                 Γ→ refl
      ... | Γ″ , Γ→Γ″ , Γ≡
          = Γ″ , [Timeout] {Γ = γ} {Γ′ = Γ″} {contract = c} {i = i} ∀t Γ→Γ″ , Γ≡

      pr₂ : ∀ T′
        → R ∗ ——→[ α ] T′
          --------------------------
        → ∃[ T″ ] ( (R ——→[ α ] T″)
                  × T′ ∗ᵗ ≡ T″ ∗ᵗ )
      pr₂ T′ R→
        with inspect (lastCfg R)
      ... | (cfi , tc) with≡ eq
        with inspect T′
      ... | (cfi′ , tc′) with≡ eq′
        with inspect tc
      ... | (Γ at t) with≡ eqt
        with inspect tc′
      ... | (Γ′ at t′) with≡ eqt′
        with (eq , eq′ , eqt , eqt′)
      ... | refl , refl , refl , refl
        with pr1 {t = t} {Γ′ = Γ′} {t′ = t′} {Γ = Γ} {Γ₀ = Γ ∗} (help {R = R} {T′ = T′} R→) refl
      ... | Γ″ , Γ→ , Γ≡ = (cfi′ , Γ″ at t′) , Γ→ , cong (λ g → (cfi′ , g at t′)) Γ≡
-}</a>

<a id="7409" class="Comment">----------------------------------------</a>
<a id="7450" class="Comment">-- Lemma 4</a>

<a id="7462" class="Keyword">module</a> <a id="7469" href="SymbolicModel.Lemmas.html#7469" class="Module">_</a> <a id="7471" class="Symbol">(</a><a id="7472" href="SymbolicModel.Lemmas.html#7472" class="Bound">Adv</a> <a id="7476" class="Symbol">:</a> <a id="7478" href="SymbolicModel.Lemmas.html#535" class="Bound">Participant</a><a id="7489" class="Symbol">)</a> <a id="7491" class="Symbol">(</a><a id="7492" href="SymbolicModel.Lemmas.html#7492" class="Bound">Adv∉</a> <a id="7497" class="Symbol">:</a> <a id="7499" href="SymbolicModel.Lemmas.html#7472" class="Bound">Adv</a> <a id="7503" href="Data.List.Membership.Setoid.html#931" class="Function Operator">∉</a> <a id="7505" href="BitML.Contracts.Types.html#482" class="Function">Hon</a><a id="7508" class="Symbol">)</a> <a id="7510" class="Keyword">where</a>
  <a id="7518" class="Keyword">open</a> <a id="7523" href="SymbolicModel.Strategy.html#3839" class="Module">SM.AdvM</a> <a id="7531" href="SymbolicModel.Lemmas.html#7472" class="Bound">Adv</a> <a id="7535" href="SymbolicModel.Lemmas.html#7492" class="Bound">Adv∉</a>

  <a id="7543" class="Keyword">variable</a>
    <a id="7556" href="SymbolicModel.Lemmas.html#7556" class="Generalizable">S†</a> <a id="7559" class="Symbol">:</a> <a id="7561" href="SymbolicModel.Strategy.html#3899" class="Record">AdversaryStrategy</a>
    <a id="7583" href="SymbolicModel.Lemmas.html#7583" class="Generalizable">S</a>  <a id="7586" class="Symbol">:</a> <a id="7588" href="SymbolicModel.Strategy.html#3585" class="Function">HonestStrategies</a>

  <a id="7608" href="SymbolicModel.Lemmas.html#7608" class="Function">adversarial-move-is-semantic</a> <a id="7637" class="Symbol">:</a>
    <a id="7643" href="Data.Product.html#1788" class="Function">∃[</a> <a id="7646" href="SymbolicModel.Lemmas.html#7646" class="Bound">T′</a> <a id="7649" href="Data.Product.html#1788" class="Function">]</a> <a id="7651" class="Symbol">(</a> <a id="7653" href="SymbolicModel.Strategy.html#1290" class="Generalizable">R</a> <a id="7655" href="SymbolicModel.Strategy.html#2484" class="Function Operator">——→[</a> <a id="7660" href="SymbolicModel.Strategy.html#5754" class="Function">runAdversary</a> <a id="7673" class="Symbol">(</a><a id="7674" href="SymbolicModel.Lemmas.html#7556" class="Generalizable">S†</a> <a id="7677" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7679" href="SymbolicModel.Lemmas.html#7583" class="Generalizable">S</a><a id="7680" class="Symbol">)</a> <a id="7682" href="SymbolicModel.Strategy.html#1290" class="Generalizable">R</a> <a id="7684" href="SymbolicModel.Strategy.html#2484" class="Function Operator">]</a> <a id="7686" href="SymbolicModel.Lemmas.html#7646" class="Bound">T′</a><a id="7688" class="Symbol">)</a>
  <a id="7692" href="SymbolicModel.Lemmas.html#7608" class="Function">adversarial-move-is-semantic</a> <a id="7721" class="Symbol">=</a> <a id="7723" class="Symbol">{!!}</a>

<a id="7729" class="Comment">{-
  valid-hon-move : ∀ {A} (A∈ : A ∈ Hon)
    → runAdversary (S† , S) R ∈ concatMap proj₂ (runHonestAll (R ∗) S)
    → runAdversary (S† , S) R ∈ strategy (S A∈) (R ∗)
  valid-hon-move = {!!}

  adversarial-move-is-semantic {R = R} {S† = S†} {S = S} =
    let
      moves = runHonestAll (R ∗) S
      (cases , v) = valid S† {R = R} {moves = moves}
    in case cases of
    λ { (inj₁ (A , A∈ , eq , α∈ ))
      → let (_ , R→ , _) = valid (S A∈)
        in R→ {R} {runAdversary (S† , S) R} (valid-hon-move {S† = S†} {S = S} {R = R} {A = A} A∈ α∈)
      ; c → {!!}
      }


-- T0D0 induction on list of honest strategies
-- T0D0 induction on the run itself
-}</a>
</pre></body></html>