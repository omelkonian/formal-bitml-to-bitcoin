<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>SecureCompilation.Compiler</title><link rel="stylesheet" href="css/Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">----------------------------------------------------------------------------</a>
<a id="78" class="Comment">-- Compiler from BitML to Bitcoin transactions (see BitML paper, Section 7).</a>
<a id="155" class="Comment">----------------------------------------------------------------------------</a>

<a id="233" class="Keyword">open</a> <a id="238" class="Keyword">import</a> <a id="245" href="Data.Fin.html" class="Module">Data.Fin</a> <a id="254" class="Symbol">as</a> <a id="257" class="Module">Fin</a> <a id="261" class="Keyword">using</a> <a id="267" class="Symbol">(</a><a id="268" href="Data.Fin.Base.html#2272" class="Function">raise</a><a id="273" class="Symbol">;</a> <a id="275" href="Data.Fin.Base.html#2858" class="Function">inject+</a><a id="282" class="Symbol">;</a> <a id="284" href="Data.Fin.Base.html#1192" class="Function">toℕ</a><a id="287" class="Symbol">)</a>
<a id="289" class="Keyword">open</a> <a id="294" class="Keyword">import</a> <a id="301" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="321" class="Keyword">using</a> <a id="327" class="Symbol">(</a><a id="328" href="Data.Nat.Properties.html#3725" class="Function">≤-refl</a><a id="334" class="Symbol">;</a> <a id="336" href="Data.Nat.Properties.html#8037" class="Function">&lt;-trans</a><a id="343" class="Symbol">;</a> <a id="345" href="Data.Nat.Properties.html#10043" class="Function">n&lt;1+n</a><a id="350" class="Symbol">)</a>
<a id="352" class="Keyword">open</a> <a id="357" class="Keyword">import</a> <a id="364" href="Data.List.Membership.Propositional.Properties.html" class="Module">Data.List.Membership.Propositional.Properties</a>
<a id="410" class="Keyword">open</a> <a id="415" class="Keyword">import</a> <a id="422" href="Data.List.Membership.Setoid.Properties.html" class="Module">Data.List.Membership.Setoid.Properties</a>         <a id="469" class="Keyword">using</a> <a id="475" class="Symbol">(</a><a id="476" href="Data.List.Membership.Setoid.Properties.html#4081" class="Function">length-mapWith∈</a><a id="491" class="Symbol">)</a>
<a id="493" class="Keyword">open</a> <a id="498" class="Keyword">import</a> <a id="505" href="Data.List.Relation.Unary.Any.html" class="Module">Data.List.Relation.Unary.Any</a>                   <a id="552" class="Keyword">using</a> <a id="558" class="Symbol">(</a><a id="559" href="Data.List.Relation.Unary.Any.html#1909" class="Function">index</a><a id="564" class="Symbol">)</a>
<a id="566" class="Keyword">open</a> <a id="571" class="Keyword">import</a> <a id="578" href="Data.List.Relation.Unary.All.html" class="Module">Data.List.Relation.Unary.All</a>                   <a id="625" class="Keyword">using</a> <a id="631" class="Symbol">(</a><a id="632" href="Data.List.Relation.Unary.All.html#5949" class="Function">lookup</a><a id="638" class="Symbol">)</a>
<a id="640" class="Keyword">open</a> <a id="645" class="Keyword">import</a> <a id="652" href="Data.List.Relation.Binary.Subset.Propositional.Properties.html" class="Module">Data.List.Relation.Binary.Subset.Propositional.Properties</a> <a id="710" class="Keyword">using</a> <a id="716" class="Symbol">(</a><a id="717" href="Data.List.Relation.Binary.Subset.Propositional.Properties.html#1761" class="Function">⊆-refl</a><a id="723" class="Symbol">)</a>

<a id="726" class="Keyword">open</a> <a id="731" class="Keyword">import</a> <a id="738" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="776" class="Keyword">using</a> <a id="782" class="Symbol">(</a><a id="783" href="Relation.Binary.PropositionalEquality.html#2283" class="Function">setoid</a><a id="789" class="Symbol">)</a>

<a id="792" class="Keyword">open</a> <a id="797" class="Keyword">import</a> <a id="804" href="Prelude.Init.html" class="Module">Prelude.Init</a>
<a id="817" class="Keyword">open</a> <a id="822" class="Keyword">import</a> <a id="829" href="Prelude.General.html" class="Module">Prelude.General</a>
<a id="845" class="Keyword">open</a> <a id="850" class="Keyword">import</a> <a id="857" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>
<a id="871" class="Keyword">open</a> <a id="876" class="Keyword">import</a> <a id="883" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>
<a id="897" class="Keyword">open</a> <a id="902" class="Keyword">import</a> <a id="909" href="Prelude.Sets.html" class="Module">Prelude.Sets</a>
<a id="922" class="Keyword">open</a> <a id="927" class="Keyword">import</a> <a id="934" href="Prelude.Collections.html" class="Module">Prelude.Collections</a>

<a id="955" class="Comment">-- Bitcoin</a>
<a id="966" class="Keyword">open</a> <a id="971" class="Keyword">import</a> <a id="978" href="Bitcoin.BasicTypes.html" class="Module">Bitcoin.BasicTypes</a>
  <a id="999" class="Keyword">using</a> <a id="1005" class="Symbol">(</a><a id="1006" href="Bitcoin.BasicTypes.html#266" class="Function">HashId</a><a id="1012" class="Symbol">)</a>
<a id="1014" class="Keyword">open</a> <a id="1019" class="Keyword">import</a> <a id="1026" href="Bitcoin.Crypto.html" class="Module">Bitcoin.Crypto</a>
  <a id="1043" class="Keyword">using</a> <a id="1049" class="Symbol">(</a><a id="1050" href="Bitcoin.Crypto.html#321" class="Record">KeyPair</a><a id="1057" class="Symbol">)</a>
<a id="1059" class="Keyword">open</a> <a id="1064" class="Keyword">import</a> <a id="1071" href="Bitcoin.Script.Base.html" class="Module">Bitcoin.Script.Base</a>
  <a id="1093" class="Keyword">using</a> <a id="1099" class="Symbol">(</a> <a id="1101" href="Bitcoin.Script.Base.html#651" class="Generalizable">ty</a><a id="1103" class="Symbol">;</a> <a id="1105" href="Bitcoin.Script.Base.html#499" class="Datatype">ScriptType</a><a id="1115" class="Symbol">;</a> <a id="1117" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a><a id="1122" class="Symbol">;</a> <a id="1124" href="Bitcoin.Script.Base.html#530" class="InductiveConstructor">`ℤ</a>
        <a id="1135" class="Symbol">;</a> <a id="1137" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a><a id="1140" class="Symbol">;</a> <a id="1142" href="Bitcoin.Script.Base.html#351" class="InductiveConstructor">Ctx</a><a id="1145" class="Symbol">;</a> <a id="1147" href="Bitcoin.Script.Base.html#323" class="Datatype">ScriptContext</a>
        <a id="1169" class="Symbol">;</a> <a id="1171" href="Bitcoin.Script.Base.html#822" class="InductiveConstructor">var</a><a id="1174" class="Symbol">;</a> <a id="1176" href="Bitcoin.Script.Base.html#893" class="InductiveConstructor">`</a><a id="1177" class="Symbol">;</a> <a id="1179" href="Bitcoin.Script.Base.html#920" class="InductiveConstructor Operator">_`+_</a><a id="1183" class="Symbol">;</a> <a id="1185" href="Bitcoin.Script.Base.html#975" class="InductiveConstructor Operator">_`-_</a><a id="1189" class="Symbol">;</a> <a id="1191" href="Bitcoin.Script.Base.html#1030" class="InductiveConstructor Operator">_`=_</a><a id="1195" class="Symbol">;</a> <a id="1197" href="Bitcoin.Script.Base.html#1088" class="InductiveConstructor Operator">_`&lt;_</a><a id="1201" class="Symbol">;</a> <a id="1203" href="Bitcoin.Script.Base.html#1174" class="InductiveConstructor Operator">`if_then_else_</a><a id="1217" class="Symbol">;</a> <a id="1219" href="Bitcoin.Script.Base.html#1321" class="InductiveConstructor">hash</a><a id="1223" class="Symbol">;</a> <a id="1225" href="Bitcoin.Script.Base.html#1389" class="InductiveConstructor">versig</a><a id="1231" class="Symbol">;</a> <a id="1233" href="Bitcoin.Script.Base.html#1478" class="InductiveConstructor Operator">absAfter_⇒_</a><a id="1244" class="Symbol">;</a> <a id="1246" href="Bitcoin.Script.Base.html#1531" class="InductiveConstructor Operator">relAfter_⇒_</a><a id="1257" class="Symbol">;</a> <a id="1259" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a>
        <a id="1274" class="Symbol">;</a> <a id="1276" href="Bitcoin.Script.Base.html#1816" class="Function Operator">_`∧_</a><a id="1280" class="Symbol">;</a> <a id="1282" href="Bitcoin.Script.Base.html#1763" class="Function">`true</a><a id="1287" class="Symbol">;</a> <a id="1289" href="Bitcoin.Script.Base.html#1915" class="Function Operator">_`∨_</a><a id="1293" class="Symbol">;</a> <a id="1295" href="Bitcoin.Script.Base.html#1708" class="Function">`false</a><a id="1301" class="Symbol">;</a> <a id="1303" href="Bitcoin.Script.Base.html#2013" class="Function">`not</a>
        <a id="1316" class="Symbol">;</a> <a id="1318" href="Bitcoin.Script.Base.html#2150" class="InductiveConstructor Operator">ƛ_</a><a id="1320" class="Symbol">;</a> <a id="1322" href="Bitcoin.Script.Base.html#2100" class="Datatype">BitcoinScript</a><a id="1335" class="Symbol">;</a> <a id="1337" href="Bitcoin.Script.Base.html#2263" class="Function">∃BitcoinScript</a>
        <a id="1360" class="Symbol">;</a> <a id="1362" class="Comment">{-∣_∣;-}</a> <a id="1371" href="Bitcoin.Script.Base.html#3442" class="Function">⋁</a><a id="1372" class="Symbol">;</a> <a id="1374" href="Bitcoin.Script.Base.html#3705" class="Function">⋀</a> <a id="1376" class="Symbol">)</a>
<a id="1378" class="Keyword">open</a> <a id="1383" class="Keyword">import</a> <a id="1390" href="Bitcoin.Tx.Base.html" class="Module">Bitcoin.Tx.Base</a>
  <a id="1408" class="Keyword">using</a> <a id="1414" class="Symbol">(</a> <a id="1416" href="Bitcoin.Tx.Base.html#377" class="InductiveConstructor Operator">_at_</a><a id="1420" class="Symbol">;</a> <a id="1422" href="Bitcoin.Tx.Base.html#343" class="Record">TxInput</a>
        <a id="1438" class="Symbol">;</a> <a id="1440" href="Bitcoin.Tx.Base.html#903" class="Record">Tx</a><a id="1442" class="Symbol">;</a> <a id="1444" href="Bitcoin.Tx.Base.html#1255" class="Function">∃Tx</a>
        <a id="1456" class="Symbol">;</a> <a id="1458" href="Bitcoin.Tx.Base.html#828" class="Function">Witness</a><a id="1465" class="Symbol">;</a> <a id="1467" href="Bitcoin.Tx.Base.html#867" class="Function">∃Witness</a> <a id="1476" class="Symbol">)</a>
<a id="1478" class="Keyword">open</a> <a id="1483" class="Keyword">import</a> <a id="1490" href="Bitcoin.Tx.Crypto.html" class="Module">Bitcoin.Tx.Crypto</a>
  <a id="1510" class="Keyword">using</a> <a id="1516" class="Symbol">(</a><a id="1517" href="Bitcoin.Tx.Crypto.html#720" class="Function">hashTx</a><a id="1523" class="Symbol">;</a> <a id="1525" href="Bitcoin.Tx.Crypto.html#1043" class="Function">sig⋆</a><a id="1529" class="Symbol">;</a> <a id="1531" href="Bitcoin.Tx.Crypto.html#552" class="Function">wit⊥</a><a id="1535" class="Symbol">)</a>

<a id="1538" class="Keyword">module</a> <a id="1545" href="SecureCompilation.Compiler.html" class="Module">SecureCompilation.Compiler</a>

  <a id="1575" class="Comment">-- BitML parameters</a>
  <a id="1597" class="Symbol">(</a><a id="1598" href="SecureCompilation.Compiler.html#1598" class="Bound">Participant</a> <a id="1610" class="Symbol">:</a> <a id="1612" class="PrimitiveType">Set</a><a id="1615" class="Symbol">)</a>
  <a id="1619" class="Symbol">{{</a><a id="1621" href="SecureCompilation.Compiler.html#1621" class="Bound">_</a> <a id="1623" class="Symbol">:</a> <a id="1625" href="Prelude.DecEq.html#553" class="Record">DecEq</a> <a id="1631" href="SecureCompilation.Compiler.html#1598" class="Bound">Participant</a><a id="1642" class="Symbol">}}</a>
  <a id="1647" class="Symbol">(</a><a id="1648" href="SecureCompilation.Compiler.html#1648" class="Bound">Honest</a> <a id="1655" class="Symbol">:</a> <a id="1657" href="Data.List.NonEmpty.html#1318" class="Record">List⁺</a> <a id="1663" href="SecureCompilation.Compiler.html#1598" class="Bound">Participant</a><a id="1674" class="Symbol">)</a>

  <a id="1679" class="Comment">-- Compilation parameters</a>
  <a id="1707" class="Symbol">(</a><a id="1708" href="SecureCompilation.Compiler.html#1708" class="Bound">η</a> <a id="1710" class="Symbol">:</a> <a id="1712" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="1713" class="Symbol">)</a> <a id="1715" class="Comment">-- public security nonce η, ensures adversaries cannot guess</a>
  <a id="1778" class="Keyword">where</a>

<a id="1785" class="Comment">-- BitML</a>
<a id="1794" class="Keyword">open</a> <a id="1799" class="Keyword">import</a> <a id="1806" href="BitML.BasicTypes.html" class="Module">BitML.BasicTypes</a>
  <a id="1825" class="Keyword">using</a> <a id="1831" class="Symbol">(</a> <a id="1833" href="BitML.BasicTypes.html#261" class="Function">Secret</a><a id="1839" class="Symbol">;</a> <a id="1841" href="BitML.BasicTypes.html#382" class="Function">Time</a><a id="1845" class="Symbol">;</a> <a id="1847" href="BitML.BasicTypes.html#229" class="Function">Value</a><a id="1852" class="Symbol">;</a> <a id="1854" href="BitML.BasicTypes.html#240" class="Function">Values</a><a id="1860" class="Symbol">;</a> <a id="1862" href="BitML.BasicTypes.html#301" class="Function">Id</a><a id="1864" class="Symbol">;</a> <a id="1866" href="BitML.BasicTypes.html#314" class="Function">Ids</a><a id="1869" class="Symbol">;</a> <a id="1871" href="BitML.BasicTypes.html#333" class="Function">Name</a><a id="1875" class="Symbol">;</a> <a id="1877" href="BitML.BasicTypes.html#363" class="Function">Names</a>
        <a id="1891" class="Symbol">;</a> <a id="1893" class="Comment">{-variables-}</a> <a id="1907" href="BitML.BasicTypes.html#412" class="Generalizable">v</a><a id="1908" class="Symbol">;</a> <a id="1910" href="BitML.BasicTypes.html#482" class="Generalizable">x</a><a id="1911" class="Symbol">;</a> <a id="1913" href="BitML.BasicTypes.html#504" class="Generalizable">xs</a><a id="1915" class="Symbol">;</a> <a id="1917" href="BitML.BasicTypes.html#462" class="Generalizable">as</a><a id="1919" class="Symbol">;</a> <a id="1921" href="BitML.BasicTypes.html#520" class="Generalizable">t</a> <a id="1923" class="Symbol">)</a>
<a id="1925" class="Keyword">open</a> <a id="1930" class="Keyword">import</a> <a id="1937" href="BitML.Predicate.html" class="Module">BitML.Predicate</a>
  <a id="1955" class="Keyword">using</a> <a id="1961" class="Symbol">(</a> <a id="1963" href="BitML.Predicate.html#682" class="Datatype">Predicate</a><a id="1972" class="Symbol">;</a> <a id="1974" href="BitML.Predicate.html#492" class="Datatype">Arith</a>
        <a id="1988" class="Symbol">;</a> <a id="1990" class="Comment">{-variables-}</a> <a id="2004" href="BitML.Predicate.html#949" class="Generalizable">p</a> <a id="2006" class="Symbol">)</a>
<a id="2008" class="Keyword">open</a> <a id="2013" class="Keyword">import</a> <a id="2020" href="BitML.Contracts.Types.html" class="Module">BitML.Contracts.Types</a> <a id="2042" href="SecureCompilation.Compiler.html#1598" class="Bound">Participant</a> <a id="2054" href="SecureCompilation.Compiler.html#1648" class="Bound">Honest</a>
  <a id="2063" class="Keyword">using</a> <a id="2069" class="Symbol">(</a> Contract<a id="2079" class="Symbol">;</a> Contracts<a id="2090" class="Symbol">;</a> VContracts
        <a id="2111" class="Symbol">;</a> put_&amp;reveal_if_⇒_<a id="2130" class="Symbol">;</a> withdraw<a id="2140" class="Symbol">;</a> split<a id="2147" class="Symbol">;</a> _⇒_<a id="2152" class="Symbol">;</a> after_⇒_
        <a id="2171" class="Symbol">;</a> Precondition
        <a id="2194" class="Symbol">;</a> ⟨_⟩_<a id="2200" class="Symbol">;</a> Advertisement<a id="2215" class="Symbol">;</a> G
        <a id="2227" class="Symbol">;</a> <a id="2229" class="Comment">{-variables-}</a> A<a id="2244" class="Symbol">;</a> g<a id="2247" class="Symbol">;</a> d<a id="2250" class="Symbol">;</a> d′<a id="2254" class="Symbol">;</a> ds<a id="2258" class="Symbol">;</a> ds′<a id="2263" class="Symbol">;</a> vcs <a id="2269" class="Symbol">)</a>
<a id="2271" class="Keyword">open</a> <a id="2276" class="Keyword">import</a> <a id="2283" href="BitML.Contracts.Helpers.html" class="Module">BitML.Contracts.Helpers</a> <a id="2307" href="SecureCompilation.Compiler.html#1598" class="Bound">Participant</a> <a id="2319" href="SecureCompilation.Compiler.html#1648" class="Bound">Honest</a>
<a id="2326" class="Keyword">open</a> <a id="2331" class="Keyword">import</a> <a id="2338" href="BitML.Contracts.Induction.html" class="Module">BitML.Contracts.Induction</a> <a id="2364" href="SecureCompilation.Compiler.html#1598" class="Bound">Participant</a> <a id="2376" href="SecureCompilation.Compiler.html#1648" class="Bound">Honest</a>
<a id="2383" class="Keyword">open</a> <a id="2388" class="Keyword">import</a> <a id="2395" href="BitML.Contracts.Validity.html" class="Module">BitML.Contracts.Validity</a> <a id="2420" href="SecureCompilation.Compiler.html#1598" class="Bound">Participant</a> <a id="2432" href="SecureCompilation.Compiler.html#1648" class="Bound">Honest</a>

<a id="bitml-compiler"></a><a id="2440" href="SecureCompilation.Compiler.html#2440" class="Function">bitml-compiler</a> <a id="2455" class="Symbol">:</a>
    <a id="2461" class="Comment">-- the input contract &amp; precondition (only compile valid advertisements)</a>
    <a id="2538" href="BitML.Contracts.Validity.html#885" class="Function">ValidAdvertisement</a> <a id="2557" class="Symbol">(</a><a id="2558" href="BitML.Contracts.Types.html#2348" class="InductiveConstructor Operator">⟨</a> <a id="2560" href="BitML.Contracts.Types.html#2187" class="Generalizable">g</a> <a id="2562" href="BitML.Contracts.Types.html#2348" class="InductiveConstructor Operator">⟩</a> <a id="2564" href="BitML.Contracts.Types.html#1261" class="Generalizable">ds</a><a id="2566" class="Symbol">)</a>
    <a id="2572" class="Comment">-- sechash: maps secrets in G to the corresponding committed hashes</a>
  <a id="2642" class="Symbol">→</a> <a id="2644" class="Symbol">(</a><a id="2645" href="SecureCompilation.Compiler.html#2645" class="Bound">sechash</a> <a id="2653" class="Symbol">:</a> <a id="2655" href="BitML.Contracts.Helpers.html#3539" class="Function">namesˡ</a> <a id="2662" href="BitML.Contracts.Types.html#2187" class="Generalizable">g</a> <a id="2664" href="Prelude.Lists.html#10340" class="Function Operator">↦</a> <a id="2666" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a><a id="2667" class="Symbol">)</a>
    <a id="2673" class="Comment">-- txout: maps deposits in G to *pre-existing* transactions with the corresponding value</a>
  <a id="2764" class="Symbol">→</a> <a id="2766" class="Symbol">(</a><a id="2767" href="SecureCompilation.Compiler.html#2767" class="Bound">txout</a> <a id="2773" class="Symbol">:</a> <a id="2775" href="BitML.Contracts.Helpers.html#3608" class="Function">namesʳ</a> <a id="2782" href="BitML.Contracts.Types.html#2187" class="Generalizable">g</a> <a id="2784" href="Prelude.Lists.html#10340" class="Function Operator">↦</a> <a id="2786" href="Bitcoin.Tx.Base.html#343" class="Record">TxInput</a><a id="2793" class="Symbol">)</a>
    <a id="2799" class="Comment">-- Exchanged keypairs K(A) and K(D,A)</a>
  <a id="2839" class="Symbol">→</a> <a id="2841" class="Keyword">let</a> <a id="2845" href="SecureCompilation.Compiler.html#2845" class="Bound">partG</a> <a id="2851" class="Symbol">=</a> <a id="2853" href="BitML.Contracts.Helpers.html#2456" class="Function">nub-participants</a> <a id="2870" href="BitML.Contracts.Types.html#2187" class="Generalizable">g</a> <a id="2872" class="Keyword">in</a>
    <a id="2879" class="Symbol">(</a><a id="2880" href="SecureCompilation.Compiler.html#2880" class="Bound">K</a> <a id="2882" class="Symbol">:</a> <a id="2884" href="SecureCompilation.Compiler.html#2845" class="Bound">partG</a> <a id="2890" href="Prelude.Lists.html#10340" class="Function Operator">↦</a> <a id="2892" href="Bitcoin.Crypto.html#321" class="Record">KeyPair</a><a id="2899" class="Symbol">)</a>
  <a id="2903" class="Symbol">→</a> <a id="2905" class="Symbol">(</a><a id="2906" href="SecureCompilation.Compiler.html#2906" class="Bound">K²</a> <a id="2909" class="Symbol">:</a> <a id="2911" href="BitML.Contracts.Helpers.html#9984" class="Function">subterms′</a> <a id="2921" class="Symbol">(</a><a id="2922" href="BitML.Contracts.Induction.html#414" class="InductiveConstructor">CS</a> <a id="2925" href="BitML.Contracts.Types.html#1261" class="Generalizable">ds</a><a id="2927" class="Symbol">)</a> <a id="2929" href="Prelude.Lists.html#10340" class="Function Operator">↦</a> <a id="2931" class="Symbol">(</a><a id="2932" href="SecureCompilation.Compiler.html#2845" class="Bound">partG</a> <a id="2938" href="Prelude.Lists.html#10340" class="Function Operator">↦</a> <a id="2940" href="Bitcoin.Crypto.html#321" class="Record">KeyPair</a><a id="2947" class="Symbol">))</a>
    <a id="2954" class="Comment">-- a set of transactions to be submitted</a>
  <a id="2997" class="Symbol">→</a> <a id="2999" href="Bitcoin.Tx.Base.html#1255" class="Function">∃Tx</a> <a id="3003" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="3005" class="Symbol">(</a><a id="3006" href="BitML.Contracts.Helpers.html#9974" class="Function">subterms⁺</a> <a id="3016" class="Symbol">(</a><a id="3017" href="BitML.Contracts.Induction.html#414" class="InductiveConstructor">CS</a> <a id="3020" href="BitML.Contracts.Types.html#1261" class="Generalizable">ds</a><a id="3022" class="Symbol">)</a> <a id="3024" href="Prelude.Lists.html#10340" class="Function Operator">↦</a> <a id="3026" href="Bitcoin.Tx.Base.html#1255" class="Function">∃Tx</a><a id="3029" class="Symbol">)</a>
<a id="3031" href="SecureCompilation.Compiler.html#2440" class="Function">bitml-compiler</a> <a id="3046" class="Symbol">{</a><a id="3047" class="Argument">g</a> <a id="3049" class="Symbol">=</a> <a id="3051" href="SecureCompilation.Compiler.html#3051" class="Bound">G₀</a><a id="3053" class="Symbol">}</a> <a id="3055" class="Symbol">{</a><a id="3056" class="Argument">ds</a> <a id="3059" class="Symbol">=</a> <a id="3061" href="SecureCompilation.Compiler.html#3061" class="Bound">C₀</a><a id="3063" class="Symbol">}</a> <a id="3065" class="Symbol">(_</a> <a id="3068" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3070" href="SecureCompilation.Compiler.html#3070" class="Bound">names⊆</a> <a id="3077" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3079" href="SecureCompilation.Compiler.html#3079" class="Bound">putComponents⊆</a> <a id="3094" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3096" href="SecureCompilation.Compiler.html#3096" class="Bound">part⊆</a><a id="3101" class="Symbol">)</a> <a id="3103" href="SecureCompilation.Compiler.html#3103" class="Bound">sechash₀</a> <a id="3112" href="SecureCompilation.Compiler.html#3112" class="Bound">txout₀</a> <a id="3119" href="SecureCompilation.Compiler.html#3119" class="Bound">K</a> <a id="3121" href="SecureCompilation.Compiler.html#3121" class="Bound">K²</a>
  <a id="3126" class="Symbol">=</a> <a id="3128" href="SecureCompilation.Compiler.html#6340" class="Function">Tᵢₙᵢₜ</a> <a id="3134" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3136" class="Symbol">(</a><a id="3137" href="BitML.Contracts.Induction.html#1419" class="Function">≺-rec</a> <a id="3143" class="Symbol">_</a> <a id="3145" href="SecureCompilation.Compiler.html#9145" class="Function">go</a><a id="3147" class="Symbol">)</a> <a id="3149" href="SecureCompilation.Compiler.html#3558" class="Function">CS₀</a> <a id="3153" class="Keyword">record</a>
      <a id="3166" class="Symbol">{</a> <a id="3168" href="SecureCompilation.Compiler.html#6840" class="Field">T,o</a>     <a id="3176" class="Symbol">=</a> <a id="3178" href="SecureCompilation.Compiler.html#6686" class="Function">Tᵢₙᵢₜ♯</a> <a id="3185" href="Bitcoin.Tx.Base.html#377" class="InductiveConstructor Operator">at</a> <a id="3188" class="Number">0</a>
      <a id="3196" class="Symbol">;</a> <a id="3198" href="SecureCompilation.Compiler.html#6863" class="Field">curV</a>    <a id="3206" class="Symbol">=</a> <a id="3208" href="SecureCompilation.Compiler.html#3633" class="Function">V₀</a>
      <a id="3217" class="Symbol">;</a> <a id="3219" href="SecureCompilation.Compiler.html#6884" class="Field">P</a>       <a id="3227" class="Symbol">=</a> <a id="3229" href="SecureCompilation.Compiler.html#3576" class="Function">partG</a> <a id="3235" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3237" href="Data.List.Relation.Binary.Subset.Propositional.Properties.html#1761" class="Function">⊆-refl</a>
      <a id="3250" class="Symbol">;</a> <a id="3252" href="SecureCompilation.Compiler.html#6912" class="Field">curT</a>    <a id="3260" class="Symbol">=</a> <a id="3262" class="Number">0</a>
      <a id="3270" class="Symbol">;</a> <a id="3272" href="SecureCompilation.Compiler.html#6933" class="Field">p⊆</a>      <a id="3280" class="Symbol">=</a> <a id="3282" href="Prelude.DecEq.html#3426" class="Function">nub-⊆⁺</a> <a id="3289" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="3291" href="SecureCompilation.Compiler.html#3696" class="Function">p⊆₀</a>
      <a id="3301" class="Symbol">;</a> <a id="3303" href="SecureCompilation.Compiler.html#7080" class="Field">s⊆</a>      <a id="3311" class="Symbol">=</a> <a id="3313" href="Function.Base.html#615" class="Function">id</a>
      <a id="3322" class="Symbol">;</a> <a id="3324" href="SecureCompilation.Compiler.html#7121" class="Field">∃s</a>      <a id="3332" class="Symbol">=</a> <a id="3334" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>
      <a id="3343" class="Symbol">;</a> <a id="3345" href="SecureCompilation.Compiler.html#7186" class="Field">sechash</a> <a id="3353" class="Symbol">=</a> <a id="3355" href="SecureCompilation.Compiler.html#3103" class="Bound">sechash₀</a> <a id="3364" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="3366" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="3377" href="Data.Sum.html#734" class="Function">isInj₁</a> <a id="3384" href="SecureCompilation.Compiler.html#3070" class="Bound">names⊆</a>
      <a id="3397" class="Symbol">;</a> <a id="3399" href="SecureCompilation.Compiler.html#7217" class="Field">txout</a>   <a id="3407" class="Symbol">=</a> <a id="3409" href="SecureCompilation.Compiler.html#3112" class="Bound">txout₀</a> <a id="3416" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="3418" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="3429" href="Data.Sum.html#817" class="Function">isInj₂</a> <a id="3436" href="SecureCompilation.Compiler.html#3070" class="Bound">names⊆</a>
      <a id="3449" class="Symbol">;</a> <a id="3451" href="SecureCompilation.Compiler.html#7254" class="Field">part</a>    <a id="3459" class="Symbol">=</a> <a id="3461" href="SecureCompilation.Compiler.html#3873" class="Function">part₀</a> <a id="3467" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="3469" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="3480" href="Data.Sum.html#817" class="Function">isInj₂</a> <a id="3487" href="SecureCompilation.Compiler.html#3070" class="Bound">names⊆</a>
      <a id="3500" class="Symbol">;</a> <a id="3502" href="SecureCompilation.Compiler.html#7296" class="Field">val</a>     <a id="3510" class="Symbol">=</a> <a id="3512" href="SecureCompilation.Compiler.html#4044" class="Function">val₀</a> <a id="3517" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="3519" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="3530" href="Data.Sum.html#817" class="Function">isInj₂</a> <a id="3537" href="SecureCompilation.Compiler.html#3070" class="Bound">names⊆</a> <a id="3544" class="Symbol">}</a>
  <a id="3548" class="Keyword">where</a>
    <a id="3558" href="SecureCompilation.Compiler.html#3558" class="Function">CS₀</a>   <a id="3564" class="Symbol">=</a> <a id="3566" href="BitML.Contracts.Induction.html#414" class="InductiveConstructor">CS</a> <a id="3569" href="SecureCompilation.Compiler.html#3061" class="Bound">C₀</a>
    <a id="3576" href="SecureCompilation.Compiler.html#3576" class="Function">partG</a> <a id="3582" class="Symbol">=</a> <a id="3584" href="BitML.Contracts.Helpers.html#2456" class="Function">nub-participants</a> <a id="3601" href="SecureCompilation.Compiler.html#3051" class="Bound">G₀</a>
    <a id="3608" href="SecureCompilation.Compiler.html#3608" class="Function">ς</a>     <a id="3614" class="Symbol">=</a> <a id="3616" href="Data.List.Base.html#4297" class="Function">length</a> <a id="3623" href="SecureCompilation.Compiler.html#3576" class="Function">partG</a>
    <a id="3633" href="SecureCompilation.Compiler.html#3633" class="Function">V₀</a>    <a id="3639" class="Symbol">=</a> <a id="3641" href="Data.List.Base.html#4217" class="Function">sum</a> <a id="3645" class="Symbol">(</a><a id="3646" href="Data.List.Base.html#1497" class="Function">map</a> <a id="3650" class="Symbol">(</a><a id="3651" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="3657" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="3659" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a><a id="3664" class="Symbol">)</a> <a id="3666" class="Symbol">(</a><a id="3667" href="BitML.Contracts.Helpers.html#6774" class="Function">persistentDeposits</a> <a id="3686" href="SecureCompilation.Compiler.html#3051" class="Bound">G₀</a><a id="3688" class="Symbol">))</a>

    <a id="3696" href="SecureCompilation.Compiler.html#3696" class="Function">p⊆₀</a> <a id="3700" class="Symbol">:</a> <a id="3702" href="BitML.Contracts.Helpers.html#2443" class="Function">participants</a> <a id="3715" href="SecureCompilation.Compiler.html#3061" class="Bound">C₀</a> <a id="3718" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">⊆</a> <a id="3720" href="BitML.Contracts.Helpers.html#2443" class="Function">participants</a> <a id="3733" href="SecureCompilation.Compiler.html#3051" class="Bound">G₀</a>
    <a id="3740" href="SecureCompilation.Compiler.html#3696" class="Function">p⊆₀</a> <a id="3744" class="Symbol">=</a> <a id="3746" href="BitML.Contracts.Helpers.html#7233" class="Function">persistent⊆</a> <a id="3758" class="Symbol">{</a><a id="3759" href="SecureCompilation.Compiler.html#3051" class="Bound">G₀</a><a id="3761" class="Symbol">}</a> <a id="3763" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="3765" href="SecureCompilation.Compiler.html#3096" class="Bound">part⊆</a> <a id="3771" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="3773" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="3780" class="Symbol">(</a><a id="3781" href="BitML.Contracts.Helpers.html#2443" class="Function">participants</a> <a id="3794" href="SecureCompilation.Compiler.html#3051" class="Bound">G₀</a><a id="3796" class="Symbol">)</a>

    <a id="3803" class="Comment">-- part: maps deposit names in G to the corresponding participant</a>
    <a id="3873" href="SecureCompilation.Compiler.html#3873" class="Function">part₀</a> <a id="3879" class="Symbol">:</a> <a id="3881" href="BitML.Contracts.Helpers.html#3608" class="Function">namesʳ</a> <a id="3888" href="SecureCompilation.Compiler.html#3051" class="Bound">G₀</a> <a id="3891" href="Prelude.Lists.html#10340" class="Function Operator">↦</a> <a id="3893" href="Data.Product.html#1369" class="Function">∃</a> <a id="3895" class="Symbol">(</a><a id="3896" href="Data.List.Membership.Setoid.html#882" class="Function Operator">_∈</a> <a id="3899" href="SecureCompilation.Compiler.html#3576" class="Function">partG</a><a id="3904" class="Symbol">)</a>
    <a id="3910" href="SecureCompilation.Compiler.html#3873" class="Function">part₀</a> <a id="3916" href="SecureCompilation.Compiler.html#3916" class="Bound">x∈</a> <a id="3919" class="Symbol">=</a> <a id="3921" class="Symbol">_</a> <a id="3923" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3925" href="Prelude.DecEq.html#5006" class="Function">∈-nub⁺</a> <a id="3932" class="Symbol">(</a><a id="3933" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="3939" class="Symbol">(</a><a id="3940" href="BitML.Contracts.Helpers.html#7521" class="Function">getDeposit</a> <a id="3951" class="Symbol">{</a><a id="3952" class="Argument">g</a> <a id="3954" class="Symbol">=</a> <a id="3956" href="SecureCompilation.Compiler.html#3051" class="Bound">G₀</a><a id="3958" class="Symbol">}</a> <a id="3960" href="SecureCompilation.Compiler.html#3916" class="Bound">x∈</a><a id="3962" class="Symbol">))</a>

    <a id="3970" class="Comment">-- val: maps deposit names in G to the value contained in the deposit</a>
    <a id="4044" href="SecureCompilation.Compiler.html#4044" class="Function">val₀</a> <a id="4049" class="Symbol">:</a> <a id="4051" href="BitML.Contracts.Helpers.html#3608" class="Function">namesʳ</a> <a id="4058" href="SecureCompilation.Compiler.html#3051" class="Bound">G₀</a> <a id="4061" href="Prelude.Lists.html#10340" class="Function Operator">↦</a> <a id="4063" href="BitML.BasicTypes.html#229" class="Function">Value</a>
    <a id="4073" href="SecureCompilation.Compiler.html#4044" class="Function">val₀</a> <a id="4078" class="Symbol">=</a> <a id="4080" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="4086" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="4088" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="4094" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="4096" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="4102" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="4104" href="BitML.Contracts.Helpers.html#7521" class="Function">getDeposit</a> <a id="4115" class="Symbol">{</a><a id="4116" class="Argument">g</a> <a id="4118" class="Symbol">=</a> <a id="4120" href="SecureCompilation.Compiler.html#3051" class="Bound">G₀</a><a id="4122" class="Symbol">}</a>

    <a id="4129" class="Comment">-- Bout:</a>
    <a id="4142" href="SecureCompilation.Compiler.html#4142" class="Function">Bout</a> <a id="4147" class="Symbol">:</a> <a id="4149" href="BitML.Contracts.Helpers.html#9984" class="Function">subterms′</a> <a id="4159" href="SecureCompilation.Compiler.html#3558" class="Function">CS₀</a> <a id="4163" href="Prelude.Lists.html#10340" class="Function Operator">↦</a> <a id="4165" class="Symbol">(</a><a id="4166" href="Data.Product.html#1788" class="Function">∃[</a> <a id="4169" href="SecureCompilation.Compiler.html#4169" class="Bound">ctx</a> <a id="4173" href="Data.Product.html#1788" class="Function">]</a> <a id="4175" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="4182" href="SecureCompilation.Compiler.html#4169" class="Bound">ctx</a> <a id="4186" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a><a id="4191" class="Symbol">)</a>
    <a id="4197" href="SecureCompilation.Compiler.html#4142" class="Function">Bout</a> <a id="4202" class="Symbol">{</a><a id="4203" href="SecureCompilation.Compiler.html#4203" class="Bound">D</a><a id="4204" class="Symbol">}</a> <a id="4206" href="SecureCompilation.Compiler.html#4206" class="Bound">D∈</a> <a id="4209" class="Keyword">with</a> <a id="4214" href="BitML.Contracts.Helpers.html#9035" class="Function">removeTopDecorations</a> <a id="4235" href="SecureCompilation.Compiler.html#4203" class="Bound">D</a> <a id="4237" class="Symbol">|</a> <a id="4239" href="Relation.Binary.PropositionalEquality.html#3845" class="Function">inspect</a> <a id="4247" href="BitML.Contracts.Helpers.html#9035" class="Function">removeTopDecorations</a> <a id="4268" href="SecureCompilation.Compiler.html#4203" class="Bound">D</a>
    <a id="4274" class="Symbol">...</a> <a id="4278" class="Symbol">|</a> <a id="4280" href="BitML.Contracts.Types.html#771" class="InductiveConstructor Operator">put</a> <a id="4284" href="SecureCompilation.Compiler.html#4284" class="Bound">zs</a> <a id="4287" href="BitML.Contracts.Types.html#771" class="InductiveConstructor Operator">&amp;reveal</a> <a id="4295" href="SecureCompilation.Compiler.html#4295" class="Bound">as</a> <a id="4298" href="BitML.Contracts.Types.html#771" class="InductiveConstructor Operator">if</a> <a id="4301" href="SecureCompilation.Compiler.html#4301" class="Bound">p</a> <a id="4303" href="BitML.Contracts.Types.html#771" class="InductiveConstructor Operator">⇒</a> <a id="4305" class="Symbol">_</a> <a id="4307" class="Symbol">|</a> <a id="4309" href="Relation.Binary.PropositionalEquality.html#3819" class="InductiveConstructor Operator">≡[</a> <a id="4312" href="SecureCompilation.Compiler.html#4312" class="Bound">eq</a> <a id="4315" href="Relation.Binary.PropositionalEquality.html#3819" class="InductiveConstructor Operator">]</a>
        <a id="4325" class="Symbol">=</a> <a id="4327" href="Bitcoin.Script.Base.html#351" class="InductiveConstructor">Ctx</a> <a id="4331" class="Symbol">(</a><a id="4332" href="SecureCompilation.Compiler.html#3608" class="Function">ς</a> <a id="4334" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="4336" href="SecureCompilation.Compiler.html#4701" class="Function">m</a><a id="4337" class="Symbol">)</a> <a id="4339" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4341" class="Symbol">(</a> <a id="4343" href="Bitcoin.Script.Base.html#1389" class="InductiveConstructor">versig</a> <a id="4350" class="Symbol">(</a><a id="4351" href="Data.List.Membership.Setoid.html#1123" class="Function">mapWith∈</a> <a id="4360" href="SecureCompilation.Compiler.html#3576" class="Function">partG</a> <a id="4366" class="Symbol">(</a><a id="4367" href="SecureCompilation.Compiler.html#3121" class="Bound">K²</a> <a id="4370" class="Bound">D∈</a><a id="4372" class="Symbol">))</a> <a id="4375" class="Symbol">(</a><a id="4376" href="Data.List.Base.html#1497" class="Function">map</a> <a id="4380" class="Symbol">(</a><a id="4381" href="Data.Fin.Base.html#2858" class="Function">inject+</a> <a id="4389" href="SecureCompilation.Compiler.html#4701" class="Function">m</a><a id="4390" class="Symbol">)</a> <a id="4392" class="Symbol">(</a><a id="4393" href="Data.List.Base.html#5754" class="Function">allFin</a> <a id="4400" href="SecureCompilation.Compiler.html#3608" class="Function">ς</a><a id="4401" class="Symbol">))</a>
                     <a id="4425" href="Bitcoin.Script.Base.html#1816" class="Function Operator">`∧</a> <a id="4428" href="SecureCompilation.Compiler.html#5814" class="Function">Bᵖʳ</a> <a id="4432" href="SecureCompilation.Compiler.html#4301" class="Bound">p</a> <a id="4434" href="SecureCompilation.Compiler.html#5069" class="Function">p⊆as</a>
                     <a id="4460" href="Bitcoin.Script.Base.html#1816" class="Function Operator">`∧</a> <a id="4463" href="Bitcoin.Script.Base.html#3705" class="Function">⋀</a> <a id="4465" class="Symbol">(</a><a id="4466" href="Prelude.Lists.html#4050" class="Function">mapEnumWith∈</a> <a id="4479" href="SecureCompilation.Compiler.html#4295" class="Bound">as</a> <a id="4482" class="Symbol">(λ</a> <a id="4485" href="SecureCompilation.Compiler.html#4485" class="Bound">i</a> <a id="4487" href="SecureCompilation.Compiler.html#4487" class="Bound">a</a> <a id="4489" href="SecureCompilation.Compiler.html#4489" class="Bound">a∈</a> <a id="4492" class="Symbol">→</a>
                             <a id="4523" class="Keyword">let</a> <a id="4527" href="SecureCompilation.Compiler.html#4527" class="Bound">bi</a> <a id="4530" class="Symbol">=</a> <a id="4532" href="Bitcoin.Script.Base.html#822" class="InductiveConstructor">var</a> <a id="4536" class="Symbol">(</a><a id="4537" href="Data.Fin.Base.html#2272" class="Function">raise</a> <a id="4543" href="SecureCompilation.Compiler.html#3608" class="Function">ς</a> <a id="4545" href="SecureCompilation.Compiler.html#4485" class="Bound">i</a><a id="4546" class="Symbol">)</a>
                             <a id="4577" class="Keyword">in</a> <a id="4580" class="Symbol">(</a><a id="4581" href="Bitcoin.Script.Base.html#1321" class="InductiveConstructor">hash</a> <a id="4586" href="SecureCompilation.Compiler.html#4527" class="Bound">bi</a> <a id="4589" href="Bitcoin.Script.Base.html#1030" class="InductiveConstructor Operator">`=</a> <a id="4592" href="Bitcoin.Script.Base.html#893" class="InductiveConstructor">`</a> <a id="4594" class="Symbol">(</a><a id="4595" href="SecureCompilation.Compiler.html#3103" class="Bound">sechash₀</a> <a id="4604" class="Symbol">(</a><a id="4605" href="SecureCompilation.Compiler.html#5163" class="Function">as⊆</a> <a id="4609" href="SecureCompilation.Compiler.html#4489" class="Bound">a∈</a><a id="4611" class="Symbol">)))</a> <a id="4615" href="Bitcoin.Script.Base.html#1816" class="Function Operator">`∧</a> <a id="4618" class="Symbol">(</a><a id="4619" href="Bitcoin.Script.Base.html#893" class="InductiveConstructor">`</a> <a id="4621" class="Symbol">(</a><a id="4622" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="4624" href="SecureCompilation.Compiler.html#1708" class="Bound">η</a><a id="4625" class="Symbol">)</a> <a id="4627" href="Bitcoin.Script.Base.html#1088" class="InductiveConstructor Operator">`&lt;</a> <a id="4630" href="Bitcoin.Script.Base.html#1269" class="InductiveConstructor Operator">Script.∣</a> <a id="4639" href="SecureCompilation.Compiler.html#4527" class="Bound">bi</a> <a id="4642" href="Bitcoin.Script.Base.html#1269" class="InductiveConstructor Operator">∣</a><a id="4643" class="Symbol">)))</a>
                        <a id="4671" class="Symbol">)</a>
          <a id="4683" class="Keyword">where</a>
            <a id="4701" href="SecureCompilation.Compiler.html#4701" class="Function">m</a> <a id="4703" class="Symbol">:</a> <a id="4705" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
            <a id="4719" href="SecureCompilation.Compiler.html#4701" class="Function">m</a> <a id="4721" class="Symbol">=</a> <a id="4723" href="Data.List.Base.html#4297" class="Function">length</a> <a id="4730" href="SecureCompilation.Compiler.html#4295" class="Bound">as</a>

            <a id="4746" href="SecureCompilation.Compiler.html#4746" class="Function">p⊆</a> <a id="4749" class="Symbol">:</a> <a id="4751" href="BitML.Contracts.Helpers.html#5413" class="Function">putComponents</a> <a id="4765" class="Bound">D</a> <a id="4767" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">⊆</a> <a id="4769" href="BitML.Contracts.Helpers.html#5413" class="Function">putComponents</a> <a id="4783" href="SecureCompilation.Compiler.html#3061" class="Bound">C₀</a>
            <a id="4798" href="SecureCompilation.Compiler.html#4746" class="Function">p⊆</a> <a id="4801" class="Symbol">=</a> <a id="4803" href="BitML.Contracts.Helpers.html#13071" class="Function">subterms′-putComponents⊆ᶜˢ</a> <a id="4830" class="Symbol">{</a><a id="4831" class="Argument">ds</a> <a id="4834" class="Symbol">=</a> <a id="4836" href="SecureCompilation.Compiler.html#3061" class="Bound">C₀</a><a id="4838" class="Symbol">}</a> <a id="4840" class="Bound">D∈</a>

            <a id="4856" href="SecureCompilation.Compiler.html#4856" class="Function">n⊆</a> <a id="4859" class="Symbol">:</a> <a id="4861" href="BitML.Contracts.Helpers.html#3482" class="Function">names</a> <a id="4867" class="Bound">D</a> <a id="4869" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">⊆</a> <a id="4871" href="BitML.Contracts.Helpers.html#3482" class="Function">names</a> <a id="4877" href="SecureCompilation.Compiler.html#3061" class="Bound">C₀</a>
            <a id="4892" href="SecureCompilation.Compiler.html#4856" class="Function">n⊆</a> <a id="4895" class="Symbol">=</a> <a id="4897" href="BitML.Contracts.Helpers.html#11945" class="Function">subterms′-names⊆ᶜˢ</a> <a id="4916" class="Symbol">{</a><a id="4917" class="Argument">d</a> <a id="4919" class="Symbol">=</a> <a id="4921" class="Bound">D</a><a id="4922" class="Symbol">}</a> <a id="4924" class="Symbol">{</a><a id="4925" class="Argument">ds</a> <a id="4928" class="Symbol">=</a> <a id="4930" href="SecureCompilation.Compiler.html#3061" class="Bound">C₀</a><a id="4932" class="Symbol">}</a> <a id="4934" class="Bound">D∈</a>

            <a id="4950" href="SecureCompilation.Compiler.html#4950" class="Function">put∈</a> <a id="4955" class="Symbol">:</a> <a id="4957" class="Symbol">(</a><a id="4958" href="SecureCompilation.Compiler.html#4284" class="Bound">zs</a> <a id="4961" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4963" href="SecureCompilation.Compiler.html#4295" class="Bound">as</a> <a id="4966" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4968" href="SecureCompilation.Compiler.html#4301" class="Bound">p</a><a id="4969" class="Symbol">)</a> <a id="4971" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="4973" href="BitML.Contracts.Helpers.html#5413" class="Function">putComponents</a> <a id="4987" class="Bound">D</a>
            <a id="5001" href="SecureCompilation.Compiler.html#4950" class="Function">put∈</a> <a id="5006" class="Keyword">rewrite</a> <a id="5014" href="BitML.Contracts.Helpers.html#9238" class="Function">remove-putComponents</a> <a id="5035" class="Symbol">{</a><a id="5036" class="Bound">D</a><a id="5037" class="Symbol">}</a> <a id="5039" class="Symbol">|</a> <a id="5041" href="SecureCompilation.Compiler.html#4312" class="Bound">eq</a> <a id="5044" class="Symbol">=</a> <a id="5046" href="Data.List.Relation.Unary.Any.html#1174" class="InductiveConstructor">here</a> <a id="5051" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

            <a id="5069" href="SecureCompilation.Compiler.html#5069" class="Function">p⊆as</a> <a id="5074" class="Symbol">:</a> <a id="5076" href="BitML.Contracts.Helpers.html#4649" class="Function">secrets</a> <a id="5084" href="SecureCompilation.Compiler.html#4301" class="Bound">p</a> <a id="5086" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">⊆</a> <a id="5088" href="SecureCompilation.Compiler.html#4295" class="Bound">as</a>
            <a id="5103" href="SecureCompilation.Compiler.html#5069" class="Function">p⊆as</a> <a id="5108" class="Symbol">=</a> <a id="5110" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="5116" class="Symbol">(</a><a id="5117" href="Data.List.Relation.Unary.All.html#5949" class="Function">lookup</a> <a id="5124" href="SecureCompilation.Compiler.html#3079" class="Bound">putComponents⊆</a> <a id="5139" class="Symbol">(</a><a id="5140" href="SecureCompilation.Compiler.html#4746" class="Function">p⊆</a> <a id="5143" href="SecureCompilation.Compiler.html#4950" class="Function">put∈</a><a id="5147" class="Symbol">))</a>

            <a id="5163" href="SecureCompilation.Compiler.html#5163" class="Function">as⊆</a> <a id="5167" class="Symbol">:</a> <a id="5169" href="SecureCompilation.Compiler.html#4295" class="Bound">as</a> <a id="5172" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">⊆</a> <a id="5174" href="BitML.Contracts.Helpers.html#3539" class="Function">namesˡ</a> <a id="5181" href="SecureCompilation.Compiler.html#3051" class="Bound">G₀</a>
            <a id="5196" href="SecureCompilation.Compiler.html#5163" class="Function">as⊆</a> <a id="5200" class="Symbol">=</a> <a id="5202" class="Symbol">(λ</a> <a id="5205" href="SecureCompilation.Compiler.html#5205" class="Bound">x</a> <a id="5207" class="Symbol">→</a> <a id="5209" href="Prelude.Lists.html#17697" class="Function">∈-mapMaybe⁺</a> <a id="5221" href="Data.Sum.html#734" class="Function">isInj₁</a> <a id="5228" href="SecureCompilation.Compiler.html#5205" class="Bound">x</a> <a id="5230" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="5234" class="Symbol">)</a> <a id="5236" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="5238" href="SecureCompilation.Compiler.html#3070" class="Bound">names⊆</a> <a id="5245" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="5247" href="SecureCompilation.Compiler.html#4856" class="Function">n⊆</a> <a id="5250" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="5252" href="SecureCompilation.Compiler.html#5307" class="Function">as⊆′</a> <a id="5257" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="5259" href="Data.List.Membership.Propositional.Properties.html#3315" class="Function">∈-map⁺</a> <a id="5266" href="Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a>
              <a id="5285" class="Keyword">where</a>
                <a id="5307" href="SecureCompilation.Compiler.html#5307" class="Function">as⊆′</a> <a id="5312" class="Symbol">:</a> <a id="5314" href="Data.List.Base.html#1497" class="Function">map</a> <a id="5318" href="Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="5323" href="SecureCompilation.Compiler.html#4295" class="Bound">as</a> <a id="5326" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">⊆</a> <a id="5328" href="BitML.Contracts.Helpers.html#3482" class="Function">names</a> <a id="5334" class="Bound">D</a>
                <a id="5352" href="SecureCompilation.Compiler.html#5307" class="Function">as⊆′</a> <a id="5357" class="Keyword">rewrite</a> <a id="5365" href="BitML.Contracts.Helpers.html#9636" class="Function">remove-names</a> <a id="5378" class="Symbol">{</a><a id="5379" class="Bound">D</a><a id="5380" class="Symbol">}</a> <a id="5382" class="Symbol">|</a> <a id="5384" href="SecureCompilation.Compiler.html#4312" class="Bound">eq</a> <a id="5387" class="Symbol">=</a> <a id="5389" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="5396" class="Symbol">(</a><a id="5397" href="Data.List.Base.html#1497" class="Function">map</a> <a id="5401" href="Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="5406" href="SecureCompilation.Compiler.html#4284" class="Bound">zs</a><a id="5408" class="Symbol">)</a> <a id="5410" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="5412" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a>

            <a id="5432" href="SecureCompilation.Compiler.html#5432" class="Function">Bᵃʳ</a> <a id="5436" class="Symbol">:</a> <a id="5438" class="Symbol">(</a><a id="5439" href="SecureCompilation.Compiler.html#5439" class="Bound">e</a> <a id="5441" class="Symbol">:</a> <a id="5443" href="BitML.Predicate.html#492" class="Datatype">Arith</a><a id="5448" class="Symbol">)</a> <a id="5450" class="Symbol">→</a> <a id="5452" href="BitML.Contracts.Helpers.html#4649" class="Function">secrets</a> <a id="5460" href="SecureCompilation.Compiler.html#5439" class="Bound">e</a> <a id="5462" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">⊆</a> <a id="5464" href="SecureCompilation.Compiler.html#4295" class="Bound">as</a> <a id="5467" class="Symbol">→</a> <a id="5469" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="5476" class="Symbol">(</a><a id="5477" href="Bitcoin.Script.Base.html#351" class="InductiveConstructor">Ctx</a> <a id="5481" class="Symbol">(</a><a id="5482" href="SecureCompilation.Compiler.html#3608" class="Function">ς</a> <a id="5484" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="5486" href="SecureCompilation.Compiler.html#4701" class="Function">m</a><a id="5487" class="Symbol">))</a> <a id="5490" href="Bitcoin.Script.Base.html#530" class="InductiveConstructor">`ℤ</a>
            <a id="5505" href="SecureCompilation.Compiler.html#5432" class="Function">Bᵃʳ</a> <a id="5509" class="Symbol">(</a><a id="5510" href="BitML.Predicate.html#512" class="InductiveConstructor">Arith.`</a> <a id="5518" href="SecureCompilation.Compiler.html#5518" class="Bound">x</a><a id="5519" class="Symbol">)</a>    <a id="5524" class="Symbol">_</a>   <a id="5528" class="Symbol">=</a> <a id="5530" href="Bitcoin.Script.Base.html#893" class="InductiveConstructor">`</a> <a id="5532" href="SecureCompilation.Compiler.html#5518" class="Bound">x</a>
            <a id="5546" href="SecureCompilation.Compiler.html#5432" class="Function">Bᵃʳ</a> <a id="5550" class="Symbol">(</a><a id="5551" href="BitML.Predicate.html#531" class="InductiveConstructor Operator">Arith.∣</a> <a id="5559" href="SecureCompilation.Compiler.html#5559" class="Bound">s</a> <a id="5561" href="BitML.Predicate.html#531" class="InductiveConstructor Operator">∣</a><a id="5562" class="Symbol">)</a>  <a id="5565" href="SecureCompilation.Compiler.html#5565" class="Bound">⊆as</a> <a id="5569" class="Symbol">=</a> <a id="5571" href="Bitcoin.Script.Base.html#1269" class="InductiveConstructor Operator">Script.∣</a> <a id="5580" href="Bitcoin.Script.Base.html#822" class="InductiveConstructor">var</a> <a id="5584" class="Symbol">(</a><a id="5585" href="Data.Fin.Base.html#2272" class="Function">raise</a> <a id="5591" href="SecureCompilation.Compiler.html#3608" class="Function">ς</a> <a id="5593" class="Symbol">(</a><a id="5594" href="Data.List.Relation.Unary.Any.html#1909" class="Function">index</a> <a id="5600" class="Symbol">(</a><a id="5601" href="SecureCompilation.Compiler.html#5565" class="Bound">⊆as</a> <a id="5605" class="Symbol">(</a><a id="5606" href="Data.List.Relation.Unary.Any.html#1174" class="InductiveConstructor">here</a> <a id="5611" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="5615" class="Symbol">))))</a> <a id="5620" href="Bitcoin.Script.Base.html#1269" class="InductiveConstructor Operator">∣</a> <a id="5622" href="Bitcoin.Script.Base.html#975" class="InductiveConstructor Operator">`-</a> <a id="5625" href="Bitcoin.Script.Base.html#893" class="InductiveConstructor">`</a> <a id="5627" class="Symbol">(</a><a id="5628" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="5630" href="SecureCompilation.Compiler.html#1708" class="Bound">η</a><a id="5631" class="Symbol">)</a>
            <a id="5645" href="SecureCompilation.Compiler.html#5432" class="Function">Bᵃʳ</a> <a id="5649" class="Symbol">(</a><a id="5650" href="SecureCompilation.Compiler.html#5650" class="Bound">x</a> <a id="5652" href="BitML.Predicate.html#555" class="InductiveConstructor Operator">Arith.`+</a> <a id="5661" href="SecureCompilation.Compiler.html#5661" class="Bound">y</a><a id="5662" class="Symbol">)</a> <a id="5664" href="SecureCompilation.Compiler.html#5664" class="Bound">⊆as</a> <a id="5668" class="Symbol">=</a> <a id="5670" href="SecureCompilation.Compiler.html#5432" class="Function">Bᵃʳ</a> <a id="5674" href="SecureCompilation.Compiler.html#5650" class="Bound">x</a> <a id="5676" class="Symbol">(</a><a id="5677" href="SecureCompilation.Compiler.html#5664" class="Bound">⊆as</a> <a id="5681" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="5683" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a><a id="5689" class="Symbol">)</a> <a id="5691" href="Bitcoin.Script.Base.html#920" class="InductiveConstructor Operator">`+</a> <a id="5694" href="SecureCompilation.Compiler.html#5432" class="Function">Bᵃʳ</a> <a id="5698" href="SecureCompilation.Compiler.html#5661" class="Bound">y</a> <a id="5700" class="Symbol">(</a><a id="5701" href="SecureCompilation.Compiler.html#5664" class="Bound">⊆as</a> <a id="5705" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="5707" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="5714" class="Symbol">_)</a>
            <a id="5729" href="SecureCompilation.Compiler.html#5432" class="Function">Bᵃʳ</a> <a id="5733" class="Symbol">(</a><a id="5734" href="SecureCompilation.Compiler.html#5734" class="Bound">x</a> <a id="5736" href="BitML.Predicate.html#586" class="InductiveConstructor Operator">Arith.`-</a> <a id="5745" href="SecureCompilation.Compiler.html#5745" class="Bound">y</a><a id="5746" class="Symbol">)</a> <a id="5748" href="SecureCompilation.Compiler.html#5748" class="Bound">⊆as</a> <a id="5752" class="Symbol">=</a> <a id="5754" href="SecureCompilation.Compiler.html#5432" class="Function">Bᵃʳ</a> <a id="5758" href="SecureCompilation.Compiler.html#5734" class="Bound">x</a> <a id="5760" class="Symbol">(</a><a id="5761" href="SecureCompilation.Compiler.html#5748" class="Bound">⊆as</a> <a id="5765" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="5767" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a><a id="5773" class="Symbol">)</a> <a id="5775" href="Bitcoin.Script.Base.html#975" class="InductiveConstructor Operator">`-</a> <a id="5778" href="SecureCompilation.Compiler.html#5432" class="Function">Bᵃʳ</a> <a id="5782" href="SecureCompilation.Compiler.html#5745" class="Bound">y</a> <a id="5784" class="Symbol">(</a><a id="5785" href="SecureCompilation.Compiler.html#5748" class="Bound">⊆as</a> <a id="5789" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="5791" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="5798" class="Symbol">_)</a>

            <a id="5814" href="SecureCompilation.Compiler.html#5814" class="Function">Bᵖʳ</a> <a id="5818" class="Symbol">:</a> <a id="5820" class="Symbol">(</a><a id="5821" href="SecureCompilation.Compiler.html#5821" class="Bound">e</a> <a id="5823" class="Symbol">:</a> <a id="5825" href="BitML.Predicate.html#682" class="Datatype">Predicate</a><a id="5834" class="Symbol">)</a> <a id="5836" class="Symbol">→</a> <a id="5838" href="BitML.Contracts.Helpers.html#4649" class="Function">secrets</a> <a id="5846" href="SecureCompilation.Compiler.html#5821" class="Bound">e</a> <a id="5848" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">⊆</a> <a id="5850" href="SecureCompilation.Compiler.html#4295" class="Bound">as</a> <a id="5853" class="Symbol">→</a> <a id="5855" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="5862" class="Symbol">(</a><a id="5863" href="Bitcoin.Script.Base.html#351" class="InductiveConstructor">Ctx</a> <a id="5867" class="Symbol">(</a><a id="5868" href="SecureCompilation.Compiler.html#3608" class="Function">ς</a> <a id="5870" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="5872" href="SecureCompilation.Compiler.html#4701" class="Function">m</a><a id="5873" class="Symbol">))</a> <a id="5876" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a>
            <a id="5894" href="SecureCompilation.Compiler.html#5814" class="Function">Bᵖʳ</a> <a id="5898" href="BitML.Predicate.html#706" class="InductiveConstructor">Predicate.`true</a>     <a id="5918" class="Symbol">_</a>   <a id="5922" class="Symbol">=</a> <a id="5924" href="Bitcoin.Script.Base.html#1763" class="Function">`true</a>
            <a id="5942" href="SecureCompilation.Compiler.html#5814" class="Function">Bᵖʳ</a> <a id="5946" class="Symbol">(</a><a id="5947" href="SecureCompilation.Compiler.html#5947" class="Bound">p</a> <a id="5949" href="BitML.Predicate.html#726" class="InductiveConstructor Operator">Predicate.`∧</a> <a id="5962" href="SecureCompilation.Compiler.html#5962" class="Bound">p′</a><a id="5964" class="Symbol">)</a> <a id="5966" href="SecureCompilation.Compiler.html#5966" class="Bound">⊆as</a> <a id="5970" class="Symbol">=</a> <a id="5972" href="SecureCompilation.Compiler.html#5814" class="Function">Bᵖʳ</a> <a id="5976" href="SecureCompilation.Compiler.html#5947" class="Bound">p</a> <a id="5978" class="Symbol">(</a><a id="5979" href="SecureCompilation.Compiler.html#5966" class="Bound">⊆as</a> <a id="5983" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="5985" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a><a id="5991" class="Symbol">)</a> <a id="5993" href="Bitcoin.Script.Base.html#1816" class="Function Operator">`∧</a> <a id="5996" href="SecureCompilation.Compiler.html#5814" class="Function">Bᵖʳ</a> <a id="6000" href="SecureCompilation.Compiler.html#5962" class="Bound">p′</a> <a id="6003" class="Symbol">(</a><a id="6004" href="SecureCompilation.Compiler.html#5966" class="Bound">⊆as</a> <a id="6008" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="6010" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="6017" class="Symbol">_)</a>
            <a id="6032" href="SecureCompilation.Compiler.html#5814" class="Function">Bᵖʳ</a> <a id="6036" class="Symbol">(</a><a id="6037" href="BitML.Predicate.html#770" class="InductiveConstructor Operator">Predicate.`¬</a> <a id="6050" href="SecureCompilation.Compiler.html#6050" class="Bound">p</a><a id="6051" class="Symbol">)</a>    <a id="6056" href="SecureCompilation.Compiler.html#6056" class="Bound">⊆as</a> <a id="6060" class="Symbol">=</a> <a id="6062" href="Bitcoin.Script.Base.html#2013" class="Function">`not</a> <a id="6067" class="Symbol">(</a><a id="6068" href="SecureCompilation.Compiler.html#5814" class="Function">Bᵖʳ</a> <a id="6072" href="SecureCompilation.Compiler.html#6050" class="Bound">p</a> <a id="6074" href="SecureCompilation.Compiler.html#6056" class="Bound">⊆as</a><a id="6077" class="Symbol">)</a>
            <a id="6091" href="SecureCompilation.Compiler.html#5814" class="Function">Bᵖʳ</a> <a id="6095" class="Symbol">(</a><a id="6096" href="SecureCompilation.Compiler.html#6096" class="Bound">x</a> <a id="6098" href="BitML.Predicate.html#802" class="InductiveConstructor Operator">Predicate.`=</a> <a id="6111" href="SecureCompilation.Compiler.html#6111" class="Bound">y</a><a id="6112" class="Symbol">)</a>  <a id="6115" href="SecureCompilation.Compiler.html#6115" class="Bound">⊆as</a> <a id="6119" class="Symbol">=</a> <a id="6121" href="SecureCompilation.Compiler.html#5432" class="Function">Bᵃʳ</a> <a id="6125" href="SecureCompilation.Compiler.html#6096" class="Bound">x</a> <a id="6127" class="Symbol">(</a><a id="6128" href="SecureCompilation.Compiler.html#6115" class="Bound">⊆as</a> <a id="6132" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="6134" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a><a id="6140" class="Symbol">)</a> <a id="6142" href="Bitcoin.Script.Base.html#1030" class="InductiveConstructor Operator">`=</a> <a id="6145" href="SecureCompilation.Compiler.html#5432" class="Function">Bᵃʳ</a> <a id="6149" href="SecureCompilation.Compiler.html#6111" class="Bound">y</a> <a id="6151" class="Symbol">(</a><a id="6152" href="SecureCompilation.Compiler.html#6115" class="Bound">⊆as</a> <a id="6156" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="6158" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="6165" class="Symbol">_)</a>
            <a id="6180" href="SecureCompilation.Compiler.html#5814" class="Function">Bᵖʳ</a> <a id="6184" class="Symbol">(</a><a id="6185" href="SecureCompilation.Compiler.html#6185" class="Bound">x</a> <a id="6187" href="BitML.Predicate.html#838" class="InductiveConstructor Operator">Predicate.`&lt;</a> <a id="6200" href="SecureCompilation.Compiler.html#6200" class="Bound">y</a><a id="6201" class="Symbol">)</a>  <a id="6204" href="SecureCompilation.Compiler.html#6204" class="Bound">⊆as</a> <a id="6208" class="Symbol">=</a> <a id="6210" href="SecureCompilation.Compiler.html#5432" class="Function">Bᵃʳ</a> <a id="6214" href="SecureCompilation.Compiler.html#6185" class="Bound">x</a> <a id="6216" class="Symbol">(</a><a id="6217" href="SecureCompilation.Compiler.html#6204" class="Bound">⊆as</a> <a id="6221" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="6223" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a><a id="6229" class="Symbol">)</a> <a id="6231" href="Bitcoin.Script.Base.html#1088" class="InductiveConstructor Operator">`&lt;</a> <a id="6234" href="SecureCompilation.Compiler.html#5432" class="Function">Bᵃʳ</a> <a id="6238" href="SecureCompilation.Compiler.html#6200" class="Bound">y</a> <a id="6240" class="Symbol">(</a><a id="6241" href="SecureCompilation.Compiler.html#6204" class="Bound">⊆as</a> <a id="6245" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="6247" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="6254" class="Symbol">_)</a>
    <a id="6261" class="CatchallClause Symbol">...</a><a id="6264" class="CatchallClause"> </a><a id="6265" class="CatchallClause Symbol">|</a><a id="6266" class="CatchallClause"> </a><a id="6267" class="CatchallClause Symbol">_</a><a id="6268" class="CatchallClause"> </a><a id="6269" class="CatchallClause Symbol">|</a><a id="6270" class="CatchallClause"> </a><a id="6271" class="CatchallClause Symbol">_</a>
        <a id="6281" class="Symbol">=</a> <a id="6283" href="Bitcoin.Script.Base.html#351" class="InductiveConstructor">Ctx</a> <a id="6287" href="SecureCompilation.Compiler.html#3608" class="Function">ς</a> <a id="6289" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6291" href="Bitcoin.Script.Base.html#1389" class="InductiveConstructor">versig</a> <a id="6298" class="Symbol">(</a><a id="6299" href="Data.List.Membership.Setoid.html#1123" class="Function">mapWith∈</a> <a id="6308" href="SecureCompilation.Compiler.html#3576" class="Function">partG</a> <a id="6314" class="Symbol">(</a><a id="6315" href="SecureCompilation.Compiler.html#3121" class="Bound">K²</a> <a id="6318" class="Bound">D∈</a><a id="6320" class="Symbol">))</a> <a id="6323" class="Symbol">(</a><a id="6324" href="Data.List.Base.html#5754" class="Function">allFin</a> <a id="6331" href="SecureCompilation.Compiler.html#3608" class="Function">ς</a><a id="6332" class="Symbol">)</a>


    <a id="6340" href="SecureCompilation.Compiler.html#6340" class="Function">Tᵢₙᵢₜ</a> <a id="6346" class="Symbol">:</a> <a id="6348" href="Bitcoin.Tx.Base.html#1255" class="Function">∃Tx</a>
    <a id="6356" href="SecureCompilation.Compiler.html#6340" class="Function">Tᵢₙᵢₜ</a> <a id="6362" class="Symbol">=</a> <a id="6364" href="Data.Product.html#2196" class="Function Operator">-,</a> <a id="6367" href="Data.Product.html#2196" class="Function Operator">-,</a> <a id="6370" class="Keyword">record</a>
      <a id="6383" class="Symbol">{</a> <a id="6385" href="Bitcoin.Tx.Base.html#940" class="Field">inputs</a>  <a id="6393" class="Symbol">=</a> <a id="6395" href="Data.Vec.Base.html#7501" class="Function">V.fromList</a> <a id="6406" class="Symbol">(</a><a id="6407" href="Prelude.Lists.html#10456" class="Function">codom</a> <a id="6413" href="SecureCompilation.Compiler.html#3112" class="Bound">txout₀</a><a id="6419" class="Symbol">)</a>
      <a id="6427" class="Symbol">;</a> <a id="6429" href="Bitcoin.Tx.Base.html#981" class="Field">wit</a>     <a id="6437" class="Symbol">=</a> <a id="6439" href="Bitcoin.Tx.Crypto.html#552" class="Function">wit⊥</a>
      <a id="6450" class="Symbol">;</a> <a id="6452" href="Bitcoin.Tx.Base.html#1036" class="Field">relLock</a> <a id="6460" class="Symbol">=</a> <a id="6462" href="Data.Vec.Base.html#5745" class="Function">V.replicate</a> <a id="6474" class="Number">0</a>
      <a id="6482" class="Symbol">;</a> <a id="6484" href="Bitcoin.Tx.Base.html#1090" class="Field">outputs</a> <a id="6492" class="Symbol">=</a> <a id="6494" href="Data.Vec.Base.html#5711" class="Function Operator">V.[</a> <a id="6498" href="Data.Product.html#2196" class="Function Operator">-,</a> <a id="6501" class="Keyword">record</a> <a id="6508" class="Symbol">{</a> <a id="6510" href="Bitcoin.Tx.Base.html#658" class="Field">value</a> <a id="6516" class="Symbol">=</a> <a id="6518" href="SecureCompilation.Compiler.html#3633" class="Function">V₀</a> <a id="6521" class="Symbol">;</a> <a id="6523" href="Bitcoin.Tx.Base.html#680" class="Field">validator</a> <a id="6533" class="Symbol">=</a> <a id="6535" href="Bitcoin.Script.Base.html#2150" class="InductiveConstructor Operator">ƛ</a> <a id="6537" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="6543" class="Symbol">(</a><a id="6544" href="Bitcoin.Script.Base.html#3442" class="Function">⋁</a> <a id="6546" class="Symbol">(</a><a id="6547" href="Data.List.Membership.Setoid.html#1123" class="Function">mapWith∈</a> <a id="6556" href="SecureCompilation.Compiler.html#3061" class="Bound">C₀</a> <a id="6559" class="Symbol">(</a><a id="6560" href="SecureCompilation.Compiler.html#4142" class="Function">Bout</a> <a id="6565" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="6567" href="SecureCompilation.Compiler.html#6620" class="Function">cs⊆</a><a id="6570" class="Symbol">)))</a> <a id="6574" class="Symbol">}</a> <a id="6576" href="Data.Vec.Base.html#5711" class="Function Operator">]</a>
      <a id="6584" class="Symbol">;</a> <a id="6586" href="Bitcoin.Tx.Base.html#1132" class="Field">absLock</a> <a id="6594" class="Symbol">=</a> <a id="6596" class="Number">0</a> <a id="6598" class="Symbol">}</a>
      <a id="6606" class="Keyword">where</a>
        <a id="6620" href="SecureCompilation.Compiler.html#6620" class="Function">cs⊆</a> <a id="6624" class="Symbol">:</a> <a id="6626" href="SecureCompilation.Compiler.html#3061" class="Bound">C₀</a> <a id="6629" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">⊆</a> <a id="6631" href="BitML.Contracts.Helpers.html#9984" class="Function">subterms′</a> <a id="6641" href="SecureCompilation.Compiler.html#3558" class="Function">CS₀</a>
        <a id="6653" href="SecureCompilation.Compiler.html#6620" class="Function">cs⊆</a> <a id="6657" class="Symbol">=</a> <a id="6659" href="BitML.Contracts.Helpers.html#11482" class="Function">subterms⊆ᶜˢ</a> <a id="6671" class="Symbol">{</a><a id="6672" class="Argument">ds</a> <a id="6675" class="Symbol">=</a> <a id="6677" href="SecureCompilation.Compiler.html#3061" class="Bound">C₀</a><a id="6679" class="Symbol">}</a>

    <a id="6686" href="SecureCompilation.Compiler.html#6686" class="Function">Tᵢₙᵢₜ♯</a> <a id="6693" class="Symbol">=</a> <a id="6695" href="Bitcoin.Tx.Crypto.html#720" class="Function">hashTx</a> <a id="6702" href="SecureCompilation.Compiler.html#6340" class="Function">Tᵢₙᵢₜ</a>

    <a id="6713" class="Keyword">infix</a> <a id="6719" class="Number">0</a> <a id="6721" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">_&amp;_&amp;_&amp;_&amp;_&amp;_&amp;_&amp;_&amp;_&amp;_&amp;_</a>
    <a id="6747" class="Keyword">record</a> <a id="6754" href="SecureCompilation.Compiler.html#6754" class="Record">State</a> <a id="6760" class="Symbol">(</a><a id="6761" href="SecureCompilation.Compiler.html#6761" class="Bound">c</a> <a id="6763" class="Symbol">:</a> <a id="6765" href="BitML.Contracts.Induction.html#377" class="Datatype">ℂ</a><a id="6766" class="Symbol">)</a> <a id="6768" class="Symbol">:</a> <a id="6770" class="PrimitiveType">Set</a> <a id="6774" class="Keyword">where</a>
      <a id="6786" class="Keyword">constructor</a> <a id="6798" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">_&amp;_&amp;_&amp;_&amp;_&amp;_&amp;_&amp;_&amp;_&amp;_&amp;_</a>
      <a id="6826" class="Keyword">field</a>
        <a id="6840" href="SecureCompilation.Compiler.html#6840" class="Field">T,o</a>  <a id="6845" class="Symbol">:</a> <a id="6847" href="Bitcoin.Tx.Base.html#343" class="Record">TxInput</a>
        <a id="6863" href="SecureCompilation.Compiler.html#6863" class="Field">curV</a> <a id="6868" class="Symbol">:</a> <a id="6870" href="BitML.BasicTypes.html#229" class="Function">Value</a>
        <a id="6884" href="SecureCompilation.Compiler.html#6884" class="Field">P</a>    <a id="6889" class="Symbol">:</a> <a id="6891" href="Data.Product.html#1369" class="Function">∃</a> <a id="6893" class="Symbol">(</a><a id="6894" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">_⊆</a> <a id="6897" href="SecureCompilation.Compiler.html#3576" class="Function">partG</a><a id="6902" class="Symbol">)</a>
        <a id="6912" href="SecureCompilation.Compiler.html#6912" class="Field">curT</a> <a id="6917" class="Symbol">:</a> <a id="6919" href="BitML.BasicTypes.html#382" class="Function">Time</a>

        <a id="6933" href="SecureCompilation.Compiler.html#6933" class="Field">p⊆</a> <a id="6936" class="Symbol">:</a> <a id="6938" href="BitML.Contracts.Helpers.html#2443" class="Function">participants</a> <a id="6951" href="SecureCompilation.Compiler.html#6761" class="Bound">c</a> <a id="6953" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">⊆</a> <a id="6955" href="SecureCompilation.Compiler.html#3576" class="Function">partG</a>

        <a id="6970" class="Comment">-- Bout : subterms′ c ↦ (∃[ ctx ] Script ctx `Bool)</a>
        <a id="7030" class="Comment">-- K²   : subterms′ c ↦ (partG ↦ KeyPair)</a>
        <a id="7080" href="SecureCompilation.Compiler.html#7080" class="Field">s⊆</a> <a id="7083" class="Symbol">:</a> <a id="7085" href="BitML.Contracts.Helpers.html#9984" class="Function">subterms′</a> <a id="7095" href="SecureCompilation.Compiler.html#6761" class="Bound">c</a> <a id="7097" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">⊆</a> <a id="7099" href="BitML.Contracts.Helpers.html#9984" class="Function">subterms′</a> <a id="7109" href="SecureCompilation.Compiler.html#3558" class="Function">CS₀</a>
        <a id="7121" href="SecureCompilation.Compiler.html#7121" class="Field">∃s</a> <a id="7124" class="Symbol">:</a> <a id="7126" href="Function.Base.html#3544" class="Function Operator">case</a> <a id="7131" href="SecureCompilation.Compiler.html#6761" class="Bound">c</a> <a id="7133" href="Function.Base.html#3544" class="Function Operator">of</a> <a id="7136" class="Symbol">λ{</a> <a id="7139" class="Symbol">(</a><a id="7140" href="BitML.Contracts.Induction.html#393" class="InductiveConstructor">C</a> <a id="7142" class="Symbol">_)</a> <a id="7145" class="Symbol">→</a> <a id="7147" href="Data.Product.html#1369" class="Function">∃</a> <a id="7149" class="Symbol">(</a><a id="7150" href="Data.List.Membership.Setoid.html#882" class="Function Operator">_∈</a> <a id="7153" href="BitML.Contracts.Helpers.html#9984" class="Function">subterms′</a> <a id="7163" href="SecureCompilation.Compiler.html#3558" class="Function">CS₀</a><a id="7166" class="Symbol">)</a> <a id="7168" class="Symbol">;</a> <a id="7170" class="CatchallClause Symbol">_</a> <a id="7172" class="Symbol">→</a> <a id="7174" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a><a id="7175" class="Symbol">}</a>

        <a id="7186" href="SecureCompilation.Compiler.html#7186" class="Field">sechash</a> <a id="7194" class="Symbol">:</a> <a id="7196" href="BitML.Contracts.Helpers.html#3539" class="Function">namesˡ</a> <a id="7203" href="SecureCompilation.Compiler.html#6761" class="Bound">c</a> <a id="7205" href="Prelude.Lists.html#10340" class="Function Operator">↦</a> <a id="7207" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a>
        <a id="7217" href="SecureCompilation.Compiler.html#7217" class="Field">txout</a>   <a id="7225" class="Symbol">:</a> <a id="7227" href="BitML.Contracts.Helpers.html#3608" class="Function">namesʳ</a> <a id="7234" href="SecureCompilation.Compiler.html#6761" class="Bound">c</a> <a id="7236" href="Prelude.Lists.html#10340" class="Function Operator">↦</a> <a id="7238" href="Bitcoin.Tx.Base.html#343" class="Record">TxInput</a>
        <a id="7254" href="SecureCompilation.Compiler.html#7254" class="Field">part</a>    <a id="7262" class="Symbol">:</a> <a id="7264" href="BitML.Contracts.Helpers.html#3608" class="Function">namesʳ</a> <a id="7271" href="SecureCompilation.Compiler.html#6761" class="Bound">c</a> <a id="7273" href="Prelude.Lists.html#10340" class="Function Operator">↦</a> <a id="7275" href="Data.Product.html#1369" class="Function">∃</a> <a id="7277" class="Symbol">(</a><a id="7278" href="Data.List.Membership.Setoid.html#882" class="Function Operator">_∈</a> <a id="7281" href="SecureCompilation.Compiler.html#3576" class="Function">partG</a><a id="7286" class="Symbol">)</a>
        <a id="7296" href="SecureCompilation.Compiler.html#7296" class="Field">val</a>     <a id="7304" class="Symbol">:</a> <a id="7306" href="BitML.Contracts.Helpers.html#3608" class="Function">namesʳ</a> <a id="7313" href="SecureCompilation.Compiler.html#6761" class="Bound">c</a> <a id="7315" href="Prelude.Lists.html#10340" class="Function Operator">↦</a> <a id="7317" href="BitML.BasicTypes.html#229" class="Function">Value</a>
    <a id="7327" class="Keyword">open</a> <a id="7332" href="SecureCompilation.Compiler.html#6754" class="Module">State</a>

    <a id="7343" href="SecureCompilation.Compiler.html#7343" class="Function">Return</a> <a id="7350" class="Symbol">:</a> <a id="7352" href="BitML.Contracts.Induction.html#377" class="Datatype">ℂ</a> <a id="7354" class="Symbol">→</a> <a id="7356" class="PrimitiveType">Set</a>
    <a id="7364" href="SecureCompilation.Compiler.html#7343" class="Function">Return</a> <a id="7371" href="SecureCompilation.Compiler.html#7371" class="Bound">c</a> <a id="7373" class="Symbol">=</a> <a id="7375" href="BitML.Contracts.Helpers.html#9974" class="Function">subterms⁺</a> <a id="7385" href="SecureCompilation.Compiler.html#7371" class="Bound">c</a> <a id="7387" href="Prelude.Lists.html#10340" class="Function Operator">↦</a> <a id="7389" href="Bitcoin.Tx.Base.html#1255" class="Function">∃Tx</a>

    <a id="7398" href="SecureCompilation.Compiler.html#7398" class="Function">↓</a> <a id="7400" class="Symbol">:</a> <a id="7402" href="SecureCompilation.Compiler.html#6754" class="Record">State</a> <a id="7408" class="Symbol">(</a><a id="7409" href="BitML.Contracts.Induction.html#414" class="InductiveConstructor">CS</a> <a id="7412" href="BitML.Contracts.Types.html#1261" class="Generalizable">ds</a><a id="7414" class="Symbol">)</a> <a id="7416" class="Symbol">→</a> <a id="7418" href="BitML.Contracts.Types.html#1261" class="Generalizable">ds</a> <a id="7421" href="Prelude.Lists.html#10218" class="Function Operator">↦′</a> <a id="7424" class="Symbol">(</a><a id="7425" href="SecureCompilation.Compiler.html#6754" class="Record">State</a> <a id="7431" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="7433" href="BitML.Contracts.Induction.html#393" class="InductiveConstructor">C</a><a id="7434" class="Symbol">)</a>
    <a id="7440" href="SecureCompilation.Compiler.html#7398" class="Function">↓</a> <a id="7442" class="Symbol">{</a><a id="7443" class="Argument">ds</a> <a id="7446" class="Symbol">=</a> <a id="7448" href="SecureCompilation.Compiler.html#7448" class="Bound">d</a> <a id="7450" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="7452" href="SecureCompilation.Compiler.html#7452" class="Bound">ds</a><a id="7454" class="Symbol">}</a> <a id="7456" class="Symbol">(</a><a id="7457" href="SecureCompilation.Compiler.html#7457" class="Bound">T,o</a> <a id="7461" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7463" href="SecureCompilation.Compiler.html#7463" class="Bound">v</a> <a id="7465" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7467" href="SecureCompilation.Compiler.html#7467" class="Bound">P⊆</a> <a id="7470" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7472" href="SecureCompilation.Compiler.html#7472" class="Bound">t</a> <a id="7474" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7476" href="SecureCompilation.Compiler.html#7476" class="Bound">p⊆</a> <a id="7479" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7481" href="SecureCompilation.Compiler.html#7481" class="Bound">s⊆</a> <a id="7484" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7486" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="7489" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7491" href="SecureCompilation.Compiler.html#7491" class="Bound">sechash</a> <a id="7499" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7501" href="SecureCompilation.Compiler.html#7501" class="Bound">txout</a> <a id="7507" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7509" href="SecureCompilation.Compiler.html#7509" class="Bound">part</a> <a id="7514" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7516" href="SecureCompilation.Compiler.html#7516" class="Bound">val</a><a id="7519" class="Symbol">)</a> <a id="7521" class="Symbol">(</a><a id="7522" href="Data.List.Relation.Unary.Any.html#1174" class="InductiveConstructor">here</a> <a id="7527" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="7531" class="Symbol">)</a>
      <a id="7539" class="Symbol">=</a> <a id="7541" href="SecureCompilation.Compiler.html#7457" class="Bound">T,o</a> <a id="7545" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7547" href="SecureCompilation.Compiler.html#7463" class="Bound">v</a> <a id="7549" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7551" href="SecureCompilation.Compiler.html#7467" class="Bound">P⊆</a> <a id="7554" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7556" href="SecureCompilation.Compiler.html#7472" class="Bound">t</a> <a id="7558" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7560" href="SecureCompilation.Compiler.html#7476" class="Bound">p⊆</a> <a id="7563" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="7565" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a> <a id="7572" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7574" href="SecureCompilation.Compiler.html#7815" class="Function">s⊆′</a> <a id="7578" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7580" class="Symbol">(</a><a id="7581" href="SecureCompilation.Compiler.html#7448" class="Bound">d</a> <a id="7583" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7585" href="SecureCompilation.Compiler.html#7481" class="Bound">s⊆</a> <a id="7588" class="Symbol">(</a><a id="7589" href="Data.List.Relation.Unary.Any.html#1174" class="InductiveConstructor">here</a> <a id="7594" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="7598" class="Symbol">))</a>
      <a id="7607" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7609" href="SecureCompilation.Compiler.html#7491" class="Bound">sechash</a> <a id="7617" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="7619" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="7630" href="Data.Sum.html#734" class="Function">isInj₁</a> <a id="7637" href="SecureCompilation.Compiler.html#7756" class="Function">n⊆</a> <a id="7640" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7642" href="SecureCompilation.Compiler.html#7501" class="Bound">txout</a> <a id="7648" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="7650" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="7661" href="Data.Sum.html#817" class="Function">isInj₂</a> <a id="7668" href="SecureCompilation.Compiler.html#7756" class="Function">n⊆</a>
      <a id="7677" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7679" href="SecureCompilation.Compiler.html#7509" class="Bound">part</a> <a id="7684" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="7686" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="7697" href="Data.Sum.html#817" class="Function">isInj₂</a> <a id="7704" href="SecureCompilation.Compiler.html#7756" class="Function">n⊆</a> <a id="7707" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7709" href="SecureCompilation.Compiler.html#7516" class="Bound">val</a> <a id="7713" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="7715" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="7726" href="Data.Sum.html#817" class="Function">isInj₂</a> <a id="7733" href="SecureCompilation.Compiler.html#7756" class="Function">n⊆</a>
      <a id="7742" class="Keyword">where</a>
        <a id="7756" href="SecureCompilation.Compiler.html#7756" class="Function">n⊆</a> <a id="7759" class="Symbol">:</a> <a id="7761" href="BitML.Contracts.Helpers.html#3482" class="Function">names</a> <a id="7767" href="SecureCompilation.Compiler.html#7448" class="Bound">d</a> <a id="7769" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">⊆</a> <a id="7771" href="BitML.Contracts.Helpers.html#3482" class="Function">names</a> <a id="7777" class="Symbol">(</a><a id="7778" href="SecureCompilation.Compiler.html#7448" class="Bound">d</a> <a id="7780" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="7782" href="SecureCompilation.Compiler.html#7452" class="Bound">ds</a><a id="7784" class="Symbol">)</a>
        <a id="7794" href="SecureCompilation.Compiler.html#7756" class="Function">n⊆</a> <a id="7797" class="Symbol">=</a> <a id="7799" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a>

        <a id="7815" href="SecureCompilation.Compiler.html#7815" class="Function">s⊆′</a> <a id="7819" class="Symbol">:</a> <a id="7821" href="BitML.Contracts.Helpers.html#9984" class="Function">subterms′</a> <a id="7831" class="Symbol">(</a><a id="7832" href="BitML.Contracts.Induction.html#393" class="InductiveConstructor">C</a> <a id="7834" href="SecureCompilation.Compiler.html#7448" class="Bound">d</a><a id="7835" class="Symbol">)</a> <a id="7837" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">⊆</a> <a id="7839" href="BitML.Contracts.Helpers.html#9984" class="Function">subterms′</a> <a id="7849" href="SecureCompilation.Compiler.html#3558" class="Function">CS₀</a>
        <a id="7861" href="SecureCompilation.Compiler.html#7815" class="Function">s⊆′</a> <a id="7865" class="Symbol">=</a> <a id="7867" href="SecureCompilation.Compiler.html#7481" class="Bound">s⊆</a> <a id="7870" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="7872" href="Data.List.Relation.Unary.Any.html#1227" class="InductiveConstructor">there</a> <a id="7878" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="7880" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a>
    <a id="7891" href="SecureCompilation.Compiler.html#7398" class="Function">↓</a> <a id="7893" class="Symbol">{</a><a id="7894" class="Argument">ds</a> <a id="7897" class="Symbol">=</a> <a id="7899" href="SecureCompilation.Compiler.html#7899" class="Bound">d</a> <a id="7901" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="7903" href="SecureCompilation.Compiler.html#7903" class="Bound">ds</a><a id="7905" class="Symbol">}</a> <a id="7907" class="Symbol">(</a><a id="7908" href="SecureCompilation.Compiler.html#7908" class="Bound">T,o</a> <a id="7912" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7914" href="SecureCompilation.Compiler.html#7914" class="Bound">v</a> <a id="7916" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7918" href="SecureCompilation.Compiler.html#7918" class="Bound">P⊆</a> <a id="7921" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7923" href="SecureCompilation.Compiler.html#7923" class="Bound">t</a> <a id="7925" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7927" href="SecureCompilation.Compiler.html#7927" class="Bound">p⊆</a> <a id="7930" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7932" href="SecureCompilation.Compiler.html#7932" class="Bound">s⊆</a> <a id="7935" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7937" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="7940" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7942" href="SecureCompilation.Compiler.html#7942" class="Bound">sechash</a> <a id="7950" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7952" href="SecureCompilation.Compiler.html#7952" class="Bound">txout</a> <a id="7958" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7960" href="SecureCompilation.Compiler.html#7960" class="Bound">part</a> <a id="7965" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="7967" href="SecureCompilation.Compiler.html#7967" class="Bound">val</a><a id="7970" class="Symbol">)</a> <a id="7972" class="Symbol">(</a><a id="7973" href="Data.List.Relation.Unary.Any.html#1227" class="InductiveConstructor">there</a> <a id="7979" href="SecureCompilation.Compiler.html#7979" class="Bound">x∈</a><a id="7981" class="Symbol">)</a>
      <a id="7989" class="Symbol">=</a> <a id="7991" href="SecureCompilation.Compiler.html#7398" class="Function">↓</a> <a id="7993" class="Symbol">{</a><a id="7994" class="Argument">ds</a> <a id="7997" class="Symbol">=</a> <a id="7999" href="SecureCompilation.Compiler.html#7903" class="Bound">ds</a><a id="8001" class="Symbol">}</a> <a id="8003" class="Symbol">(</a><a id="8004" href="SecureCompilation.Compiler.html#7908" class="Bound">T,o</a> <a id="8008" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8010" href="SecureCompilation.Compiler.html#7914" class="Bound">v</a> <a id="8012" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8014" href="SecureCompilation.Compiler.html#7918" class="Bound">P⊆</a> <a id="8017" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8019" href="SecureCompilation.Compiler.html#7923" class="Bound">t</a>
      <a id="8027" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8029" href="SecureCompilation.Compiler.html#7927" class="Bound">p⊆</a> <a id="8032" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8034" class="Symbol">(</a><a id="8035" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="8042" class="Symbol">_)</a> <a id="8045" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8047" href="SecureCompilation.Compiler.html#7932" class="Bound">s⊆</a> <a id="8050" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8052" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="8059" class="Symbol">_</a> <a id="8061" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8063" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>
      <a id="8072" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8074" href="SecureCompilation.Compiler.html#7942" class="Bound">sechash</a> <a id="8082" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8084" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="8095" href="Data.Sum.html#734" class="Function">isInj₁</a> <a id="8102" href="SecureCompilation.Compiler.html#8225" class="Function">n⊆</a> <a id="8105" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8107" href="SecureCompilation.Compiler.html#7952" class="Bound">txout</a> <a id="8113" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8115" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="8126" href="Data.Sum.html#817" class="Function">isInj₂</a> <a id="8133" href="SecureCompilation.Compiler.html#8225" class="Function">n⊆</a>
      <a id="8142" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8144" href="SecureCompilation.Compiler.html#7960" class="Bound">part</a> <a id="8149" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8151" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="8162" href="Data.Sum.html#817" class="Function">isInj₂</a> <a id="8169" href="SecureCompilation.Compiler.html#8225" class="Function">n⊆</a> <a id="8172" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8174" href="SecureCompilation.Compiler.html#7967" class="Bound">val</a> <a id="8178" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8180" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="8191" href="Data.Sum.html#817" class="Function">isInj₂</a> <a id="8198" href="SecureCompilation.Compiler.html#8225" class="Function">n⊆</a><a id="8200" class="Symbol">)</a> <a id="8202" href="SecureCompilation.Compiler.html#7979" class="Bound">x∈</a>
      <a id="8211" class="Keyword">where</a>
        <a id="8225" href="SecureCompilation.Compiler.html#8225" class="Function">n⊆</a> <a id="8228" class="Symbol">:</a> <a id="8230" href="BitML.Contracts.Helpers.html#3482" class="Function">names</a> <a id="8236" href="SecureCompilation.Compiler.html#7903" class="Bound">ds</a> <a id="8239" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">⊆</a> <a id="8241" href="BitML.Contracts.Helpers.html#3482" class="Function">names</a> <a id="8247" class="Symbol">(</a><a id="8248" href="SecureCompilation.Compiler.html#7899" class="Bound">d</a> <a id="8250" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="8252" href="SecureCompilation.Compiler.html#7903" class="Bound">ds</a><a id="8254" class="Symbol">)</a>
        <a id="8264" href="SecureCompilation.Compiler.html#8225" class="Function">n⊆</a> <a id="8267" class="Symbol">=</a> <a id="8269" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="8276" class="Symbol">_</a>

    <a id="8283" href="SecureCompilation.Compiler.html#8283" class="Function">↓ᵛ</a> <a id="8286" class="Symbol">:</a> <a id="8288" href="SecureCompilation.Compiler.html#6754" class="Record">State</a> <a id="8294" class="Symbol">(</a><a id="8295" href="BitML.Contracts.Induction.html#436" class="InductiveConstructor">VCS</a> <a id="8299" href="BitML.Contracts.Types.html#1287" class="Generalizable">vcs</a><a id="8302" class="Symbol">)</a> <a id="8304" class="Symbol">→</a> <a id="8306" href="Data.List.Base.html#1497" class="Function">map</a> <a id="8310" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="8316" href="BitML.Contracts.Types.html#1287" class="Generalizable">vcs</a> <a id="8320" href="Prelude.Lists.html#10218" class="Function Operator">↦′</a> <a id="8323" class="Symbol">(</a><a id="8324" href="SecureCompilation.Compiler.html#6754" class="Record">State</a> <a id="8330" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8332" href="BitML.Contracts.Induction.html#414" class="InductiveConstructor">CS</a><a id="8334" class="Symbol">)</a>
    <a id="8340" href="SecureCompilation.Compiler.html#8283" class="Function">↓ᵛ</a> <a id="8343" class="Symbol">{</a><a id="8344" class="Argument">vcs</a> <a id="8348" class="Symbol">=</a> <a id="8350" class="Symbol">(</a><a id="8351" href="SecureCompilation.Compiler.html#8351" class="Bound">v</a> <a id="8353" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8355" href="SecureCompilation.Compiler.html#8355" class="Bound">cs</a><a id="8357" class="Symbol">)</a> <a id="8359" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="8361" href="SecureCompilation.Compiler.html#8361" class="Bound">vcs</a><a id="8364" class="Symbol">}</a> <a id="8366" class="Symbol">(</a><a id="8367" href="SecureCompilation.Compiler.html#8367" class="Bound">T,o</a> <a id="8371" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8373" class="Symbol">_</a> <a id="8375" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8377" href="SecureCompilation.Compiler.html#8377" class="Bound">P⊆</a> <a id="8380" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8382" href="SecureCompilation.Compiler.html#8382" class="Bound">t</a> <a id="8384" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8386" href="SecureCompilation.Compiler.html#8386" class="Bound">p⊆</a> <a id="8389" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8391" href="SecureCompilation.Compiler.html#8391" class="Bound">s⊆</a> <a id="8394" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8396" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="8399" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8401" href="SecureCompilation.Compiler.html#8401" class="Bound">sechash</a> <a id="8409" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8411" href="SecureCompilation.Compiler.html#8411" class="Bound">txout</a> <a id="8417" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8419" href="SecureCompilation.Compiler.html#8419" class="Bound">part</a> <a id="8424" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8426" href="SecureCompilation.Compiler.html#8426" class="Bound">val</a><a id="8429" class="Symbol">)</a> <a id="8431" class="Symbol">(</a><a id="8432" href="Data.List.Relation.Unary.Any.html#1174" class="InductiveConstructor">here</a> <a id="8437" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="8441" class="Symbol">)</a>
      <a id="8449" class="Symbol">=</a> <a id="8451" href="SecureCompilation.Compiler.html#8367" class="Bound">T,o</a> <a id="8455" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8457" href="SecureCompilation.Compiler.html#8351" class="Bound">v</a> <a id="8459" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8461" href="SecureCompilation.Compiler.html#8377" class="Bound">P⊆</a> <a id="8464" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8466" href="SecureCompilation.Compiler.html#8382" class="Bound">t</a> <a id="8468" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8470" href="SecureCompilation.Compiler.html#8386" class="Bound">p⊆</a> <a id="8473" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8475" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a> <a id="8482" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8484" href="SecureCompilation.Compiler.html#8391" class="Bound">s⊆</a> <a id="8487" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8489" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a> <a id="8496" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8498" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>
      <a id="8507" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8509" href="SecureCompilation.Compiler.html#8401" class="Bound">sechash</a> <a id="8517" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8519" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="8530" href="Data.Sum.html#734" class="Function">isInj₁</a> <a id="8537" href="SecureCompilation.Compiler.html#8656" class="Function">n⊆</a> <a id="8540" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8542" href="SecureCompilation.Compiler.html#8411" class="Bound">txout</a> <a id="8548" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8550" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="8561" href="Data.Sum.html#817" class="Function">isInj₂</a> <a id="8568" href="SecureCompilation.Compiler.html#8656" class="Function">n⊆</a>
      <a id="8577" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8579" href="SecureCompilation.Compiler.html#8419" class="Bound">part</a> <a id="8584" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8586" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="8597" href="Data.Sum.html#817" class="Function">isInj₂</a> <a id="8604" href="SecureCompilation.Compiler.html#8656" class="Function">n⊆</a> <a id="8607" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8609" href="SecureCompilation.Compiler.html#8426" class="Bound">val</a> <a id="8613" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8615" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="8626" href="Data.Sum.html#817" class="Function">isInj₂</a> <a id="8633" href="SecureCompilation.Compiler.html#8656" class="Function">n⊆</a>
      <a id="8642" class="Keyword">where</a>
        <a id="8656" href="SecureCompilation.Compiler.html#8656" class="Function">n⊆</a> <a id="8659" class="Symbol">:</a> <a id="8661" href="BitML.Contracts.Helpers.html#3482" class="Function">names</a> <a id="8667" href="SecureCompilation.Compiler.html#8355" class="Bound">cs</a> <a id="8670" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">⊆</a> <a id="8672" href="BitML.Contracts.Helpers.html#3482" class="Function">names</a> <a id="8678" class="Symbol">((</a><a id="8680" href="SecureCompilation.Compiler.html#8351" class="Bound">v</a> <a id="8682" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8684" href="SecureCompilation.Compiler.html#8355" class="Bound">cs</a><a id="8686" class="Symbol">)</a> <a id="8688" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="8690" href="SecureCompilation.Compiler.html#8361" class="Bound">vcs</a><a id="8693" class="Symbol">)</a>
        <a id="8703" href="SecureCompilation.Compiler.html#8656" class="Function">n⊆</a> <a id="8706" class="Symbol">=</a> <a id="8708" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a>
    <a id="8719" href="SecureCompilation.Compiler.html#8283" class="Function">↓ᵛ</a> <a id="8722" class="Symbol">{</a><a id="8723" class="Argument">vcs</a> <a id="8727" class="Symbol">=</a> <a id="8729" class="Symbol">(</a><a id="8730" href="SecureCompilation.Compiler.html#8730" class="Bound">v</a> <a id="8732" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8734" href="SecureCompilation.Compiler.html#8734" class="Bound">cs</a><a id="8736" class="Symbol">)</a> <a id="8738" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="8740" href="SecureCompilation.Compiler.html#8740" class="Bound">vcs</a><a id="8743" class="Symbol">}</a> <a id="8745" class="Symbol">((</a><a id="8747" href="SecureCompilation.Compiler.html#8747" class="Bound">T</a> <a id="8749" href="Bitcoin.Tx.Base.html#377" class="InductiveConstructor Operator">at</a> <a id="8752" href="SecureCompilation.Compiler.html#8752" class="Bound">o</a><a id="8753" class="Symbol">)</a> <a id="8755" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8757" class="Symbol">_</a> <a id="8759" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8761" href="SecureCompilation.Compiler.html#8761" class="Bound">P⊆</a> <a id="8764" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8766" href="SecureCompilation.Compiler.html#8766" class="Bound">t</a> <a id="8768" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8770" href="SecureCompilation.Compiler.html#8770" class="Bound">p⊆</a> <a id="8773" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8775" href="SecureCompilation.Compiler.html#8775" class="Bound">s⊆</a> <a id="8778" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8780" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="8783" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8785" href="SecureCompilation.Compiler.html#8785" class="Bound">sechash</a> <a id="8793" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8795" href="SecureCompilation.Compiler.html#8795" class="Bound">txout</a> <a id="8801" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8803" href="SecureCompilation.Compiler.html#8803" class="Bound">part</a> <a id="8808" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8810" href="SecureCompilation.Compiler.html#8810" class="Bound">val</a><a id="8813" class="Symbol">)</a> <a id="8815" class="Symbol">(</a><a id="8816" href="Data.List.Relation.Unary.Any.html#1227" class="InductiveConstructor">there</a> <a id="8822" href="SecureCompilation.Compiler.html#8822" class="Bound">x∈</a><a id="8824" class="Symbol">)</a>
      <a id="8832" class="Symbol">=</a> <a id="8834" href="SecureCompilation.Compiler.html#8283" class="Function">↓ᵛ</a> <a id="8837" class="Symbol">{</a><a id="8838" class="Argument">vcs</a> <a id="8842" class="Symbol">=</a> <a id="8844" href="SecureCompilation.Compiler.html#8740" class="Bound">vcs</a><a id="8847" class="Symbol">}</a> <a id="8849" class="Symbol">((</a><a id="8851" href="SecureCompilation.Compiler.html#8747" class="Bound">T</a> <a id="8853" href="Bitcoin.Tx.Base.html#377" class="InductiveConstructor Operator">at</a> <a id="8856" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="8860" href="SecureCompilation.Compiler.html#8752" class="Bound">o</a><a id="8861" class="Symbol">)</a> <a id="8863" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8865" href="SecureCompilation.Compiler.html#8730" class="Bound">v</a> <a id="8867" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8869" href="SecureCompilation.Compiler.html#8761" class="Bound">P⊆</a> <a id="8872" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8874" href="SecureCompilation.Compiler.html#8766" class="Bound">t</a>
      <a id="8882" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8884" href="SecureCompilation.Compiler.html#8770" class="Bound">p⊆</a> <a id="8887" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8889" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="8896" class="Symbol">_</a> <a id="8898" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8900" href="SecureCompilation.Compiler.html#8775" class="Bound">s⊆</a> <a id="8903" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8905" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="8912" class="Symbol">_</a> <a id="8914" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8916" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>
      <a id="8925" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8927" href="SecureCompilation.Compiler.html#8785" class="Bound">sechash</a> <a id="8935" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8937" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="8948" href="Data.Sum.html#734" class="Function">isInj₁</a> <a id="8955" href="SecureCompilation.Compiler.html#9078" class="Function">n⊆</a> <a id="8958" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8960" href="SecureCompilation.Compiler.html#8795" class="Bound">txout</a> <a id="8966" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8968" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="8979" href="Data.Sum.html#817" class="Function">isInj₂</a> <a id="8986" href="SecureCompilation.Compiler.html#9078" class="Function">n⊆</a>
      <a id="8995" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="8997" href="SecureCompilation.Compiler.html#8803" class="Bound">part</a> <a id="9002" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="9004" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="9015" href="Data.Sum.html#817" class="Function">isInj₂</a> <a id="9022" href="SecureCompilation.Compiler.html#9078" class="Function">n⊆</a> <a id="9025" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9027" href="SecureCompilation.Compiler.html#8810" class="Bound">val</a> <a id="9031" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="9033" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="9044" href="Data.Sum.html#817" class="Function">isInj₂</a> <a id="9051" href="SecureCompilation.Compiler.html#9078" class="Function">n⊆</a><a id="9053" class="Symbol">)</a> <a id="9055" href="SecureCompilation.Compiler.html#8822" class="Bound">x∈</a>
      <a id="9064" class="Keyword">where</a>
        <a id="9078" href="SecureCompilation.Compiler.html#9078" class="Function">n⊆</a> <a id="9081" class="Symbol">:</a> <a id="9083" href="BitML.Contracts.Helpers.html#3482" class="Function">names</a> <a id="9089" href="SecureCompilation.Compiler.html#8740" class="Bound">vcs</a> <a id="9093" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">⊆</a> <a id="9095" href="BitML.Contracts.Helpers.html#3482" class="Function">names</a> <a id="9101" class="Symbol">((</a><a id="9103" href="SecureCompilation.Compiler.html#8730" class="Bound">v</a> <a id="9105" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9107" href="SecureCompilation.Compiler.html#8734" class="Bound">cs</a><a id="9109" class="Symbol">)</a> <a id="9111" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="9113" href="SecureCompilation.Compiler.html#8740" class="Bound">vcs</a><a id="9116" class="Symbol">)</a>
        <a id="9126" href="SecureCompilation.Compiler.html#9078" class="Function">n⊆</a> <a id="9129" class="Symbol">=</a> <a id="9131" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="9138" class="Symbol">_</a>

    <a id="9145" href="SecureCompilation.Compiler.html#9145" class="Function">go</a> <a id="9148" class="Symbol">:</a> <a id="9150" class="Symbol">∀</a> <a id="9152" href="SecureCompilation.Compiler.html#9152" class="Bound">c</a> <a id="9154" class="Symbol">→</a> <a id="9156" class="Symbol">(∀</a> <a id="9159" href="SecureCompilation.Compiler.html#9159" class="Bound">c′</a> <a id="9162" class="Symbol">→</a> <a id="9164" href="SecureCompilation.Compiler.html#9159" class="Bound">c′</a> <a id="9167" href="BitML.Contracts.Induction.html#463" class="Datatype Operator">≺</a> <a id="9169" href="SecureCompilation.Compiler.html#9152" class="Bound">c</a> <a id="9171" class="Symbol">→</a> <a id="9173" href="SecureCompilation.Compiler.html#6754" class="Record">State</a> <a id="9179" href="SecureCompilation.Compiler.html#9159" class="Bound">c′</a> <a id="9182" class="Symbol">→</a> <a id="9184" href="SecureCompilation.Compiler.html#7343" class="Function">Return</a> <a id="9191" href="SecureCompilation.Compiler.html#9159" class="Bound">c′</a><a id="9193" class="Symbol">)</a> <a id="9195" class="Symbol">→</a> <a id="9197" href="SecureCompilation.Compiler.html#6754" class="Record">State</a> <a id="9203" href="SecureCompilation.Compiler.html#9152" class="Bound">c</a> <a id="9205" class="Symbol">→</a> <a id="9207" href="SecureCompilation.Compiler.html#7343" class="Function">Return</a> <a id="9214" href="SecureCompilation.Compiler.html#9152" class="Bound">c</a>
    <a id="9220" href="SecureCompilation.Compiler.html#9145" class="Function">go</a> <a id="9223" class="Symbol">(</a><a id="9224" href="BitML.Contracts.Induction.html#393" class="InductiveConstructor">C</a> <a id="9226" href="SecureCompilation.Compiler.html#9226" class="Bound">c</a><a id="9227" class="Symbol">)</a> <a id="9229" href="SecureCompilation.Compiler.html#9229" class="Bound">f</a> <a id="9231" class="Symbol">(</a><a id="9232" href="SecureCompilation.Compiler.html#9232" class="Bound">T,o</a> <a id="9236" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9238" href="SecureCompilation.Compiler.html#9238" class="Bound">v</a> <a id="9240" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9242" class="Symbol">(</a><a id="9243" href="SecureCompilation.Compiler.html#9243" class="Bound">P</a> <a id="9245" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9247" href="SecureCompilation.Compiler.html#9247" class="Bound">P⊆</a><a id="9249" class="Symbol">)</a> <a id="9251" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9253" href="SecureCompilation.Compiler.html#9253" class="Bound">t</a> <a id="9255" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9257" href="SecureCompilation.Compiler.html#9257" class="Bound">p⊆</a> <a id="9260" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9262" href="SecureCompilation.Compiler.html#9262" class="Bound">s⊆</a> <a id="9265" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9267" href="SecureCompilation.Compiler.html#9267" class="Bound">∃s</a><a id="9269" class="Symbol">@(</a><a id="9271" href="SecureCompilation.Compiler.html#9271" class="Bound">Dₚ</a> <a id="9274" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9276" href="SecureCompilation.Compiler.html#9276" class="Bound">Dₚ∈</a><a id="9279" class="Symbol">)</a> <a id="9281" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9283" href="SecureCompilation.Compiler.html#9283" class="Bound">sechash</a> <a id="9291" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9293" href="SecureCompilation.Compiler.html#9293" class="Bound">txout</a> <a id="9299" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9301" href="SecureCompilation.Compiler.html#9301" class="Bound">part</a> <a id="9306" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9308" href="SecureCompilation.Compiler.html#9308" class="Bound">val</a><a id="9311" class="Symbol">)</a>
      <a id="9319" class="Keyword">with</a> <a id="9324" href="SecureCompilation.Compiler.html#9226" class="Bound">c</a>
    <a id="9330" class="Comment">-- Bd</a>
    <a id="9340" class="Symbol">...</a> <a id="9344" class="Symbol">|</a> <a id="9346" href="BitML.Contracts.Types.html#886" class="InductiveConstructor">withdraw</a> <a id="9355" href="SecureCompilation.Compiler.html#9355" class="Bound">A</a> <a id="9357" class="Symbol">=</a> <a id="9359" class="Symbol">λ</a>
      <a id="9367" class="Symbol">{(</a><a id="9369" href="Data.List.Relation.Unary.Any.html#1174" class="InductiveConstructor">here</a> <a id="9374" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="9378" class="Symbol">)</a> <a id="9380" class="Symbol">→</a>
        <a id="9390" href="Data.Product.html#2196" class="Function Operator">-,</a> <a id="9393" href="Data.Product.html#2196" class="Function Operator">-,</a> <a id="9396" href="Bitcoin.Tx.Crypto.html#1043" class="Function">sig⋆</a> <a id="9401" href="Data.Vec.Base.html#5711" class="Function Operator">V.[</a> <a id="9405" href="Data.List.Membership.Setoid.html#1123" class="Function">mapWith∈</a> <a id="9414" class="Bound">P</a> <a id="9416" class="Symbol">(</a><a id="9417" href="SecureCompilation.Compiler.html#3121" class="Bound">K²</a> <a id="9420" class="Bound">Dₚ∈</a> <a id="9424" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="9426" class="Bound">P⊆</a><a id="9428" class="Symbol">)</a> <a id="9430" href="Data.Vec.Base.html#5711" class="Function Operator">]</a> <a id="9432" class="Keyword">record</a>
          <a id="9449" class="Symbol">{</a> <a id="9451" href="Bitcoin.Tx.Base.html#940" class="Field">inputs</a>  <a id="9459" class="Symbol">=</a> <a id="9461" href="Data.Vec.Base.html#5711" class="Function Operator">V.[</a> <a id="9465" class="Bound">T,o</a> <a id="9469" href="Data.Vec.Base.html#5711" class="Function Operator">]</a>
          <a id="9481" class="Symbol">;</a> <a id="9483" href="Bitcoin.Tx.Base.html#981" class="Field">wit</a>     <a id="9491" class="Symbol">=</a> <a id="9493" href="Bitcoin.Tx.Crypto.html#552" class="Function">wit⊥</a>
          <a id="9508" class="Symbol">;</a> <a id="9510" href="Bitcoin.Tx.Base.html#1036" class="Field">relLock</a> <a id="9518" class="Symbol">=</a> <a id="9520" href="Data.Vec.Base.html#5711" class="Function Operator">V.[</a> <a id="9524" class="Number">0</a> <a id="9526" href="Data.Vec.Base.html#5711" class="Function Operator">]</a>
          <a id="9538" class="Symbol">;</a> <a id="9540" href="Bitcoin.Tx.Base.html#1090" class="Field">outputs</a> <a id="9548" class="Symbol">=</a> <a id="9550" href="Data.Vec.Base.html#5711" class="Function Operator">V.[</a> <a id="9554" href="Bitcoin.Script.Base.html#351" class="InductiveConstructor">Ctx</a> <a id="9558" class="Number">1</a> <a id="9560" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9562" class="Keyword">record</a> <a id="9569" class="Symbol">{</a> <a id="9571" href="Bitcoin.Tx.Base.html#658" class="Field">value</a> <a id="9577" class="Symbol">=</a> <a id="9579" class="Bound">v</a> <a id="9581" class="Symbol">;</a> <a id="9583" href="Bitcoin.Tx.Base.html#680" class="Field">validator</a> <a id="9593" class="Symbol">=</a> <a id="9595" href="Bitcoin.Script.Base.html#2150" class="InductiveConstructor Operator">ƛ</a> <a id="9597" href="Bitcoin.Script.Base.html#1389" class="InductiveConstructor">versig</a> <a id="9604" href="Data.List.Base.html#4458" class="Function Operator">[</a> <a id="9606" href="SecureCompilation.Compiler.html#3119" class="Bound">K</a> <a id="9608" class="Symbol">{</a><a id="9609" href="SecureCompilation.Compiler.html#9355" class="Bound">A</a><a id="9610" class="Symbol">}</a> <a id="9612" class="Symbol">(</a><a id="9613" class="Bound">p⊆</a> <a id="9616" class="Symbol">(</a><a id="9617" href="Data.List.Relation.Unary.Any.html#1174" class="InductiveConstructor">here</a> <a id="9622" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="9626" class="Symbol">))</a> <a id="9629" href="Data.List.Base.html#4458" class="Function Operator">]</a> <a id="9631" href="Data.List.Base.html#4458" class="Function Operator">[</a> <a id="9633" href="Data.Fin.Patterns.html#390" class="InductiveConstructor">0F</a> <a id="9636" href="Data.List.Base.html#4458" class="Function Operator">]</a> <a id="9638" class="Symbol">}</a> <a id="9640" href="Data.Vec.Base.html#5711" class="Function Operator">]</a>
          <a id="9652" class="Symbol">;</a> <a id="9654" href="Bitcoin.Tx.Base.html#1132" class="Field">absLock</a> <a id="9662" class="Symbol">=</a> <a id="9664" class="Bound">t</a> <a id="9666" class="Symbol">}</a>
      <a id="9674" class="Symbol">}</a>
    <a id="9680" class="Symbol">...</a> <a id="9684" class="Symbol">|</a> <a id="9686" href="SecureCompilation.Compiler.html#9686" class="Bound">A</a> <a id="9688" href="BitML.Contracts.Types.html#1021" class="InductiveConstructor Operator">⇒</a> <a id="9690" href="SecureCompilation.Compiler.html#9690" class="Bound">d</a>
        <a id="9700" class="Symbol">=</a> <a id="9702" class="Bound">f</a> <a id="9704" class="Symbol">(</a><a id="9705" href="BitML.Contracts.Induction.html#393" class="InductiveConstructor">C</a> <a id="9707" href="SecureCompilation.Compiler.html#9690" class="Bound">d</a><a id="9708" class="Symbol">)</a> <a id="9710" href="BitML.Contracts.Induction.html#630" class="InductiveConstructor">≺-auth</a> <a id="9717" class="Symbol">(</a><a id="9718" class="Bound">T,o</a> <a id="9722" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9724" class="Bound">v</a> <a id="9726" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9728" class="Symbol">(</a><a id="9729" class="Bound">P</a> <a id="9731" href="Prelude.DecEq.html#5420" class="Function Operator">\\</a> <a id="9734" href="Data.List.Base.html#4458" class="Function Operator">[</a> <a id="9736" href="SecureCompilation.Compiler.html#9686" class="Bound">A</a> <a id="9738" href="Data.List.Base.html#4458" class="Function Operator">]</a> <a id="9740" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9742" class="Bound">P⊆</a> <a id="9745" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="9747" href="Prelude.DecEq.html#6293" class="Postulate">\\-⊆</a><a id="9751" class="Symbol">)</a> <a id="9753" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9755" class="Bound">t</a> <a id="9757" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9759" class="Bound">p⊆</a> <a id="9762" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="9764" href="Data.List.Relation.Unary.Any.html#1227" class="InductiveConstructor">there</a> <a id="9770" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9772" class="Bound">s⊆</a> <a id="9775" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9777" class="Bound">∃s</a> <a id="9780" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9782" class="Bound">sechash</a> <a id="9790" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9792" class="Bound">txout</a> <a id="9798" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9800" class="Bound">part</a> <a id="9805" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9807" class="Bound">val</a><a id="9810" class="Symbol">)</a>
    <a id="9816" class="Symbol">...</a> <a id="9820" class="Symbol">|</a> <a id="9822" href="BitML.Contracts.Types.html#1094" class="InductiveConstructor Operator">after</a> <a id="9828" href="SecureCompilation.Compiler.html#9828" class="Bound">t′</a> <a id="9831" href="BitML.Contracts.Types.html#1094" class="InductiveConstructor Operator">⇒</a> <a id="9833" href="SecureCompilation.Compiler.html#9833" class="Bound">d</a>
        <a id="9843" class="Symbol">=</a> <a id="9845" class="Bound">f</a> <a id="9847" class="Symbol">(</a><a id="9848" href="BitML.Contracts.Induction.html#393" class="InductiveConstructor">C</a> <a id="9850" href="SecureCompilation.Compiler.html#9833" class="Bound">d</a><a id="9851" class="Symbol">)</a> <a id="9853" href="BitML.Contracts.Induction.html#660" class="InductiveConstructor">≺-after</a> <a id="9861" class="Symbol">(</a><a id="9862" class="Bound">T,o</a> <a id="9866" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9868" class="Bound">v</a> <a id="9870" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9872" class="Symbol">(</a><a id="9873" class="Bound">P</a> <a id="9875" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9877" class="Bound">P⊆</a><a id="9879" class="Symbol">)</a> <a id="9881" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9883" class="Bound">t</a> <a id="9885" href="Data.Nat.Base.html#1640" class="Function Operator">⊔</a> <a id="9887" href="SecureCompilation.Compiler.html#9828" class="Bound">t′</a> <a id="9890" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9892" class="Bound">p⊆</a> <a id="9895" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9897" class="Bound">s⊆</a> <a id="9900" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9902" class="Bound">∃s</a> <a id="9905" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9907" class="Bound">sechash</a> <a id="9915" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9917" class="Bound">txout</a> <a id="9923" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9925" class="Bound">part</a> <a id="9930" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="9932" class="Bound">val</a><a id="9935" class="Symbol">)</a>
    <a id="9941" class="Comment">-- Bc</a>
    <a id="9951" class="Symbol">...</a> <a id="9955" class="Symbol">|</a> <a id="9957" href="SecureCompilation.Compiler.html#9957" class="Bound">c′</a><a id="9959" class="Symbol">@(</a><a id="9961" href="BitML.Contracts.Types.html#771" class="InductiveConstructor Operator">put</a> <a id="9965" href="SecureCompilation.Compiler.html#9965" class="Bound">zs</a> <a id="9968" href="BitML.Contracts.Types.html#771" class="InductiveConstructor Operator">&amp;reveal</a> <a id="9976" href="SecureCompilation.Compiler.html#9976" class="Bound">as</a> <a id="9979" href="BitML.Contracts.Types.html#771" class="InductiveConstructor Operator">if</a> <a id="9982" href="SecureCompilation.Compiler.html#9982" class="Bound">p</a> <a id="9984" href="BitML.Contracts.Types.html#771" class="InductiveConstructor Operator">⇒</a> <a id="9986" href="SecureCompilation.Compiler.html#9986" class="Bound">cs</a><a id="9988" class="Symbol">)</a> <a id="9990" class="Symbol">=</a> <a id="9992" class="Symbol">λ</a>
      <a id="10000" class="Symbol">{</a> <a id="10002" class="Symbol">(</a><a id="10003" href="Data.List.Relation.Unary.Any.html#1174" class="InductiveConstructor">here</a> <a id="10008" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="10012" class="Symbol">)</a> <a id="10014" class="Symbol">→</a> <a id="10016" href="SecureCompilation.Compiler.html#10982" class="Function">Tc</a>
      <a id="10025" class="Symbol">;</a> <a id="10027" class="Symbol">(</a><a id="10028" href="Data.List.Relation.Unary.Any.html#1227" class="InductiveConstructor">there</a> <a id="10034" href="SecureCompilation.Compiler.html#10034" class="Bound">x∈</a><a id="10036" class="Symbol">)</a>  <a id="10039" class="Symbol">→</a> <a id="10041" class="Bound">f</a> <a id="10043" class="Symbol">(</a><a id="10044" href="BitML.Contracts.Induction.html#414" class="InductiveConstructor">CS</a> <a id="10047" href="SecureCompilation.Compiler.html#9986" class="Bound">cs</a><a id="10049" class="Symbol">)</a> <a id="10051" href="BitML.Contracts.Induction.html#576" class="InductiveConstructor">≺-put</a>
          <a id="10067" class="Symbol">((</a><a id="10069" href="SecureCompilation.Compiler.html#11299" class="Function">Tc♯</a> <a id="10073" href="Bitcoin.Tx.Base.html#377" class="InductiveConstructor Operator">at</a> <a id="10076" class="Number">0</a><a id="10077" class="Symbol">)</a> <a id="10079" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="10081" class="Bound">v</a> <a id="10083" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="10085" class="Symbol">(</a><a id="10086" href="SecureCompilation.Compiler.html#3576" class="Function">partG</a> <a id="10092" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="10094" href="Data.List.Relation.Binary.Subset.Propositional.Properties.html#1761" class="Function">⊆-refl</a><a id="10100" class="Symbol">)</a> <a id="10102" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="10104" class="Number">0</a>
          <a id="10116" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="10118" class="Bound">p⊆</a> <a id="10121" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="10123" class="Bound">s⊆</a> <a id="10126" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="10128" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>
          <a id="10141" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="10143" class="Bound">sechash</a> <a id="10151" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="10153" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="10164" href="Data.Sum.html#734" class="Function">isInj₁</a> <a id="10171" href="SecureCompilation.Compiler.html#10316" class="Function">n⊆</a> <a id="10174" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="10176" class="Bound">txout</a> <a id="10182" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="10184" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="10195" href="Data.Sum.html#817" class="Function">isInj₂</a> <a id="10202" href="SecureCompilation.Compiler.html#10316" class="Function">n⊆</a>
          <a id="10215" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="10217" class="Bound">part</a> <a id="10222" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="10224" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="10235" href="Data.Sum.html#817" class="Function">isInj₂</a> <a id="10242" href="SecureCompilation.Compiler.html#10316" class="Function">n⊆</a> <a id="10245" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="10247" class="Bound">val</a> <a id="10251" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="10253" href="Prelude.Lists.html#17969" class="Function">mapMaybe-⊆</a> <a id="10264" href="Data.Sum.html#817" class="Function">isInj₂</a> <a id="10271" href="SecureCompilation.Compiler.html#10316" class="Function">n⊆</a><a id="10273" class="Symbol">)</a>
          <a id="10285" href="SecureCompilation.Compiler.html#10034" class="Bound">x∈</a>
      <a id="10294" class="Symbol">}</a>
      <a id="10302" class="Keyword">where</a>
        <a id="10316" href="SecureCompilation.Compiler.html#10316" class="Function">n⊆</a> <a id="10319" class="Symbol">:</a> <a id="10321" href="BitML.Contracts.Helpers.html#3482" class="Function">names</a> <a id="10327" href="SecureCompilation.Compiler.html#9986" class="Bound">cs</a> <a id="10330" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">⊆</a> <a id="10332" href="BitML.Contracts.Helpers.html#3482" class="Function">names</a> <a id="10338" href="SecureCompilation.Compiler.html#9957" class="Bound">c′</a>
        <a id="10349" href="SecureCompilation.Compiler.html#10316" class="Function">n⊆</a> <a id="10352" class="Symbol">=</a> <a id="10354" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="10361" class="Symbol">(</a><a id="10362" href="Data.List.Base.html#1497" class="Function">map</a> <a id="10366" href="Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="10371" href="SecureCompilation.Compiler.html#9965" class="Bound">zs</a><a id="10373" class="Symbol">)</a> <a id="10375" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="10377" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="10384" class="Symbol">(</a><a id="10385" href="Data.List.Base.html#1497" class="Function">map</a> <a id="10389" href="Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="10394" href="SecureCompilation.Compiler.html#9976" class="Bound">as</a><a id="10396" class="Symbol">)</a>

        <a id="10407" href="SecureCompilation.Compiler.html#10407" class="Function">cs⊆</a> <a id="10411" class="Symbol">:</a> <a id="10413" href="SecureCompilation.Compiler.html#9986" class="Bound">cs</a> <a id="10416" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">⊆</a> <a id="10418" href="BitML.Contracts.Helpers.html#9984" class="Function">subterms′</a> <a id="10428" href="SecureCompilation.Compiler.html#3558" class="Function">CS₀</a>
        <a id="10440" href="SecureCompilation.Compiler.html#10407" class="Function">cs⊆</a> <a id="10444" class="Symbol">=</a> <a id="10446" class="Bound">s⊆</a> <a id="10449" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="10451" href="BitML.Contracts.Helpers.html#11482" class="Function">subterms⊆ᶜˢ</a>

        <a id="10472" href="SecureCompilation.Compiler.html#10472" class="Function">zs⊆</a> <a id="10476" class="Symbol">:</a> <a id="10478" href="SecureCompilation.Compiler.html#9965" class="Bound">zs</a> <a id="10481" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">⊆</a> <a id="10483" href="BitML.Contracts.Helpers.html#3608" class="Function">namesʳ</a> <a id="10490" href="SecureCompilation.Compiler.html#9957" class="Bound">c′</a>
        <a id="10501" href="SecureCompilation.Compiler.html#10472" class="Function">zs⊆</a> <a id="10505" class="Symbol">=</a> <a id="10507" class="Symbol">(λ</a> <a id="10510" href="SecureCompilation.Compiler.html#10510" class="Bound">x∈</a> <a id="10513" class="Symbol">→</a> <a id="10515" href="Prelude.Lists.html#17697" class="Function">∈-mapMaybe⁺</a> <a id="10527" href="Data.Sum.html#817" class="Function">isInj₂</a> <a id="10534" href="SecureCompilation.Compiler.html#10510" class="Bound">x∈</a> <a id="10537" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="10541" class="Symbol">)</a> <a id="10543" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="10545" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a> <a id="10552" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="10554" href="Data.List.Membership.Propositional.Properties.html#3315" class="Function">∈-map⁺</a> <a id="10561" href="Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a>

        <a id="10575" href="SecureCompilation.Compiler.html#10575" class="Function">k</a> <a id="10577" class="Symbol">=</a> <a id="10579" href="Data.List.Base.html#4297" class="Function">length</a> <a id="10586" href="SecureCompilation.Compiler.html#9965" class="Bound">zs</a>

        <a id="10598" href="SecureCompilation.Compiler.html#10598" class="Function">ins</a> <a id="10602" class="Symbol">:</a> <a id="10604" href="Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="10608" href="Bitcoin.Tx.Base.html#343" class="Record">TxInput</a> <a id="10616" href="SecureCompilation.Compiler.html#10575" class="Function">k</a>
        <a id="10626" href="SecureCompilation.Compiler.html#10598" class="Function">ins</a> <a id="10630" class="Keyword">rewrite</a> <a id="10638" href="Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="10642" class="Symbol">(</a><a id="10643" href="Data.List.Membership.Setoid.Properties.html#4081" class="Function">length-mapWith∈</a> <a id="10659" class="Symbol">(</a><a id="10660" href="Relation.Binary.PropositionalEquality.html#2283" class="Function">setoid</a> <a id="10667" class="Symbol">_)</a> <a id="10670" href="SecureCompilation.Compiler.html#9965" class="Bound">zs</a> <a id="10673" class="Symbol">{</a><a id="10674" class="Argument">f</a> <a id="10676" class="Symbol">=</a> <a id="10678" class="Bound">txout</a> <a id="10684" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="10686" href="SecureCompilation.Compiler.html#10472" class="Function">zs⊆</a><a id="10689" class="Symbol">})</a>
                  <a id="10710" class="Symbol">=</a> <a id="10712" href="Data.Vec.Base.html#7501" class="Function">V.fromList</a> <a id="10723" class="Symbol">(</a><a id="10724" href="Data.List.Membership.Setoid.html#1123" class="Function">mapWith∈</a> <a id="10733" href="SecureCompilation.Compiler.html#9965" class="Bound">zs</a> <a id="10736" class="Symbol">(</a><a id="10737" class="Bound">txout</a> <a id="10743" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="10745" href="SecureCompilation.Compiler.html#10472" class="Function">zs⊆</a><a id="10748" class="Symbol">))</a>

        <a id="10760" href="SecureCompilation.Compiler.html#10760" class="Function">K⋆</a> <a id="10763" class="Symbol">:</a> <a id="10765" href="SecureCompilation.Compiler.html#9965" class="Bound">zs</a> <a id="10768" href="Prelude.Lists.html#10340" class="Function Operator">↦</a> <a id="10770" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="10775" href="Bitcoin.Crypto.html#321" class="Record">KeyPair</a>
        <a id="10791" href="SecureCompilation.Compiler.html#10760" class="Function">K⋆</a> <a id="10794" class="Symbol">=</a> <a id="10796" href="Data.List.Base.html#4458" class="Function Operator">[_]</a> <a id="10800" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="10802" href="SecureCompilation.Compiler.html#3119" class="Bound">K</a> <a id="10804" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="10806" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="10812" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="10814" class="Bound">part</a> <a id="10819" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="10821" href="SecureCompilation.Compiler.html#10472" class="Function">zs⊆</a>

        <a id="10834" href="SecureCompilation.Compiler.html#10834" class="Function">wits</a> <a id="10839" class="Symbol">:</a> <a id="10841" href="Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="10845" class="Symbol">(</a><a id="10846" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="10851" href="Bitcoin.Crypto.html#321" class="Record">KeyPair</a><a id="10858" class="Symbol">)</a> <a id="10860" href="SecureCompilation.Compiler.html#10575" class="Function">k</a>
        <a id="10870" href="SecureCompilation.Compiler.html#10834" class="Function">wits</a> <a id="10875" class="Keyword">rewrite</a> <a id="10883" href="Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="10887" class="Symbol">(</a><a id="10888" href="Data.List.Membership.Setoid.Properties.html#4081" class="Function">length-mapWith∈</a> <a id="10904" class="Symbol">(</a><a id="10905" href="Relation.Binary.PropositionalEquality.html#2283" class="Function">setoid</a> <a id="10912" class="Symbol">_)</a> <a id="10915" href="SecureCompilation.Compiler.html#9965" class="Bound">zs</a> <a id="10918" class="Symbol">{</a><a id="10919" href="SecureCompilation.Compiler.html#10760" class="Function">K⋆</a><a id="10921" class="Symbol">})</a>
                   <a id="10943" class="Symbol">=</a> <a id="10945" href="Data.Vec.Base.html#7501" class="Function">V.fromList</a> <a id="10956" class="Symbol">(</a><a id="10957" href="Data.List.Membership.Setoid.html#1123" class="Function">mapWith∈</a> <a id="10966" href="SecureCompilation.Compiler.html#9965" class="Bound">zs</a> <a id="10969" href="SecureCompilation.Compiler.html#10760" class="Function">K⋆</a><a id="10971" class="Symbol">)</a>

        <a id="10982" href="SecureCompilation.Compiler.html#10982" class="Function">Tc</a> <a id="10985" class="Symbol">:</a> <a id="10987" href="Bitcoin.Tx.Base.html#1255" class="Function">∃Tx</a>
        <a id="10999" href="SecureCompilation.Compiler.html#10982" class="Function">Tc</a> <a id="11002" class="Symbol">=</a> <a id="11004" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="11008" href="SecureCompilation.Compiler.html#10575" class="Function">k</a> <a id="11010" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11012" href="Data.Product.html#2196" class="Function Operator">-,</a> <a id="11015" href="Bitcoin.Tx.Crypto.html#1043" class="Function">sig⋆</a> <a id="11020" class="Symbol">(</a><a id="11021" href="Data.List.Membership.Setoid.html#1123" class="Function">mapWith∈</a> <a id="11030" class="Bound">P</a> <a id="11032" class="Symbol">(</a><a id="11033" href="SecureCompilation.Compiler.html#3121" class="Bound">K²</a> <a id="11036" class="Bound">Dₚ∈</a> <a id="11040" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="11042" class="Bound">P⊆</a><a id="11044" class="Symbol">)</a> <a id="11046" href="Data.Vec.Base.html#1014" class="InductiveConstructor Operator">V.∷</a> <a id="11050" href="SecureCompilation.Compiler.html#10834" class="Function">wits</a><a id="11054" class="Symbol">)</a> <a id="11056" class="Keyword">record</a>
          <a id="11073" class="Symbol">{</a> <a id="11075" href="Bitcoin.Tx.Base.html#940" class="Field">inputs</a>  <a id="11083" class="Symbol">=</a> <a id="11085" class="Bound">T,o</a> <a id="11089" href="Data.Vec.Base.html#1014" class="InductiveConstructor Operator">V.∷</a> <a id="11093" href="SecureCompilation.Compiler.html#10598" class="Function">ins</a>
          <a id="11107" class="Symbol">;</a> <a id="11109" href="Bitcoin.Tx.Base.html#981" class="Field">wit</a>     <a id="11117" class="Symbol">=</a> <a id="11119" href="Bitcoin.Tx.Crypto.html#552" class="Function">wit⊥</a>
          <a id="11134" class="Symbol">;</a> <a id="11136" href="Bitcoin.Tx.Base.html#1036" class="Field">relLock</a> <a id="11144" class="Symbol">=</a> <a id="11146" href="Data.Vec.Base.html#5745" class="Function">V.replicate</a> <a id="11158" class="Number">0</a>
          <a id="11170" class="Symbol">;</a> <a id="11172" href="Bitcoin.Tx.Base.html#1090" class="Field">outputs</a> <a id="11180" class="Symbol">=</a> <a id="11182" href="Data.Vec.Base.html#5711" class="Function Operator">V.[</a> <a id="11186" class="Symbol">_</a> <a id="11188" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11190" class="Keyword">record</a> <a id="11197" class="Symbol">{</a> <a id="11199" href="Bitcoin.Tx.Base.html#658" class="Field">value</a> <a id="11205" class="Symbol">=</a> <a id="11207" class="Bound">v</a><a id="11208" class="Symbol">;</a> <a id="11210" href="Bitcoin.Tx.Base.html#680" class="Field">validator</a> <a id="11220" class="Symbol">=</a> <a id="11222" href="Bitcoin.Script.Base.html#2150" class="InductiveConstructor Operator">ƛ</a> <a id="11224" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="11230" class="Symbol">(</a><a id="11231" href="Bitcoin.Script.Base.html#3442" class="Function">⋁</a> <a id="11233" class="Symbol">(</a><a id="11234" href="Data.List.Membership.Setoid.html#1123" class="Function">mapWith∈</a> <a id="11243" href="SecureCompilation.Compiler.html#9986" class="Bound">cs</a> <a id="11246" class="Symbol">(</a><a id="11247" href="SecureCompilation.Compiler.html#4142" class="Function">Bout</a> <a id="11252" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="11254" href="SecureCompilation.Compiler.html#10407" class="Function">cs⊆</a><a id="11257" class="Symbol">)))</a> <a id="11261" class="Symbol">}</a> <a id="11263" href="Data.Vec.Base.html#5711" class="Function Operator">]</a>
          <a id="11275" class="Symbol">;</a> <a id="11277" href="Bitcoin.Tx.Base.html#1132" class="Field">absLock</a> <a id="11285" class="Symbol">=</a> <a id="11287" class="Bound">t</a> <a id="11289" class="Symbol">}</a>
        <a id="11299" href="SecureCompilation.Compiler.html#11299" class="Function">Tc♯</a> <a id="11303" class="Symbol">=</a> <a id="11305" href="Bitcoin.Tx.Crypto.html#720" class="Function">hashTx</a> <a id="11312" href="SecureCompilation.Compiler.html#10982" class="Function">Tc</a>
    <a id="11319" class="Comment">-- Bpar</a>
    <a id="11331" class="Symbol">...</a> <a id="11335" class="Symbol">|</a> <a id="11337" href="SecureCompilation.Compiler.html#11337" class="Bound">c′</a><a id="11339" class="Symbol">@(</a><a id="11341" href="BitML.Contracts.Types.html#946" class="InductiveConstructor">split</a> <a id="11347" href="SecureCompilation.Compiler.html#11347" class="Bound">vcs</a><a id="11350" class="Symbol">)</a> <a id="11352" class="Symbol">=</a> <a id="11354" class="Symbol">λ</a>
      <a id="11362" class="Symbol">{</a> <a id="11364" class="Symbol">(</a><a id="11365" href="Data.List.Relation.Unary.Any.html#1174" class="InductiveConstructor">here</a> <a id="11370" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="11374" class="Symbol">)</a> <a id="11376" class="Symbol">→</a> <a id="11378" href="SecureCompilation.Compiler.html#11735" class="Function">Tc</a>
      <a id="11387" class="Symbol">;</a> <a id="11389" class="Symbol">(</a><a id="11390" href="Data.List.Relation.Unary.Any.html#1227" class="InductiveConstructor">there</a> <a id="11396" href="SecureCompilation.Compiler.html#11396" class="Bound">x∈</a><a id="11398" class="Symbol">)</a>  <a id="11401" class="Symbol">→</a> <a id="11403" class="Bound">f</a> <a id="11405" class="Symbol">(</a><a id="11406" href="BitML.Contracts.Induction.html#436" class="InductiveConstructor">VCS</a> <a id="11410" href="SecureCompilation.Compiler.html#11347" class="Bound">vcs</a><a id="11413" class="Symbol">)</a> <a id="11415" href="BitML.Contracts.Induction.html#696" class="InductiveConstructor">≺-split</a>
          <a id="11433" class="Symbol">((</a><a id="11435" href="SecureCompilation.Compiler.html#12080" class="Function">Tc♯</a> <a id="11439" href="Bitcoin.Tx.Base.html#377" class="InductiveConstructor Operator">at</a> <a id="11442" class="Number">0</a><a id="11443" class="Symbol">)</a> <a id="11445" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="11447" class="Bound">v</a> <a id="11449" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="11451" class="Symbol">(</a><a id="11452" href="SecureCompilation.Compiler.html#3576" class="Function">partG</a> <a id="11458" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11460" href="Data.List.Relation.Binary.Subset.Propositional.Properties.html#1761" class="Function">⊆-refl</a><a id="11466" class="Symbol">)</a> <a id="11468" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="11470" class="Number">0</a>
          <a id="11482" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="11484" class="Bound">p⊆</a> <a id="11487" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="11489" class="Bound">s⊆</a> <a id="11492" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="11494" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>
          <a id="11507" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="11509" class="Bound">sechash</a> <a id="11517" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="11519" class="Bound">txout</a> <a id="11525" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="11527" class="Bound">part</a> <a id="11532" href="SecureCompilation.Compiler.html#6798" class="InductiveConstructor Operator">&amp;</a> <a id="11534" class="Bound">val</a><a id="11537" class="Symbol">)</a>
          <a id="11549" href="SecureCompilation.Compiler.html#11396" class="Bound">x∈</a>
      <a id="11558" class="Symbol">}</a>
      <a id="11566" class="Keyword">where</a>
        <a id="11580" href="SecureCompilation.Compiler.html#11580" class="Function">eᵢⱼ</a> <a id="11584" class="Symbol">:</a> <a id="11586" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="11591" class="Symbol">(</a><a id="11592" href="BitML.BasicTypes.html#229" class="Function">Value</a> <a id="11598" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="11600" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="11605" class="Symbol">(</a><a id="11606" href="Data.Product.html#1788" class="Function">∃[</a> <a id="11609" href="SecureCompilation.Compiler.html#11609" class="Bound">ctx</a> <a id="11613" href="Data.Product.html#1788" class="Function">]</a> <a id="11615" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="11622" href="SecureCompilation.Compiler.html#11609" class="Bound">ctx</a> <a id="11626" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a><a id="11631" class="Symbol">))</a>
        <a id="11642" href="SecureCompilation.Compiler.html#11580" class="Function">eᵢⱼ</a> <a id="11646" class="Symbol">=</a> <a id="11648" href="Data.List.Membership.Setoid.html#1123" class="Function">mapWith∈</a> <a id="11657" href="SecureCompilation.Compiler.html#11347" class="Bound">vcs</a> <a id="11661" class="Symbol">λ{</a> <a id="11664" class="Symbol">{</a><a id="11665" href="SecureCompilation.Compiler.html#11665" class="Bound">v</a> <a id="11667" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11669" href="SecureCompilation.Compiler.html#11669" class="Bound">Cᵢ</a><a id="11671" class="Symbol">}</a> <a id="11673" href="SecureCompilation.Compiler.html#11673" class="Bound">x∈</a> <a id="11676" class="Symbol">→</a> <a id="11678" href="SecureCompilation.Compiler.html#11665" class="Bound">v</a> <a id="11680" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11682" href="Data.List.Membership.Setoid.html#1123" class="Function">mapWith∈</a> <a id="11691" href="SecureCompilation.Compiler.html#11669" class="Bound">Cᵢ</a> <a id="11694" class="Symbol">(</a><a id="11695" href="SecureCompilation.Compiler.html#4142" class="Function">Bout</a> <a id="11700" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="11702" class="Bound">s⊆</a> <a id="11705" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="11707" href="BitML.Contracts.Helpers.html#11660" class="Function">subterms⊆ᵛᶜˢ</a> <a id="11720" href="SecureCompilation.Compiler.html#11673" class="Bound">x∈</a><a id="11722" class="Symbol">)</a> <a id="11724" class="Symbol">}</a>

        <a id="11735" href="SecureCompilation.Compiler.html#11735" class="Function">Tc</a> <a id="11738" class="Symbol">:</a> <a id="11740" href="Bitcoin.Tx.Base.html#1255" class="Function">∃Tx</a>
        <a id="11752" href="SecureCompilation.Compiler.html#11735" class="Function">Tc</a> <a id="11755" class="Symbol">=</a> <a id="11757" href="Data.Product.html#2196" class="Function Operator">-,</a> <a id="11760" href="Data.Product.html#2196" class="Function Operator">-,</a> <a id="11763" href="Bitcoin.Tx.Crypto.html#1043" class="Function">sig⋆</a> <a id="11768" href="Data.Vec.Base.html#5711" class="Function Operator">V.[</a> <a id="11772" href="Data.List.Membership.Setoid.html#1123" class="Function">mapWith∈</a> <a id="11781" class="Bound">P</a> <a id="11783" class="Symbol">(</a><a id="11784" href="SecureCompilation.Compiler.html#3121" class="Bound">K²</a> <a id="11787" class="Bound">Dₚ∈</a> <a id="11791" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="11793" class="Bound">P⊆</a><a id="11795" class="Symbol">)</a> <a id="11797" href="Data.Vec.Base.html#5711" class="Function Operator">]</a> <a id="11799" class="Keyword">record</a>
          <a id="11816" class="Symbol">{</a> <a id="11818" href="Bitcoin.Tx.Base.html#940" class="Field">inputs</a>  <a id="11826" class="Symbol">=</a> <a id="11828" href="Data.Vec.Base.html#5711" class="Function Operator">V.[</a> <a id="11832" class="Bound">T,o</a> <a id="11836" href="Data.Vec.Base.html#5711" class="Function Operator">]</a>
          <a id="11848" class="Symbol">;</a> <a id="11850" href="Bitcoin.Tx.Base.html#981" class="Field">wit</a>     <a id="11858" class="Symbol">=</a> <a id="11860" href="Bitcoin.Tx.Crypto.html#552" class="Function">wit⊥</a>
          <a id="11875" class="Symbol">;</a> <a id="11877" href="Bitcoin.Tx.Base.html#1036" class="Field">relLock</a> <a id="11885" class="Symbol">=</a> <a id="11887" href="Data.Vec.Base.html#5745" class="Function">V.replicate</a> <a id="11899" class="Number">0</a>
          <a id="11911" class="Symbol">;</a> <a id="11913" href="Bitcoin.Tx.Base.html#1090" class="Field">outputs</a> <a id="11921" class="Symbol">=</a> <a id="11923" href="Data.Vec.Base.html#2541" class="Function">V.map</a> <a id="11929" class="Symbol">(λ{</a> <a id="11933" class="Symbol">(</a><a id="11934" href="SecureCompilation.Compiler.html#11934" class="Bound">vᵢ</a> <a id="11937" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11939" href="SecureCompilation.Compiler.html#11939" class="Bound">eᵢ</a><a id="11941" class="Symbol">)</a> <a id="11943" class="Symbol">→</a> <a id="11945" href="Data.Product.html#2196" class="Function Operator">-,</a> <a id="11948" class="Keyword">record</a> <a id="11955" class="Symbol">{</a> <a id="11957" href="Bitcoin.Tx.Base.html#658" class="Field">value</a> <a id="11963" class="Symbol">=</a> <a id="11965" href="SecureCompilation.Compiler.html#11934" class="Bound">vᵢ</a> <a id="11968" class="Symbol">;</a> <a id="11970" href="Bitcoin.Tx.Base.html#680" class="Field">validator</a> <a id="11980" class="Symbol">=</a> <a id="11982" href="Bitcoin.Script.Base.html#2150" class="InductiveConstructor Operator">ƛ</a> <a id="11984" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="11990" class="Symbol">(</a><a id="11991" href="Bitcoin.Script.Base.html#3442" class="Function">⋁</a> <a id="11993" href="SecureCompilation.Compiler.html#11939" class="Bound">eᵢ</a><a id="11995" class="Symbol">)</a> <a id="11997" class="Symbol">}})</a>
                            <a id="12029" class="Symbol">(</a><a id="12030" href="Data.Vec.Base.html#7501" class="Function">V.fromList</a> <a id="12041" href="SecureCompilation.Compiler.html#11580" class="Function">eᵢⱼ</a><a id="12044" class="Symbol">)</a>
          <a id="12056" class="Symbol">;</a> <a id="12058" href="Bitcoin.Tx.Base.html#1132" class="Field">absLock</a> <a id="12066" class="Symbol">=</a> <a id="12068" class="Bound">t</a> <a id="12070" class="Symbol">}</a>
        <a id="12080" href="SecureCompilation.Compiler.html#12080" class="Function">Tc♯</a> <a id="12084" class="Symbol">=</a> <a id="12086" href="Bitcoin.Tx.Crypto.html#720" class="Function">hashTx</a> <a id="12093" href="SecureCompilation.Compiler.html#11735" class="Function">Tc</a>

    <a id="12101" href="SecureCompilation.Compiler.html#9145" class="Function">go</a> <a id="12104" class="Symbol">(</a><a id="12105" href="BitML.Contracts.Induction.html#414" class="InductiveConstructor">CS</a> <a id="12108" href="SecureCompilation.Compiler.html#12108" class="Bound">x</a><a id="12109" class="Symbol">)</a> <a id="12111" href="SecureCompilation.Compiler.html#12111" class="Bound">f</a>  <a id="12114" href="SecureCompilation.Compiler.html#12114" class="Bound">st</a> <a id="12117" class="Symbol">=</a> <a id="12119" href="BitML.Contracts.Helpers.html#11017" class="Function">↦-∈</a>  <a id="12124" class="Symbol">λ</a> <a id="12126" class="Symbol">{</a><a id="12127" href="SecureCompilation.Compiler.html#12127" class="Bound">d</a><a id="12128" class="Symbol">}</a>  <a id="12131" href="SecureCompilation.Compiler.html#12131" class="Bound">d∈</a>  <a id="12135" class="Symbol">→</a> <a id="12137" href="SecureCompilation.Compiler.html#12111" class="Bound">f</a> <a id="12139" class="Symbol">(</a><a id="12140" href="BitML.Contracts.Induction.html#393" class="InductiveConstructor">C</a> <a id="12142" href="SecureCompilation.Compiler.html#12127" class="Bound">d</a><a id="12143" class="Symbol">)</a>   <a id="12147" class="Symbol">(</a><a id="12148" href="BitML.Contracts.Induction.html#487" class="InductiveConstructor">≺-∈</a> <a id="12152" href="SecureCompilation.Compiler.html#12131" class="Bound">d∈</a><a id="12154" class="Symbol">)</a>   <a id="12158" class="Symbol">(</a><a id="12159" href="SecureCompilation.Compiler.html#7398" class="Function">↓</a> <a id="12161" href="SecureCompilation.Compiler.html#12114" class="Bound">st</a> <a id="12164" href="SecureCompilation.Compiler.html#12131" class="Bound">d∈</a><a id="12166" class="Symbol">)</a>
    <a id="12172" href="SecureCompilation.Compiler.html#9145" class="Function">go</a> <a id="12175" class="Symbol">(</a><a id="12176" href="BitML.Contracts.Induction.html#436" class="InductiveConstructor">VCS</a> <a id="12180" href="SecureCompilation.Compiler.html#12180" class="Bound">x</a><a id="12181" class="Symbol">)</a> <a id="12183" href="SecureCompilation.Compiler.html#12183" class="Bound">f</a> <a id="12185" href="SecureCompilation.Compiler.html#12185" class="Bound">st</a> <a id="12188" class="Symbol">=</a> <a id="12190" href="BitML.Contracts.Helpers.html#11234" class="Function">↦-∈ᵛ</a> <a id="12195" class="Symbol">λ</a> <a id="12197" class="Symbol">{</a><a id="12198" href="SecureCompilation.Compiler.html#12198" class="Bound">cs</a><a id="12200" class="Symbol">}</a> <a id="12202" href="SecureCompilation.Compiler.html#12202" class="Bound">cs∈</a> <a id="12206" class="Symbol">→</a> <a id="12208" href="SecureCompilation.Compiler.html#12183" class="Bound">f</a> <a id="12210" class="Symbol">(</a><a id="12211" href="BitML.Contracts.Induction.html#414" class="InductiveConstructor">CS</a> <a id="12214" href="SecureCompilation.Compiler.html#12198" class="Bound">cs</a><a id="12216" class="Symbol">)</a> <a id="12218" class="Symbol">(</a><a id="12219" href="BitML.Contracts.Induction.html#517" class="InductiveConstructor">≺-∈ᵛ</a> <a id="12224" href="SecureCompilation.Compiler.html#12202" class="Bound">cs∈</a><a id="12227" class="Symbol">)</a> <a id="12229" class="Symbol">(</a><a id="12230" href="SecureCompilation.Compiler.html#8283" class="Function">↓ᵛ</a> <a id="12233" href="SecureCompilation.Compiler.html#12185" class="Bound">st</a> <a id="12236" href="SecureCompilation.Compiler.html#12202" class="Bound">cs∈</a><a id="12239" class="Symbol">)</a>
</pre></body></html>