<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>SecureCompilation.Compiler</title><link rel="stylesheet" href="css/Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">----------------------------------------------------------------------------</a>
<a id="78" class="Comment">-- Compiler from BitML to Bitcoin transactions (see BitML paper, Section 7).</a>
<a id="155" class="Comment">----------------------------------------------------------------------------</a>

<a id="233" class="Keyword">open</a> <a id="238" class="Keyword">import</a> <a id="245" href="Function.html" class="Module">Function</a> <a id="254" class="Keyword">using</a> <a id="260" class="Symbol">(</a><a id="261" href="Function.Base.html#992" class="Function Operator">_∘_</a><a id="264" class="Symbol">)</a>

<a id="267" class="Keyword">open</a> <a id="272" class="Keyword">import</a> <a id="279" href="Data.Unit.html" class="Module">Data.Unit</a>         <a id="297" class="Keyword">using</a> <a id="303" class="Symbol">(</a><a id="304" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a><a id="305" class="Symbol">;</a> <a id="307" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="309" class="Symbol">)</a>
<a id="311" class="Keyword">open</a> <a id="316" class="Keyword">import</a> <a id="323" href="Data.Product.html" class="Module">Data.Product</a>      <a id="341" class="Keyword">using</a> <a id="347" class="Symbol">(</a><a id="348" href="Data.Product.html#1167" class="Function Operator">_×_</a><a id="351" class="Symbol">;</a> <a id="353" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a><a id="356" class="Symbol">;</a> <a id="358" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a><a id="363" class="Symbol">;</a> <a id="365" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a><a id="370" class="Symbol">;</a> <a id="372" href="Data.Product.html#916" class="Function">Σ-syntax</a><a id="380" class="Symbol">;</a> <a id="382" href="Data.Product.html#1788" class="Function">∃-syntax</a><a id="390" class="Symbol">)</a>
<a id="392" class="Keyword">open</a> <a id="397" class="Keyword">import</a> <a id="404" href="Data.Sum.html" class="Module">Data.Sum</a>          <a id="422" class="Keyword">using</a> <a id="428" class="Symbol">(</a><a id="429" href="Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a><a id="433" class="Symbol">;</a> <a id="435" href="Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a><a id="439" class="Symbol">)</a>
<a id="441" class="Keyword">open</a> <a id="446" class="Keyword">import</a> <a id="453" href="Data.Bool.html" class="Module">Data.Bool</a>         <a id="471" class="Keyword">using</a> <a id="477" class="Symbol">(</a><a id="478" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a><a id="482" class="Symbol">;</a> <a id="484" href="Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a><a id="488" class="Symbol">;</a> <a id="490" href="Agda.Builtin.Bool.html#182" class="InductiveConstructor">false</a><a id="495" class="Symbol">)</a>
<a id="497" class="Keyword">open</a> <a id="502" class="Keyword">import</a> <a id="509" href="Data.Nat.html" class="Module">Data.Nat</a>          <a id="527" class="Keyword">using</a> <a id="533" class="Symbol">(</a><a id="534" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="535" class="Symbol">;</a> <a id="537" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a><a id="540" class="Symbol">;</a> <a id="542" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">_+_</a><a id="545" class="Symbol">;</a> <a id="547" href="Data.Nat.Base.html#1111" class="Function Operator">_&gt;_</a><a id="550" class="Symbol">;</a> <a id="552" href="Data.Nat.Properties.html#4678" class="Function Operator">_≤?_</a><a id="556" class="Symbol">;</a> <a id="558" href="Data.Nat.Base.html#1640" class="Function Operator">_⊔_</a><a id="561" class="Symbol">)</a>
<a id="563" class="Keyword">open</a> <a id="568" class="Keyword">import</a> <a id="575" href="Data.Fin.html" class="Module">Data.Fin</a> <a id="584" class="Symbol">as</a> <a id="587" class="Module">Fin</a>   <a id="593" class="Keyword">using</a> <a id="599" class="Symbol">(</a><a id="600" href="Data.Fin.Base.html#1066" class="Datatype">Fin</a><a id="603" class="Symbol">;</a> <a id="605" href="Data.Fin.Base.html#2272" class="Function">raise</a><a id="610" class="Symbol">;</a> <a id="612" href="Data.Fin.Base.html#2858" class="Function">inject+</a><a id="619" class="Symbol">;</a> <a id="621" href="Data.Fin.Base.html#1192" class="Function">toℕ</a><a id="624" class="Symbol">)</a>
<a id="626" class="Keyword">open</a> <a id="631" class="Keyword">import</a> <a id="638" href="Data.Fin.Patterns.html" class="Module">Data.Fin.Patterns</a> <a id="656" class="Keyword">using</a> <a id="662" class="Symbol">(</a><a id="663" href="Data.Fin.Patterns.html#390" class="InductiveConstructor">0F</a><a id="665" class="Symbol">)</a>
<a id="667" class="Keyword">open</a> <a id="672" class="Keyword">import</a> <a id="679" href="Data.Integer.html" class="Module">Data.Integer</a>      <a id="697" class="Keyword">using</a> <a id="703" class="Symbol">(</a><a id="704" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a><a id="705" class="Symbol">;</a> <a id="707" href="Agda.Builtin.Int.html#264" class="InductiveConstructor">+_</a><a id="709" class="Symbol">)</a>
<a id="711" class="Keyword">open</a> <a id="716" class="Keyword">import</a> <a id="723" href="Data.List.html" class="Module">Data.List</a>         <a id="741" class="Keyword">using</a> <a id="747" class="Symbol">(</a><a id="748" href="Agda.Builtin.List.html#148" class="Datatype">List</a><a id="752" class="Symbol">;</a> <a id="754" href="Data.List.Base.html#9701" class="InductiveConstructor">[]</a><a id="756" class="Symbol">;</a> <a id="758" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">_∷_</a><a id="761" class="Symbol">;</a> <a id="763" href="Data.List.Base.html#4458" class="Function Operator">[_]</a><a id="766" class="Symbol">;</a> <a id="768" href="Data.List.Base.html#4297" class="Function">length</a><a id="774" class="Symbol">;</a> <a id="776" href="Data.List.Base.html#1497" class="Function">map</a><a id="779" class="Symbol">;</a> <a id="781" href="Data.List.Base.html#3827" class="Function">concat</a><a id="787" class="Symbol">;</a> <a id="789" href="Data.List.Base.html#4217" class="Function">sum</a><a id="792" class="Symbol">;</a> <a id="794" href="Data.List.Base.html#5754" class="Function">allFin</a><a id="800" class="Symbol">;</a> <a id="802" href="Data.List.Base.html#3243" class="Function">zip</a><a id="805" class="Symbol">;</a> <a id="807" href="Data.List.Base.html#6651" class="Function">take</a><a id="811" class="Symbol">)</a>
<a id="813" class="Keyword">open</a> <a id="818" class="Keyword">import</a> <a id="825" href="Data.Vec.html" class="Module">Data.Vec</a> <a id="834" class="Symbol">as</a> <a id="837" class="Module">V</a>     <a id="843" class="Keyword">using</a> <a id="849" class="Symbol">(</a><a id="850" href="Data.Vec.Base.html#959" class="Datatype">Vec</a><a id="853" class="Symbol">)</a>

<a id="856" class="Keyword">open</a> <a id="861" class="Keyword">import</a> <a id="868" href="Data.List.Membership.Propositional.html" class="Module">Data.List.Membership.Propositional</a>             <a id="915" class="Keyword">using</a> <a id="921" class="Symbol">(</a><a id="922" href="Data.List.Membership.Setoid.html#882" class="Function Operator">_∈_</a><a id="925" class="Symbol">;</a> <a id="927" href="Data.List.Membership.Setoid.html#1123" class="Function">mapWith∈</a><a id="935" class="Symbol">)</a>
<a id="937" class="Keyword">open</a> <a id="942" class="Keyword">import</a> <a id="949" href="Data.List.Membership.Propositional.Properties.html" class="Module">Data.List.Membership.Propositional.Properties</a>  <a id="996" class="Keyword">using</a> <a id="1002" class="Symbol">(</a><a id="1003" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a><a id="1009" class="Symbol">;</a> <a id="1011" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a><a id="1017" class="Symbol">;</a> <a id="1019" href="Data.List.Membership.Propositional.Properties.html#3315" class="Function">∈-map⁺</a><a id="1025" class="Symbol">)</a>
<a id="1027" class="Keyword">open</a> <a id="1032" class="Keyword">import</a> <a id="1039" href="Data.List.Membership.Setoid.Properties.html" class="Module">Data.List.Membership.Setoid.Properties</a>         <a id="1086" class="Keyword">using</a> <a id="1092" class="Symbol">(</a><a id="1093" href="Data.List.Membership.Setoid.Properties.html#4081" class="Function">length-mapWith∈</a><a id="1108" class="Symbol">)</a>
<a id="1110" class="Keyword">open</a> <a id="1115" class="Keyword">import</a> <a id="1122" href="Data.List.Relation.Unary.Any.html" class="Module">Data.List.Relation.Unary.Any</a>                   <a id="1169" class="Keyword">using</a> <a id="1175" class="Symbol">(</a><a id="1176" href="Data.List.Relation.Unary.Any.html#1111" class="Datatype">Any</a><a id="1179" class="Symbol">;</a> <a id="1181" href="Data.List.Relation.Unary.Any.html#1174" class="InductiveConstructor">here</a><a id="1185" class="Symbol">;</a> <a id="1187" href="Data.List.Relation.Unary.Any.html#1227" class="InductiveConstructor">there</a><a id="1192" class="Symbol">;</a> <a id="1194" href="Data.List.Relation.Unary.Any.html#1909" class="Function">index</a><a id="1199" class="Symbol">)</a>
<a id="1201" class="Keyword">open</a> <a id="1206" class="Keyword">import</a> <a id="1213" href="Data.List.Relation.Unary.All.html" class="Module">Data.List.Relation.Unary.All</a>                   <a id="1260" class="Keyword">using</a> <a id="1266" class="Symbol">(</a><a id="1267" href="Data.List.Relation.Unary.All.html#1274" class="Datatype">All</a><a id="1270" class="Symbol">;</a> <a id="1272" href="Data.List.Relation.Unary.All.html#1337" class="InductiveConstructor">[]</a><a id="1274" class="Symbol">;</a> <a id="1276" href="Data.List.Relation.Unary.All.html#1354" class="InductiveConstructor Operator">_∷_</a><a id="1279" class="Symbol">;</a> <a id="1281" href="Data.List.Relation.Unary.All.html#5949" class="Function">lookup</a><a id="1287" class="Symbol">)</a>
<a id="1289" class="Keyword">open</a> <a id="1294" class="Keyword">import</a> <a id="1301" href="Data.List.Relation.Binary.Subset.Propositional.html" class="Module">Data.List.Relation.Binary.Subset.Propositional</a> <a id="1348" class="Keyword">using</a> <a id="1354" class="Symbol">(</a><a id="1355" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">_⊆_</a><a id="1358" class="Symbol">)</a>

<a id="1361" class="Keyword">open</a> <a id="1366" class="Keyword">import</a> <a id="1373" href="Relation.Nullary.html" class="Module">Relation.Nullary</a>                      <a id="1411" class="Keyword">using</a> <a id="1417" class="Symbol">(</a><a id="1418" href="Relation.Nullary.html#1645" class="InductiveConstructor">yes</a><a id="1421" class="Symbol">;</a> <a id="1423" href="Relation.Nullary.html#1682" class="InductiveConstructor">no</a><a id="1425" class="Symbol">)</a>
<a id="1427" class="Keyword">open</a> <a id="1432" class="Keyword">import</a> <a id="1439" href="Relation.Binary.html" class="Module">Relation.Binary</a>                       <a id="1477" class="Keyword">using</a> <a id="1483" class="Symbol">(</a><a id="1484" href="Relation.Binary.Definitions.html#4575" class="Function">Decidable</a><a id="1493" class="Symbol">)</a>
<a id="1495" class="Keyword">open</a> <a id="1500" class="Keyword">import</a> <a id="1507" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="1545" class="Keyword">using</a> <a id="1551" class="Symbol">(</a><a id="1552" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="1555" class="Symbol">;</a> <a id="1557" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="1561" class="Symbol">;</a> <a id="1563" href="Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a><a id="1566" class="Symbol">;</a> <a id="1568" href="Relation.Binary.PropositionalEquality.html#3845" class="Function">inspect</a><a id="1575" class="Symbol">;</a> <a id="1577" href="Relation.Binary.PropositionalEquality.html#2283" class="Function">setoid</a><a id="1583" class="Symbol">)</a>
  <a id="1587" class="Keyword">renaming</a> <a id="1596" class="Symbol">(</a><a id="1597" href="Relation.Binary.PropositionalEquality.html#3819" class="InductiveConstructor Operator">[_]</a> <a id="1601" class="Symbol">to</a> <a id="PropositionalEquality.[_]"></a><a id="1604" href="SecureCompilation.Compiler.html#1604" class="InductiveConstructor Operator">≡[_]</a><a id="1608" class="Symbol">)</a>

<a id="1611" class="Keyword">open</a> <a id="1616" class="Keyword">import</a> <a id="1623" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>

<a id="1638" class="Comment">-- Bitcoin</a>
<a id="1649" class="Keyword">open</a> <a id="1654" class="Keyword">import</a> <a id="1661" href="Bitcoin.BasicTypes.html" class="Module">Bitcoin.BasicTypes</a>
  <a id="1682" class="Keyword">using</a> <a id="1688" class="Symbol">(</a><a id="1689" href="Bitcoin.BasicTypes.html#330" class="Function">HashId</a><a id="1695" class="Symbol">)</a>
<a id="1697" class="Keyword">open</a> <a id="1702" class="Keyword">import</a> <a id="1709" href="Bitcoin.Crypto.html" class="Module">Bitcoin.Crypto</a>
  <a id="1726" class="Keyword">using</a> <a id="1732" class="Symbol">(</a><a id="1733" href="Bitcoin.Crypto.html#320" class="Record">KeyPair</a><a id="1740" class="Symbol">)</a>
<a id="1742" class="Keyword">open</a> <a id="1747" class="Keyword">import</a> <a id="1754" href="Bitcoin.Script.Base.html" class="Module">Bitcoin.Script.Base</a>
  <a id="1776" class="Keyword">using</a> <a id="1782" class="Symbol">(</a> <a id="1784" href="Bitcoin.Script.Base.html#957" class="Generalizable">ty</a><a id="1786" class="Symbol">;</a> <a id="1788" href="Bitcoin.Script.Base.html#871" class="Datatype">ScriptType</a><a id="1798" class="Symbol">;</a> <a id="1800" href="Bitcoin.Script.Base.html#896" class="InductiveConstructor">`Bool</a><a id="1805" class="Symbol">;</a> <a id="1807" href="Bitcoin.Script.Base.html#902" class="InductiveConstructor">`ℤ</a>
        <a id="1818" class="Symbol">;</a> <a id="1820" href="Bitcoin.Script.Base.html#930" class="Generalizable">ctx</a><a id="1823" class="Symbol">;</a> <a id="1825" href="Bitcoin.Script.Base.html#794" class="InductiveConstructor">Ctx</a><a id="1828" class="Symbol">;</a> <a id="1830" href="Bitcoin.Script.Base.html#766" class="Datatype">ScriptContext</a>
        <a id="1852" class="Symbol">;</a> <a id="1854" href="Bitcoin.Script.Base.html#1128" class="InductiveConstructor">var</a><a id="1857" class="Symbol">;</a> <a id="1859" href="Bitcoin.Script.Base.html#1199" class="InductiveConstructor">`</a><a id="1860" class="Symbol">;</a> <a id="1862" href="Bitcoin.Script.Base.html#1226" class="InductiveConstructor Operator">_`+_</a><a id="1866" class="Symbol">;</a> <a id="1868" href="Bitcoin.Script.Base.html#1281" class="InductiveConstructor Operator">_`-_</a><a id="1872" class="Symbol">;</a> <a id="1874" href="Bitcoin.Script.Base.html#1336" class="InductiveConstructor Operator">_`=_</a><a id="1878" class="Symbol">;</a> <a id="1880" href="Bitcoin.Script.Base.html#1394" class="InductiveConstructor Operator">_`&lt;_</a><a id="1884" class="Symbol">;</a> <a id="1886" href="Bitcoin.Script.Base.html#1480" class="InductiveConstructor Operator">`if_then_else_</a><a id="1900" class="Symbol">;</a> <a id="1902" href="Bitcoin.Script.Base.html#1627" class="InductiveConstructor">hash</a><a id="1906" class="Symbol">;</a> <a id="1908" href="Bitcoin.Script.Base.html#1695" class="InductiveConstructor">versig</a><a id="1914" class="Symbol">;</a> <a id="1916" href="Bitcoin.Script.Base.html#1784" class="InductiveConstructor Operator">absAfter_⇒_</a><a id="1927" class="Symbol">;</a> <a id="1929" href="Bitcoin.Script.Base.html#1837" class="InductiveConstructor Operator">relAfter_⇒_</a><a id="1940" class="Symbol">;</a> <a id="1942" href="Bitcoin.Script.Base.html#983" class="Datatype">Script</a>
        <a id="1957" class="Symbol">;</a> <a id="1959" href="Bitcoin.Script.Base.html#2039" class="Function Operator">_`∧_</a><a id="1963" class="Symbol">;</a> <a id="1965" href="Bitcoin.Script.Base.html#1986" class="Function">`true</a><a id="1970" class="Symbol">;</a> <a id="1972" href="Bitcoin.Script.Base.html#2138" class="Function Operator">_`∨_</a><a id="1976" class="Symbol">;</a> <a id="1978" href="Bitcoin.Script.Base.html#1931" class="Function">`false</a><a id="1984" class="Symbol">;</a> <a id="1986" href="Bitcoin.Script.Base.html#2236" class="Function">`not</a>
        <a id="1999" class="Symbol">;</a> <a id="2001" href="Bitcoin.Script.Base.html#2373" class="InductiveConstructor Operator">ƛ_</a><a id="2003" class="Symbol">;</a> <a id="2005" href="Bitcoin.Script.Base.html#2323" class="Datatype">BitcoinScript</a><a id="2018" class="Symbol">;</a> <a id="2020" href="Bitcoin.Script.Base.html#2416" class="Function">∃BitcoinScript</a>
        <a id="2043" class="Symbol">;</a> <a id="2045" href="Bitcoin.Script.Base.html#1575" class="InductiveConstructor Operator">∣_∣</a><a id="2048" class="Symbol">;</a> <a id="2050" href="Bitcoin.Script.Base.html#3591" class="Function">⋁</a><a id="2051" class="Symbol">;</a> <a id="2053" href="Bitcoin.Script.Base.html#3850" class="Function">⋀</a> <a id="2055" class="Symbol">)</a>
<a id="2057" class="Keyword">open</a> <a id="2062" class="Keyword">import</a> <a id="2069" href="Bitcoin.Tx.Base.html" class="Module">Bitcoin.Tx.Base</a>
  <a id="2087" class="Keyword">using</a> <a id="2093" class="Symbol">(</a> <a id="2095" href="Bitcoin.Tx.Base.html#557" class="InductiveConstructor Operator">_at_</a><a id="2099" class="Symbol">;</a> <a id="2101" href="Bitcoin.Tx.Base.html#523" class="Record">TxInput</a>
        <a id="2117" class="Symbol">;</a> <a id="2119" href="Bitcoin.Tx.Base.html#960" class="Record">Tx</a><a id="2121" class="Symbol">;</a> <a id="2123" href="Bitcoin.Tx.Base.html#1252" class="Function">∃Tx</a>
        <a id="2135" class="Symbol">;</a> <a id="2137" href="Bitcoin.Tx.Base.html#885" class="Function">Witness</a><a id="2144" class="Symbol">;</a> <a id="2146" href="Bitcoin.Tx.Base.html#924" class="Function">∃Witness</a> <a id="2155" class="Symbol">)</a>
<a id="2157" class="Keyword">open</a> <a id="2162" class="Keyword">import</a> <a id="2169" href="Bitcoin.Tx.DecidableEquality.html" class="Module">Bitcoin.Tx.DecidableEquality</a>
  <a id="2200" class="Keyword">using</a> <a id="2206" class="Symbol">(</a><a id="2207" class="Keyword">module</a> <a id="2214" href="Bitcoin.Tx.DecidableEquality.html#3152" class="Module">SETₜₓ</a><a id="2219" class="Symbol">;</a> <a id="2221" href="Bitcoin.Tx.DecidableEquality.html#3182" class="Function">Set⟨Tx⟩</a><a id="2228" class="Symbol">)</a>
<a id="2230" class="Keyword">open</a> <a id="2235" class="Keyword">import</a> <a id="2242" href="Bitcoin.Tx.Crypto.html" class="Module">Bitcoin.Tx.Crypto</a>
  <a id="2262" class="Keyword">using</a> <a id="2268" class="Symbol">(</a><a id="2269" href="Bitcoin.Tx.Crypto.html#1073" class="Function">hashTx</a><a id="2275" class="Symbol">;</a> <a id="2277" href="Bitcoin.Tx.Crypto.html#1398" class="Function">sig⋆</a><a id="2281" class="Symbol">;</a> <a id="2283" href="Bitcoin.Tx.Crypto.html#903" class="Function">wit⊥</a><a id="2287" class="Symbol">)</a>

<a id="2290" class="Keyword">module</a> <a id="2297" href="SecureCompilation.Compiler.html" class="Module">SecureCompilation.Compiler</a>

  <a id="2327" class="Comment">-- BitML parameters</a>
  <a id="2349" class="Symbol">(</a><a id="2350" href="SecureCompilation.Compiler.html#2350" class="Bound">Participant</a> <a id="2362" class="Symbol">:</a> <a id="2364" class="PrimitiveType">Set</a><a id="2367" class="Symbol">)</a>
  <a id="2371" class="Symbol">(</a><a id="2372" href="SecureCompilation.Compiler.html#2372" class="Bound Operator">_≟ₚ_</a> <a id="2377" class="Symbol">:</a> <a id="2379" href="Relation.Binary.Definitions.html#4575" class="Function">Decidable</a> <a id="2389" class="Symbol">{</a><a id="2390" class="Argument">A</a> <a id="2392" class="Symbol">=</a> <a id="2394" href="SecureCompilation.Compiler.html#2350" class="Bound">Participant</a><a id="2405" class="Symbol">}</a> <a id="2407" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="2410" class="Symbol">)</a>
  <a id="2414" class="Symbol">(</a><a id="2415" href="SecureCompilation.Compiler.html#2415" class="Bound">Honest</a> <a id="2422" class="Symbol">:</a> <a id="2424" href="Data.Product.html#916" class="Function">Σ[</a> <a id="2427" href="SecureCompilation.Compiler.html#2427" class="Bound">ps</a> <a id="2430" href="Data.Product.html#916" class="Function">∈</a> <a id="2432" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2437" href="SecureCompilation.Compiler.html#2350" class="Bound">Participant</a> <a id="2449" href="Data.Product.html#916" class="Function">]</a> <a id="2451" class="Symbol">(</a><a id="2452" href="Data.List.Base.html#4297" class="Function">length</a> <a id="2459" href="SecureCompilation.Compiler.html#2427" class="Bound">ps</a> <a id="2462" href="Data.Nat.Base.html#1111" class="Function Operator">&gt;</a> <a id="2464" class="Number">0</a><a id="2465" class="Symbol">))</a>

  <a id="2471" class="Comment">-- Compilation parameters</a>
  <a id="2499" class="Symbol">(</a><a id="2500" href="SecureCompilation.Compiler.html#2500" class="Bound">η</a> <a id="2502" class="Symbol">:</a> <a id="2504" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a><a id="2505" class="Symbol">)</a> <a id="2507" class="Comment">-- public security nonce η, ensures adversaries cannot guess</a>
  <a id="2570" class="Keyword">where</a>

<a id="2577" class="Comment">-- BitML</a>
<a id="2586" class="Keyword">open</a> <a id="2591" class="Keyword">import</a> <a id="2598" href="BitML.BasicTypes.html" class="Module">BitML.BasicTypes</a>
  <a id="2617" class="Keyword">using</a> <a id="2623" class="Symbol">(</a> <a id="2625" href="BitML.BasicTypes.html#638" class="Function">Secret</a><a id="2631" class="Symbol">;</a> <a id="2633" href="BitML.BasicTypes.html#759" class="Function">Time</a><a id="2637" class="Symbol">;</a> <a id="2639" href="BitML.BasicTypes.html#606" class="Function">Value</a><a id="2644" class="Symbol">;</a> <a id="2646" href="BitML.BasicTypes.html#617" class="Function">Values</a><a id="2652" class="Symbol">;</a> <a id="2654" href="BitML.BasicTypes.html#678" class="Function">Id</a><a id="2656" class="Symbol">;</a> <a id="2658" href="BitML.BasicTypes.html#691" class="Function">Ids</a><a id="2661" class="Symbol">;</a> <a id="2663" href="BitML.BasicTypes.html#710" class="Function">Name</a><a id="2667" class="Symbol">;</a> <a id="2669" href="BitML.BasicTypes.html#740" class="Function">Names</a>
        <a id="2683" class="Symbol">;</a> <a id="2685" class="Comment">{-variables-}</a> <a id="2699" href="BitML.BasicTypes.html#789" class="Generalizable">v</a><a id="2700" class="Symbol">;</a> <a id="2702" href="BitML.BasicTypes.html#859" class="Generalizable">x</a><a id="2703" class="Symbol">;</a> <a id="2705" href="BitML.BasicTypes.html#881" class="Generalizable">xs</a><a id="2707" class="Symbol">;</a> <a id="2709" href="BitML.BasicTypes.html#839" class="Generalizable">as</a><a id="2711" class="Symbol">;</a> <a id="2713" href="BitML.BasicTypes.html#897" class="Generalizable">t</a> <a id="2715" class="Symbol">)</a>
<a id="2717" class="Keyword">open</a> <a id="2722" class="Keyword">import</a> <a id="2729" href="BitML.Predicate.Base.html" class="Module">BitML.Predicate.Base</a>
  <a id="2752" class="Keyword">using</a> <a id="2758" class="Symbol">(</a> <a id="2760" href="BitML.Predicate.Base.html#594" class="Datatype">Predicate</a><a id="2769" class="Symbol">;</a> <a id="2771" href="BitML.Predicate.Base.html#465" class="Datatype">Arith</a><a id="2776" class="Symbol">;</a> <a id="2778" href="BitML.Predicate.Base.html#1187" class="Function">secretsᵖʳ</a><a id="2787" class="Symbol">;</a> <a id="2789" href="BitML.Predicate.Base.html#988" class="Function">secretsᵃʳ</a>
        <a id="2807" class="Symbol">;</a> <a id="2809" class="Comment">{-variables-}</a> <a id="2823" href="BitML.Predicate.Base.html#796" class="Generalizable">p</a> <a id="2825" class="Symbol">)</a>
<a id="2827" class="Keyword">open</a> <a id="2832" class="Keyword">import</a> <a id="2839" href="BitML.Contracts.Types.html" class="Module">BitML.Contracts.Types</a> <a id="2861" href="SecureCompilation.Compiler.html#2350" class="Bound">Participant</a> <a id="2873" href="SecureCompilation.Compiler.html#2372" class="Bound Operator">_≟ₚ_</a> <a id="2878" href="SecureCompilation.Compiler.html#2415" class="Bound">Honest</a>
  <a id="2887" class="Keyword">using</a> <a id="2893" class="Symbol">(</a> Contract<a id="2903" class="Symbol">;</a> Contracts
        <a id="2923" class="Symbol">;</a> put_&amp;reveal_if_⇒_<a id="2942" class="Symbol">;</a> withdraw<a id="2952" class="Symbol">;</a> split<a id="2959" class="Symbol">;</a> _⇒_<a id="2964" class="Symbol">;</a> after_⇒_
        <a id="2983" class="Symbol">;</a> Precondition
        <a id="3006" class="Symbol">;</a> ⟨_⟩_<a id="3012" class="Symbol">;</a> Advertisement<a id="3027" class="Symbol">;</a> G
        <a id="3039" class="Symbol">;</a> <a id="3041" class="Keyword">module</a> SETₚ
        <a id="3061" class="Symbol">;</a> <a id="3063" class="Comment">{-variables-}</a> A<a id="3078" class="Symbol">;</a> d<a id="3081" class="Symbol">;</a> d′<a id="3085" class="Symbol">;</a> ds<a id="3089" class="Symbol">;</a> ds′<a id="3094" class="Symbol">;</a> vcs <a id="3100" class="Symbol">)</a>
<a id="3102" class="Keyword">open</a> <a id="3107" class="Keyword">import</a> <a id="3114" href="BitML.Contracts.Helpers.html" class="Module">BitML.Contracts.Helpers</a> <a id="3138" href="SecureCompilation.Compiler.html#2350" class="Bound">Participant</a> <a id="3150" href="SecureCompilation.Compiler.html#2372" class="Bound Operator">_≟ₚ_</a> <a id="3155" href="SecureCompilation.Compiler.html#2415" class="Bound">Honest</a>
  <a id="3164" class="Keyword">using</a> <a id="3170" class="Symbol">(</a> namesᵖ<a id="3178" class="Symbol">;</a> secretsᵖ<a id="3188" class="Symbol">;</a> participantsᵖ<a id="3203" class="Symbol">;</a> depositsᵖ<a id="3214" class="Symbol">;</a> persistentDepositsᵖ<a id="3235" class="Symbol">;</a> removeTopDecorations
        <a id="3266" class="Symbol">;</a> namesᶜ<a id="3274" class="Symbol">;</a> secretsᶜ<a id="3284" class="Symbol">;</a> putComponentsᶜ
        <a id="3309" class="Symbol">;</a> namesᶜˢ<a id="3318" class="Symbol">;</a> secretsᶜˢ<a id="3329" class="Symbol">;</a> putComponentsᶜˢ
        <a id="3355" class="Symbol">;</a> namesᵛᶜˢ<a id="3365" class="Symbol">;</a> secretsᵛᶜˢ<a id="3377" class="Symbol">;</a> putComponentsᵛᶜˢ
        <a id="3404" class="Symbol">;</a> remove-names<a id="3418" class="Symbol">;</a> remove-putComponents
        <a id="3449" class="Symbol">;</a> getDeposit<a id="3461" class="Symbol">;</a> getName <a id="3471" class="Symbol">)</a>
<a id="3473" class="Keyword">open</a> <a id="3478" class="Keyword">import</a> <a id="3485" href="BitML.Contracts.Validity.html" class="Module">BitML.Contracts.Validity</a> <a id="3510" href="SecureCompilation.Compiler.html#2350" class="Bound">Participant</a> <a id="3522" href="SecureCompilation.Compiler.html#2372" class="Bound Operator">_≟ₚ_</a> <a id="3527" href="SecureCompilation.Compiler.html#2415" class="Bound">Honest</a>
  <a id="3536" class="Keyword">using</a> <a id="3542" class="Symbol">(</a>ValidAdvertisement<a id="3561" class="Symbol">;</a> _~_<a id="3566" class="Symbol">;</a> _~′_<a id="3572" class="Symbol">;</a> _~″_<a id="3578" class="Symbol">;</a> _&amp;_<a id="3583" class="Symbol">;</a> map~<a id="3589" class="Symbol">;</a> map~′<a id="3596" class="Symbol">;</a> map~″<a id="3603" class="Symbol">;</a> mapEnum~″<a id="3614" class="Symbol">)</a>

<a id="3617" class="Comment">--------------------------------------------</a>

<a id="bitml-compiler"></a><a id="3663" href="SecureCompilation.Compiler.html#3663" class="Function">bitml-compiler</a> <a id="3678" class="Symbol">:</a>
    <a id="3684" class="Comment">-- the input contract &amp; precondition</a>
    <a id="3725" class="Symbol">(</a><a id="3726" href="SecureCompilation.Compiler.html#3726" class="Bound">ad</a> <a id="3729" class="Symbol">:</a> <a id="3731" href="BitML.Contracts.Types.html#2522" class="Record">Advertisement</a><a id="3744" class="Symbol">)</a>
    <a id="3750" class="Comment">-- only compile valid advertisements</a>
  <a id="3789" class="Symbol">→</a> <a id="3791" href="BitML.Contracts.Validity.html#1501" class="Function">ValidAdvertisement</a> <a id="3810" href="SecureCompilation.Compiler.html#3726" class="Bound">ad</a>
    <a id="3817" class="Comment">-- sechash: maps secrets in G to the corresponding committed hashes</a>
  <a id="3887" class="Symbol">→</a> <a id="3889" class="Symbol">(∀</a> <a id="3892" class="Symbol">{</a><a id="3893" href="SecureCompilation.Compiler.html#3893" class="Bound">a</a><a id="3894" class="Symbol">}</a> <a id="3896" class="Symbol">→</a> <a id="3898" href="Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="3903" href="SecureCompilation.Compiler.html#3893" class="Bound">a</a> <a id="3905" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="3907" href="BitML.Contracts.Helpers.html#1940" class="Function">namesᵖ</a> <a id="3914" class="Symbol">(</a><a id="3915" href="BitML.Contracts.Types.html#2580" class="Field">G</a> <a id="3917" href="SecureCompilation.Compiler.html#3726" class="Bound">ad</a><a id="3919" class="Symbol">)</a> <a id="3921" class="Symbol">→</a> <a id="3923" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a><a id="3924" class="Symbol">)</a>
    <a id="3930" class="Comment">-- txout: maps deposits in G to *pre-existing* transactions with the corresponding value</a>
  <a id="4021" class="Symbol">→</a> <a id="4023" class="Symbol">(∀</a> <a id="4026" class="Symbol">{</a><a id="4027" href="SecureCompilation.Compiler.html#4027" class="Bound">d</a><a id="4028" class="Symbol">}</a> <a id="4030" class="Symbol">→</a> <a id="4032" href="Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="4037" href="SecureCompilation.Compiler.html#4027" class="Bound">d</a> <a id="4039" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="4041" href="BitML.Contracts.Helpers.html#1940" class="Function">namesᵖ</a> <a id="4048" class="Symbol">(</a><a id="4049" href="BitML.Contracts.Types.html#2580" class="Field">G</a> <a id="4051" href="SecureCompilation.Compiler.html#3726" class="Bound">ad</a><a id="4053" class="Symbol">)</a> <a id="4055" class="Symbol">→</a> <a id="4057" href="Bitcoin.Tx.Base.html#523" class="Record">TxInput</a><a id="4064" class="Symbol">)</a>
    <a id="4070" class="Comment">-- Exchanged keypairs K(A) and K(D,A)</a>
  <a id="4110" class="Symbol">→</a> <a id="4112" class="Symbol">(</a><a id="4113" href="SecureCompilation.Compiler.html#2350" class="Bound">Participant</a> <a id="4125" class="Symbol">→</a> <a id="4127" href="Bitcoin.Crypto.html#320" class="Record">KeyPair</a><a id="4134" class="Symbol">)</a>
  <a id="4138" class="Symbol">→</a> <a id="4140" class="Symbol">(</a><a id="4141" href="BitML.Contracts.Types.html#1048" class="Datatype">Contract</a> <a id="4150" class="Symbol">→</a> <a id="4152" href="SecureCompilation.Compiler.html#2350" class="Bound">Participant</a> <a id="4164" class="Symbol">→</a> <a id="4166" href="Bitcoin.Crypto.html#320" class="Record">KeyPair</a><a id="4173" class="Symbol">)</a>
    <a id="4179" class="Comment">-- a set of transaction to be submitted</a>
  <a id="4221" class="Symbol">→</a> <a id="4223" class="Comment">{-Set⟨Tx⟩-}</a> <a id="4235" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="4240" href="Bitcoin.Tx.Base.html#1252" class="Function">∃Tx</a>
<a id="4244" class="Symbol">{-#</a> <a id="4248" class="Keyword">TERMINATING</a> <a id="4260" class="Symbol">#-}</a> <a id="4264" class="Comment">-- due to interaction between Bc and Bd :(</a>
<a id="4307" href="SecureCompilation.Compiler.html#3663" class="Function">bitml-compiler</a> <a id="4322" class="Symbol">(</a><a id="4323" href="BitML.Contracts.Types.html#2562" class="InductiveConstructor Operator">⟨</a> <a id="4325" href="SecureCompilation.Compiler.html#4325" class="Bound">G₀</a> <a id="4328" href="BitML.Contracts.Types.html#2562" class="InductiveConstructor Operator">⟩</a> <a id="4330" href="SecureCompilation.Compiler.html#4330" class="Bound">C₀</a><a id="4332" class="Symbol">)</a> <a id="4334" class="Symbol">(_</a> <a id="4337" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4339" href="SecureCompilation.Compiler.html#4339" class="Bound">names⊆</a> <a id="4346" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4348" href="SecureCompilation.Compiler.html#4348" class="Bound">putComponents</a> <a id="4362" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4364" class="Symbol">_)</a> <a id="4367" href="SecureCompilation.Compiler.html#4367" class="Bound">sechash</a> <a id="4375" href="SecureCompilation.Compiler.html#4375" class="Bound">txout</a> <a id="4381" href="SecureCompilation.Compiler.html#4381" class="Bound">K</a> <a id="4383" href="SecureCompilation.Compiler.html#4383" class="Bound">K²</a>
  <a id="4388" class="Symbol">=</a> <a id="4390" class="Comment">{-SETₜₓ.fromList-}</a> <a id="4409" class="Symbol">(</a><a id="4410" href="SecureCompilation.Compiler.html#7026" class="Function">Tinit</a> <a id="4416" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="4418" href="Data.List.Base.html#3827" class="Function">concat</a> <a id="4425" class="Symbol">(</a><a id="4426" href="BitML.Contracts.Validity.html#2631" class="Function">map~</a> <a id="4431" href="SecureCompilation.Compiler.html#4330" class="Bound">C₀</a> <a id="4434" class="Symbol">λ</a> <a id="4436" href="SecureCompilation.Compiler.html#4436" class="Bound">Dᵢ</a> <a id="4439" href="SecureCompilation.Compiler.html#4439" class="Bound">Dᵢ~C₀</a> <a id="4445" class="Symbol">→</a> <a id="4447" href="SecureCompilation.Compiler.html#7687" class="Function">Bd</a> <a id="4450" class="Symbol">(</a><a id="4451" href="SecureCompilation.Compiler.html#4436" class="Bound">Dᵢ</a> <a id="4454" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4456" href="SecureCompilation.Compiler.html#4439" class="Bound">Dᵢ~C₀</a><a id="4461" class="Symbol">)</a> <a id="4463" href="SecureCompilation.Compiler.html#4436" class="Bound">Dᵢ</a> <a id="4466" href="SecureCompilation.Compiler.html#7446" class="Function">Tinit♯</a> <a id="4473" class="Number">0</a> <a id="4475" href="SecureCompilation.Compiler.html#5074" class="Function">V</a> <a id="4477" href="SecureCompilation.Compiler.html#4499" class="Function">partG</a> <a id="4483" class="Number">0</a><a id="4484" class="Symbol">))</a>
  <a id="4489" class="Keyword">where</a>
    <a id="4499" href="SecureCompilation.Compiler.html#4499" class="Function">partG</a> <a id="4505" class="Symbol">:</a> <a id="4507" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="4512" href="SecureCompilation.Compiler.html#2350" class="Bound">Participant</a>
    <a id="4528" href="SecureCompilation.Compiler.html#4499" class="Function">partG</a> <a id="4534" class="Symbol">=</a> <a id="4536" href="Prelude.Set%2527.html#4768" class="Function">SETₚ.nub</a> <a id="4545" class="Symbol">(</a><a id="4546" href="BitML.Contracts.Helpers.html#3467" class="Function">participantsᵖ</a> <a id="4560" href="SecureCompilation.Compiler.html#4325" class="Bound">G₀</a><a id="4562" class="Symbol">)</a>

    <a id="4569" class="Comment">-- part: maps deposit names in G to the corresponding participant</a>
    <a id="4639" href="SecureCompilation.Compiler.html#4639" class="Function">part</a> <a id="4644" class="Symbol">:</a> <a id="4646" class="Symbol">∀</a> <a id="4648" class="Symbol">{</a><a id="4649" href="SecureCompilation.Compiler.html#4649" class="Bound">x</a><a id="4650" class="Symbol">}</a> <a id="4652" class="Symbol">→</a> <a id="4654" href="Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="4659" href="SecureCompilation.Compiler.html#4649" class="Bound">x</a> <a id="4661" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="4663" href="BitML.Contracts.Helpers.html#1940" class="Function">namesᵖ</a> <a id="4670" href="SecureCompilation.Compiler.html#4325" class="Bound">G₀</a> <a id="4673" class="Symbol">→</a> <a id="4675" href="SecureCompilation.Compiler.html#2350" class="Bound">Participant</a>
    <a id="4691" href="SecureCompilation.Compiler.html#4639" class="Function">part</a> <a id="4696" class="Symbol">=</a> <a id="4698" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="4704" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="4706" href="BitML.Contracts.Helpers.html#5357" class="Function">getDeposit</a> <a id="4717" class="Symbol">{</a><a id="4718" class="Argument">g</a> <a id="4720" class="Symbol">=</a> <a id="4722" href="SecureCompilation.Compiler.html#4325" class="Bound">G₀</a><a id="4724" class="Symbol">}</a>

    <a id="4731" class="Comment">-- val: maps deposit names in G to the value contained in the deposit</a>
    <a id="4805" href="SecureCompilation.Compiler.html#4805" class="Function">val</a> <a id="4809" class="Symbol">:</a> <a id="4811" class="Symbol">∀</a> <a id="4813" class="Symbol">{</a><a id="4814" href="SecureCompilation.Compiler.html#4814" class="Bound">x</a><a id="4815" class="Symbol">}</a> <a id="4817" class="Symbol">→</a> <a id="4819" href="Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="4824" href="SecureCompilation.Compiler.html#4814" class="Bound">x</a> <a id="4826" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="4828" href="BitML.Contracts.Helpers.html#1940" class="Function">namesᵖ</a> <a id="4835" href="SecureCompilation.Compiler.html#4325" class="Bound">G₀</a> <a id="4838" class="Symbol">→</a> <a id="4840" href="BitML.BasicTypes.html#606" class="Function">Value</a>
    <a id="4850" href="SecureCompilation.Compiler.html#4805" class="Function">val</a> <a id="4854" class="Symbol">=</a> <a id="4856" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="4862" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="4864" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="4870" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="4872" href="BitML.Contracts.Helpers.html#5357" class="Function">getDeposit</a> <a id="4883" class="Symbol">{</a><a id="4884" class="Argument">g</a> <a id="4886" class="Symbol">=</a> <a id="4888" href="SecureCompilation.Compiler.html#4325" class="Bound">G₀</a><a id="4890" class="Symbol">}</a>

    <a id="4897" class="Comment">-- K(D,ℙ): abbreviation for keys coming from multiple participant</a>
    <a id="4967" href="SecureCompilation.Compiler.html#4967" class="Function">K⋆</a> <a id="4970" class="Symbol">:</a> <a id="4972" href="BitML.Contracts.Types.html#1048" class="Datatype">Contract</a> <a id="4981" class="Symbol">→</a> <a id="4983" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="4988" href="SecureCompilation.Compiler.html#2350" class="Bound">Participant</a> <a id="5000" class="Symbol">→</a> <a id="5002" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="5007" href="Bitcoin.Crypto.html#320" class="Record">KeyPair</a>
    <a id="5019" href="SecureCompilation.Compiler.html#4967" class="Function">K⋆</a> <a id="5022" href="SecureCompilation.Compiler.html#5022" class="Bound">D</a> <a id="5024" class="Symbol">=</a> <a id="5026" href="Data.List.Base.html#1497" class="Function">map</a> <a id="5030" class="Symbol">(</a><a id="5031" href="SecureCompilation.Compiler.html#4383" class="Bound">K²</a> <a id="5034" href="SecureCompilation.Compiler.html#5022" class="Bound">D</a><a id="5035" class="Symbol">)</a>

    <a id="5042" href="SecureCompilation.Compiler.html#5042" class="Function">ς</a> <a id="5044" class="Symbol">:</a> <a id="5046" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
    <a id="5052" href="SecureCompilation.Compiler.html#5042" class="Function">ς</a> <a id="5054" class="Symbol">=</a> <a id="5056" href="Data.List.Base.html#4297" class="Function">length</a> <a id="5063" href="SecureCompilation.Compiler.html#4499" class="Function">partG</a>

    <a id="5074" href="SecureCompilation.Compiler.html#5074" class="Function">V</a> <a id="5076" class="Symbol">:</a> <a id="5078" href="BitML.BasicTypes.html#606" class="Function">Value</a>
    <a id="5088" href="SecureCompilation.Compiler.html#5074" class="Function">V</a> <a id="5090" class="Symbol">=</a> <a id="5092" href="Data.List.Base.html#4217" class="Function">sum</a> <a id="5096" class="Symbol">(</a><a id="5097" href="Data.List.Base.html#1497" class="Function">map</a> <a id="5101" class="Symbol">(</a><a id="5102" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="5108" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="5110" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a><a id="5115" class="Symbol">)</a> <a id="5117" class="Symbol">(</a><a id="5118" href="BitML.Contracts.Helpers.html#4799" class="Function">persistentDepositsᵖ</a> <a id="5138" href="SecureCompilation.Compiler.html#4325" class="Bound">G₀</a><a id="5140" class="Symbol">))</a>

    <a id="5148" href="SecureCompilation.Compiler.html#5148" class="Function">Bout</a> <a id="5153" class="Symbol">:</a> <a id="5155" class="Symbol">(</a><a id="5156" href="SecureCompilation.Compiler.html#5156" class="Bound">d</a> <a id="5158" class="Symbol">:</a> <a id="5160" href="BitML.Contracts.Types.html#1048" class="Datatype">Contract</a><a id="5168" class="Symbol">)</a>
         <a id="5179" class="Symbol">→</a> <a id="5181" class="Symbol">(</a><a id="5182" href="SecureCompilation.Compiler.html#5156" class="Bound">d</a> <a id="5184" href="BitML.Contracts.Validity.html#2454" class="Record Operator">~</a> <a id="5186" href="SecureCompilation.Compiler.html#4330" class="Bound">C₀</a><a id="5188" class="Symbol">)</a>
         <a id="5199" class="Symbol">→</a> <a id="5201" href="Data.Product.html#1788" class="Function">∃[</a> <a id="5204" href="SecureCompilation.Compiler.html#5204" class="Bound">ctx</a> <a id="5208" href="Data.Product.html#1788" class="Function">]</a> <a id="5210" href="Bitcoin.Script.Base.html#983" class="Datatype">Script</a> <a id="5217" href="SecureCompilation.Compiler.html#5204" class="Bound">ctx</a> <a id="5221" href="Bitcoin.Script.Base.html#896" class="InductiveConstructor">`Bool</a>
    <a id="5231" href="SecureCompilation.Compiler.html#5148" class="Function">Bout</a> <a id="5236" href="SecureCompilation.Compiler.html#5236" class="Bound">D</a> <a id="5238" class="Symbol">(</a><a id="5239" href="SecureCompilation.Compiler.html#5239" class="Bound">p⊆</a> <a id="5242" href="BitML.Contracts.Validity.html#2516" class="InductiveConstructor Operator">&amp;</a> <a id="5244" href="SecureCompilation.Compiler.html#5244" class="Bound">n⊆</a><a id="5246" class="Symbol">)</a> <a id="5248" class="Keyword">with</a> <a id="5253" href="BitML.Contracts.Helpers.html#6588" class="Function">removeTopDecorations</a> <a id="5274" href="SecureCompilation.Compiler.html#5236" class="Bound">D</a> <a id="5276" class="Symbol">|</a> <a id="5278" href="Relation.Binary.PropositionalEquality.html#3845" class="Function">inspect</a> <a id="5286" href="BitML.Contracts.Helpers.html#6588" class="Function">removeTopDecorations</a> <a id="5307" href="SecureCompilation.Compiler.html#5236" class="Bound">D</a>
    <a id="5313" class="Symbol">...</a> <a id="5317" class="Symbol">|</a> <a id="5319" href="BitML.Contracts.Types.html#1147" class="InductiveConstructor Operator">put</a> <a id="5323" href="SecureCompilation.Compiler.html#5323" class="Bound">zs</a> <a id="5326" href="BitML.Contracts.Types.html#1147" class="InductiveConstructor Operator">&amp;reveal</a> <a id="5334" href="SecureCompilation.Compiler.html#5334" class="Bound">as</a> <a id="5337" href="BitML.Contracts.Types.html#1147" class="InductiveConstructor Operator">if</a> <a id="5340" href="SecureCompilation.Compiler.html#5340" class="Bound">p</a> <a id="5342" href="BitML.Contracts.Types.html#1147" class="InductiveConstructor Operator">⇒</a> <a id="5344" href="SecureCompilation.Compiler.html#5344" class="Bound">C</a> <a id="5346" class="Symbol">|</a> <a id="5348" href="SecureCompilation.Compiler.html#1604" class="InductiveConstructor Operator">≡[</a> <a id="5351" href="SecureCompilation.Compiler.html#5351" class="Bound">eq</a> <a id="5354" href="SecureCompilation.Compiler.html#1604" class="InductiveConstructor Operator">]</a>
        <a id="5364" class="Symbol">=</a> <a id="5366" href="Bitcoin.Script.Base.html#794" class="InductiveConstructor">Ctx</a> <a id="5370" class="Symbol">(</a><a id="5371" href="SecureCompilation.Compiler.html#5042" class="Function">ς</a> <a id="5373" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="5375" href="SecureCompilation.Compiler.html#5717" class="Function">m</a><a id="5376" class="Symbol">)</a> <a id="5378" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5380" class="Symbol">(</a> <a id="5382" href="Bitcoin.Script.Base.html#1695" class="InductiveConstructor">versig</a> <a id="5389" class="Symbol">(</a><a id="5390" href="SecureCompilation.Compiler.html#4967" class="Function">K⋆</a> <a id="5393" class="Bound">D</a> <a id="5395" href="SecureCompilation.Compiler.html#4499" class="Function">partG</a><a id="5400" class="Symbol">)</a> <a id="5402" class="Symbol">(</a><a id="5403" href="Data.List.Base.html#1497" class="Function">map</a> <a id="5407" class="Symbol">(</a><a id="5408" href="Data.Fin.Base.html#2858" class="Function">inject+</a> <a id="5416" href="SecureCompilation.Compiler.html#5717" class="Function">m</a><a id="5417" class="Symbol">)</a> <a id="5419" class="Symbol">(</a><a id="5420" href="Data.List.Base.html#5754" class="Function">allFin</a> <a id="5427" href="SecureCompilation.Compiler.html#5042" class="Function">ς</a><a id="5428" class="Symbol">))</a>
                     <a id="5452" href="Bitcoin.Script.Base.html#2039" class="Function Operator">`∧</a> <a id="5455" href="SecureCompilation.Compiler.html#6511" class="Function">Bᵖʳ</a> <a id="5459" href="SecureCompilation.Compiler.html#5340" class="Bound">p</a> <a id="5461" href="SecureCompilation.Compiler.html#5882" class="Function">p⊆as</a>
                     <a id="5487" href="Bitcoin.Script.Base.html#2039" class="Function Operator">`∧</a> <a id="5490" href="Bitcoin.Script.Base.html#3850" class="Function">⋀</a> <a id="5492" class="Symbol">(</a><a id="5493" href="Prelude.Lists.html#5447" class="Function">mapEnumWith∈</a> <a id="5506" href="SecureCompilation.Compiler.html#5334" class="Bound">as</a> <a id="5509" class="Symbol">(λ</a> <a id="5512" href="SecureCompilation.Compiler.html#5512" class="Bound">i</a> <a id="5514" href="SecureCompilation.Compiler.html#5514" class="Bound">a</a> <a id="5516" href="SecureCompilation.Compiler.html#5516" class="Bound">a∈</a> <a id="5519" class="Symbol">→</a>
                             <a id="5550" class="Keyword">let</a> <a id="5554" href="SecureCompilation.Compiler.html#5554" class="Bound">bi</a> <a id="5557" class="Symbol">=</a> <a id="5559" href="Bitcoin.Script.Base.html#1128" class="InductiveConstructor">var</a> <a id="5563" class="Symbol">(</a><a id="5564" href="Data.Fin.Base.html#2272" class="Function">raise</a> <a id="5570" href="SecureCompilation.Compiler.html#5042" class="Function">ς</a> <a id="5572" href="SecureCompilation.Compiler.html#5512" class="Bound">i</a><a id="5573" class="Symbol">)</a>
                             <a id="5604" class="Keyword">in</a> <a id="5607" class="Symbol">(</a><a id="5608" href="Bitcoin.Script.Base.html#1627" class="InductiveConstructor">hash</a> <a id="5613" href="SecureCompilation.Compiler.html#5554" class="Bound">bi</a> <a id="5616" href="Bitcoin.Script.Base.html#1336" class="InductiveConstructor Operator">`=</a> <a id="5619" href="Bitcoin.Script.Base.html#1199" class="InductiveConstructor">`</a> <a id="5621" class="Symbol">(</a><a id="5622" href="SecureCompilation.Compiler.html#4367" class="Bound">sechash</a> <a id="5630" class="Symbol">(</a><a id="5631" href="SecureCompilation.Compiler.html#5977" class="Function">as⊆</a> <a id="5635" href="SecureCompilation.Compiler.html#5516" class="Bound">a∈</a><a id="5637" class="Symbol">)))</a> <a id="5641" href="Bitcoin.Script.Base.html#2039" class="Function Operator">`∧</a> <a id="5644" class="Symbol">(</a><a id="5645" href="Bitcoin.Script.Base.html#1199" class="InductiveConstructor">`</a> <a id="5647" href="SecureCompilation.Compiler.html#2500" class="Bound">η</a> <a id="5649" href="Bitcoin.Script.Base.html#1394" class="InductiveConstructor Operator">`&lt;</a> <a id="5652" href="Bitcoin.Script.Base.html#1575" class="InductiveConstructor Operator">∣</a> <a id="5654" href="SecureCompilation.Compiler.html#5554" class="Bound">bi</a> <a id="5657" href="Bitcoin.Script.Base.html#1575" class="InductiveConstructor Operator">∣</a><a id="5658" class="Symbol">)))</a>
                        <a id="5686" class="Symbol">)</a>

          <a id="5699" class="Keyword">where</a>
            <a id="5717" href="SecureCompilation.Compiler.html#5717" class="Function">m</a> <a id="5719" class="Symbol">:</a> <a id="5721" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
            <a id="5735" href="SecureCompilation.Compiler.html#5717" class="Function">m</a> <a id="5737" class="Symbol">=</a> <a id="5739" href="Data.List.Base.html#4297" class="Function">length</a> <a id="5746" href="SecureCompilation.Compiler.html#5334" class="Bound">as</a>

            <a id="5762" href="SecureCompilation.Compiler.html#5762" class="Function">put∈</a> <a id="5767" class="Symbol">:</a> <a id="5769" class="Symbol">(</a><a id="5770" href="SecureCompilation.Compiler.html#5323" class="Bound">zs</a> <a id="5773" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5775" href="SecureCompilation.Compiler.html#5334" class="Bound">as</a> <a id="5778" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5780" href="SecureCompilation.Compiler.html#5340" class="Bound">p</a><a id="5781" class="Symbol">)</a> <a id="5783" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="5785" href="BitML.Contracts.Helpers.html#3743" class="Function">putComponentsᶜ</a> <a id="5800" class="Bound">D</a>
            <a id="5814" href="SecureCompilation.Compiler.html#5762" class="Function">put∈</a> <a id="5819" class="Keyword">rewrite</a> <a id="5827" href="BitML.Contracts.Helpers.html#6791" class="Function">remove-putComponents</a> <a id="5848" class="Symbol">{</a><a id="5849" class="Bound">D</a><a id="5850" class="Symbol">}</a> <a id="5852" class="Symbol">|</a> <a id="5854" href="SecureCompilation.Compiler.html#5351" class="Bound">eq</a> <a id="5857" class="Symbol">=</a> <a id="5859" href="Data.List.Relation.Unary.Any.html#1174" class="InductiveConstructor">here</a> <a id="5864" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

            <a id="5882" href="SecureCompilation.Compiler.html#5882" class="Function">p⊆as</a> <a id="5887" class="Symbol">:</a> <a id="5889" href="BitML.Predicate.Base.html#1187" class="Function">secretsᵖʳ</a> <a id="5899" href="SecureCompilation.Compiler.html#5340" class="Bound">p</a> <a id="5901" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">⊆</a> <a id="5903" href="SecureCompilation.Compiler.html#5334" class="Bound">as</a>
            <a id="5918" href="SecureCompilation.Compiler.html#5882" class="Function">p⊆as</a> <a id="5923" class="Symbol">=</a> <a id="5925" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="5931" class="Symbol">(</a><a id="5932" href="Data.List.Relation.Unary.All.html#5949" class="Function">lookup</a> <a id="5939" href="SecureCompilation.Compiler.html#4348" class="Bound">putComponents</a> <a id="5953" class="Symbol">(</a><a id="5954" class="Bound">p⊆</a> <a id="5957" href="SecureCompilation.Compiler.html#5762" class="Function">put∈</a><a id="5961" class="Symbol">))</a>

            <a id="5977" href="SecureCompilation.Compiler.html#5977" class="Function">as⊆</a> <a id="5981" class="Symbol">:</a> <a id="5983" class="Symbol">∀</a> <a id="5985" class="Symbol">{</a><a id="5986" href="SecureCompilation.Compiler.html#5986" class="Bound">a</a><a id="5987" class="Symbol">}</a> <a id="5989" class="Symbol">→</a> <a id="5991" href="SecureCompilation.Compiler.html#5986" class="Bound">a</a> <a id="5993" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="5995" href="SecureCompilation.Compiler.html#5334" class="Bound">as</a> <a id="5998" class="Symbol">→</a> <a id="6000" href="Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="6005" href="SecureCompilation.Compiler.html#5986" class="Bound">a</a> <a id="6007" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="6009" href="BitML.Contracts.Helpers.html#1940" class="Function">namesᵖ</a> <a id="6016" href="SecureCompilation.Compiler.html#4325" class="Bound">G₀</a>
            <a id="6031" href="SecureCompilation.Compiler.html#5977" class="Function">as⊆</a> <a id="6035" class="Keyword">rewrite</a> <a id="6043" href="BitML.Contracts.Helpers.html#7191" class="Function">remove-names</a> <a id="6056" class="Symbol">{</a><a id="6057" class="Bound">D</a><a id="6058" class="Symbol">}</a> <a id="6060" class="Symbol">|</a> <a id="6062" href="SecureCompilation.Compiler.html#5351" class="Bound">eq</a> <a id="6065" class="Symbol">=</a> <a id="6067" href="SecureCompilation.Compiler.html#4339" class="Bound">names⊆</a> <a id="6074" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="6076" class="Bound">n⊆</a> <a id="6079" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="6081" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="6088" class="Symbol">(</a><a id="6089" href="Data.List.Base.html#1497" class="Function">map</a> <a id="6093" href="Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="6098" href="SecureCompilation.Compiler.html#5323" class="Bound">zs</a><a id="6100" class="Symbol">)</a> <a id="6102" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="6104" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a> <a id="6111" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="6113" href="Data.List.Membership.Propositional.Properties.html#3315" class="Function">∈-map⁺</a> <a id="6120" href="Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a>

            <a id="6138" href="SecureCompilation.Compiler.html#6138" class="Function">Bᵃʳ</a> <a id="6142" class="Symbol">:</a> <a id="6144" class="Symbol">(</a><a id="6145" href="SecureCompilation.Compiler.html#6145" class="Bound">e</a> <a id="6147" class="Symbol">:</a> <a id="6149" href="BitML.Predicate.Base.html#465" class="Datatype">Arith</a><a id="6154" class="Symbol">)</a> <a id="6156" class="Symbol">→</a> <a id="6158" href="BitML.Predicate.Base.html#988" class="Function">secretsᵃʳ</a> <a id="6168" href="SecureCompilation.Compiler.html#6145" class="Bound">e</a> <a id="6170" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">⊆</a> <a id="6172" href="SecureCompilation.Compiler.html#5334" class="Bound">as</a> <a id="6175" class="Symbol">→</a> <a id="6177" href="Bitcoin.Script.Base.html#983" class="Datatype">Script</a> <a id="6184" class="Symbol">(</a><a id="6185" href="Bitcoin.Script.Base.html#794" class="InductiveConstructor">Ctx</a> <a id="6189" class="Symbol">(</a><a id="6190" href="SecureCompilation.Compiler.html#5042" class="Function">ς</a> <a id="6192" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="6194" href="SecureCompilation.Compiler.html#5717" class="Function">m</a><a id="6195" class="Symbol">))</a> <a id="6198" href="Bitcoin.Script.Base.html#902" class="InductiveConstructor">`ℤ</a>
            <a id="6213" href="SecureCompilation.Compiler.html#6138" class="Function">Bᵃʳ</a> <a id="6217" class="Symbol">(</a><a id="6218" href="BitML.Predicate.Base.html#485" class="InductiveConstructor">Arith.`</a> <a id="6226" href="SecureCompilation.Compiler.html#6226" class="Bound">x</a><a id="6227" class="Symbol">)</a>    <a id="6232" class="Symbol">_</a>   <a id="6236" class="Symbol">=</a> <a id="6238" href="Bitcoin.Script.Base.html#1199" class="InductiveConstructor">`</a> <a id="6240" href="SecureCompilation.Compiler.html#6226" class="Bound">x</a>
            <a id="6254" href="SecureCompilation.Compiler.html#6138" class="Function">Bᵃʳ</a> <a id="6258" class="Symbol">(</a><a id="6259" href="BitML.Predicate.Base.html#504" class="InductiveConstructor Operator">Arith.∣</a> <a id="6267" href="SecureCompilation.Compiler.html#6267" class="Bound">s</a> <a id="6269" href="BitML.Predicate.Base.html#504" class="InductiveConstructor Operator">∣</a><a id="6270" class="Symbol">)</a>  <a id="6273" href="SecureCompilation.Compiler.html#6273" class="Bound">⊆as</a> <a id="6277" class="Symbol">=</a> <a id="6279" href="Bitcoin.Script.Base.html#1575" class="InductiveConstructor Operator">∣</a> <a id="6281" href="Bitcoin.Script.Base.html#1128" class="InductiveConstructor">var</a> <a id="6285" class="Symbol">(</a><a id="6286" href="Data.Fin.Base.html#2272" class="Function">raise</a> <a id="6292" href="SecureCompilation.Compiler.html#5042" class="Function">ς</a> <a id="6294" class="Symbol">(</a><a id="6295" href="Data.List.Relation.Unary.Any.html#1909" class="Function">index</a> <a id="6301" class="Symbol">(</a><a id="6302" href="SecureCompilation.Compiler.html#6273" class="Bound">⊆as</a> <a id="6306" class="Symbol">(</a><a id="6307" href="Data.List.Relation.Unary.Any.html#1174" class="InductiveConstructor">here</a> <a id="6312" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="6316" class="Symbol">))))</a> <a id="6321" href="Bitcoin.Script.Base.html#1575" class="InductiveConstructor Operator">∣</a> <a id="6323" href="Bitcoin.Script.Base.html#1281" class="InductiveConstructor Operator">`-</a> <a id="6326" href="Bitcoin.Script.Base.html#1199" class="InductiveConstructor">`</a> <a id="6328" href="SecureCompilation.Compiler.html#2500" class="Bound">η</a>
            <a id="6342" href="SecureCompilation.Compiler.html#6138" class="Function">Bᵃʳ</a> <a id="6346" class="Symbol">(</a><a id="6347" href="SecureCompilation.Compiler.html#6347" class="Bound">x</a> <a id="6349" href="BitML.Predicate.Base.html#528" class="InductiveConstructor Operator">Arith.`+</a> <a id="6358" href="SecureCompilation.Compiler.html#6358" class="Bound">y</a><a id="6359" class="Symbol">)</a> <a id="6361" href="SecureCompilation.Compiler.html#6361" class="Bound">⊆as</a> <a id="6365" class="Symbol">=</a> <a id="6367" href="SecureCompilation.Compiler.html#6138" class="Function">Bᵃʳ</a> <a id="6371" href="SecureCompilation.Compiler.html#6347" class="Bound">x</a> <a id="6373" class="Symbol">(</a><a id="6374" href="SecureCompilation.Compiler.html#6361" class="Bound">⊆as</a> <a id="6378" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="6380" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a><a id="6386" class="Symbol">)</a> <a id="6388" href="Bitcoin.Script.Base.html#1226" class="InductiveConstructor Operator">`+</a> <a id="6391" href="SecureCompilation.Compiler.html#6138" class="Function">Bᵃʳ</a> <a id="6395" href="SecureCompilation.Compiler.html#6358" class="Bound">y</a> <a id="6397" class="Symbol">(</a><a id="6398" href="SecureCompilation.Compiler.html#6361" class="Bound">⊆as</a> <a id="6402" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="6404" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="6411" class="Symbol">_)</a>
            <a id="6426" href="SecureCompilation.Compiler.html#6138" class="Function">Bᵃʳ</a> <a id="6430" class="Symbol">(</a><a id="6431" href="SecureCompilation.Compiler.html#6431" class="Bound">x</a> <a id="6433" href="BitML.Predicate.Base.html#559" class="InductiveConstructor Operator">Arith.`-</a> <a id="6442" href="SecureCompilation.Compiler.html#6442" class="Bound">y</a><a id="6443" class="Symbol">)</a> <a id="6445" href="SecureCompilation.Compiler.html#6445" class="Bound">⊆as</a> <a id="6449" class="Symbol">=</a> <a id="6451" href="SecureCompilation.Compiler.html#6138" class="Function">Bᵃʳ</a> <a id="6455" href="SecureCompilation.Compiler.html#6431" class="Bound">x</a> <a id="6457" class="Symbol">(</a><a id="6458" href="SecureCompilation.Compiler.html#6445" class="Bound">⊆as</a> <a id="6462" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="6464" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a><a id="6470" class="Symbol">)</a> <a id="6472" href="Bitcoin.Script.Base.html#1281" class="InductiveConstructor Operator">`-</a> <a id="6475" href="SecureCompilation.Compiler.html#6138" class="Function">Bᵃʳ</a> <a id="6479" href="SecureCompilation.Compiler.html#6442" class="Bound">y</a> <a id="6481" class="Symbol">(</a><a id="6482" href="SecureCompilation.Compiler.html#6445" class="Bound">⊆as</a> <a id="6486" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="6488" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="6495" class="Symbol">_)</a>

            <a id="6511" href="SecureCompilation.Compiler.html#6511" class="Function">Bᵖʳ</a> <a id="6515" class="Symbol">:</a> <a id="6517" class="Symbol">(</a><a id="6518" href="SecureCompilation.Compiler.html#6518" class="Bound">e</a> <a id="6520" class="Symbol">:</a> <a id="6522" href="BitML.Predicate.Base.html#594" class="Datatype">Predicate</a><a id="6531" class="Symbol">)</a> <a id="6533" class="Symbol">→</a> <a id="6535" href="BitML.Predicate.Base.html#1187" class="Function">secretsᵖʳ</a> <a id="6545" href="SecureCompilation.Compiler.html#6518" class="Bound">e</a> <a id="6547" href="Data.List.Relation.Binary.Subset.Setoid.html#692" class="Function Operator">⊆</a> <a id="6549" href="SecureCompilation.Compiler.html#5334" class="Bound">as</a> <a id="6552" class="Symbol">→</a> <a id="6554" href="Bitcoin.Script.Base.html#983" class="Datatype">Script</a> <a id="6561" class="Symbol">(</a><a id="6562" href="Bitcoin.Script.Base.html#794" class="InductiveConstructor">Ctx</a> <a id="6566" class="Symbol">(</a><a id="6567" href="SecureCompilation.Compiler.html#5042" class="Function">ς</a> <a id="6569" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="6571" href="SecureCompilation.Compiler.html#5717" class="Function">m</a><a id="6572" class="Symbol">))</a> <a id="6575" href="Bitcoin.Script.Base.html#896" class="InductiveConstructor">`Bool</a>
            <a id="6593" href="SecureCompilation.Compiler.html#6511" class="Function">Bᵖʳ</a> <a id="6597" href="BitML.Predicate.Base.html#618" class="InductiveConstructor">Predicate.`true</a>     <a id="6617" class="Symbol">_</a>   <a id="6621" class="Symbol">=</a> <a id="6623" href="Bitcoin.Script.Base.html#1986" class="Function">`true</a>
            <a id="6641" href="SecureCompilation.Compiler.html#6511" class="Function">Bᵖʳ</a> <a id="6645" class="Symbol">(</a><a id="6646" href="SecureCompilation.Compiler.html#6646" class="Bound">p</a> <a id="6648" href="BitML.Predicate.Base.html#638" class="InductiveConstructor Operator">Predicate.`∧</a> <a id="6661" href="SecureCompilation.Compiler.html#6661" class="Bound">p′</a><a id="6663" class="Symbol">)</a> <a id="6665" href="SecureCompilation.Compiler.html#6665" class="Bound">⊆as</a> <a id="6669" class="Symbol">=</a> <a id="6671" href="SecureCompilation.Compiler.html#6511" class="Function">Bᵖʳ</a> <a id="6675" href="SecureCompilation.Compiler.html#6646" class="Bound">p</a> <a id="6677" class="Symbol">(</a><a id="6678" href="SecureCompilation.Compiler.html#6665" class="Bound">⊆as</a> <a id="6682" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="6684" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a><a id="6690" class="Symbol">)</a> <a id="6692" href="Bitcoin.Script.Base.html#2039" class="Function Operator">`∧</a> <a id="6695" href="SecureCompilation.Compiler.html#6511" class="Function">Bᵖʳ</a> <a id="6699" href="SecureCompilation.Compiler.html#6661" class="Bound">p′</a> <a id="6702" class="Symbol">(</a><a id="6703" href="SecureCompilation.Compiler.html#6665" class="Bound">⊆as</a> <a id="6707" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="6709" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="6716" class="Symbol">_)</a>
            <a id="6731" href="SecureCompilation.Compiler.html#6511" class="Function">Bᵖʳ</a> <a id="6735" class="Symbol">(</a><a id="6736" href="BitML.Predicate.Base.html#682" class="InductiveConstructor Operator">Predicate.`¬</a> <a id="6749" href="SecureCompilation.Compiler.html#6749" class="Bound">p</a><a id="6750" class="Symbol">)</a>    <a id="6755" href="SecureCompilation.Compiler.html#6755" class="Bound">⊆as</a> <a id="6759" class="Symbol">=</a> <a id="6761" href="Bitcoin.Script.Base.html#2236" class="Function">`not</a> <a id="6766" class="Symbol">(</a><a id="6767" href="SecureCompilation.Compiler.html#6511" class="Function">Bᵖʳ</a> <a id="6771" href="SecureCompilation.Compiler.html#6749" class="Bound">p</a> <a id="6773" href="SecureCompilation.Compiler.html#6755" class="Bound">⊆as</a><a id="6776" class="Symbol">)</a>
            <a id="6790" href="SecureCompilation.Compiler.html#6511" class="Function">Bᵖʳ</a> <a id="6794" class="Symbol">(</a><a id="6795" href="SecureCompilation.Compiler.html#6795" class="Bound">x</a> <a id="6797" href="BitML.Predicate.Base.html#714" class="InductiveConstructor Operator">Predicate.`=</a> <a id="6810" href="SecureCompilation.Compiler.html#6810" class="Bound">y</a><a id="6811" class="Symbol">)</a>  <a id="6814" href="SecureCompilation.Compiler.html#6814" class="Bound">⊆as</a> <a id="6818" class="Symbol">=</a> <a id="6820" href="SecureCompilation.Compiler.html#6138" class="Function">Bᵃʳ</a> <a id="6824" href="SecureCompilation.Compiler.html#6795" class="Bound">x</a> <a id="6826" class="Symbol">(</a><a id="6827" href="SecureCompilation.Compiler.html#6814" class="Bound">⊆as</a> <a id="6831" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="6833" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a><a id="6839" class="Symbol">)</a> <a id="6841" href="Bitcoin.Script.Base.html#1336" class="InductiveConstructor Operator">`=</a> <a id="6844" href="SecureCompilation.Compiler.html#6138" class="Function">Bᵃʳ</a> <a id="6848" href="SecureCompilation.Compiler.html#6810" class="Bound">y</a> <a id="6850" class="Symbol">(</a><a id="6851" href="SecureCompilation.Compiler.html#6814" class="Bound">⊆as</a> <a id="6855" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="6857" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="6864" class="Symbol">_)</a>
            <a id="6879" href="SecureCompilation.Compiler.html#6511" class="Function">Bᵖʳ</a> <a id="6883" class="Symbol">(</a><a id="6884" href="SecureCompilation.Compiler.html#6884" class="Bound">x</a> <a id="6886" href="BitML.Predicate.Base.html#750" class="InductiveConstructor Operator">Predicate.`&lt;</a> <a id="6899" href="SecureCompilation.Compiler.html#6899" class="Bound">y</a><a id="6900" class="Symbol">)</a>  <a id="6903" href="SecureCompilation.Compiler.html#6903" class="Bound">⊆as</a> <a id="6907" class="Symbol">=</a> <a id="6909" href="SecureCompilation.Compiler.html#6138" class="Function">Bᵃʳ</a> <a id="6913" href="SecureCompilation.Compiler.html#6884" class="Bound">x</a> <a id="6915" class="Symbol">(</a><a id="6916" href="SecureCompilation.Compiler.html#6903" class="Bound">⊆as</a> <a id="6920" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="6922" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a><a id="6928" class="Symbol">)</a> <a id="6930" href="Bitcoin.Script.Base.html#1394" class="InductiveConstructor Operator">`&lt;</a> <a id="6933" href="SecureCompilation.Compiler.html#6138" class="Function">Bᵃʳ</a> <a id="6937" href="SecureCompilation.Compiler.html#6899" class="Bound">y</a> <a id="6939" class="Symbol">(</a><a id="6940" href="SecureCompilation.Compiler.html#6903" class="Bound">⊆as</a> <a id="6944" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="6946" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="6953" class="Symbol">_)</a>
    <a id="6960" class="CatchallClause Symbol">...</a><a id="6963" class="CatchallClause"> </a><a id="6964" class="CatchallClause Symbol">|</a><a id="6965" class="CatchallClause"> </a><a id="6966" class="CatchallClause Symbol">_</a><a id="6967" class="CatchallClause"> </a><a id="6968" class="CatchallClause Symbol">|</a><a id="6969" class="CatchallClause"> </a><a id="6970" class="CatchallClause Symbol">_</a>
        <a id="6980" class="Symbol">=</a> <a id="6982" href="Bitcoin.Script.Base.html#794" class="InductiveConstructor">Ctx</a> <a id="6986" href="SecureCompilation.Compiler.html#5042" class="Function">ς</a> <a id="6988" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6990" href="Bitcoin.Script.Base.html#1695" class="InductiveConstructor">versig</a> <a id="6997" class="Symbol">(</a><a id="6998" href="SecureCompilation.Compiler.html#4967" class="Function">K⋆</a> <a id="7001" class="Bound">D</a> <a id="7003" href="SecureCompilation.Compiler.html#4499" class="Function">partG</a><a id="7008" class="Symbol">)</a> <a id="7010" class="Symbol">(</a><a id="7011" href="Data.List.Base.html#5754" class="Function">allFin</a> <a id="7018" href="SecureCompilation.Compiler.html#5042" class="Function">ς</a><a id="7019" class="Symbol">)</a>

    <a id="7026" href="SecureCompilation.Compiler.html#7026" class="Function">Tinit</a> <a id="7032" class="Symbol">:</a> <a id="7034" href="Bitcoin.Tx.Base.html#1252" class="Function">∃Tx</a>
    <a id="7042" href="SecureCompilation.Compiler.html#7026" class="Function">Tinit</a> <a id="7048" class="Symbol">=</a> <a id="7050" class="Symbol">_</a>
          <a id="7062" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7064" class="Symbol">_</a>
          <a id="7076" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7078" class="Keyword">record</a> <a id="7085" class="Symbol">{</a> <a id="7087" href="Bitcoin.Tx.Base.html#997" class="Field">inputs</a>  <a id="7095" class="Symbol">=</a> <a id="7097" href="Data.Vec.Base.html#7501" class="Function">V.fromList</a> <a id="7108" class="Symbol">(</a><a id="7109" href="Data.List.Membership.Setoid.html#1123" class="Function">mapWith∈</a> <a id="7118" class="Symbol">(</a><a id="7119" href="BitML.Contracts.Helpers.html#4799" class="Function">persistentDepositsᵖ</a> <a id="7139" href="SecureCompilation.Compiler.html#4325" class="Bound">G₀</a><a id="7141" class="Symbol">)</a> <a id="7143" class="Symbol">(</a><a id="7144" href="SecureCompilation.Compiler.html#4375" class="Bound">txout</a> <a id="7150" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="7152" href="BitML.Contracts.Helpers.html#5736" class="Function">getName</a> <a id="7160" class="Symbol">{</a><a id="7161" class="Argument">g</a> <a id="7163" class="Symbol">=</a> <a id="7165" href="SecureCompilation.Compiler.html#4325" class="Bound">G₀</a><a id="7167" class="Symbol">}))</a>
                   <a id="7190" class="Symbol">;</a> <a id="7192" href="Bitcoin.Tx.Base.html#1038" class="Field">wit</a>     <a id="7200" class="Symbol">=</a> <a id="7202" href="Bitcoin.Tx.Crypto.html#903" class="Function">wit⊥</a>
                   <a id="7226" class="Symbol">;</a> <a id="7228" href="Bitcoin.Tx.Base.html#1093" class="Field">relLock</a> <a id="7236" class="Symbol">=</a> <a id="7238" href="Data.Vec.Base.html#5745" class="Function">V.replicate</a> <a id="7250" class="Number">0</a>
                   <a id="7271" class="Symbol">;</a> <a id="7273" href="Bitcoin.Tx.Base.html#1147" class="Field">outputs</a> <a id="7281" class="Symbol">=</a> <a id="7283" href="Data.Vec.Base.html#5711" class="Function Operator">V.[</a> <a id="7287" class="Symbol">_</a> <a id="7289" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7291" class="Keyword">record</a> <a id="7298" class="Symbol">{</a> <a id="7300" href="Bitcoin.Tx.Base.html#777" class="Field">value</a>     <a id="7310" class="Symbol">=</a> <a id="7312" href="SecureCompilation.Compiler.html#5074" class="Function">V</a>
                                              <a id="7360" class="Symbol">;</a> <a id="7362" href="Bitcoin.Tx.Base.html#799" class="Field">validator</a> <a id="7372" class="Symbol">=</a> <a id="7374" href="Bitcoin.Script.Base.html#2373" class="InductiveConstructor Operator">ƛ</a> <a id="7376" class="Symbol">(</a><a id="7377" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="7383" class="Symbol">(</a><a id="7384" href="Bitcoin.Script.Base.html#3591" class="Function">⋁</a> <a id="7386" class="Symbol">(</a><a id="7387" href="BitML.Contracts.Validity.html#2631" class="Function">map~</a> <a id="7392" href="SecureCompilation.Compiler.html#4330" class="Bound">C₀</a> <a id="7395" href="SecureCompilation.Compiler.html#5148" class="Function">Bout</a><a id="7399" class="Symbol">)))</a> <a id="7403" class="Symbol">}</a> <a id="7405" href="Data.Vec.Base.html#5711" class="Function Operator">]</a>
                   <a id="7426" class="Symbol">;</a> <a id="7428" href="Bitcoin.Tx.Base.html#1189" class="Field">absLock</a> <a id="7436" class="Symbol">=</a> <a id="7438" class="Number">0</a> <a id="7440" class="Symbol">}</a>
    <a id="7446" href="SecureCompilation.Compiler.html#7446" class="Function">Tinit♯</a> <a id="7453" class="Symbol">=</a> <a id="7455" href="Bitcoin.Tx.Crypto.html#1073" class="Function">hashTx</a> <a id="7462" href="SecureCompilation.Compiler.html#7026" class="Function">Tinit</a>

    <a id="7473" href="SecureCompilation.Compiler.html#7473" class="Function">Bc</a> <a id="7476" class="Symbol">:</a> <a id="7478" href="Data.Product.html#916" class="Function">Σ[</a> <a id="7481" href="SecureCompilation.Compiler.html#7481" class="Bound">C</a> <a id="7483" href="Data.Product.html#916" class="Function">∈</a> <a id="7485" href="BitML.Contracts.Types.html#1063" class="Function">Contracts</a> <a id="7495" href="Data.Product.html#916" class="Function">]</a> <a id="7497" href="SecureCompilation.Compiler.html#7481" class="Bound">C</a> <a id="7499" href="BitML.Contracts.Validity.html#2925" class="Record Operator">~′</a> <a id="7502" href="SecureCompilation.Compiler.html#4330" class="Bound">C₀</a>
       <a id="7512" class="Symbol">→</a> <a id="7514" href="BitML.Contracts.Types.html#1048" class="Datatype">Contract</a>
       <a id="7530" class="Symbol">→</a> <a id="7532" href="Bitcoin.BasicTypes.html#330" class="Function">HashId</a>
       <a id="7546" class="Symbol">→</a> <a id="7548" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
       <a id="7557" class="Symbol">→</a> <a id="7559" href="BitML.BasicTypes.html#606" class="Function">Value</a>
       <a id="7572" class="Symbol">→</a> <a id="7574" href="Data.Product.html#916" class="Function">Σ[</a> <a id="7577" href="SecureCompilation.Compiler.html#7577" class="Bound">I</a> <a id="7579" href="Data.Product.html#916" class="Function">∈</a> <a id="7581" href="BitML.BasicTypes.html#691" class="Function">Ids</a> <a id="7585" href="Data.Product.html#916" class="Function">]</a> <a id="7587" class="Symbol">(∀</a> <a id="7590" class="Symbol">{</a><a id="7591" href="SecureCompilation.Compiler.html#7591" class="Bound">i</a><a id="7592" class="Symbol">}</a> <a id="7594" class="Symbol">→</a> <a id="7596" href="SecureCompilation.Compiler.html#7591" class="Bound">i</a> <a id="7598" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="7600" href="SecureCompilation.Compiler.html#7577" class="Bound">I</a> <a id="7602" class="Symbol">→</a> <a id="7604" href="Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="7609" href="SecureCompilation.Compiler.html#7591" class="Bound">i</a> <a id="7611" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="7613" href="BitML.Contracts.Helpers.html#1940" class="Function">namesᵖ</a> <a id="7620" href="SecureCompilation.Compiler.html#4325" class="Bound">G₀</a><a id="7622" class="Symbol">)</a>
       <a id="7631" class="Symbol">→</a> <a id="7633" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="7638" href="SecureCompilation.Compiler.html#2350" class="Bound">Participant</a>
       <a id="7657" class="Symbol">→</a> <a id="7659" href="BitML.BasicTypes.html#759" class="Function">Time</a>
       <a id="7671" class="Symbol">→</a> <a id="7673" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="7678" href="Bitcoin.Tx.Base.html#1252" class="Function">∃Tx</a>

    <a id="7687" href="SecureCompilation.Compiler.html#7687" class="Function">Bd</a> <a id="7690" class="Symbol">:</a> <a id="7692" href="Data.Product.html#916" class="Function">Σ[</a> <a id="7695" href="SecureCompilation.Compiler.html#7695" class="Bound">D</a> <a id="7697" href="Data.Product.html#916" class="Function">∈</a> <a id="7699" href="BitML.Contracts.Types.html#1048" class="Datatype">Contract</a> <a id="7708" href="Data.Product.html#916" class="Function">]</a> <a id="7710" href="SecureCompilation.Compiler.html#7695" class="Bound">D</a> <a id="7712" href="BitML.Contracts.Validity.html#2454" class="Record Operator">~</a> <a id="7714" href="SecureCompilation.Compiler.html#4330" class="Bound">C₀</a>
       <a id="7724" class="Symbol">→</a> <a id="7726" href="BitML.Contracts.Types.html#1048" class="Datatype">Contract</a>
       <a id="7742" class="Symbol">→</a> <a id="7744" href="Bitcoin.BasicTypes.html#330" class="Function">HashId</a>
       <a id="7758" class="Symbol">→</a> <a id="7760" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
       <a id="7769" class="Symbol">→</a> <a id="7771" href="BitML.BasicTypes.html#606" class="Function">Value</a>
       <a id="7784" class="Symbol">→</a> <a id="7786" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="7791" href="SecureCompilation.Compiler.html#2350" class="Bound">Participant</a>
       <a id="7810" class="Symbol">→</a> <a id="7812" href="BitML.BasicTypes.html#759" class="Function">Time</a>
       <a id="7824" class="Symbol">→</a> <a id="7826" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="7831" href="Bitcoin.Tx.Base.html#1252" class="Function">∃Tx</a>

    <a id="7840" href="SecureCompilation.Compiler.html#7840" class="Function">Bpar</a> <a id="7845" class="Symbol">:</a> <a id="7847" href="Data.Product.html#916" class="Function">Σ[</a> <a id="7850" href="SecureCompilation.Compiler.html#7850" class="Bound">vcs</a> <a id="7854" href="Data.Product.html#916" class="Function">∈</a> <a id="7856" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="7861" class="Symbol">(</a><a id="7862" href="BitML.BasicTypes.html#606" class="Function">Value</a> <a id="7868" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="7870" href="BitML.Contracts.Types.html#1063" class="Function">Contracts</a><a id="7879" class="Symbol">)</a> <a id="7881" href="Data.Product.html#916" class="Function">]</a> <a id="7883" href="SecureCompilation.Compiler.html#7850" class="Bound">vcs</a> <a id="7887" href="BitML.Contracts.Validity.html#3283" class="Record Operator">~″</a> <a id="7890" href="SecureCompilation.Compiler.html#4330" class="Bound">C₀</a>
         <a id="7902" class="Symbol">→</a> <a id="7904" href="BitML.Contracts.Types.html#1048" class="Datatype">Contract</a>
         <a id="7922" class="Symbol">→</a> <a id="7924" href="Bitcoin.BasicTypes.html#330" class="Function">HashId</a>
         <a id="7940" class="Symbol">→</a> <a id="7942" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
         <a id="7953" class="Symbol">→</a> <a id="7955" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="7960" href="SecureCompilation.Compiler.html#2350" class="Bound">Participant</a>
         <a id="7981" class="Symbol">→</a> <a id="7983" href="BitML.BasicTypes.html#759" class="Function">Time</a>
         <a id="7997" class="Symbol">→</a> <a id="7999" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="8004" href="Bitcoin.Tx.Base.html#1252" class="Function">∃Tx</a>

    <a id="8013" href="SecureCompilation.Compiler.html#7687" class="Function">Bd</a> <a id="8016" class="Symbol">(</a><a id="8017" href="BitML.Contracts.Types.html#1147" class="InductiveConstructor Operator">put</a> <a id="8021" href="SecureCompilation.Compiler.html#8021" class="Bound">zs</a> <a id="8024" href="BitML.Contracts.Types.html#1147" class="InductiveConstructor Operator">&amp;reveal</a> <a id="8032" href="SecureCompilation.Compiler.html#8032" class="Bound">as</a> <a id="8035" href="BitML.Contracts.Types.html#1147" class="InductiveConstructor Operator">if</a> <a id="8038" class="Symbol">_</a> <a id="8040" href="BitML.Contracts.Types.html#1147" class="InductiveConstructor Operator">⇒</a> <a id="8042" href="SecureCompilation.Compiler.html#8042" class="Bound">C</a> <a id="8044" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8046" href="SecureCompilation.Compiler.html#8046" class="Bound">p⊆</a> <a id="8049" href="BitML.Contracts.Validity.html#2516" class="InductiveConstructor Operator">&amp;</a> <a id="8051" href="SecureCompilation.Compiler.html#8051" class="Bound">n⊆</a><a id="8053" class="Symbol">)</a> <a id="8055" href="SecureCompilation.Compiler.html#8055" class="Bound">Dp</a> <a id="8058" href="SecureCompilation.Compiler.html#8058" class="Bound">T</a> <a id="8060" href="SecureCompilation.Compiler.html#8060" class="Bound">o</a> <a id="8062" href="SecureCompilation.Compiler.html#8062" class="Bound">v</a> <a id="8064" href="SecureCompilation.Compiler.html#8064" class="Bound">P</a> <a id="8066" href="SecureCompilation.Compiler.html#8066" class="Bound">t</a>
      <a id="8074" class="Symbol">=</a> <a id="8076" href="SecureCompilation.Compiler.html#7473" class="Function">Bc</a> <a id="8079" class="Symbol">(</a><a id="8080" href="SecureCompilation.Compiler.html#8042" class="Bound">C</a> <a id="8082" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8084" href="SecureCompilation.Compiler.html#8169" class="Function">C~C₀</a><a id="8088" class="Symbol">)</a> <a id="8090" href="SecureCompilation.Compiler.html#8055" class="Bound">Dp</a> <a id="8093" href="SecureCompilation.Compiler.html#8058" class="Bound">T</a> <a id="8095" href="SecureCompilation.Compiler.html#8060" class="Bound">o</a> <a id="8097" class="Symbol">(</a><a id="8098" href="SecureCompilation.Compiler.html#8062" class="Bound">v</a> <a id="8100" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="8102" href="Data.List.Base.html#4217" class="Function">sum</a> <a id="8106" class="Symbol">(</a><a id="8107" href="Data.List.Membership.Setoid.html#1123" class="Function">mapWith∈</a> <a id="8116" href="SecureCompilation.Compiler.html#8021" class="Bound">zs</a> <a id="8119" class="Symbol">(</a><a id="8120" href="SecureCompilation.Compiler.html#4805" class="Function">val</a> <a id="8124" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8126" href="SecureCompilation.Compiler.html#8422" class="Function">zs⊆</a><a id="8129" class="Symbol">)))</a> <a id="8133" href="SecureCompilation.Compiler.html#8285" class="Function">zs′</a> <a id="8137" href="SecureCompilation.Compiler.html#8064" class="Bound">P</a> <a id="8139" href="SecureCompilation.Compiler.html#8066" class="Bound">t</a>
          <a id="8151" class="Keyword">where</a>
            <a id="8169" href="SecureCompilation.Compiler.html#8169" class="Function">C~C₀</a> <a id="8174" class="Symbol">:</a> <a id="8176" href="SecureCompilation.Compiler.html#8042" class="Bound">C</a> <a id="8178" href="BitML.Contracts.Validity.html#2925" class="Record Operator">~′</a> <a id="8181" href="SecureCompilation.Compiler.html#4330" class="Bound">C₀</a>
            <a id="8196" href="SecureCompilation.Compiler.html#8169" class="Function">C~C₀</a> <a id="8201" class="Symbol">=</a> <a id="8203" class="Symbol">(</a><a id="8204" href="SecureCompilation.Compiler.html#8046" class="Bound">p⊆</a> <a id="8207" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8209" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="8216" class="Symbol">_)</a> <a id="8219" href="BitML.Contracts.Validity.html#2991" class="InductiveConstructor Operator">&amp;</a> <a id="8221" class="Symbol">(</a><a id="8222" href="SecureCompilation.Compiler.html#8051" class="Bound">n⊆</a> <a id="8225" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8227" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="8234" class="Symbol">(</a><a id="8235" href="Data.List.Base.html#1497" class="Function">map</a> <a id="8239" href="Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="8244" href="SecureCompilation.Compiler.html#8021" class="Bound">zs</a><a id="8246" class="Symbol">)</a> <a id="8248" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8250" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="8257" class="Symbol">(</a><a id="8258" href="Data.List.Base.html#1497" class="Function">map</a> <a id="8262" href="Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="8267" href="SecureCompilation.Compiler.html#8032" class="Bound">as</a><a id="8269" class="Symbol">))</a>

            <a id="8285" href="SecureCompilation.Compiler.html#8285" class="Function">zs′</a> <a id="8289" class="Symbol">:</a> <a id="8291" href="Data.Product.html#916" class="Function">Σ[</a> <a id="8294" href="SecureCompilation.Compiler.html#8294" class="Bound">I</a> <a id="8296" href="Data.Product.html#916" class="Function">∈</a> <a id="8298" href="BitML.BasicTypes.html#691" class="Function">Ids</a> <a id="8302" href="Data.Product.html#916" class="Function">]</a> <a id="8304" class="Symbol">(∀</a> <a id="8307" class="Symbol">{</a><a id="8308" href="SecureCompilation.Compiler.html#8308" class="Bound">i</a><a id="8309" class="Symbol">}</a> <a id="8311" class="Symbol">→</a> <a id="8313" href="SecureCompilation.Compiler.html#8308" class="Bound">i</a> <a id="8315" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="8317" href="SecureCompilation.Compiler.html#8294" class="Bound">I</a> <a id="8319" class="Symbol">→</a> <a id="8321" href="Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="8326" href="SecureCompilation.Compiler.html#8308" class="Bound">i</a> <a id="8328" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="8330" href="BitML.Contracts.Helpers.html#1940" class="Function">namesᵖ</a> <a id="8337" href="SecureCompilation.Compiler.html#4325" class="Bound">G₀</a><a id="8339" class="Symbol">)</a>
            <a id="8353" href="SecureCompilation.Compiler.html#8285" class="Function">zs′</a> <a id="8357" class="Symbol">=</a> <a id="8359" href="SecureCompilation.Compiler.html#8021" class="Bound">zs</a> <a id="8362" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8364" class="Symbol">λ</a> <a id="8366" href="SecureCompilation.Compiler.html#8366" class="Bound">z∈</a> <a id="8369" class="Symbol">→</a> <a id="8371" href="SecureCompilation.Compiler.html#4339" class="Bound">names⊆</a> <a id="8378" class="Symbol">(</a><a id="8379" href="SecureCompilation.Compiler.html#8051" class="Bound">n⊆</a> <a id="8382" class="Symbol">(</a><a id="8383" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a> <a id="8390" class="Symbol">(</a><a id="8391" href="Data.List.Membership.Propositional.Properties.html#3315" class="Function">∈-map⁺</a> <a id="8398" href="Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="8403" href="SecureCompilation.Compiler.html#8366" class="Bound">z∈</a><a id="8405" class="Symbol">)))</a>

            <a id="8422" href="SecureCompilation.Compiler.html#8422" class="Function">zs⊆</a> <a id="8426" class="Symbol">:</a> <a id="8428" class="Symbol">∀</a> <a id="8430" class="Symbol">{</a><a id="8431" href="SecureCompilation.Compiler.html#8431" class="Bound">z</a><a id="8432" class="Symbol">}</a> <a id="8434" class="Symbol">→</a> <a id="8436" href="SecureCompilation.Compiler.html#8431" class="Bound">z</a> <a id="8438" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="8440" href="SecureCompilation.Compiler.html#8021" class="Bound">zs</a> <a id="8443" class="Symbol">→</a> <a id="8445" href="Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="8450" href="SecureCompilation.Compiler.html#8431" class="Bound">z</a> <a id="8452" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="8454" href="BitML.Contracts.Helpers.html#1940" class="Function">namesᵖ</a> <a id="8461" href="SecureCompilation.Compiler.html#4325" class="Bound">G₀</a>
            <a id="8476" href="SecureCompilation.Compiler.html#8422" class="Function">zs⊆</a> <a id="8480" class="Symbol">=</a> <a id="8482" href="SecureCompilation.Compiler.html#4339" class="Bound">names⊆</a> <a id="8489" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8491" href="SecureCompilation.Compiler.html#8051" class="Bound">n⊆</a> <a id="8494" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8496" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a> <a id="8503" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8505" href="Data.List.Membership.Propositional.Properties.html#3315" class="Function">∈-map⁺</a> <a id="8512" href="Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a>

    <a id="8522" href="SecureCompilation.Compiler.html#7687" class="Function">Bd</a> <a id="8525" class="Symbol">(</a><a id="8526" href="BitML.Contracts.Types.html#1262" class="InductiveConstructor">withdraw</a> <a id="8535" href="SecureCompilation.Compiler.html#8535" class="Bound">A</a> <a id="8537" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8539" href="SecureCompilation.Compiler.html#8539" class="Bound">D~C₀</a><a id="8543" class="Symbol">)</a> <a id="8545" href="SecureCompilation.Compiler.html#8545" class="Bound">Dp</a> <a id="8548" href="SecureCompilation.Compiler.html#8548" class="Bound">T</a> <a id="8550" href="SecureCompilation.Compiler.html#8550" class="Bound">o</a> <a id="8552" href="SecureCompilation.Compiler.html#8552" class="Bound">v</a> <a id="8554" href="SecureCompilation.Compiler.html#8554" class="Bound">P</a> <a id="8556" href="SecureCompilation.Compiler.html#8556" class="Bound">t</a>
      <a id="8564" class="Symbol">=</a> <a id="8566" href="Data.List.Base.html#4458" class="Function Operator">[</a> <a id="8568" class="Symbol">_</a>
        <a id="8578" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8580" class="Symbol">_</a>
        <a id="8590" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8592" href="Bitcoin.Tx.Crypto.html#1398" class="Function">sig⋆</a> <a id="8597" href="Data.Vec.Base.html#5711" class="Function Operator">V.[</a> <a id="8601" href="SecureCompilation.Compiler.html#4967" class="Function">K⋆</a> <a id="8604" href="SecureCompilation.Compiler.html#8545" class="Bound">Dp</a> <a id="8607" href="SecureCompilation.Compiler.html#8554" class="Bound">P</a> <a id="8609" href="Data.Vec.Base.html#5711" class="Function Operator">]</a>
               <a id="8626" class="Symbol">(</a><a id="8627" class="Keyword">record</a> <a id="8634" class="Symbol">{</a> <a id="8636" href="Bitcoin.Tx.Base.html#997" class="Field">inputs</a>  <a id="8644" class="Symbol">=</a> <a id="8646" href="Data.Vec.Base.html#5711" class="Function Operator">V.[</a> <a id="8650" href="SecureCompilation.Compiler.html#8548" class="Bound">T</a> <a id="8652" href="Bitcoin.Tx.Base.html#557" class="InductiveConstructor Operator">at</a> <a id="8655" class="Number">0</a> <a id="8657" href="Data.Vec.Base.html#5711" class="Function Operator">]</a>
                       <a id="8682" class="Symbol">;</a> <a id="8684" href="Bitcoin.Tx.Base.html#1038" class="Field">wit</a>     <a id="8692" class="Symbol">=</a> <a id="8694" href="Bitcoin.Tx.Crypto.html#903" class="Function">wit⊥</a>
                       <a id="8722" class="Symbol">;</a> <a id="8724" href="Bitcoin.Tx.Base.html#1093" class="Field">relLock</a> <a id="8732" class="Symbol">=</a> <a id="8734" href="Data.Vec.Base.html#5711" class="Function Operator">V.[</a> <a id="8738" class="Number">0</a> <a id="8740" href="Data.Vec.Base.html#5711" class="Function Operator">]</a>
                       <a id="8765" class="Symbol">;</a> <a id="8767" href="Bitcoin.Tx.Base.html#1147" class="Field">outputs</a> <a id="8775" class="Symbol">=</a> <a id="8777" href="Data.Vec.Base.html#5711" class="Function Operator">V.[</a> <a id="8781" href="Bitcoin.Script.Base.html#794" class="InductiveConstructor">Ctx</a> <a id="8785" class="Number">1</a> <a id="8787" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8789" class="Keyword">record</a> <a id="8796" class="Symbol">{</a> <a id="8798" href="Bitcoin.Tx.Base.html#777" class="Field">value</a> <a id="8804" class="Symbol">=</a> <a id="8806" href="SecureCompilation.Compiler.html#8552" class="Bound">v</a> <a id="8808" class="Symbol">;</a> <a id="8810" href="Bitcoin.Tx.Base.html#799" class="Field">validator</a> <a id="8820" class="Symbol">=</a> <a id="8822" href="Bitcoin.Script.Base.html#2373" class="InductiveConstructor Operator">ƛ</a> <a id="8824" class="Symbol">(</a><a id="8825" href="Bitcoin.Script.Base.html#1695" class="InductiveConstructor">versig</a> <a id="8832" href="Data.List.Base.html#4458" class="Function Operator">[</a> <a id="8834" href="SecureCompilation.Compiler.html#4381" class="Bound">K</a> <a id="8836" href="SecureCompilation.Compiler.html#8535" class="Bound">A</a> <a id="8838" href="Data.List.Base.html#4458" class="Function Operator">]</a> <a id="8840" href="Data.List.Base.html#4458" class="Function Operator">[</a> <a id="8842" href="Data.Fin.Patterns.html#390" class="InductiveConstructor">0F</a> <a id="8845" href="Data.List.Base.html#4458" class="Function Operator">]</a><a id="8846" class="Symbol">)</a> <a id="8848" class="Symbol">}</a> <a id="8850" href="Data.Vec.Base.html#5711" class="Function Operator">]</a>
                       <a id="8875" class="Symbol">;</a> <a id="8877" href="Bitcoin.Tx.Base.html#1189" class="Field">absLock</a> <a id="8885" class="Symbol">=</a> <a id="8887" href="SecureCompilation.Compiler.html#8556" class="Bound">t</a> <a id="8889" class="Symbol">})</a>
        <a id="8900" href="Data.List.Base.html#4458" class="Function Operator">]</a>
    <a id="8906" href="SecureCompilation.Compiler.html#7687" class="Function">Bd</a> <a id="8909" class="Symbol">(</a><a id="8910" href="BitML.Contracts.Types.html#1322" class="InductiveConstructor">split</a> <a id="8916" href="SecureCompilation.Compiler.html#8916" class="Bound">Cs</a> <a id="8919" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8921" href="SecureCompilation.Compiler.html#8921" class="Bound">p⊆</a> <a id="8924" href="BitML.Contracts.Validity.html#2516" class="InductiveConstructor Operator">&amp;</a> <a id="8926" href="SecureCompilation.Compiler.html#8926" class="Bound">n⊆</a><a id="8928" class="Symbol">)</a> <a id="8930" href="SecureCompilation.Compiler.html#8930" class="Bound">Dp</a> <a id="8933" href="SecureCompilation.Compiler.html#8933" class="Bound">T</a> <a id="8935" href="SecureCompilation.Compiler.html#8935" class="Bound">o</a> <a id="8937" href="SecureCompilation.Compiler.html#8937" class="Bound">v</a> <a id="8939" href="SecureCompilation.Compiler.html#8939" class="Bound">P</a> <a id="8941" href="SecureCompilation.Compiler.html#8941" class="Bound">t</a>
      <a id="8949" class="Keyword">with</a> <a id="8954" href="Data.List.Base.html#4217" class="Function">sum</a> <a id="8958" class="Symbol">(</a><a id="8959" href="Data.List.Base.html#1497" class="Function">map</a> <a id="8963" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="8969" href="SecureCompilation.Compiler.html#8916" class="Bound">Cs</a><a id="8971" class="Symbol">)</a> <a id="8973" href="Data.Nat.Properties.html#4678" class="Function Operator">≤?</a> <a id="8976" href="SecureCompilation.Compiler.html#8937" class="Bound">v</a>
    <a id="8982" class="Symbol">...</a> <a id="8986" class="Symbol">|</a> <a id="8988" href="Relation.Nullary.html#1682" class="InductiveConstructor">no</a>  <a id="8992" class="Symbol">_</a> <a id="8994" class="Symbol">=</a> <a id="8996" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
    <a id="9003" class="Symbol">...</a> <a id="9007" class="Symbol">|</a> <a id="9009" href="Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="9013" class="Symbol">_</a> <a id="9015" class="Symbol">=</a> <a id="9017" href="SecureCompilation.Compiler.html#7840" class="Function">Bpar</a> <a id="9022" class="Symbol">(</a><a id="9023" class="Bound">Cs</a> <a id="9026" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9028" class="Bound">p⊆</a> <a id="9031" href="BitML.Contracts.Validity.html#3365" class="InductiveConstructor Operator">&amp;</a> <a id="9033" class="Bound">n⊆</a><a id="9035" class="Symbol">)</a> <a id="9037" class="Bound">Dp</a> <a id="9040" class="Bound">T</a> <a id="9042" class="Bound">o</a> <a id="9044" class="Bound">P</a> <a id="9046" class="Bound">t</a>
    <a id="9052" href="SecureCompilation.Compiler.html#7687" class="Function">Bd</a> <a id="9055" class="Symbol">(</a><a id="9056" href="SecureCompilation.Compiler.html#9056" class="Bound">A</a> <a id="9058" href="BitML.Contracts.Types.html#1411" class="InductiveConstructor Operator">⇒</a> <a id="9060" href="SecureCompilation.Compiler.html#9060" class="Bound">D′</a> <a id="9063" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9065" href="SecureCompilation.Compiler.html#9065" class="Bound">p⊆</a> <a id="9068" href="BitML.Contracts.Validity.html#2516" class="InductiveConstructor Operator">&amp;</a> <a id="9070" href="SecureCompilation.Compiler.html#9070" class="Bound">n⊆</a><a id="9072" class="Symbol">)</a> <a id="9074" href="SecureCompilation.Compiler.html#9074" class="Bound">Dp</a> <a id="9077" href="SecureCompilation.Compiler.html#9077" class="Bound">T</a> <a id="9079" href="SecureCompilation.Compiler.html#9079" class="Bound">o</a> <a id="9081" href="SecureCompilation.Compiler.html#9081" class="Bound">v</a> <a id="9083" href="SecureCompilation.Compiler.html#9083" class="Bound">P</a> <a id="9085" href="SecureCompilation.Compiler.html#9085" class="Bound">t</a>
      <a id="9093" class="Symbol">=</a> <a id="9095" href="SecureCompilation.Compiler.html#7687" class="Function">Bd</a> <a id="9098" class="Symbol">(</a><a id="9099" href="SecureCompilation.Compiler.html#9060" class="Bound">D′</a> <a id="9102" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9104" href="SecureCompilation.Compiler.html#9065" class="Bound">p⊆</a> <a id="9107" href="BitML.Contracts.Validity.html#2516" class="InductiveConstructor Operator">&amp;</a> <a id="9109" href="SecureCompilation.Compiler.html#9070" class="Bound">n⊆</a><a id="9111" class="Symbol">)</a> <a id="9113" href="SecureCompilation.Compiler.html#9074" class="Bound">Dp</a> <a id="9116" href="SecureCompilation.Compiler.html#9077" class="Bound">T</a> <a id="9118" href="SecureCompilation.Compiler.html#9079" class="Bound">o</a> <a id="9120" href="SecureCompilation.Compiler.html#9081" class="Bound">v</a> <a id="9122" class="Symbol">(</a><a id="9123" href="SecureCompilation.Compiler.html#9083" class="Bound">P</a> <a id="9125" href="Prelude.Set%2527.html#5496" class="Function Operator">SETₚ.\\</a> <a id="9133" href="Data.List.Base.html#4458" class="Function Operator">[</a> <a id="9135" href="SecureCompilation.Compiler.html#9056" class="Bound">A</a> <a id="9137" href="Data.List.Base.html#4458" class="Function Operator">]</a><a id="9138" class="Symbol">)</a> <a id="9140" href="SecureCompilation.Compiler.html#9085" class="Bound">t</a>
    <a id="9146" href="SecureCompilation.Compiler.html#7687" class="Function">Bd</a> <a id="9149" class="Symbol">(</a><a id="9150" href="BitML.Contracts.Types.html#1484" class="InductiveConstructor Operator">after</a> <a id="9156" href="SecureCompilation.Compiler.html#9156" class="Bound">t′</a> <a id="9159" href="BitML.Contracts.Types.html#1484" class="InductiveConstructor Operator">⇒</a> <a id="9161" href="SecureCompilation.Compiler.html#9161" class="Bound">D′</a> <a id="9164" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9166" href="SecureCompilation.Compiler.html#9166" class="Bound">p⊆</a> <a id="9169" href="BitML.Contracts.Validity.html#2516" class="InductiveConstructor Operator">&amp;</a> <a id="9171" href="SecureCompilation.Compiler.html#9171" class="Bound">n⊆</a><a id="9173" class="Symbol">)</a> <a id="9175" href="SecureCompilation.Compiler.html#9175" class="Bound">Dp</a> <a id="9178" href="SecureCompilation.Compiler.html#9178" class="Bound">T</a> <a id="9180" href="SecureCompilation.Compiler.html#9180" class="Bound">o</a> <a id="9182" href="SecureCompilation.Compiler.html#9182" class="Bound">v</a> <a id="9184" href="SecureCompilation.Compiler.html#9184" class="Bound">P</a> <a id="9186" href="SecureCompilation.Compiler.html#9186" class="Bound">t</a>
      <a id="9194" class="Symbol">=</a> <a id="9196" href="SecureCompilation.Compiler.html#7687" class="Function">Bd</a> <a id="9199" class="Symbol">(</a><a id="9200" href="SecureCompilation.Compiler.html#9161" class="Bound">D′</a> <a id="9203" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9205" href="SecureCompilation.Compiler.html#9166" class="Bound">p⊆</a> <a id="9208" href="BitML.Contracts.Validity.html#2516" class="InductiveConstructor Operator">&amp;</a> <a id="9210" href="SecureCompilation.Compiler.html#9171" class="Bound">n⊆</a><a id="9212" class="Symbol">)</a> <a id="9214" href="SecureCompilation.Compiler.html#9175" class="Bound">Dp</a> <a id="9217" href="SecureCompilation.Compiler.html#9178" class="Bound">T</a> <a id="9219" href="SecureCompilation.Compiler.html#9180" class="Bound">o</a> <a id="9221" href="SecureCompilation.Compiler.html#9182" class="Bound">v</a> <a id="9223" href="SecureCompilation.Compiler.html#9184" class="Bound">P</a> <a id="9225" class="Symbol">(</a><a id="9226" href="SecureCompilation.Compiler.html#9186" class="Bound">t</a> <a id="9228" href="Data.Nat.Base.html#1640" class="Function Operator">⊔</a> <a id="9230" href="SecureCompilation.Compiler.html#9156" class="Bound">t′</a><a id="9232" class="Symbol">)</a>

    <a id="9239" href="SecureCompilation.Compiler.html#7473" class="Function">Bc</a> <a id="9242" class="Symbol">(</a><a id="9243" href="SecureCompilation.Compiler.html#9243" class="Bound">C</a> <a id="9245" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9247" href="SecureCompilation.Compiler.html#9247" class="Bound">C~C₀</a><a id="9251" class="Symbol">)</a> <a id="9253" href="SecureCompilation.Compiler.html#9253" class="Bound">Dp</a> <a id="9256" href="SecureCompilation.Compiler.html#9256" class="Bound">T</a> <a id="9258" href="SecureCompilation.Compiler.html#9258" class="Bound">o</a> <a id="9260" href="SecureCompilation.Compiler.html#9260" class="Bound">v</a> <a id="9262" class="Symbol">(</a><a id="9263" href="SecureCompilation.Compiler.html#9263" class="Bound">I</a> <a id="9265" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9267" href="SecureCompilation.Compiler.html#9267" class="Bound">I⊆</a><a id="9269" class="Symbol">)</a> <a id="9271" href="SecureCompilation.Compiler.html#9271" class="Bound">P</a> <a id="9273" href="SecureCompilation.Compiler.html#9273" class="Bound">t</a> <a id="9275" class="Symbol">=</a> <a id="9277" href="SecureCompilation.Compiler.html#9734" class="Function">Tc</a> <a id="9280" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="9282" href="Data.List.Base.html#3827" class="Function">concat</a> <a id="9289" class="Symbol">(</a><a id="9290" href="BitML.Contracts.Validity.html#3112" class="Function">map~′</a> <a id="9296" href="SecureCompilation.Compiler.html#9243" class="Bound">C</a> <a id="9298" href="SecureCompilation.Compiler.html#9247" class="Bound">C~C₀</a> <a id="9303" class="Symbol">λ</a> <a id="9305" href="SecureCompilation.Compiler.html#9305" class="Bound">Dᵢ</a> <a id="9308" href="SecureCompilation.Compiler.html#9308" class="Bound">Dᵢ~C₀</a> <a id="9314" class="Symbol">→</a> <a id="9316" href="SecureCompilation.Compiler.html#7687" class="Function">Bd</a> <a id="9319" class="Symbol">(</a><a id="9320" href="SecureCompilation.Compiler.html#9305" class="Bound">Dᵢ</a> <a id="9323" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9325" href="SecureCompilation.Compiler.html#9308" class="Bound">Dᵢ~C₀</a><a id="9330" class="Symbol">)</a> <a id="9332" href="SecureCompilation.Compiler.html#9305" class="Bound">Dᵢ</a> <a id="9335" href="SecureCompilation.Compiler.html#10187" class="Function">Tc♯</a> <a id="9339" class="Number">0</a> <a id="9341" href="SecureCompilation.Compiler.html#9260" class="Bound">v</a> <a id="9343" href="SecureCompilation.Compiler.html#4499" class="Function">partG</a> <a id="9349" href="SecureCompilation.Compiler.html#9273" class="Bound">t</a><a id="9350" class="Symbol">)</a>
      <a id="9358" class="Keyword">where</a>
        <a id="9372" href="SecureCompilation.Compiler.html#9372" class="Function">k</a> <a id="9374" class="Symbol">=</a> <a id="9376" href="Data.List.Base.html#4297" class="Function">length</a> <a id="9383" href="SecureCompilation.Compiler.html#9263" class="Bound">I</a>

        <a id="9394" href="SecureCompilation.Compiler.html#9394" class="Function">ins</a> <a id="9398" class="Symbol">:</a> <a id="9400" href="Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="9404" href="Bitcoin.Tx.Base.html#523" class="Record">TxInput</a> <a id="9412" href="SecureCompilation.Compiler.html#9372" class="Function">k</a>
        <a id="9422" href="SecureCompilation.Compiler.html#9394" class="Function">ins</a> <a id="9426" class="Keyword">rewrite</a> <a id="9434" href="Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="9438" class="Symbol">(</a><a id="9439" href="Data.List.Membership.Setoid.Properties.html#4081" class="Function">length-mapWith∈</a> <a id="9455" class="Symbol">(</a><a id="9456" href="Relation.Binary.PropositionalEquality.html#2283" class="Function">setoid</a> <a id="9463" class="Symbol">_)</a> <a id="9466" href="SecureCompilation.Compiler.html#9263" class="Bound">I</a> <a id="9468" class="Symbol">{</a><a id="9469" class="Argument">f</a> <a id="9471" class="Symbol">=</a> <a id="9473" href="SecureCompilation.Compiler.html#4375" class="Bound">txout</a> <a id="9479" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="9481" href="SecureCompilation.Compiler.html#9267" class="Bound">I⊆</a><a id="9483" class="Symbol">})</a>
                  <a id="9504" class="Symbol">=</a> <a id="9506" href="Data.Vec.Base.html#7501" class="Function">V.fromList</a> <a id="9517" class="Symbol">(</a><a id="9518" href="Data.List.Membership.Setoid.html#1123" class="Function">mapWith∈</a> <a id="9527" href="SecureCompilation.Compiler.html#9263" class="Bound">I</a> <a id="9529" class="Symbol">(</a><a id="9530" href="SecureCompilation.Compiler.html#4375" class="Bound">txout</a> <a id="9536" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="9538" href="SecureCompilation.Compiler.html#9267" class="Bound">I⊆</a><a id="9540" class="Symbol">))</a>

        <a id="9552" href="SecureCompilation.Compiler.html#9552" class="Function">wits</a> <a id="9557" class="Symbol">:</a> <a id="9559" href="Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="9563" class="Symbol">(</a><a id="9564" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="9569" href="Bitcoin.Crypto.html#320" class="Record">KeyPair</a><a id="9576" class="Symbol">)</a> <a id="9578" href="SecureCompilation.Compiler.html#9372" class="Function">k</a>
        <a id="9588" href="SecureCompilation.Compiler.html#9552" class="Function">wits</a> <a id="9593" class="Keyword">rewrite</a> <a id="9601" href="Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="9605" class="Symbol">(</a><a id="9606" href="Data.List.Membership.Setoid.Properties.html#4081" class="Function">length-mapWith∈</a> <a id="9622" class="Symbol">(</a><a id="9623" href="Relation.Binary.PropositionalEquality.html#2283" class="Function">setoid</a> <a id="9630" class="Symbol">_)</a> <a id="9633" href="SecureCompilation.Compiler.html#9263" class="Bound">I</a> <a id="9635" class="Symbol">{</a><a id="9636" href="Data.List.Base.html#4458" class="Function Operator">[_]</a> <a id="9640" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="9642" href="SecureCompilation.Compiler.html#4381" class="Bound">K</a> <a id="9644" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="9646" href="SecureCompilation.Compiler.html#4639" class="Function">part</a> <a id="9651" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="9653" href="SecureCompilation.Compiler.html#9267" class="Bound">I⊆</a><a id="9655" class="Symbol">})</a>
                   <a id="9677" class="Symbol">=</a> <a id="9679" href="Data.Vec.Base.html#7501" class="Function">V.fromList</a> <a id="9690" class="Symbol">(</a><a id="9691" href="Data.List.Membership.Setoid.html#1123" class="Function">mapWith∈</a> <a id="9700" href="SecureCompilation.Compiler.html#9263" class="Bound">I</a> <a id="9702" class="Symbol">(</a><a id="9703" href="Data.List.Base.html#4458" class="Function Operator">[_]</a> <a id="9707" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="9709" href="SecureCompilation.Compiler.html#4381" class="Bound">K</a> <a id="9711" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="9713" href="SecureCompilation.Compiler.html#4639" class="Function">part</a> <a id="9718" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="9720" href="SecureCompilation.Compiler.html#9267" class="Bound">I⊆</a><a id="9722" class="Symbol">))</a>

        <a id="9734" href="SecureCompilation.Compiler.html#9734" class="Function">Tc</a> <a id="9737" class="Symbol">:</a> <a id="9739" href="Bitcoin.Tx.Base.html#1252" class="Function">∃Tx</a>
        <a id="9751" href="SecureCompilation.Compiler.html#9734" class="Function">Tc</a> <a id="9754" class="Symbol">=</a> <a id="9756" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="9760" href="SecureCompilation.Compiler.html#9372" class="Function">k</a>
           <a id="9773" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9775" class="Symbol">_</a>
           <a id="9788" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9790" href="Bitcoin.Tx.Crypto.html#1398" class="Function">sig⋆</a> <a id="9795" class="Symbol">(</a><a id="9796" href="SecureCompilation.Compiler.html#4967" class="Function">K⋆</a> <a id="9799" href="SecureCompilation.Compiler.html#9253" class="Bound">Dp</a> <a id="9802" href="SecureCompilation.Compiler.html#9271" class="Bound">P</a> <a id="9804" href="Data.Vec.Base.html#1014" class="InductiveConstructor Operator">V.∷</a> <a id="9808" href="SecureCompilation.Compiler.html#9552" class="Function">wits</a><a id="9812" class="Symbol">)</a>
                  <a id="9832" class="Symbol">(</a><a id="9833" class="Keyword">record</a> <a id="9840" class="Symbol">{</a> <a id="9842" href="Bitcoin.Tx.Base.html#997" class="Field">inputs</a>  <a id="9850" class="Symbol">=</a> <a id="9852" href="SecureCompilation.Compiler.html#9256" class="Bound">T</a> <a id="9854" href="Bitcoin.Tx.Base.html#557" class="InductiveConstructor Operator">at</a> <a id="9857" href="SecureCompilation.Compiler.html#9258" class="Bound">o</a> <a id="9859" href="Data.Vec.Base.html#1014" class="InductiveConstructor Operator">V.∷</a> <a id="9863" href="SecureCompilation.Compiler.html#9394" class="Function">ins</a>
                          <a id="9893" class="Symbol">;</a> <a id="9895" href="Bitcoin.Tx.Base.html#1038" class="Field">wit</a>     <a id="9903" class="Symbol">=</a> <a id="9905" href="Bitcoin.Tx.Crypto.html#903" class="Function">wit⊥</a>
                          <a id="9936" class="Symbol">;</a> <a id="9938" href="Bitcoin.Tx.Base.html#1093" class="Field">relLock</a> <a id="9946" class="Symbol">=</a> <a id="9948" href="Data.Vec.Base.html#5745" class="Function">V.replicate</a> <a id="9960" class="Number">0</a>
                          <a id="9988" class="Symbol">;</a> <a id="9990" href="Bitcoin.Tx.Base.html#1147" class="Field">outputs</a> <a id="9998" class="Symbol">=</a> <a id="10000" href="Data.Vec.Base.html#5711" class="Function Operator">V.[</a> <a id="10004" class="Symbol">_</a> <a id="10006" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="10008" class="Keyword">record</a> <a id="10015" class="Symbol">{</a> <a id="10017" href="Bitcoin.Tx.Base.html#777" class="Field">value</a>     <a id="10027" class="Symbol">=</a> <a id="10029" href="SecureCompilation.Compiler.html#9260" class="Bound">v</a>
                                                     <a id="10084" class="Symbol">;</a> <a id="10086" href="Bitcoin.Tx.Base.html#799" class="Field">validator</a> <a id="10096" class="Symbol">=</a> <a id="10098" href="Bitcoin.Script.Base.html#2373" class="InductiveConstructor Operator">ƛ</a> <a id="10100" class="Symbol">(</a><a id="10101" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="10107" class="Symbol">(</a><a id="10108" href="Bitcoin.Script.Base.html#3591" class="Function">⋁</a> <a id="10110" class="Symbol">(</a><a id="10111" href="BitML.Contracts.Validity.html#3112" class="Function">map~′</a> <a id="10117" href="SecureCompilation.Compiler.html#9243" class="Bound">C</a> <a id="10119" href="SecureCompilation.Compiler.html#9247" class="Bound">C~C₀</a> <a id="10124" href="SecureCompilation.Compiler.html#5148" class="Function">Bout</a><a id="10128" class="Symbol">)))</a> <a id="10132" class="Symbol">}</a> <a id="10134" href="Data.Vec.Base.html#5711" class="Function Operator">]</a>
                          <a id="10162" class="Symbol">;</a> <a id="10164" href="Bitcoin.Tx.Base.html#1189" class="Field">absLock</a> <a id="10172" class="Symbol">=</a> <a id="10174" href="SecureCompilation.Compiler.html#9273" class="Bound">t</a> <a id="10176" class="Symbol">})</a>
        <a id="10187" href="SecureCompilation.Compiler.html#10187" class="Function">Tc♯</a> <a id="10191" class="Symbol">=</a> <a id="10193" href="Bitcoin.Tx.Crypto.html#1073" class="Function">hashTx</a> <a id="10200" href="SecureCompilation.Compiler.html#9734" class="Function">Tc</a>

    <a id="10208" href="SecureCompilation.Compiler.html#7840" class="Function">Bpar</a> <a id="10213" class="Symbol">(</a><a id="10214" href="SecureCompilation.Compiler.html#10214" class="Bound">vcs</a> <a id="10218" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="10220" href="SecureCompilation.Compiler.html#10220" class="Bound">vcs~C₀</a><a id="10226" class="Symbol">)</a> <a id="10228" href="SecureCompilation.Compiler.html#10228" class="Bound">Dp</a> <a id="10231" href="SecureCompilation.Compiler.html#10231" class="Bound">T</a> <a id="10233" href="SecureCompilation.Compiler.html#10233" class="Bound">o</a> <a id="10235" href="SecureCompilation.Compiler.html#10235" class="Bound">P</a> <a id="10237" href="SecureCompilation.Compiler.html#10237" class="Bound">t</a>
      <a id="10245" class="Symbol">=</a> <a id="10247" href="SecureCompilation.Compiler.html#10425" class="Function">Tc</a> <a id="10250" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="10252" href="SecureCompilation.Compiler.html#10973" class="Function">Tᵢⱼ</a>
      <a id="10262" class="Keyword">where</a>
        <a id="10276" href="SecureCompilation.Compiler.html#10276" class="Function">eᵢⱼ</a> <a id="10280" class="Symbol">:</a> <a id="10282" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="10287" class="Symbol">(</a><a id="10288" href="BitML.BasicTypes.html#606" class="Function">Value</a> <a id="10294" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="10296" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="10301" class="Symbol">(</a><a id="10302" href="Data.Product.html#1788" class="Function">∃[</a> <a id="10305" href="SecureCompilation.Compiler.html#10305" class="Bound">ctx</a> <a id="10309" href="Data.Product.html#1788" class="Function">]</a> <a id="10311" href="Bitcoin.Script.Base.html#983" class="Datatype">Script</a> <a id="10318" href="SecureCompilation.Compiler.html#10305" class="Bound">ctx</a> <a id="10322" href="Bitcoin.Script.Base.html#896" class="InductiveConstructor">`Bool</a><a id="10327" class="Symbol">))</a>
        <a id="10338" href="SecureCompilation.Compiler.html#10276" class="Function">eᵢⱼ</a> <a id="10342" class="Symbol">=</a> <a id="10344" href="BitML.Contracts.Validity.html#4076" class="Function">map~″</a> <a id="10350" href="SecureCompilation.Compiler.html#10214" class="Bound">vcs</a> <a id="10354" href="SecureCompilation.Compiler.html#10220" class="Bound">vcs~C₀</a> <a id="10361" class="Symbol">λ</a> <a id="10363" href="SecureCompilation.Compiler.html#10363" class="Bound">v</a> <a id="10365" href="SecureCompilation.Compiler.html#10365" class="Bound">Cᵢ</a> <a id="10368" href="SecureCompilation.Compiler.html#10368" class="Bound">Cᵢ~C₀</a> <a id="10374" class="Symbol">→</a>
                <a id="10392" href="SecureCompilation.Compiler.html#10363" class="Bound">v</a> <a id="10394" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="10396" href="BitML.Contracts.Validity.html#3112" class="Function">map~′</a> <a id="10402" href="SecureCompilation.Compiler.html#10365" class="Bound">Cᵢ</a> <a id="10405" href="SecureCompilation.Compiler.html#10368" class="Bound">Cᵢ~C₀</a> <a id="10411" href="SecureCompilation.Compiler.html#5148" class="Function">Bout</a>

        <a id="10425" href="SecureCompilation.Compiler.html#10425" class="Function">Tc</a> <a id="10428" class="Symbol">:</a> <a id="10430" href="Bitcoin.Tx.Base.html#1252" class="Function">∃Tx</a>
        <a id="10442" href="SecureCompilation.Compiler.html#10425" class="Function">Tc</a> <a id="10445" class="Symbol">=</a> <a id="10447" class="Symbol">_</a>
           <a id="10460" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="10462" class="Symbol">_</a>
           <a id="10475" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="10477" href="Bitcoin.Tx.Crypto.html#1398" class="Function">sig⋆</a> <a id="10482" href="Data.Vec.Base.html#5711" class="Function Operator">V.[</a> <a id="10486" href="SecureCompilation.Compiler.html#4967" class="Function">K⋆</a> <a id="10489" href="SecureCompilation.Compiler.html#10228" class="Bound">Dp</a> <a id="10492" href="SecureCompilation.Compiler.html#10235" class="Bound">P</a> <a id="10494" href="Data.Vec.Base.html#5711" class="Function Operator">]</a>
                  <a id="10514" class="Symbol">(</a><a id="10515" class="Keyword">record</a> <a id="10522" class="Symbol">{</a> <a id="10524" href="Bitcoin.Tx.Base.html#997" class="Field">inputs</a>  <a id="10532" class="Symbol">=</a> <a id="10534" href="Data.Vec.Base.html#5711" class="Function Operator">V.[</a> <a id="10538" href="SecureCompilation.Compiler.html#10231" class="Bound">T</a> <a id="10540" href="Bitcoin.Tx.Base.html#557" class="InductiveConstructor Operator">at</a> <a id="10543" href="SecureCompilation.Compiler.html#10233" class="Bound">o</a> <a id="10545" href="Data.Vec.Base.html#5711" class="Function Operator">]</a>
                          <a id="10573" class="Symbol">;</a> <a id="10575" href="Bitcoin.Tx.Base.html#1038" class="Field">wit</a>     <a id="10583" class="Symbol">=</a> <a id="10585" href="Bitcoin.Tx.Crypto.html#903" class="Function">wit⊥</a>
                          <a id="10616" class="Symbol">;</a> <a id="10618" href="Bitcoin.Tx.Base.html#1093" class="Field">relLock</a> <a id="10626" class="Symbol">=</a> <a id="10628" href="Data.Vec.Base.html#5745" class="Function">V.replicate</a> <a id="10640" class="Number">0</a>
                          <a id="10668" class="Symbol">;</a> <a id="10670" href="Bitcoin.Tx.Base.html#1147" class="Field">outputs</a> <a id="10678" class="Symbol">=</a> <a id="10680" href="Data.Vec.Base.html#2541" class="Function">V.map</a> <a id="10686" class="Symbol">(λ{</a> <a id="10690" class="Symbol">(</a><a id="10691" href="SecureCompilation.Compiler.html#10691" class="Bound">vᵢ</a> <a id="10694" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="10696" href="SecureCompilation.Compiler.html#10696" class="Bound">eᵢ</a><a id="10698" class="Symbol">)</a> <a id="10700" class="Symbol">→</a> <a id="10702" class="Symbol">_</a> <a id="10704" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="10706" class="Keyword">record</a> <a id="10713" class="Symbol">{</a> <a id="10715" href="Bitcoin.Tx.Base.html#777" class="Field">value</a>     <a id="10725" class="Symbol">=</a> <a id="10727" href="SecureCompilation.Compiler.html#10691" class="Bound">vᵢ</a>
                                                                       <a id="10801" class="Symbol">;</a> <a id="10803" href="Bitcoin.Tx.Base.html#799" class="Field">validator</a> <a id="10813" class="Symbol">=</a> <a id="10815" href="Bitcoin.Script.Base.html#2373" class="InductiveConstructor Operator">ƛ</a> <a id="10817" class="Symbol">(</a><a id="10818" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="10824" class="Symbol">(</a><a id="10825" href="Bitcoin.Script.Base.html#3591" class="Function">⋁</a> <a id="10827" href="SecureCompilation.Compiler.html#10696" class="Bound">eᵢ</a><a id="10829" class="Symbol">))</a> <a id="10832" class="Symbol">}})</a>
                                            <a id="10880" class="Symbol">(</a><a id="10881" href="Data.Vec.Base.html#7501" class="Function">V.fromList</a> <a id="10892" href="SecureCompilation.Compiler.html#10276" class="Function">eᵢⱼ</a><a id="10895" class="Symbol">)</a>
                          <a id="10923" class="Symbol">;</a> <a id="10925" href="Bitcoin.Tx.Base.html#1189" class="Field">absLock</a> <a id="10933" class="Symbol">=</a> <a id="10935" href="SecureCompilation.Compiler.html#10237" class="Bound">t</a> <a id="10937" class="Symbol">})</a>
        <a id="10948" href="SecureCompilation.Compiler.html#10948" class="Function">Tc♯</a> <a id="10952" class="Symbol">=</a> <a id="10954" href="Bitcoin.Tx.Crypto.html#1073" class="Function">hashTx</a> <a id="10961" href="SecureCompilation.Compiler.html#10425" class="Function">Tc</a>

        <a id="10973" href="SecureCompilation.Compiler.html#10973" class="Function">Tᵢⱼ</a> <a id="10977" class="Symbol">:</a> <a id="10979" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="10984" href="Bitcoin.Tx.Base.html#1252" class="Function">∃Tx</a>
        <a id="10996" href="SecureCompilation.Compiler.html#10973" class="Function">Tᵢⱼ</a> <a id="11000" class="Symbol">=</a> <a id="11002" href="Data.List.Base.html#3827" class="Function">concat</a> <a id="11009" class="Symbol">(</a><a id="11010" href="BitML.Contracts.Validity.html#3490" class="Function">mapEnum~″</a> <a id="11020" href="SecureCompilation.Compiler.html#10214" class="Bound">vcs</a> <a id="11024" href="SecureCompilation.Compiler.html#10220" class="Bound">vcs~C₀</a> <a id="11031" class="Symbol">λ</a> <a id="11033" href="SecureCompilation.Compiler.html#11033" class="Bound">i</a> <a id="11035" href="SecureCompilation.Compiler.html#11035" class="Bound">vᵢ</a> <a id="11038" href="SecureCompilation.Compiler.html#11038" class="Bound">Cᵢ</a> <a id="11041" href="SecureCompilation.Compiler.html#11041" class="Bound">Cᵢ~C₀</a> <a id="11047" class="Symbol">→</a>
                <a id="11065" href="Data.List.Base.html#3827" class="Function">concat</a> <a id="11072" class="Symbol">(</a><a id="11073" href="BitML.Contracts.Validity.html#3112" class="Function">map~′</a> <a id="11079" href="SecureCompilation.Compiler.html#11038" class="Bound">Cᵢ</a> <a id="11082" href="SecureCompilation.Compiler.html#11041" class="Bound">Cᵢ~C₀</a> <a id="11088" class="Symbol">λ</a> <a id="11090" href="SecureCompilation.Compiler.html#11090" class="Bound">Dᵢⱼ</a> <a id="11094" href="SecureCompilation.Compiler.html#11094" class="Bound">Dᵢⱼ~C₀</a> <a id="11101" class="Symbol">→</a>
                  <a id="11121" href="SecureCompilation.Compiler.html#7687" class="Function">Bd</a> <a id="11124" class="Symbol">(</a><a id="11125" href="SecureCompilation.Compiler.html#11090" class="Bound">Dᵢⱼ</a> <a id="11129" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11131" href="SecureCompilation.Compiler.html#11094" class="Bound">Dᵢⱼ~C₀</a><a id="11137" class="Symbol">)</a> <a id="11139" href="SecureCompilation.Compiler.html#11090" class="Bound">Dᵢⱼ</a> <a id="11143" href="SecureCompilation.Compiler.html#10948" class="Function">Tc♯</a> <a id="11147" class="Symbol">(</a><a id="11148" href="Data.Fin.Base.html#1192" class="Function">toℕ</a> <a id="11152" href="SecureCompilation.Compiler.html#11033" class="Bound">i</a><a id="11153" class="Symbol">)</a> <a id="11155" href="SecureCompilation.Compiler.html#11035" class="Bound">vᵢ</a> <a id="11158" href="SecureCompilation.Compiler.html#4499" class="Function">partG</a> <a id="11164" class="Number">0</a><a id="11165" class="Symbol">))</a>
</pre></body></html>