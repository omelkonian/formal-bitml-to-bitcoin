<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>SecureCompilation.Example</title><link rel="stylesheet" href="css/Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">----------------------------------------------------------------------------</a>
<a id="78" class="Comment">-- Example contract compilations.</a>
<a id="112" class="Comment">----------------------------------------------------------------------------</a>
<a id="189" class="Keyword">module</a> <a id="196" href="SecureCompilation.Example.html" class="Module">SecureCompilation.Example</a> <a id="222" class="Keyword">where</a>

<a id="229" class="Keyword">open</a> <a id="234" class="Keyword">import</a> <a id="241" href="Prelude.Init.html" class="Module">Prelude.Init</a>
<a id="254" class="Keyword">open</a> <a id="259" class="Keyword">import</a> <a id="266" href="Prelude.Applicative.html" class="Module">Prelude.Applicative</a>
<a id="286" class="Keyword">open</a> <a id="291" class="Keyword">import</a> <a id="298" href="Prelude.Semigroup.html" class="Module">Prelude.Semigroup</a>
<a id="316" class="Keyword">open</a> <a id="321" class="Keyword">import</a> <a id="328" href="Prelude.Nary.html" class="Module">Prelude.Nary</a>
<a id="341" class="Keyword">open</a> <a id="346" class="Keyword">import</a> <a id="353" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>
<a id="367" class="Keyword">open</a> <a id="372" class="Keyword">import</a> <a id="379" href="Prelude.Validity.html" class="Module">Prelude.Validity</a>
<a id="396" class="Keyword">open</a> <a id="401" class="Keyword">import</a> <a id="408" href="Prelude.Membership.html" class="Module">Prelude.Membership</a>
<a id="427" class="Keyword">open</a> <a id="432" class="Keyword">import</a> <a id="439" href="Prelude.Decidable.html" class="Module">Prelude.Decidable</a>
<a id="457" class="Keyword">open</a> <a id="462" class="Keyword">import</a> <a id="469" href="Prelude.ToN.html" class="Module">Prelude.ToN</a>
<a id="481" class="Keyword">open</a> <a id="486" class="Keyword">import</a> <a id="493" href="Prelude.Functor.html" class="Module">Prelude.Functor</a>

<a id="510" class="Comment">-- Bitcoin</a>
<a id="521" class="Keyword">open</a> <a id="526" class="Keyword">import</a> <a id="533" href="Bitcoin.Crypto.html" class="Module">Bitcoin.Crypto</a>
<a id="548" class="Keyword">open</a> <a id="553" class="Keyword">import</a> <a id="560" href="Bitcoin.Script.Base.html" class="Module">Bitcoin.Script.Base</a>
<a id="580" class="Keyword">open</a> <a id="585" class="Keyword">import</a> <a id="592" href="Bitcoin.Tx.Base.html" class="Module">Bitcoin.Tx.Base</a>
<a id="608" class="Keyword">open</a> <a id="613" class="Keyword">import</a> <a id="620" href="Bitcoin.Tx.Crypto.html" class="Module">Bitcoin.Tx.Crypto</a>

<a id="639" class="Comment">-- BitML</a>
<a id="648" class="Keyword">open</a> <a id="653" class="Keyword">import</a> <a id="660" href="BitML.Example.Setup.html" class="Module">BitML.Example.Setup</a>       <a id="686" class="Keyword">using</a> <a id="692" class="Symbol">(</a><a id="693" href="BitML.Example.Setup.html#208" class="Datatype">Participant</a><a id="704" class="Symbol">;</a> <a id="706" href="BitML.Example.Setup.html#318" class="Function">Honest</a><a id="712" class="Symbol">;</a> <a id="714" href="BitML.Example.Setup.html#234" class="InductiveConstructor">A</a><a id="715" class="Symbol">;</a> <a id="717" href="BitML.Example.Setup.html#236" class="InductiveConstructor">B</a><a id="718" class="Symbol">)</a>
<a id="720" class="Keyword">open</a> <a id="725" class="Keyword">import</a> <a id="732" href="BitML.BasicTypes.html" class="Module">BitML.BasicTypes</a>          <a id="758" class="Keyword">hiding</a> <a id="765" class="Symbol">(</a><a id="766" href="BitML.BasicTypes.html#547" class="Generalizable">t</a><a id="767" class="Symbol">;</a> <a id="769" href="BitML.BasicTypes.html#453" class="Generalizable">a</a><a id="770" class="Symbol">;</a> <a id="772" href="BitML.BasicTypes.html#412" class="Generalizable">v</a><a id="773" class="Symbol">)</a>
<a id="775" class="Keyword">open</a> <a id="780" class="Keyword">import</a> <a id="787" href="BitML.Contracts.html" class="Module">BitML.Contracts</a> <a id="803" href="BitML.Example.Setup.html#208" class="Datatype">Participant</a> <a id="815" href="BitML.Example.Setup.html#318" class="Function">Honest</a> <a id="822" class="Keyword">hiding</a> <a id="829" class="Symbol">(</a><a id="830" href="BitML.Contracts.Types.html#515" class="Generalizable">A</a><a id="831" class="Symbol">;</a> <a id="833" href="BitML.Contracts.Types.html#517" class="Generalizable">B</a><a id="834" class="Symbol">)</a>
<a id="836" class="Keyword">open</a> <a id="841" href="BitML.Contracts.html#361" class="Module">Induction</a> <a id="851" class="Keyword">using</a> <a id="857" class="Symbol">(</a><a id="858" href="BitML.Contracts.Induction.html#445" class="InductiveConstructor">CS</a><a id="860" class="Symbol">)</a>

<a id="863" class="Comment">-- BitML compiler</a>
<a id="η"></a><a id="881" href="SecureCompilation.Example.html#881" class="Function">η</a> <a id="883" class="Symbol">=</a> <a id="885" class="Number">1</a>
<a id="887" class="Keyword">open</a> <a id="892" class="Keyword">import</a> <a id="899" href="SecureCompilation.Compiler.html" class="Module">SecureCompilation.Compiler</a> <a id="926" href="BitML.Example.Setup.html#208" class="Datatype">Participant</a> <a id="938" href="BitML.Example.Setup.html#318" class="Function">Honest</a> <a id="945" href="SecureCompilation.Example.html#881" class="Function">η</a>

<a id="948" class="Keyword">module</a> <a id="Section7"></a><a id="955" href="SecureCompilation.Example.html#955" class="Module">Section7</a> <a id="964" class="Keyword">where</a> <a id="970" class="Comment">-- (see BitML paper, Section 7).</a>

  <a id="Section7.ex-ad"></a><a id="1006" href="SecureCompilation.Example.html#1006" class="Function">ex-ad</a> <a id="1012" class="Symbol">:</a> <a id="1014" href="BitML.Contracts.Types.html#2400" class="Record">Advertisement</a>
  <a id="1030" href="SecureCompilation.Example.html#1006" class="Function">ex-ad</a> <a id="1036" class="Symbol">=</a> <a id="1038" href="BitML.Contracts.Types.html#2440" class="InductiveConstructor Operator">⟨</a> <a id="1040" href="BitML.Example.Setup.html#234" class="InductiveConstructor">A</a> <a id="1042" href="BitML.Contracts.Types.html#1950" class="InductiveConstructor Operator">:!</a> <a id="1045" class="Number">1</a> <a id="1047" href="BitML.Contracts.Types.html#1950" class="InductiveConstructor Operator">at</a> <a id="1050" class="String">&quot;x&quot;</a> <a id="1054" href="BitML.Contracts.Types.html#2125" class="InductiveConstructor Operator">∣∣</a> <a id="1057" href="BitML.Example.Setup.html#236" class="InductiveConstructor">B</a> <a id="1059" href="BitML.Contracts.Types.html#1950" class="InductiveConstructor Operator">:!</a> <a id="1062" class="Number">1</a> <a id="1064" href="BitML.Contracts.Types.html#1950" class="InductiveConstructor Operator">at</a> <a id="1067" class="String">&quot;y&quot;</a> <a id="1071" href="BitML.Contracts.Types.html#2440" class="InductiveConstructor Operator">⟩</a> <a id="1073" href="BitML.Contracts.Types.html#884" class="InductiveConstructor">withdraw</a> <a id="1082" href="BitML.Example.Setup.html#236" class="InductiveConstructor">B</a> <a id="1084" href="BitML.Contracts.Types.html#1452" class="Function Operator">∙</a>

  <a id="Section7.partG"></a><a id="1089" href="SecureCompilation.Example.html#1089" class="Function">partG</a> <a id="1095" class="Symbol">=</a> <a id="1097" href="BitML.Contracts.Helpers.html#3379" class="Function">nub-participants</a> <a id="1114" class="Symbol">(</a><a id="1115" href="SecureCompilation.Example.html#1006" class="Function">ex-ad</a> <a id="1121" class="Symbol">.</a><a id="1122" href="BitML.Contracts.Types.html#2457" class="Field">G</a><a id="1123" class="Symbol">)</a>

  <a id="1128" class="Keyword">postulate</a>
    <a id="Section7.Tˣ"></a><a id="1142" href="SecureCompilation.Example.html#1142" class="Postulate">Tˣ</a> <a id="Section7.Tʸ"></a><a id="1145" href="SecureCompilation.Example.html#1145" class="Postulate">Tʸ</a> <a id="1148" class="Symbol">:</a> <a id="1150" href="Bitcoin.Tx.Base.html#1793" class="Record">TxInput′</a> <a id="1159" class="Comment">-- pre-existing deposits</a>

  <a id="Section7.sechash"></a><a id="1187" href="SecureCompilation.Example.html#1187" class="Function">sechash</a> <a id="1195" class="Symbol">:</a> <a id="1197" href="BitML.Contracts.Helpers.html#4962" class="Function">namesˡ</a> <a id="1204" class="Symbol">(</a><a id="1205" href="SecureCompilation.Example.html#1006" class="Function">ex-ad</a> <a id="1211" class="Symbol">.</a><a id="1212" href="BitML.Contracts.Types.html#2457" class="Field">G</a><a id="1213" class="Symbol">)</a> <a id="1215" href="Prelude.Lists.html#13423" class="Function Operator">↦</a> <a id="1217" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a>
  <a id="1221" href="SecureCompilation.Example.html#1187" class="Function">sechash</a> <a id="1229" class="Symbol">()</a>

  <a id="Section7.txout"></a><a id="1235" href="SecureCompilation.Example.html#1235" class="Function">txout</a> <a id="1241" class="Symbol">:</a> <a id="1243" href="BitML.Contracts.Helpers.html#5031" class="Function">namesʳ</a> <a id="1250" class="Symbol">(</a><a id="1251" href="SecureCompilation.Example.html#1006" class="Function">ex-ad</a> <a id="1257" class="Symbol">.</a><a id="1258" href="BitML.Contracts.Types.html#2457" class="Field">G</a><a id="1259" class="Symbol">)</a> <a id="1261" href="Prelude.Lists.html#13423" class="Function Operator">↦</a> <a id="1263" href="Bitcoin.Tx.Base.html#1793" class="Record">TxInput′</a>
  <a id="1274" href="SecureCompilation.Example.html#1235" class="Function">txout</a> <a id="1280" class="Symbol">=</a> <a id="1282" href="Function.Base.html#4121" class="Function Operator">case_of</a> <a id="1290" class="Symbol">λ</a> <a id="1292" class="Keyword">where</a>
    <a id="1302" class="Comment">{- &quot;x&quot; -}</a> <a id="1312" class="Symbol">(</a><a id="1313" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="1318" class="Symbol">_)</a>         <a id="1329" class="Symbol">→</a> <a id="1331" href="SecureCompilation.Example.html#1142" class="Postulate">Tˣ</a>
    <a id="1338" class="Comment">{- &quot;y&quot; -}</a> <a id="1348" class="Symbol">(</a><a id="1349" href="Data.List.Relation.Unary.Any.html#1272" class="InductiveConstructor">there</a> <a id="1355" class="Symbol">(</a><a id="1356" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="1361" class="Symbol">_))</a> <a id="1365" class="Symbol">→</a> <a id="1367" href="SecureCompilation.Example.html#1145" class="Postulate">Tʸ</a>

  <a id="1373" class="Keyword">postulate</a>
    <a id="Section7.Kᵃ"></a><a id="1387" href="SecureCompilation.Example.html#1387" class="Postulate">Kᵃ</a> <a id="Section7.Kᵇ"></a><a id="1390" href="SecureCompilation.Example.html#1390" class="Postulate">Kᵇ</a> <a id="1393" class="Symbol">:</a> <a id="1395" href="Bitcoin.Crypto.html#345" class="Record">KeyPair</a>
    <a id="Section7.Kʷᵇ"></a><a id="1407" href="SecureCompilation.Example.html#1407" class="Postulate">Kʷᵇ</a> <a id="1411" class="Symbol">:</a> <a id="1413" href="BitML.Example.Setup.html#208" class="Datatype">Participant</a> <a id="1425" class="Symbol">→</a> <a id="1427" href="Bitcoin.Crypto.html#345" class="Record">KeyPair</a>

  <a id="Section7.K"></a><a id="1438" href="SecureCompilation.Example.html#1438" class="Function">K</a> <a id="1440" class="Symbol">:</a> <a id="1442" href="SecureCompilation.Example.html#1089" class="Function">partG</a> <a id="1448" href="Prelude.Lists.html#13423" class="Function Operator">↦</a> <a id="1450" href="Bitcoin.Crypto.html#345" class="Record">KeyPair</a>
  <a id="1460" href="SecureCompilation.Example.html#1438" class="Function">K</a> <a id="1462" class="Symbol">=</a> <a id="1464" href="Function.Base.html#4121" class="Function Operator">case_of</a> <a id="1472" class="Symbol">λ</a> <a id="1474" class="Keyword">where</a>
    <a id="1484" class="Comment">{- A -}</a> <a id="1492" class="Symbol">(</a><a id="1493" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="1498" class="Symbol">_)</a>         <a id="1509" class="Symbol">→</a> <a id="1511" href="SecureCompilation.Example.html#1387" class="Postulate">Kᵃ</a>
    <a id="1518" class="Comment">{- B -}</a> <a id="1526" class="Symbol">(</a><a id="1527" href="Data.List.Relation.Unary.Any.html#1272" class="InductiveConstructor">there</a> <a id="1533" class="Symbol">(</a><a id="1534" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="1539" class="Symbol">_))</a> <a id="1543" class="Symbol">→</a> <a id="1545" href="SecureCompilation.Example.html#1390" class="Postulate">Kᵇ</a>

  <a id="Section7.K²"></a><a id="1551" href="SecureCompilation.Example.html#1551" class="Function">K²</a> <a id="1554" class="Symbol">:</a> <a id="1556" href="BitML.Contracts.Helpers.html#15788" class="Function">subterms′</a> <a id="1566" class="Symbol">(</a><a id="1567" href="BitML.Contracts.Induction.html#445" class="InductiveConstructor">CS</a> <a id="1570" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="1572" href="SecureCompilation.Example.html#1006" class="Function">ex-ad</a> <a id="1578" class="Symbol">.</a><a id="1579" href="BitML.Contracts.Types.html#2478" class="Field">C</a><a id="1580" class="Symbol">)</a> <a id="1582" href="Prelude.Lists.html#13423" class="Function Operator">↦</a> <a id="1584" class="Symbol">(</a><a id="1585" href="SecureCompilation.Example.html#1089" class="Function">partG</a> <a id="1591" href="Prelude.Lists.html#13423" class="Function Operator">↦</a> <a id="1593" href="Bitcoin.Crypto.html#345" class="Record">KeyPair</a><a id="1600" class="Symbol">)</a>
  <a id="1604" href="SecureCompilation.Example.html#1551" class="Function">K²</a> <a id="1607" class="Symbol">=</a> <a id="1609" href="Function.Base.html#4121" class="Function Operator">case_of</a> <a id="1617" class="Symbol">λ</a> <a id="1619" class="Keyword">where</a>
    <a id="1629" class="Symbol">(</a><a id="1630" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="1635" class="Symbol">_)</a> <a id="1638" class="Symbol">→</a> <a id="1640" href="Function.Base.html#4121" class="Function Operator">case_of</a> <a id="1648" class="Symbol">λ</a> <a id="1650" class="Keyword">where</a>
      <a id="1662" class="Comment">{- A -}</a> <a id="1670" class="Symbol">(</a><a id="1671" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="1676" class="Symbol">_)</a>         <a id="1687" class="Symbol">→</a> <a id="1689" href="SecureCompilation.Example.html#1407" class="Postulate">Kʷᵇ</a> <a id="1693" href="BitML.Example.Setup.html#234" class="InductiveConstructor">A</a>
      <a id="1701" class="Comment">{- B -}</a> <a id="1709" class="Symbol">(</a><a id="1710" href="Data.List.Relation.Unary.Any.html#1272" class="InductiveConstructor">there</a> <a id="1716" class="Symbol">(</a><a id="1717" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="1722" class="Symbol">_))</a> <a id="1726" class="Symbol">→</a> <a id="1728" href="SecureCompilation.Example.html#1407" class="Postulate">Kʷᵇ</a> <a id="1732" href="BitML.Example.Setup.html#236" class="InductiveConstructor">B</a>

  <a id="Section7.Ks"></a><a id="1737" href="SecureCompilation.Example.html#1737" class="Function">Ks</a> <a id="1740" class="Symbol">:</a> <a id="1742" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1747" href="Bitcoin.Crypto.html#345" class="Record">KeyPair</a>
  <a id="1757" href="SecureCompilation.Example.html#1737" class="Function">Ks</a> <a id="1760" class="Symbol">=</a> <a id="1762" href="Prelude.Membership.html#1190" class="Field">mapWith∈</a> <a id="1771" href="SecureCompilation.Example.html#1089" class="Function">partG</a> <a id="1777" class="Symbol">(</a><a id="1778" href="SecureCompilation.Example.html#1551" class="Function">K²</a> <a id="1781" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="1783" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="1788" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="1792" class="Symbol">)</a>

  <a id="1797" class="Comment">-- [TODO] move to `formal-bitcoin`</a>
  <a id="Section7.tx↝"></a><a id="1834" href="SecureCompilation.Example.html#1834" class="Function">tx↝</a> <a id="1838" class="Symbol">:</a> <a id="1840" href="Bitcoin.Tx.Base.html#1793" class="Record">TxInput′</a> <a id="1849" class="Symbol">→</a> <a id="1851" href="Bitcoin.Tx.Base.html#343" class="Record">TxInput</a>
  <a id="1861" href="SecureCompilation.Example.html#1834" class="Function">tx↝</a> <a id="1865" class="Keyword">record</a> <a id="1872" class="Symbol">{</a><a id="1873" href="Bitcoin.Tx.Base.html#1845" class="Field">tx′</a> <a id="1877" class="Symbol">=</a> <a id="1879" href="SecureCompilation.Example.html#1879" class="Bound">tx</a><a id="1881" class="Symbol">;</a> <a id="1883" href="Bitcoin.Tx.Base.html#1859" class="Field">index′</a> <a id="1890" class="Symbol">=</a> <a id="1892" href="SecureCompilation.Example.html#1892" class="Bound">i</a><a id="1893" class="Symbol">}</a> <a id="1895" class="Symbol">=</a> <a id="1897" class="Keyword">record</a> <a id="1904" class="Symbol">{</a><a id="1905" href="Bitcoin.Tx.Base.html#394" class="Field">txId</a> <a id="1910" class="Symbol">=</a> <a id="1912" href="SecureCompilation.Example.html#1879" class="Bound">tx</a> <a id="1915" href="Bitcoin.Crypto.html#826" class="Field Operator">♯</a><a id="1916" class="Symbol">;</a> <a id="1918" href="Bitcoin.Tx.Base.html#449" class="Field">index</a> <a id="1924" class="Symbol">=</a> <a id="1926" href="Prelude.ToN.html#102" class="Field">toℕ</a> <a id="1930" href="SecureCompilation.Example.html#1892" class="Bound">i</a><a id="1931" class="Symbol">}</a>

  <a id="Section7.Tᵢₙᵢₜ"></a><a id="1936" href="SecureCompilation.Example.html#1936" class="Function">Tᵢₙᵢₜ</a> <a id="1942" class="Symbol">:</a> <a id="1944" href="Bitcoin.Tx.Base.html#903" class="Record">Tx</a> <a id="1947" class="Number">2</a> <a id="1949" class="Number">1</a>
  <a id="1953" href="SecureCompilation.Example.html#1936" class="Function">Tᵢₙᵢₜ</a> <a id="1959" class="Symbol">=</a> <a id="1961" class="Keyword">record</a>
    <a id="1972" class="Symbol">{</a> <a id="1974" href="Bitcoin.Tx.Base.html#940" class="Field">inputs</a>  <a id="1982" class="Symbol">=</a> <a id="1984" href="SecureCompilation.Example.html#1834" class="Function">tx↝</a> <a id="1988" href="Prelude.Functor.html#299" class="Field Operator">&lt;$&gt;</a> <a id="1992" class="Symbol">(</a><a id="1993" href="SecureCompilation.Example.html#1142" class="Postulate">Tˣ</a> <a id="1996" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">∷</a> <a id="1998" href="SecureCompilation.Example.html#1145" class="Postulate">Tʸ</a> <a id="2001" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">∷</a> <a id="2003" href="Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a><a id="2005" class="Symbol">)</a>
    <a id="2011" class="Symbol">;</a> <a id="2013" href="Bitcoin.Tx.Base.html#981" class="Field">wit</a>     <a id="2021" class="Symbol">=</a> <a id="2023" href="Bitcoin.Tx.Crypto.html#520" class="Function">wit⊥</a>
    <a id="2032" class="Symbol">;</a> <a id="2034" href="Bitcoin.Tx.Base.html#1036" class="Field">relLock</a> <a id="2042" class="Symbol">=</a> <a id="2044" href="Data.Vec.Base.html#5784" class="Function">V.replicate</a> <a id="2056" class="Number">0</a>
    <a id="2062" class="Symbol">;</a> <a id="2064" href="Bitcoin.Tx.Base.html#1090" class="Field">outputs</a> <a id="2072" class="Symbol">=</a> <a id="2074" href="Data.Vec.Base.html#5750" class="Function Operator">V.[</a> <a id="2078" href="Bitcoin.Script.Base.html#375" class="InductiveConstructor">Ctx</a> <a id="2082" class="Number">2</a> <a id="2084" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2086" class="Keyword">record</a> <a id="2093" class="Symbol">{</a> <a id="2095" href="Bitcoin.Tx.Base.html#658" class="Field">value</a> <a id="2101" class="Symbol">=</a> <a id="2103" class="Number">2</a><a id="2104" class="Symbol">;</a> <a id="2106" href="Bitcoin.Tx.Base.html#680" class="Field">validator</a> <a id="2116" class="Symbol">=</a> <a id="2118" href="Bitcoin.Script.Base.html#2174" class="InductiveConstructor Operator">ƛ</a> <a id="2120" href="Bitcoin.Script.Base.html#1413" class="InductiveConstructor">versig</a> <a id="2127" href="SecureCompilation.Example.html#1737" class="Function">Ks</a> <a id="2130" class="Symbol">(</a><a id="2131" href="Data.List.Base.html#6324" class="Function">allFin</a> <a id="2138" class="Symbol">_)</a> <a id="2141" class="Symbol">}</a><a id="2142" href="Data.Vec.Base.html#5750" class="Function Operator">]</a>
    <a id="2148" class="Symbol">;</a> <a id="2150" href="Bitcoin.Tx.Base.html#1132" class="Field">absLock</a> <a id="2158" class="Symbol">=</a> <a id="2160" class="Number">0</a> <a id="2162" class="Symbol">}</a>

  <a id="Section7.Tᵇ"></a><a id="2167" href="SecureCompilation.Example.html#2167" class="Function">Tᵇ</a> <a id="2170" class="Symbol">:</a> <a id="2172" href="Bitcoin.Tx.Base.html#903" class="Record">Tx</a> <a id="2175" class="Number">1</a> <a id="2177" class="Number">1</a>
  <a id="2181" href="SecureCompilation.Example.html#2167" class="Function">Tᵇ</a> <a id="2184" class="Symbol">=</a> <a id="2186" href="Bitcoin.Tx.Crypto.html#907" class="Function">sig⋆</a> <a id="2191" href="Data.Vec.Base.html#5750" class="Function Operator">V.[</a> <a id="2195" href="SecureCompilation.Example.html#1737" class="Function">Ks</a> <a id="2198" href="Data.Vec.Base.html#5750" class="Function Operator">]</a> <a id="2200" class="Keyword">record</a>
    <a id="2211" class="Symbol">{</a> <a id="2213" href="Bitcoin.Tx.Base.html#940" class="Field">inputs</a>  <a id="2221" class="Symbol">=</a> <a id="2223" href="Data.Vec.Base.html#5750" class="Function Operator">V.[</a> <a id="2227" class="Symbol">(</a><a id="2228" href="SecureCompilation.Example.html#1936" class="Function">Tᵢₙᵢₜ</a> <a id="2234" href="Bitcoin.Crypto.html#826" class="Field Operator">♯</a><a id="2235" class="Symbol">)</a> <a id="2237" href="Bitcoin.Tx.Base.html#377" class="InductiveConstructor Operator">at</a> <a id="2240" class="Number">0</a> <a id="2242" href="Data.Vec.Base.html#5750" class="Function Operator">]</a>
    <a id="2248" class="Symbol">;</a> <a id="2250" href="Bitcoin.Tx.Base.html#981" class="Field">wit</a>     <a id="2258" class="Symbol">=</a> <a id="2260" href="Bitcoin.Tx.Crypto.html#520" class="Function">wit⊥</a>
    <a id="2269" class="Symbol">;</a> <a id="2271" href="Bitcoin.Tx.Base.html#1036" class="Field">relLock</a> <a id="2279" class="Symbol">=</a> <a id="2281" href="Data.Vec.Base.html#5784" class="Function">V.replicate</a> <a id="2293" class="Number">0</a>
    <a id="2299" class="Symbol">;</a> <a id="2301" href="Bitcoin.Tx.Base.html#1090" class="Field">outputs</a> <a id="2309" class="Symbol">=</a> <a id="2311" href="Data.Vec.Base.html#5750" class="Function Operator">V.[</a> <a id="2315" href="Bitcoin.Script.Base.html#375" class="InductiveConstructor">Ctx</a> <a id="2319" class="Number">1</a> <a id="2321" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2323" class="Keyword">record</a> <a id="2330" class="Symbol">{</a> <a id="2332" href="Bitcoin.Tx.Base.html#658" class="Field">value</a> <a id="2338" class="Symbol">=</a> <a id="2340" class="Number">2</a><a id="2341" class="Symbol">;</a> <a id="2343" href="Bitcoin.Tx.Base.html#680" class="Field">validator</a> <a id="2353" class="Symbol">=</a> <a id="2355" href="Bitcoin.Script.Base.html#2174" class="InductiveConstructor Operator">ƛ</a> <a id="2357" href="Bitcoin.Script.Base.html#1413" class="InductiveConstructor">versig</a> <a id="2364" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="2366" href="SecureCompilation.Example.html#1438" class="Function">K</a> <a id="2368" class="Symbol">(</a><a id="2369" href="Data.List.Relation.Unary.Any.html#1272" class="InductiveConstructor">there</a> <a id="2375" class="Symbol">(</a><a id="2376" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="2381" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="2385" class="Symbol">))</a> <a id="2388" href="Data.List.Base.html#5025" class="Function Operator">]</a> <a id="2390" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="2392" href="Data.Fin.Patterns.html#390" class="InductiveConstructor">0F</a> <a id="2395" href="Data.List.Base.html#5025" class="Function Operator">]</a> <a id="2397" class="Symbol">}</a><a id="2398" href="Data.Vec.Base.html#5750" class="Function Operator">]</a>
    <a id="2404" class="Symbol">;</a> <a id="2406" href="Bitcoin.Tx.Base.html#1132" class="Field">absLock</a> <a id="2414" class="Symbol">=</a> <a id="2416" class="Number">0</a> <a id="2418" class="Symbol">}</a>

  <a id="2423" class="Comment">-- out : ∃Tx × (subterms⁺ (CS $ ex-ad .C) ↦ ∃Tx)</a>
  <a id="2474" class="Comment">-- out = bitml-compiler {ad = ex-ad} auto sechash txout K K²</a>

<a id="2536" class="Comment">--   outTxs : List ∃Tx</a>
<a id="2559" class="Comment">--   outTxs = let t₀ , m = out in t₀ ∷ m (here refl) ∷ []</a>

<a id="2618" class="Comment">--   _ : outTxs ≡ (-, -, Tᵢₙᵢₜ) ∷ (-, -, Tᵇ) ∷ []</a>
<a id="2668" class="Comment">--   _ = refl</a>

<a id="2683" class="Keyword">module</a> <a id="TimedCommitment"></a><a id="2690" href="SecureCompilation.Example.html#2690" class="Module">TimedCommitment</a> <a id="2706" class="Keyword">where</a> <a id="2712" class="Comment">-- (see BitML, Appendix A.5)</a>

  <a id="TimedCommitment.t"></a><a id="2744" href="SecureCompilation.Example.html#2744" class="Function">t</a> <a id="2746" class="Symbol">=</a> <a id="2748" class="Number">42</a> <a id="2751" class="Symbol">;</a> <a id="TimedCommitment.v"></a><a id="2753" href="SecureCompilation.Example.html#2753" class="Function">v</a> <a id="2755" class="Symbol">=</a> <a id="2757" class="Number">1</a> <a id="2759" class="Symbol">;</a> <a id="TimedCommitment.Ha"></a><a id="2761" href="SecureCompilation.Example.html#2761" class="Function">Ha</a> <a id="2764" class="Symbol">=</a> <a id="2766" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="2768" class="Number">9</a>

  <a id="TimedCommitment.tc"></a><a id="2773" href="SecureCompilation.Example.html#2773" class="Function">tc</a> <a id="2776" class="Symbol">:</a> <a id="2778" href="BitML.Contracts.Types.html#2400" class="Record">Advertisement</a>
  <a id="2794" href="SecureCompilation.Example.html#2773" class="Function">tc</a> <a id="2797" class="Symbol">=</a> <a id="2799" href="BitML.Contracts.Types.html#2440" class="InductiveConstructor Operator">⟨</a> <a id="2801" href="BitML.Example.Setup.html#234" class="InductiveConstructor">A</a> <a id="2803" href="BitML.Contracts.Types.html#1950" class="InductiveConstructor Operator">:!</a> <a id="2806" href="SecureCompilation.Example.html#2753" class="Function">v</a> <a id="2808" href="BitML.Contracts.Types.html#1950" class="InductiveConstructor Operator">at</a> <a id="2811" class="String">&quot;x&quot;</a> <a id="2815" href="BitML.Contracts.Types.html#2125" class="InductiveConstructor Operator">∣∣</a> <a id="2818" href="BitML.Example.Setup.html#234" class="InductiveConstructor">A</a> <a id="2820" href="BitML.Contracts.Types.html#2057" class="InductiveConstructor Operator">:secret</a> <a id="2828" class="String">&quot;a&quot;</a> <a id="2832" href="BitML.Contracts.Types.html#2125" class="InductiveConstructor Operator">∣∣</a> <a id="2835" href="BitML.Example.Setup.html#236" class="InductiveConstructor">B</a> <a id="2837" href="BitML.Contracts.Types.html#1950" class="InductiveConstructor Operator">:!</a> <a id="2840" class="Number">0</a> <a id="2842" href="BitML.Contracts.Types.html#1950" class="InductiveConstructor Operator">at</a> <a id="2845" class="String">&quot;y&quot;</a> <a id="2849" href="BitML.Contracts.Types.html#2440" class="InductiveConstructor Operator">⟩</a>
         <a id="2860" href="BitML.Contracts.Types.html#1674" class="InductiveConstructor Operator">reveal</a> <a id="2867" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="2869" class="String">&quot;a&quot;</a> <a id="2873" href="Data.List.Base.html#5025" class="Function Operator">]</a> <a id="2875" href="BitML.Contracts.Types.html#1674" class="InductiveConstructor Operator">⇒</a> <a id="2877" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="2879" href="BitML.Contracts.Types.html#884" class="InductiveConstructor">withdraw</a> <a id="2888" href="BitML.Example.Setup.html#234" class="InductiveConstructor">A</a> <a id="2890" href="Data.List.Base.html#5025" class="Function Operator">]</a>
       <a id="2899" href="BitML.Contracts.Types.html#1401" class="Function Operator">⊕</a> <a id="2901" href="BitML.Contracts.Types.html#1170" class="InductiveConstructor Operator">after</a> <a id="2907" href="SecureCompilation.Example.html#2744" class="Function">t</a> <a id="2909" href="BitML.Contracts.Types.html#1170" class="InductiveConstructor Operator">⇒</a> <a id="2911" href="BitML.Contracts.Types.html#884" class="InductiveConstructor">withdraw</a> <a id="2920" href="BitML.Example.Setup.html#236" class="InductiveConstructor">B</a>
       <a id="2929" href="BitML.Contracts.Types.html#1452" class="Function Operator">∙</a>

  <a id="TimedCommitment.partG"></a><a id="2934" href="SecureCompilation.Example.html#2934" class="Function">partG</a> <a id="2940" class="Symbol">=</a> <a id="2942" href="BitML.Contracts.Helpers.html#3379" class="Function">nub-participants</a> <a id="2959" class="Symbol">(</a><a id="2960" href="SecureCompilation.Example.html#2773" class="Function">tc</a> <a id="2963" class="Symbol">.</a><a id="2964" href="BitML.Contracts.Types.html#2457" class="Field">G</a><a id="2965" class="Symbol">)</a>

  <a id="2970" class="Keyword">postulate</a>
    <a id="TimedCommitment.Tᵃ"></a><a id="2984" href="SecureCompilation.Example.html#2984" class="Postulate">Tᵃ</a> <a id="TimedCommitment.Tᵇ"></a><a id="2987" href="SecureCompilation.Example.html#2987" class="Postulate">Tᵇ</a> <a id="2990" class="Symbol">:</a> <a id="2992" href="Bitcoin.Tx.Base.html#343" class="Record">TxInput</a> <a id="3000" class="Comment">-- pre-existing deposits</a>

  <a id="TimedCommitment.valid"></a><a id="3028" href="SecureCompilation.Example.html#3028" class="Function">valid</a> <a id="3034" class="Symbol">:</a> <a id="3036" href="Prelude.Validity.html#302" class="Field">Valid</a> <a id="3042" href="SecureCompilation.Example.html#2773" class="Function">tc</a>
  <a id="3047" href="SecureCompilation.Example.html#3028" class="Function">valid</a> <a id="3053" class="Symbol">=</a> <a id="3055" href="Relation.Nullary.Decidable.Core.html#1484" class="Function">toWitness</a> <a id="3065" class="Symbol">{</a><a id="3066" class="Argument">Q</a> <a id="3068" class="Symbol">=</a> <a id="3070" href="Prelude.Validity.html#323" class="Function">Valid?</a> <a id="3077" href="SecureCompilation.Example.html#2773" class="Function">tc</a><a id="3079" class="Symbol">}</a> <a id="3081" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>

  <a id="TimedCommitment.sechash"></a><a id="3087" href="SecureCompilation.Example.html#3087" class="Function">sechash</a> <a id="3095" class="Symbol">:</a> <a id="3097" href="BitML.Contracts.Helpers.html#4962" class="Function">namesˡ</a> <a id="3104" class="Symbol">(</a><a id="3105" href="SecureCompilation.Example.html#2773" class="Function">tc</a> <a id="3108" class="Symbol">.</a><a id="3109" href="BitML.Contracts.Types.html#2457" class="Field">G</a><a id="3110" class="Symbol">)</a> <a id="3112" href="Prelude.Lists.html#13423" class="Function Operator">↦</a> <a id="3114" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a>
  <a id="3118" href="SecureCompilation.Example.html#3087" class="Function">sechash</a> <a id="3126" class="Symbol">=</a> <a id="3128" href="Function.Base.html#4121" class="Function Operator">case_of</a> <a id="3136" class="Symbol">λ</a> <a id="3138" class="Keyword">where</a>
    <a id="3148" class="Comment">{- &quot;a&quot; -}</a> <a id="3158" class="Symbol">(</a><a id="3159" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="3164" class="Symbol">_)</a> <a id="3167" class="Symbol">→</a> <a id="3169" href="SecureCompilation.Example.html#2761" class="Function">Ha</a>

  <a id="TimedCommitment.txout"></a><a id="3175" href="SecureCompilation.Example.html#3175" class="Function">txout</a> <a id="3181" class="Symbol">:</a> <a id="3183" href="BitML.Contracts.Helpers.html#5031" class="Function">namesʳ</a> <a id="3190" class="Symbol">(</a><a id="3191" href="SecureCompilation.Example.html#2773" class="Function">tc</a> <a id="3194" class="Symbol">.</a><a id="3195" href="BitML.Contracts.Types.html#2457" class="Field">G</a><a id="3196" class="Symbol">)</a> <a id="3198" href="Prelude.Lists.html#13423" class="Function Operator">↦</a> <a id="3200" href="Bitcoin.Tx.Base.html#343" class="Record">TxInput</a>
  <a id="3210" href="SecureCompilation.Example.html#3175" class="Function">txout</a> <a id="3216" class="Symbol">=</a> <a id="3218" href="Function.Base.html#4121" class="Function Operator">case_of</a> <a id="3226" class="Symbol">λ</a> <a id="3228" class="Keyword">where</a>
    <a id="3238" class="Comment">{- &quot;x&quot; -}</a> <a id="3248" class="Symbol">(</a><a id="3249" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="3254" class="Symbol">_)</a>         <a id="3265" class="Symbol">→</a> <a id="3267" href="SecureCompilation.Example.html#2984" class="Postulate">Tᵃ</a>
    <a id="3274" class="Comment">{- &quot;y&quot; -}</a> <a id="3284" class="Symbol">(</a><a id="3285" href="Data.List.Relation.Unary.Any.html#1272" class="InductiveConstructor">there</a> <a id="3291" class="Symbol">(</a><a id="3292" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="3297" class="Symbol">_))</a> <a id="3301" class="Symbol">→</a> <a id="3303" href="SecureCompilation.Example.html#2987" class="Postulate">Tᵇ</a>

  <a id="3309" class="Keyword">postulate</a>
    <a id="TimedCommitment.Kᵃ"></a><a id="3323" href="SecureCompilation.Example.html#3323" class="Postulate">Kᵃ</a> <a id="TimedCommitment.Kᵇ"></a><a id="3326" href="SecureCompilation.Example.html#3326" class="Postulate">Kᵇ</a> <a id="3329" class="Symbol">:</a> <a id="3331" href="Bitcoin.Crypto.html#345" class="Record">KeyPair</a>
    <a id="TimedCommitment.Kᵈ¹"></a><a id="3343" href="SecureCompilation.Example.html#3343" class="Postulate">Kᵈ¹</a> <a id="TimedCommitment.Kᵈ²"></a><a id="3347" href="SecureCompilation.Example.html#3347" class="Postulate">Kᵈ²</a> <a id="TimedCommitment.Kʷᵃ"></a><a id="3351" href="SecureCompilation.Example.html#3351" class="Postulate">Kʷᵃ</a> <a id="3355" class="Symbol">:</a> <a id="3357" href="BitML.Example.Setup.html#208" class="Datatype">Participant</a> <a id="3369" class="Symbol">→</a> <a id="3371" href="Bitcoin.Crypto.html#345" class="Record">KeyPair</a>

  <a id="TimedCommitment.K"></a><a id="3382" href="SecureCompilation.Example.html#3382" class="Function">K</a> <a id="3384" class="Symbol">:</a> <a id="3386" href="SecureCompilation.Example.html#2934" class="Function">partG</a> <a id="3392" href="Prelude.Lists.html#13423" class="Function Operator">↦</a> <a id="3394" href="Bitcoin.Crypto.html#345" class="Record">KeyPair</a>
  <a id="3404" href="SecureCompilation.Example.html#3382" class="Function">K</a> <a id="3406" class="Symbol">=</a> <a id="3408" href="Function.Base.html#4121" class="Function Operator">case_of</a> <a id="3416" class="Symbol">λ</a> <a id="3418" class="Keyword">where</a>
    <a id="3428" class="Comment">{- A -}</a> <a id="3436" class="Symbol">(</a><a id="3437" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="3442" class="Symbol">_)</a>         <a id="3453" class="Symbol">→</a> <a id="3455" href="SecureCompilation.Example.html#3323" class="Postulate">Kᵃ</a>
    <a id="3462" class="Comment">{- B -}</a> <a id="3470" class="Symbol">(</a><a id="3471" href="Data.List.Relation.Unary.Any.html#1272" class="InductiveConstructor">there</a> <a id="3477" class="Symbol">(</a><a id="3478" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="3483" class="Symbol">_))</a> <a id="3487" class="Symbol">→</a> <a id="3489" href="SecureCompilation.Example.html#3326" class="Postulate">Kᵇ</a>

  <a id="TimedCommitment.K²"></a><a id="3495" href="SecureCompilation.Example.html#3495" class="Function">K²</a> <a id="3498" class="Symbol">:</a> <a id="3500" href="BitML.Contracts.Helpers.html#15788" class="Function">subterms′</a> <a id="3510" class="Symbol">(</a><a id="3511" href="BitML.Contracts.Induction.html#445" class="InductiveConstructor">CS</a> <a id="3514" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="3516" href="SecureCompilation.Example.html#2773" class="Function">tc</a> <a id="3519" class="Symbol">.</a><a id="3520" href="BitML.Contracts.Types.html#2478" class="Field">C</a><a id="3521" class="Symbol">)</a> <a id="3523" href="Prelude.Lists.html#13423" class="Function Operator">↦</a> <a id="3525" class="Symbol">(</a><a id="3526" href="SecureCompilation.Example.html#2934" class="Function">partG</a> <a id="3532" href="Prelude.Lists.html#13423" class="Function Operator">↦</a> <a id="3534" href="Bitcoin.Crypto.html#345" class="Record">KeyPair</a><a id="3541" class="Symbol">)</a>
  <a id="3545" href="SecureCompilation.Example.html#3495" class="Function">K²</a> <a id="3548" class="Symbol">=</a> <a id="3550" href="Function.Base.html#4121" class="Function Operator">case_of</a> <a id="3558" class="Symbol">λ</a> <a id="3560" class="Keyword">where</a>
    <a id="3570" class="Comment">{- reveal &quot;a&quot; ⇒ withdraw A -}</a>
    <a id="3604" class="Symbol">(</a><a id="3605" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="3610" class="Symbol">_)</a> <a id="3613" class="Symbol">→</a> <a id="3615" href="Function.Base.html#4121" class="Function Operator">case_of</a> <a id="3623" class="Symbol">λ</a> <a id="3625" class="Keyword">where</a>
      <a id="3637" class="Comment">{- A -}</a> <a id="3645" class="Symbol">(</a><a id="3646" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="3651" class="Symbol">_)</a>         <a id="3662" class="Symbol">→</a> <a id="3664" href="SecureCompilation.Example.html#3347" class="Postulate">Kᵈ²</a> <a id="3668" href="BitML.Example.Setup.html#234" class="InductiveConstructor">A</a>
      <a id="3676" class="Comment">{- B -}</a> <a id="3684" class="Symbol">(</a><a id="3685" href="Data.List.Relation.Unary.Any.html#1272" class="InductiveConstructor">there</a> <a id="3691" class="Symbol">(</a><a id="3692" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="3697" class="Symbol">_))</a> <a id="3701" class="Symbol">→</a> <a id="3703" href="SecureCompilation.Example.html#3347" class="Postulate">Kᵈ²</a> <a id="3707" href="BitML.Example.Setup.html#236" class="InductiveConstructor">B</a>
    <a id="3713" class="Comment">{- withdraw A -}</a>
    <a id="3734" class="Symbol">(</a><a id="3735" href="Data.List.Relation.Unary.Any.html#1272" class="InductiveConstructor">there</a> <a id="3741" class="Symbol">(</a><a id="3742" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="3747" class="Symbol">_))</a> <a id="3751" class="Symbol">→</a> <a id="3753" href="Function.Base.html#4121" class="Function Operator">case_of</a> <a id="3761" class="Symbol">λ</a> <a id="3763" class="Keyword">where</a>
      <a id="3775" class="Comment">{- A -}</a> <a id="3783" class="Symbol">(</a><a id="3784" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="3789" class="Symbol">_)</a>         <a id="3800" class="Symbol">→</a> <a id="3802" href="SecureCompilation.Example.html#3351" class="Postulate">Kʷᵃ</a> <a id="3806" href="BitML.Example.Setup.html#234" class="InductiveConstructor">A</a>
      <a id="3814" class="Comment">{- B -}</a> <a id="3822" class="Symbol">(</a><a id="3823" href="Data.List.Relation.Unary.Any.html#1272" class="InductiveConstructor">there</a> <a id="3829" class="Symbol">(</a><a id="3830" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="3835" class="Symbol">_))</a> <a id="3839" class="Symbol">→</a> <a id="3841" href="SecureCompilation.Example.html#3351" class="Postulate">Kʷᵃ</a> <a id="3845" href="BitML.Example.Setup.html#236" class="InductiveConstructor">B</a>
    <a id="3851" class="Comment">{- after t ⇒ withdraw B -}</a>
    <a id="3882" class="Symbol">(</a><a id="3883" href="Data.List.Relation.Unary.Any.html#1272" class="InductiveConstructor">there</a> <a id="3889" class="Symbol">(</a><a id="3890" href="Data.List.Relation.Unary.Any.html#1272" class="InductiveConstructor">there</a> <a id="3896" class="Symbol">(</a><a id="3897" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="3902" class="Symbol">_)))</a> <a id="3907" class="Symbol">→</a> <a id="3909" href="Function.Base.html#4121" class="Function Operator">case_of</a> <a id="3917" class="Symbol">λ</a> <a id="3919" class="Keyword">where</a>
      <a id="3931" class="Comment">{- A -}</a> <a id="3939" class="Symbol">(</a><a id="3940" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="3945" class="Symbol">_)</a>         <a id="3956" class="Symbol">→</a> <a id="3958" href="SecureCompilation.Example.html#3347" class="Postulate">Kᵈ²</a> <a id="3962" href="BitML.Example.Setup.html#234" class="InductiveConstructor">A</a>
      <a id="3970" class="Comment">{- B -}</a> <a id="3978" class="Symbol">(</a><a id="3979" href="Data.List.Relation.Unary.Any.html#1272" class="InductiveConstructor">there</a> <a id="3985" class="Symbol">(</a><a id="3986" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="3991" class="Symbol">_))</a> <a id="3995" class="Symbol">→</a> <a id="3997" href="SecureCompilation.Example.html#3347" class="Postulate">Kᵈ²</a> <a id="4001" href="BitML.Example.Setup.html#236" class="InductiveConstructor">B</a>

  <a id="TimedCommitment.K⋆"></a><a id="4006" href="SecureCompilation.Example.html#4006" class="Function">K⋆</a> <a id="4009" class="Symbol">:</a> <a id="4011" href="BitML.Contracts.Helpers.html#15788" class="Function">subterms′</a> <a id="4021" class="Symbol">(</a><a id="4022" href="BitML.Contracts.Induction.html#445" class="InductiveConstructor">CS</a> <a id="4025" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="4027" href="SecureCompilation.Example.html#2773" class="Function">tc</a> <a id="4030" class="Symbol">.</a><a id="4031" href="BitML.Contracts.Types.html#2478" class="Field">C</a><a id="4032" class="Symbol">)</a> <a id="4034" href="Prelude.Lists.html#13423" class="Function Operator">↦</a> <a id="4036" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="4041" href="Bitcoin.Crypto.html#345" class="Record">KeyPair</a>
  <a id="4051" href="SecureCompilation.Example.html#4006" class="Function">K⋆</a> <a id="4054" class="Symbol">=</a> <a id="4056" href="Prelude.Membership.html#1190" class="Field">mapWith∈</a> <a id="4065" href="SecureCompilation.Example.html#2934" class="Function">partG</a> <a id="4071" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="4073" href="SecureCompilation.Example.html#3495" class="Function">K²</a>

  <a id="TimedCommitment.e₁"></a><a id="4079" href="SecureCompilation.Example.html#4079" class="Function">e₁</a> <a id="4082" class="Symbol">:</a> <a id="4084" href="Bitcoin.Script.Base.html#701" class="Datatype">Script</a> <a id="4091" class="Symbol">(</a><a id="4092" href="Bitcoin.Script.Base.html#375" class="InductiveConstructor">Ctx</a> <a id="4096" class="Number">3</a><a id="4097" class="Symbol">)</a> <a id="4099" href="Bitcoin.Script.Base.html#548" class="InductiveConstructor">`Bool</a>
  <a id="4107" href="SecureCompilation.Example.html#4079" class="Function">e₁</a> <a id="4110" class="Symbol">=</a> <a id="4112" href="Bitcoin.Script.Base.html#1413" class="InductiveConstructor">versig</a> <a id="4119" class="Symbol">(</a><a id="4120" href="SecureCompilation.Example.html#4006" class="Function">K⋆</a> <a id="4123" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="4125" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="4130" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="4134" class="Symbol">)</a> <a id="4136" href="Prelude.Nary.html#219" class="Function Operator">⟦</a> <a id="4138" href="Data.Fin.html#730" class="Function Operator">#</a> <a id="4140" class="Number">0</a> <a id="4142" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4144" href="Data.Fin.html#730" class="Function Operator">#</a> <a id="4146" class="Number">1</a> <a id="4148" href="Prelude.Nary.html#219" class="Function Operator">⟧</a>
    <a id="4154" href="Bitcoin.Script.Base.html#1840" class="Function Operator">`∧</a> <a id="4157" href="Bitcoin.Script.Base.html#1787" class="Function">`true</a>
    <a id="4167" href="Bitcoin.Script.Base.html#1840" class="Function Operator">`∧</a> <a id="4170" href="Bitcoin.Script.Base.html#3729" class="Function">⋀</a> <a id="4172" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="4174" href="Bitcoin.Script.Base.html#1345" class="InductiveConstructor">hash</a> <a id="4179" class="Symbol">(</a><a id="4180" href="Bitcoin.Script.Base.html#846" class="InductiveConstructor">var</a> <a id="4184" class="Symbol">(</a><a id="4185" href="Data.Fin.html#730" class="Function Operator">#</a> <a id="4187" class="Number">2</a><a id="4188" class="Symbol">))</a> <a id="4191" href="Bitcoin.Script.Base.html#1054" class="InductiveConstructor Operator">`=</a> <a id="4194" href="Bitcoin.Script.Base.html#917" class="InductiveConstructor">`</a> <a id="4196" class="Symbol">(</a><a id="4197" href="SecureCompilation.Example.html#3087" class="Function">sechash</a> <a id="4205" class="Symbol">(</a><a id="4206" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="4211" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="4215" class="Symbol">))</a> <a id="4218" href="Bitcoin.Script.Base.html#1840" class="Function Operator">`∧</a> <a id="4221" class="Symbol">(</a><a id="4222" href="Bitcoin.Script.Base.html#917" class="InductiveConstructor">`</a> <a id="4224" class="Symbol">(</a><a id="4225" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="4227" href="SecureCompilation.Example.html#881" class="Function">η</a><a id="4228" class="Symbol">)</a> <a id="4230" href="Bitcoin.Script.Base.html#1112" class="InductiveConstructor Operator">`&lt;</a> <a id="4233" href="Bitcoin.Script.Base.html#1293" class="InductiveConstructor Operator">∣</a> <a id="4235" href="Bitcoin.Script.Base.html#846" class="InductiveConstructor">var</a> <a id="4239" class="Symbol">(</a><a id="4240" href="Data.Fin.html#730" class="Function Operator">#</a> <a id="4242" class="Number">2</a><a id="4243" class="Symbol">)</a> <a id="4245" href="Bitcoin.Script.Base.html#1293" class="InductiveConstructor Operator">∣</a><a id="4246" class="Symbol">)</a> <a id="4248" href="Data.List.Base.html#5025" class="Function Operator">]</a>

  <a id="TimedCommitment.e₂"></a><a id="4253" href="SecureCompilation.Example.html#4253" class="Function">e₂</a> <a id="4256" class="Symbol">:</a> <a id="4258" href="Bitcoin.Script.Base.html#701" class="Datatype">Script</a> <a id="4265" class="Symbol">(</a><a id="4266" href="Bitcoin.Script.Base.html#375" class="InductiveConstructor">Ctx</a> <a id="4270" class="Number">3</a><a id="4271" class="Symbol">)</a> <a id="4273" href="Bitcoin.Script.Base.html#548" class="InductiveConstructor">`Bool</a>
  <a id="4281" href="SecureCompilation.Example.html#4253" class="Function">e₂</a> <a id="4284" class="Symbol">=</a> <a id="4286" href="Bitcoin.Script.Base.html#1413" class="InductiveConstructor">versig</a> <a id="4293" class="Symbol">(</a><a id="4294" href="SecureCompilation.Example.html#4006" class="Function">K⋆</a> <a id="4297" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="4299" href="Data.List.Relation.Unary.Any.html#1272" class="InductiveConstructor">there</a> <a id="4305" class="Symbol">(</a><a id="4306" href="Data.List.Relation.Unary.Any.html#1272" class="InductiveConstructor">there</a> <a id="4312" class="Symbol">(</a><a id="4313" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="4318" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="4322" class="Symbol">)))</a> <a id="4326" href="Prelude.Nary.html#219" class="Function Operator">⟦</a> <a id="4328" href="Data.Fin.html#730" class="Function Operator">#</a> <a id="4330" class="Number">0</a> <a id="4332" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4334" href="Data.Fin.html#730" class="Function Operator">#</a> <a id="4336" class="Number">1</a> <a id="4338" href="Prelude.Nary.html#219" class="Function Operator">⟧</a>

  <a id="TimedCommitment.e′"></a><a id="4343" href="SecureCompilation.Example.html#4343" class="Function">e′</a> <a id="4346" class="Symbol">:</a> <a id="4348" href="Bitcoin.Script.Base.html#701" class="Datatype">Script</a> <a id="4355" class="Symbol">(</a><a id="4356" href="Bitcoin.Script.Base.html#375" class="InductiveConstructor">Ctx</a> <a id="4360" class="Number">2</a><a id="4361" class="Symbol">)</a> <a id="4363" href="Bitcoin.Script.Base.html#548" class="InductiveConstructor">`Bool</a>
  <a id="4371" href="SecureCompilation.Example.html#4343" class="Function">e′</a> <a id="4374" class="Symbol">=</a> <a id="4376" href="Bitcoin.Script.Base.html#1413" class="InductiveConstructor">versig</a> <a id="4383" class="Symbol">(</a><a id="4384" href="SecureCompilation.Example.html#4006" class="Function">K⋆</a> <a id="4387" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="4389" href="Data.List.Relation.Unary.Any.html#1272" class="InductiveConstructor">there</a> <a id="4395" class="Symbol">(</a><a id="4396" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="4401" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="4405" class="Symbol">))</a> <a id="4408" href="Prelude.Nary.html#219" class="Function Operator">⟦</a> <a id="4410" href="Data.Fin.html#730" class="Function Operator">#</a> <a id="4412" class="Number">0</a> <a id="4414" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4416" href="Data.Fin.html#730" class="Function Operator">#</a> <a id="4418" class="Number">1</a> <a id="4420" href="Prelude.Nary.html#219" class="Function Operator">⟧</a>

  <a id="TimedCommitment.Tᵢₙᵢₜ"></a><a id="4425" href="SecureCompilation.Example.html#4425" class="Function">Tᵢₙᵢₜ</a> <a id="4431" class="Symbol">:</a> <a id="4433" href="Bitcoin.Tx.Base.html#903" class="Record">Tx</a> <a id="4436" class="Number">2</a> <a id="4438" class="Number">1</a>
  <a id="4442" href="SecureCompilation.Example.html#4425" class="Function">Tᵢₙᵢₜ</a> <a id="4448" class="Symbol">=</a> <a id="4450" class="Keyword">record</a>
    <a id="4461" class="Symbol">{</a> <a id="4463" href="Bitcoin.Tx.Base.html#940" class="Field">inputs</a>   <a id="4472" class="Symbol">=</a> <a id="4474" href="SecureCompilation.Example.html#2984" class="Postulate">Tᵃ</a> <a id="4477" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">∷</a> <a id="4479" href="SecureCompilation.Example.html#2987" class="Postulate">Tᵇ</a> <a id="4482" href="Data.Vec.Base.html#1053" class="InductiveConstructor Operator">∷</a> <a id="4484" href="Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a>
    <a id="4491" class="Symbol">;</a> <a id="4493" href="Bitcoin.Tx.Base.html#981" class="Field">wit</a>     <a id="4501" class="Symbol">=</a> <a id="4503" href="Bitcoin.Tx.Crypto.html#520" class="Function">wit⊥</a>
    <a id="4512" class="Symbol">;</a> <a id="4514" href="Bitcoin.Tx.Base.html#1036" class="Field">relLock</a> <a id="4522" class="Symbol">=</a> <a id="4524" href="Data.Vec.Base.html#5784" class="Function">V.replicate</a> <a id="4536" class="Number">0</a>
    <a id="4542" class="Symbol">;</a> <a id="4544" href="Bitcoin.Tx.Base.html#1090" class="Field">outputs</a> <a id="4552" class="Symbol">=</a> <a id="4554" href="Data.Vec.Base.html#5750" class="Function Operator">V.[</a> <a id="4558" class="Symbol">_</a> <a id="4560" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4562" class="Keyword">record</a> <a id="4569" class="Symbol">{</a> <a id="4571" href="Bitcoin.Tx.Base.html#658" class="Field">value</a> <a id="4577" class="Symbol">=</a> <a id="4579" href="SecureCompilation.Example.html#2753" class="Function">v</a> <a id="4581" class="Symbol">;</a> <a id="4583" href="Bitcoin.Tx.Base.html#680" class="Field">validator</a> <a id="4593" class="Symbol">=</a> <a id="4595" href="Bitcoin.Script.Base.html#2174" class="InductiveConstructor Operator">ƛ</a> <a id="4597" class="Symbol">(</a><a id="4598" href="SecureCompilation.Example.html#4079" class="Function">e₁</a> <a id="4601" href="Bitcoin.Script.Base.html#1939" class="Function Operator">`∨</a> <a id="4604" href="SecureCompilation.Example.html#4253" class="Function">e₂</a><a id="4606" class="Symbol">)</a> <a id="4608" class="Symbol">}</a><a id="4609" href="Data.Vec.Base.html#5750" class="Function Operator">]</a>
    <a id="4615" class="Symbol">;</a> <a id="4617" href="Bitcoin.Tx.Base.html#1132" class="Field">absLock</a> <a id="4625" class="Symbol">=</a> <a id="4627" class="Number">0</a> <a id="4629" class="Symbol">}</a>
  <a id="TimedCommitment.Tᵢₙᵢₜ♯"></a><a id="4633" href="SecureCompilation.Example.html#4633" class="Function">Tᵢₙᵢₜ♯</a> <a id="4640" class="Symbol">=</a> <a id="4642" href="SecureCompilation.Example.html#4425" class="Function">Tᵢₙᵢₜ</a> <a id="4648" href="Bitcoin.Crypto.html#826" class="Field Operator">♯</a>

  <a id="TimedCommitment.T′"></a><a id="4653" href="SecureCompilation.Example.html#4653" class="Function">T′</a> <a id="4656" class="Symbol">:</a> <a id="4658" href="Bitcoin.Tx.Base.html#903" class="Record">Tx</a> <a id="4661" class="Number">1</a> <a id="4663" class="Number">1</a>
  <a id="4667" href="SecureCompilation.Example.html#4653" class="Function">T′</a> <a id="4670" class="Symbol">=</a> <a id="4672" href="Bitcoin.Tx.Crypto.html#907" class="Function">sig⋆</a> <a id="4677" href="Data.Vec.Base.html#5750" class="Function Operator">V.[</a> <a id="4681" href="SecureCompilation.Example.html#4006" class="Function">K⋆</a> <a id="4684" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="4686" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="4691" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="4696" href="Data.Vec.Base.html#5750" class="Function Operator">]</a> <a id="4698" class="Keyword">record</a>
    <a id="4709" class="Symbol">{</a> <a id="4711" href="Bitcoin.Tx.Base.html#940" class="Field">inputs</a>  <a id="4719" class="Symbol">=</a> <a id="4721" href="Data.Vec.Base.html#5750" class="Function Operator">V.[</a> <a id="4725" href="SecureCompilation.Example.html#4633" class="Function">Tᵢₙᵢₜ♯</a> <a id="4732" href="Bitcoin.Tx.Base.html#377" class="InductiveConstructor Operator">at</a> <a id="4735" class="Number">0</a> <a id="4737" href="Data.Vec.Base.html#5750" class="Function Operator">]</a>
    <a id="4743" class="Symbol">;</a> <a id="4745" href="Bitcoin.Tx.Base.html#981" class="Field">wit</a>     <a id="4753" class="Symbol">=</a> <a id="4755" href="Bitcoin.Tx.Crypto.html#520" class="Function">wit⊥</a>
    <a id="4764" class="Symbol">;</a> <a id="4766" href="Bitcoin.Tx.Base.html#1036" class="Field">relLock</a> <a id="4774" class="Symbol">=</a> <a id="4776" href="Data.Vec.Base.html#5784" class="Function">V.replicate</a> <a id="4788" class="Number">0</a>
    <a id="4794" class="Symbol">;</a> <a id="4796" href="Bitcoin.Tx.Base.html#1090" class="Field">outputs</a> <a id="4804" class="Symbol">=</a> <a id="4806" href="Data.Vec.Base.html#5750" class="Function Operator">V.[</a> <a id="4810" class="Symbol">_</a> <a id="4812" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4814" class="Keyword">record</a> <a id="4821" class="Symbol">{</a> <a id="4823" href="Bitcoin.Tx.Base.html#658" class="Field">value</a> <a id="4829" class="Symbol">=</a> <a id="4831" href="SecureCompilation.Example.html#2753" class="Function">v</a> <a id="4833" class="Symbol">;</a> <a id="4835" href="Bitcoin.Tx.Base.html#680" class="Field">validator</a> <a id="4845" class="Symbol">=</a> <a id="4847" href="Bitcoin.Script.Base.html#2174" class="InductiveConstructor Operator">ƛ</a> <a id="4849" href="SecureCompilation.Example.html#4343" class="Function">e′</a> <a id="4852" class="Symbol">}</a><a id="4853" href="Data.Vec.Base.html#5750" class="Function Operator">]</a>
    <a id="4859" class="Symbol">;</a> <a id="4861" href="Bitcoin.Tx.Base.html#1132" class="Field">absLock</a> <a id="4869" class="Symbol">=</a> <a id="4871" class="Number">0</a> <a id="4873" class="Symbol">}</a>

  <a id="TimedCommitment.T′ᵃ"></a><a id="4878" href="SecureCompilation.Example.html#4878" class="Function">T′ᵃ</a> <a id="4882" class="Symbol">:</a> <a id="4884" href="Bitcoin.Tx.Base.html#903" class="Record">Tx</a> <a id="4887" class="Number">1</a> <a id="4889" class="Number">1</a>
  <a id="4893" href="SecureCompilation.Example.html#4878" class="Function">T′ᵃ</a> <a id="4897" class="Symbol">=</a> <a id="4899" href="Bitcoin.Tx.Crypto.html#907" class="Function">sig⋆</a> <a id="4904" href="Data.Vec.Base.html#5750" class="Function Operator">V.[</a> <a id="4908" href="SecureCompilation.Example.html#4006" class="Function">K⋆</a> <a id="4911" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="4913" href="Data.List.Relation.Unary.Any.html#1272" class="InductiveConstructor">there</a> <a id="4919" class="Symbol">(</a><a id="4920" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="4925" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="4929" class="Symbol">)</a> <a id="4931" href="Data.Vec.Base.html#5750" class="Function Operator">]</a> <a id="4933" class="Keyword">record</a>
    <a id="4944" class="Symbol">{</a> <a id="4946" href="Bitcoin.Tx.Base.html#940" class="Field">inputs</a>  <a id="4954" class="Symbol">=</a> <a id="4956" href="Data.Vec.Base.html#5750" class="Function Operator">V.[</a> <a id="4960" class="Symbol">(</a><a id="4961" href="SecureCompilation.Example.html#4653" class="Function">T′</a> <a id="4964" href="Bitcoin.Crypto.html#826" class="Field Operator">♯</a><a id="4965" class="Symbol">)</a> <a id="4967" href="Bitcoin.Tx.Base.html#377" class="InductiveConstructor Operator">at</a> <a id="4970" class="Number">0</a> <a id="4972" href="Data.Vec.Base.html#5750" class="Function Operator">]</a>
    <a id="4978" class="Symbol">;</a> <a id="4980" href="Bitcoin.Tx.Base.html#981" class="Field">wit</a>     <a id="4988" class="Symbol">=</a> <a id="4990" href="Bitcoin.Tx.Crypto.html#520" class="Function">wit⊥</a>
    <a id="4999" class="Symbol">;</a> <a id="5001" href="Bitcoin.Tx.Base.html#1036" class="Field">relLock</a> <a id="5009" class="Symbol">=</a> <a id="5011" href="Data.Vec.Base.html#5784" class="Function">V.replicate</a> <a id="5023" class="Number">0</a>
    <a id="5029" class="Symbol">;</a> <a id="5031" href="Bitcoin.Tx.Base.html#1090" class="Field">outputs</a> <a id="5039" class="Symbol">=</a> <a id="5041" href="Data.Vec.Base.html#5750" class="Function Operator">V.[</a> <a id="5045" href="Bitcoin.Script.Base.html#375" class="InductiveConstructor">Ctx</a> <a id="5049" class="Number">1</a> <a id="5051" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5053" class="Keyword">record</a> <a id="5060" class="Symbol">{</a> <a id="5062" href="Bitcoin.Tx.Base.html#658" class="Field">value</a> <a id="5068" class="Symbol">=</a> <a id="5070" href="SecureCompilation.Example.html#2753" class="Function">v</a> <a id="5072" class="Symbol">;</a> <a id="5074" href="Bitcoin.Tx.Base.html#680" class="Field">validator</a> <a id="5084" class="Symbol">=</a> <a id="5086" href="Bitcoin.Script.Base.html#2174" class="InductiveConstructor Operator">ƛ</a> <a id="5088" href="Bitcoin.Script.Base.html#1413" class="InductiveConstructor">versig</a> <a id="5095" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="5097" href="SecureCompilation.Example.html#3382" class="Function">K</a> <a id="5099" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="5101" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="5106" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="5111" href="Data.List.Base.html#5025" class="Function Operator">]</a> <a id="5113" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="5115" href="Data.Fin.html#730" class="Function Operator">#</a> <a id="5117" class="Number">0</a> <a id="5119" href="Data.List.Base.html#5025" class="Function Operator">]</a> <a id="5121" class="Symbol">}</a><a id="5122" href="Data.Vec.Base.html#5750" class="Function Operator">]</a>
    <a id="5128" class="Symbol">;</a> <a id="5130" href="Bitcoin.Tx.Base.html#1132" class="Field">absLock</a> <a id="5138" class="Symbol">=</a> <a id="5140" class="Number">0</a> <a id="5142" class="Symbol">}</a>

  <a id="TimedCommitment.T′ᵇ"></a><a id="5147" href="SecureCompilation.Example.html#5147" class="Function">T′ᵇ</a> <a id="5151" class="Symbol">:</a> <a id="5153" href="Bitcoin.Tx.Base.html#903" class="Record">Tx</a> <a id="5156" class="Number">1</a> <a id="5158" class="Number">1</a>
  <a id="5162" href="SecureCompilation.Example.html#5147" class="Function">T′ᵇ</a> <a id="5166" class="Symbol">=</a> <a id="5168" href="Bitcoin.Tx.Crypto.html#907" class="Function">sig⋆</a> <a id="5173" href="Data.Vec.Base.html#5750" class="Function Operator">V.[</a> <a id="5177" href="SecureCompilation.Example.html#4006" class="Function">K⋆</a> <a id="5180" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="5182" href="Data.List.Relation.Unary.Any.html#1272" class="InductiveConstructor">there</a> <a id="5188" class="Symbol">(</a><a id="5189" href="Data.List.Relation.Unary.Any.html#1272" class="InductiveConstructor">there</a> <a id="5195" class="Symbol">(</a><a id="5196" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="5201" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="5205" class="Symbol">))</a> <a id="5208" href="Data.Vec.Base.html#5750" class="Function Operator">]</a> <a id="5210" class="Keyword">record</a>
    <a id="5221" class="Symbol">{</a> <a id="5223" href="Bitcoin.Tx.Base.html#940" class="Field">inputs</a>  <a id="5231" class="Symbol">=</a> <a id="5233" href="Data.Vec.Base.html#5750" class="Function Operator">V.[</a> <a id="5237" href="SecureCompilation.Example.html#4633" class="Function">Tᵢₙᵢₜ♯</a> <a id="5244" href="Bitcoin.Tx.Base.html#377" class="InductiveConstructor Operator">at</a> <a id="5247" class="Number">0</a> <a id="5249" href="Data.Vec.Base.html#5750" class="Function Operator">]</a>
    <a id="5255" class="Symbol">;</a> <a id="5257" href="Bitcoin.Tx.Base.html#981" class="Field">wit</a>     <a id="5265" class="Symbol">=</a> <a id="5267" href="Bitcoin.Tx.Crypto.html#520" class="Function">wit⊥</a>
    <a id="5276" class="Symbol">;</a> <a id="5278" href="Bitcoin.Tx.Base.html#1036" class="Field">relLock</a> <a id="5286" class="Symbol">=</a> <a id="5288" href="Data.Vec.Base.html#5784" class="Function">V.replicate</a> <a id="5300" class="Number">0</a>
    <a id="5306" class="Symbol">;</a> <a id="5308" href="Bitcoin.Tx.Base.html#1090" class="Field">outputs</a> <a id="5316" class="Symbol">=</a> <a id="5318" href="Data.Vec.Base.html#5750" class="Function Operator">V.[</a> <a id="5322" href="Bitcoin.Script.Base.html#375" class="InductiveConstructor">Ctx</a> <a id="5326" class="Number">1</a> <a id="5328" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5330" class="Keyword">record</a> <a id="5337" class="Symbol">{</a> <a id="5339" href="Bitcoin.Tx.Base.html#658" class="Field">value</a> <a id="5345" class="Symbol">=</a> <a id="5347" href="SecureCompilation.Example.html#2753" class="Function">v</a> <a id="5349" class="Symbol">;</a> <a id="5351" href="Bitcoin.Tx.Base.html#680" class="Field">validator</a> <a id="5361" class="Symbol">=</a> <a id="5363" href="Bitcoin.Script.Base.html#2174" class="InductiveConstructor Operator">ƛ</a> <a id="5365" href="Bitcoin.Script.Base.html#1413" class="InductiveConstructor">versig</a> <a id="5372" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="5374" href="SecureCompilation.Example.html#3382" class="Function">K</a> <a id="5376" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="5378" href="Data.List.Relation.Unary.Any.html#1272" class="InductiveConstructor">there</a> <a id="5384" class="Symbol">(</a><a id="5385" href="Data.List.Relation.Unary.Any.html#1219" class="InductiveConstructor">here</a> <a id="5390" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="5394" class="Symbol">)</a> <a id="5396" href="Data.List.Base.html#5025" class="Function Operator">]</a> <a id="5398" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="5400" href="Data.Fin.html#730" class="Function Operator">#</a> <a id="5402" class="Number">0</a> <a id="5404" href="Data.List.Base.html#5025" class="Function Operator">]</a> <a id="5406" class="Symbol">}</a><a id="5407" href="Data.Vec.Base.html#5750" class="Function Operator">]</a>
    <a id="5413" class="Symbol">;</a> <a id="5415" href="Bitcoin.Tx.Base.html#1132" class="Field">absLock</a> <a id="5423" class="Symbol">=</a> <a id="5425" href="SecureCompilation.Example.html#2744" class="Function">t</a> <a id="5427" class="Symbol">}</a>

  <a id="5432" class="Comment">-- out : ∃Tx × (subterms⁺ (CS $ tc .C) ↦ ∃Tx)</a>
  <a id="5480" class="Comment">-- out = bitml-compiler {g = tc .G} {ds = tc .C} valid sechash txout K K²</a>

  <a id="5557" class="Comment">-- outTxs : List ∃Tx</a>
  <a id="5580" class="Comment">-- outTxs = let t₀ , m = out in t₀ ∷ m (here refl) ∷ m (there (here refl)) ∷ m (there (there (here refl))) ∷ []</a>

  <a id="5695" class="Comment">-- _ : outTxs ≡ (-, -, Tᵢₙᵢₜ) ∷ (-, -, T′) ∷ (-, -, T′ᵃ) ∷ (-, -, T′ᵇ) ∷ []</a>
  <a id="5773" class="Comment">-- _ = refl</a>
</pre></body></html>