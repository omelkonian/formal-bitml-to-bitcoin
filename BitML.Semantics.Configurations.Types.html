<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>BitML.Semantics.Configurations.Types</title><link rel="stylesheet" href="css/Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Types of configurations.</a>
<a id="102" class="Comment">------------------------------------------------------------------------</a>

<a id="176" class="Keyword">open</a> <a id="181" class="Keyword">import</a> <a id="188" href="Data.Maybe.html" class="Module">Data.Maybe</a>   <a id="201" class="Keyword">using</a> <a id="207" class="Symbol">(</a><a id="208" href="Data.Maybe.Base.html#838" class="Datatype">Maybe</a><a id="213" class="Symbol">)</a>
<a id="215" class="Keyword">open</a> <a id="220" class="Keyword">import</a> <a id="227" href="Data.Nat.html" class="Module">Data.Nat</a>     <a id="240" class="Keyword">using</a> <a id="246" class="Symbol">(</a><a id="247" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="248" class="Symbol">;</a> <a id="250" href="Data.Nat.Base.html#1111" class="Function Operator">_&gt;_</a><a id="253" class="Symbol">)</a>
<a id="255" class="Keyword">open</a> <a id="260" class="Keyword">import</a> <a id="267" href="Data.Product.html" class="Module">Data.Product</a> <a id="280" class="Keyword">using</a> <a id="286" class="Symbol">(</a><a id="287" href="Data.Product.html#916" class="Function">Σ-syntax</a><a id="295" class="Symbol">)</a>
<a id="297" class="Keyword">open</a> <a id="302" class="Keyword">import</a> <a id="309" href="Data.List.html" class="Module">Data.List</a>    <a id="322" class="Keyword">using</a> <a id="328" class="Symbol">(</a><a id="329" href="Agda.Builtin.List.html#148" class="Datatype">List</a><a id="333" class="Symbol">;</a> <a id="335" href="Data.List.Base.html#4297" class="Function">length</a><a id="341" class="Symbol">;</a> <a id="343" href="Data.List.Base.html#3726" class="Function">foldl</a><a id="348" class="Symbol">;</a> <a id="350" href="Data.List.Base.html#9701" class="InductiveConstructor">[]</a><a id="352" class="Symbol">;</a> <a id="354" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">_∷_</a><a id="357" class="Symbol">)</a>

<a id="360" class="Keyword">open</a> <a id="365" class="Keyword">import</a> <a id="372" href="Relation.Binary.html" class="Module">Relation.Binary</a> <a id="388" class="Keyword">using</a> <a id="394" class="Symbol">(</a><a id="395" href="Relation.Binary.Definitions.html#4575" class="Function">Decidable</a><a id="404" class="Symbol">)</a>
<a id="406" class="Keyword">open</a> <a id="411" class="Keyword">import</a> <a id="418" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="456" class="Keyword">using</a> <a id="462" class="Symbol">(</a><a id="463" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="466" class="Symbol">)</a>

<a id="469" class="Keyword">open</a> <a id="474" class="Keyword">import</a> <a id="481" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>

<a id="496" class="Keyword">open</a> <a id="501" class="Keyword">import</a> <a id="508" href="BitML.BasicTypes.html" class="Module">BitML.BasicTypes</a>

<a id="526" class="Keyword">module</a> <a id="533" href="BitML.Semantics.Configurations.Types.html" class="Module">BitML.Semantics.Configurations.Types</a>
  <a id="572" class="Symbol">(</a><a id="573" href="BitML.Semantics.Configurations.Types.html#573" class="Bound">Participant</a> <a id="585" class="Symbol">:</a> <a id="587" class="PrimitiveType">Set</a><a id="590" class="Symbol">)</a>
  <a id="594" class="Symbol">(</a><a id="595" href="BitML.Semantics.Configurations.Types.html#595" class="Bound Operator">_≟ₚ_</a> <a id="600" class="Symbol">:</a> <a id="602" href="Relation.Binary.Definitions.html#4575" class="Function">Decidable</a> <a id="612" class="Symbol">{</a><a id="613" class="Argument">A</a> <a id="615" class="Symbol">=</a> <a id="617" href="BitML.Semantics.Configurations.Types.html#573" class="Bound">Participant</a><a id="628" class="Symbol">}</a> <a id="630" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="633" class="Symbol">)</a>
  <a id="637" class="Symbol">(</a><a id="638" href="BitML.Semantics.Configurations.Types.html#638" class="Bound">Honest</a> <a id="645" class="Symbol">:</a> <a id="647" href="Data.Product.html#916" class="Function">Σ[</a> <a id="650" href="BitML.Semantics.Configurations.Types.html#650" class="Bound">ps</a> <a id="653" href="Data.Product.html#916" class="Function">∈</a> <a id="655" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="660" href="BitML.Semantics.Configurations.Types.html#573" class="Bound">Participant</a> <a id="672" href="Data.Product.html#916" class="Function">]</a> <a id="674" class="Symbol">(</a><a id="675" href="Data.List.Base.html#4297" class="Function">length</a> <a id="682" href="BitML.Semantics.Configurations.Types.html#650" class="Bound">ps</a> <a id="685" href="Data.Nat.Base.html#1111" class="Function Operator">&gt;</a> <a id="687" class="Number">0</a><a id="688" class="Symbol">))</a>
  <a id="693" class="Keyword">where</a>

<a id="700" class="Keyword">open</a> <a id="705" class="Keyword">import</a> <a id="712" href="BitML.Contracts.Types.html" class="Module">BitML.Contracts.Types</a>                     <a id="754" href="BitML.Semantics.Configurations.Types.html#573" class="Bound">Participant</a> <a id="766" href="BitML.Semantics.Configurations.Types.html#595" class="Bound Operator">_≟ₚ_</a> <a id="771" href="BitML.Semantics.Configurations.Types.html#638" class="Bound">Honest</a>
<a id="778" class="Keyword">open</a> <a id="783" class="Keyword">import</a> <a id="790" href="BitML.Semantics.Actions.Types.html" class="Module">BitML.Semantics.Actions.Types</a>             <a id="832" href="BitML.Semantics.Configurations.Types.html#573" class="Bound">Participant</a> <a id="844" href="BitML.Semantics.Configurations.Types.html#595" class="Bound Operator">_≟ₚ_</a> <a id="849" href="BitML.Semantics.Configurations.Types.html#638" class="Bound">Honest</a>

<a id="857" class="Comment">-------------------------------------------------------------------</a>

<a id="926" class="Keyword">data</a> <a id="Configuration"></a><a id="931" href="BitML.Semantics.Configurations.Types.html#931" class="Datatype">Configuration</a> <a id="945" class="Symbol">:</a> <a id="947" class="PrimitiveType">Set</a> <a id="951" class="Keyword">where</a>

  <a id="960" class="Comment">-- empty</a>
  <a id="Configuration.∅ᶜ"></a><a id="971" href="BitML.Semantics.Configurations.Types.html#971" class="InductiveConstructor">∅ᶜ</a> <a id="974" class="Symbol">:</a> <a id="976" href="BitML.Semantics.Configurations.Types.html#931" class="Datatype">Configuration</a>

  <a id="993" class="Comment">-- contract advertisement</a>
  <a id="Configuration.`_"></a><a id="1021" href="BitML.Semantics.Configurations.Types.html#1021" class="InductiveConstructor Operator">`_</a> <a id="1024" class="Symbol">:</a> <a id="1026" href="BitML.Contracts.Types.html#2522" class="Record">Advertisement</a> <a id="1040" class="Symbol">→</a> <a id="1042" href="BitML.Semantics.Configurations.Types.html#931" class="Datatype">Configuration</a>

  <a id="1059" class="Comment">-- active contract</a>
  <a id="Configuration.⟨_,_⟩at_"></a><a id="1080" href="BitML.Semantics.Configurations.Types.html#1080" class="InductiveConstructor Operator">⟨_,_⟩at_</a> <a id="1089" class="Symbol">:</a> <a id="1091" href="BitML.Contracts.Types.html#1063" class="Function">Contracts</a> <a id="1101" class="Symbol">→</a> <a id="1103" href="BitML.BasicTypes.html#606" class="Function">Value</a> <a id="1109" class="Symbol">→</a> <a id="1111" href="BitML.BasicTypes.html#678" class="Function">Id</a> <a id="1114" class="Symbol">→</a> <a id="1116" href="BitML.Semantics.Configurations.Types.html#931" class="Datatype">Configuration</a>

  <a id="1133" class="Comment">-- deposit redeemable by a participant</a>
  <a id="Configuration.⟨_has_⟩at_"></a><a id="1174" href="BitML.Semantics.Configurations.Types.html#1174" class="InductiveConstructor Operator">⟨_has_⟩at_</a> <a id="1185" class="Symbol">:</a> <a id="1187" href="BitML.Semantics.Configurations.Types.html#573" class="Bound">Participant</a> <a id="1199" class="Symbol">→</a> <a id="1201" href="BitML.BasicTypes.html#606" class="Function">Value</a> <a id="1207" class="Symbol">→</a> <a id="1209" href="BitML.BasicTypes.html#678" class="Function">Id</a> <a id="1212" class="Symbol">→</a> <a id="1214" href="BitML.Semantics.Configurations.Types.html#931" class="Datatype">Configuration</a>

  <a id="1231" class="Comment">-- authorization to perform an action</a>
  <a id="Configuration._auth[_]"></a><a id="1271" href="BitML.Semantics.Configurations.Types.html#1271" class="InductiveConstructor Operator">_auth[_]</a> <a id="1280" class="Symbol">:</a> <a id="1282" href="BitML.Semantics.Configurations.Types.html#573" class="Bound">Participant</a> <a id="1294" class="Symbol">→</a> <a id="1296" href="BitML.Semantics.Actions.Types.html#858" class="Datatype">Action</a> <a id="1303" class="Symbol">→</a> <a id="1305" href="BitML.Semantics.Configurations.Types.html#931" class="Datatype">Configuration</a>

  <a id="1322" class="Comment">-- committed secret</a>
  <a id="Configuration.⟨_∶_♯_⟩"></a><a id="1344" href="BitML.Semantics.Configurations.Types.html#1344" class="InductiveConstructor Operator">⟨_∶_♯_⟩</a> <a id="1352" class="Symbol">:</a> <a id="1354" href="BitML.Semantics.Configurations.Types.html#573" class="Bound">Participant</a> <a id="1366" class="Symbol">→</a> <a id="1368" href="BitML.BasicTypes.html#638" class="Function">Secret</a> <a id="1375" class="Symbol">→</a> <a id="1377" href="Data.Maybe.Base.html#838" class="Datatype">Maybe</a> <a id="1383" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="1385" class="Symbol">→</a> <a id="1387" href="BitML.Semantics.Configurations.Types.html#931" class="Datatype">Configuration</a>

  <a id="1404" class="Comment">-- revealed secret</a>
  <a id="Configuration._∶_♯_"></a><a id="1425" href="BitML.Semantics.Configurations.Types.html#1425" class="InductiveConstructor Operator">_∶_♯_</a> <a id="1431" class="Symbol">:</a> <a id="1433" href="BitML.Semantics.Configurations.Types.html#573" class="Bound">Participant</a> <a id="1445" class="Symbol">→</a> <a id="1447" href="BitML.BasicTypes.html#638" class="Function">Secret</a> <a id="1454" class="Symbol">→</a> <a id="1456" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="1458" class="Symbol">→</a> <a id="1460" href="BitML.Semantics.Configurations.Types.html#931" class="Datatype">Configuration</a>

  <a id="1477" class="Comment">-- parallel composition</a>
  <a id="Configuration._∣_"></a><a id="1503" href="BitML.Semantics.Configurations.Types.html#1503" class="InductiveConstructor Operator">_∣_</a> <a id="1507" class="Symbol">:</a> <a id="1509" href="BitML.Semantics.Configurations.Types.html#931" class="Datatype">Configuration</a> <a id="1523" class="Symbol">→</a> <a id="1525" href="BitML.Semantics.Configurations.Types.html#931" class="Datatype">Configuration</a> <a id="1539" class="Symbol">→</a> <a id="1541" href="BitML.Semantics.Configurations.Types.html#931" class="Datatype">Configuration</a>

<a id="1556" class="Keyword">variable</a>
  <a id="1567" href="BitML.Semantics.Configurations.Types.html#1567" class="Generalizable">Γ</a> <a id="1569" href="BitML.Semantics.Configurations.Types.html#1569" class="Generalizable">Γ′</a> <a id="1572" href="BitML.Semantics.Configurations.Types.html#1572" class="Generalizable">Δ</a> <a id="1574" href="BitML.Semantics.Configurations.Types.html#1574" class="Generalizable">Δ′</a> <a id="1577" href="BitML.Semantics.Configurations.Types.html#1577" class="Generalizable">L</a> <a id="1579" href="BitML.Semantics.Configurations.Types.html#1579" class="Generalizable">L′</a> <a id="1582" href="BitML.Semantics.Configurations.Types.html#1582" class="Generalizable">M</a> <a id="1584" href="BitML.Semantics.Configurations.Types.html#1584" class="Generalizable">M′</a> <a id="1587" class="Symbol">:</a> <a id="1589" href="BitML.Semantics.Configurations.Types.html#931" class="Datatype">Configuration</a>

<a id="||_"></a><a id="1604" href="BitML.Semantics.Configurations.Types.html#1604" class="Function Operator">||_</a> <a id="1608" class="Symbol">:</a> <a id="1610" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1615" href="BitML.Semantics.Configurations.Types.html#931" class="Datatype">Configuration</a> <a id="1629" class="Symbol">→</a> <a id="1631" href="BitML.Semantics.Configurations.Types.html#931" class="Datatype">Configuration</a>
<a id="1645" class="Comment">-- ||_ = foldl _∣_ ∅ᶜ</a>
<a id="1667" href="BitML.Semantics.Configurations.Types.html#1604" class="Function Operator">||</a> <a id="1670" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="1673" class="Symbol">=</a> <a id="1675" href="BitML.Semantics.Configurations.Types.html#971" class="InductiveConstructor">∅ᶜ</a>
<a id="1678" href="BitML.Semantics.Configurations.Types.html#1604" class="Function Operator">||</a> <a id="1681" class="Symbol">(</a><a id="1682" href="BitML.Semantics.Configurations.Types.html#1682" class="Bound">Γ</a> <a id="1684" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1686" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="1688" class="Symbol">)</a> <a id="1690" class="Symbol">=</a> <a id="1692" href="BitML.Semantics.Configurations.Types.html#1682" class="Bound">Γ</a>
<a id="1694" href="BitML.Semantics.Configurations.Types.html#1604" class="CatchallClause Function Operator">||</a><a id="1696" class="CatchallClause"> </a><a id="1697" class="CatchallClause Symbol">(</a><a id="1698" href="BitML.Semantics.Configurations.Types.html#1698" class="CatchallClause Bound">Γ</a><a id="1699" class="CatchallClause"> </a><a id="1700" href="Agda.Builtin.List.html#200" class="CatchallClause InductiveConstructor Operator">∷</a><a id="1701" class="CatchallClause"> </a><a id="1702" href="BitML.Semantics.Configurations.Types.html#1702" class="CatchallClause Bound">Γs</a><a id="1704" class="CatchallClause Symbol">)</a> <a id="1706" class="Symbol">=</a> <a id="1708" href="BitML.Semantics.Configurations.Types.html#1698" class="Bound">Γ</a> <a id="1710" href="BitML.Semantics.Configurations.Types.html#1503" class="InductiveConstructor Operator">∣</a> <a id="1712" href="BitML.Semantics.Configurations.Types.html#1604" class="Function Operator">||</a> <a id="1715" href="BitML.Semantics.Configurations.Types.html#1702" class="Bound">Γs</a>

<a id="1719" class="Keyword">record</a> <a id="TimedConfiguration"></a><a id="1726" href="BitML.Semantics.Configurations.Types.html#1726" class="Record">TimedConfiguration</a> <a id="1745" class="Symbol">:</a> <a id="1747" class="PrimitiveType">Set</a> <a id="1751" class="Keyword">where</a>
  <a id="1759" class="Keyword">constructor</a> <a id="_at_"></a><a id="1771" href="BitML.Semantics.Configurations.Types.html#1771" class="InductiveConstructor Operator">_at_</a>
  <a id="1778" class="Keyword">field</a>
    <a id="TimedConfiguration.cfg"></a><a id="1788" href="BitML.Semantics.Configurations.Types.html#1788" class="Field">cfg</a>  <a id="1793" class="Symbol">:</a> <a id="1795" href="BitML.Semantics.Configurations.Types.html#931" class="Datatype">Configuration</a>
    <a id="TimedConfiguration.time"></a><a id="1813" href="BitML.Semantics.Configurations.Types.html#1813" class="Field">time</a> <a id="1818" class="Symbol">:</a> <a id="1820" href="BitML.BasicTypes.html#759" class="Function">Time</a>
<a id="1825" class="Keyword">open</a> <a id="1830" href="BitML.Semantics.Configurations.Types.html#1726" class="Module">TimedConfiguration</a> <a id="1849" class="Keyword">public</a>

<a id="1857" class="Keyword">variable</a>
  <a id="1868" href="BitML.Semantics.Configurations.Types.html#1868" class="Generalizable">Γₜ</a> <a id="1871" href="BitML.Semantics.Configurations.Types.html#1871" class="Generalizable">Γₜ′</a> <a id="1875" href="BitML.Semantics.Configurations.Types.html#1875" class="Generalizable">Γₜ″</a> <a id="1879" class="Symbol">:</a> <a id="1881" href="BitML.Semantics.Configurations.Types.html#1726" class="Record">TimedConfiguration</a>

<a id="1901" class="Keyword">infix</a>  <a id="1908" class="Number">9</a> <a id="1910" href="BitML.Semantics.Configurations.Types.html#1080" class="InductiveConstructor Operator">⟨_,_⟩at_</a>
<a id="1919" class="Keyword">infix</a>  <a id="1926" class="Number">8</a> <a id="1928" href="BitML.Semantics.Configurations.Types.html#1174" class="InductiveConstructor Operator">⟨_has_⟩at_</a>
<a id="1939" class="Keyword">infix</a>  <a id="1946" class="Number">6</a> <a id="1948" href="BitML.Semantics.Configurations.Types.html#1271" class="InductiveConstructor Operator">_auth[_]</a>
<a id="1957" class="Keyword">infix</a>  <a id="1964" class="Number">5</a> <a id="1966" href="BitML.Semantics.Configurations.Types.html#1604" class="Function Operator">||_</a>
<a id="1970" class="Keyword">infixl</a> <a id="1977" class="Number">4</a> <a id="1979" href="BitML.Semantics.Configurations.Types.html#1503" class="InductiveConstructor Operator">_∣_</a>
<a id="1983" class="Keyword">infix</a>  <a id="1990" class="Number">3</a> <a id="1992" href="BitML.Semantics.Configurations.Types.html#1771" class="InductiveConstructor Operator">_at_</a>
</pre></body></html>