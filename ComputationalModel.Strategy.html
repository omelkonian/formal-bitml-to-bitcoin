<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>ComputationalModel.Strategy</title><link rel="stylesheet" href="css/Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Computational strategies.</a>
<a id="103" class="Comment">------------------------------------------------------------------------</a>

<a id="177" class="Keyword">open</a> <a id="182" class="Keyword">import</a> <a id="189" href="Prelude.Init.html" class="Module">Prelude.Init</a> <a id="202" class="Keyword">hiding</a> <a id="209" class="Symbol">(</a><a id="210" href="Agda.Builtin.Sigma.html#166" class="Record">Σ</a><a id="211" class="Symbol">)</a>
<a id="213" class="Keyword">open</a> <a id="218" class="Keyword">import</a> <a id="225" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>
<a id="239" class="Keyword">open</a> <a id="244" class="Keyword">import</a> <a id="251" href="Prelude.Membership.html" class="Module">Prelude.Membership</a>
<a id="270" class="Keyword">open</a> <a id="275" class="Keyword">import</a> <a id="282" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>
<a id="296" class="Keyword">open</a> <a id="301" class="Keyword">import</a> <a id="308" href="Prelude.Bifunctor.html" class="Module">Prelude.Bifunctor</a>
<a id="326" class="Keyword">open</a> <a id="331" class="Keyword">import</a> <a id="338" href="Prelude.Ord.html" class="Module">Prelude.Ord</a>

<a id="351" class="Keyword">open</a> <a id="356" class="Keyword">import</a> <a id="363" href="Bitcoin.html" class="Module">Bitcoin</a>

<a id="372" class="Keyword">module</a> <a id="379" href="ComputationalModel.Strategy.html" class="Module">ComputationalModel.Strategy</a>
  <a id="409" class="Symbol">(</a><a id="410" href="ComputationalModel.Strategy.html#410" class="Bound">Participant</a> <a id="422" class="Symbol">:</a> <a id="424" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="427" class="Symbol">)</a>
  <a id="431" class="Symbol">⦃</a> <a id="433" href="ComputationalModel.Strategy.html#433" class="Bound">_</a> <a id="435" class="Symbol">:</a> <a id="437" href="Prelude.DecEq.Core.html#97" class="Record">DecEq</a> <a id="443" href="ComputationalModel.Strategy.html#410" class="Bound">Participant</a> <a id="455" class="Symbol">⦄</a>
  <a id="459" class="Symbol">(</a><a id="460" href="ComputationalModel.Strategy.html#460" class="Bound">Honest</a> <a id="467" class="Symbol">:</a> <a id="469" href="Data.List.NonEmpty.Base.html#1079" class="Record">List⁺</a> <a id="475" href="ComputationalModel.Strategy.html#410" class="Bound">Participant</a><a id="486" class="Symbol">)</a>

  <a id="491" class="Symbol">(</a><a id="492" href="ComputationalModel.Strategy.html#492" class="Bound">finPart</a> <a id="500" class="Symbol">:</a> <a id="502" href="Prelude.Lists.html#27415" class="Function">Finite</a> <a id="509" href="ComputationalModel.Strategy.html#410" class="Bound">Participant</a><a id="520" class="Symbol">)</a>
  <a id="524" class="Symbol">(</a><a id="525" href="ComputationalModel.Strategy.html#525" class="Bound">keypairs</a> <a id="534" class="Symbol">:</a> <a id="536" href="ComputationalModel.Strategy.html#410" class="Bound">Participant</a> <a id="548" class="Symbol">→</a> <a id="550" href="Bitcoin.Crypto.html#345" class="Record">KeyPair</a> <a id="558" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="560" href="Bitcoin.Crypto.html#345" class="Record">KeyPair</a><a id="567" class="Symbol">)</a>
  <a id="571" class="Keyword">where</a>

<a id="Hon"></a><a id="578" href="ComputationalModel.Strategy.html#578" class="Function">Hon</a> <a id="582" class="Symbol">:</a> <a id="584" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="589" href="ComputationalModel.Strategy.html#410" class="Bound">Participant</a>
<a id="601" href="ComputationalModel.Strategy.html#578" class="Function">Hon</a> <a id="605" class="Symbol">=</a> <a id="607" href="Data.List.NonEmpty.Base.html#1521" class="Function">L.NE.toList</a> <a id="619" href="ComputationalModel.Strategy.html#460" class="Bound">Honest</a>

<a id="allParticipants"></a><a id="627" href="ComputationalModel.Strategy.html#627" class="Function">allParticipants</a> <a id="643" class="Symbol">:</a> <a id="645" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="650" href="ComputationalModel.Strategy.html#410" class="Bound">Participant</a>
<a id="662" href="ComputationalModel.Strategy.html#627" class="Function">allParticipants</a> <a id="678" class="Symbol">=</a> <a id="680" href="Prelude.Lists.html#27473" class="Function">finList</a> <a id="688" href="ComputationalModel.Strategy.html#492" class="Bound">finPart</a>

<a id="697" class="Keyword">open</a> <a id="702" class="Keyword">import</a> <a id="709" href="ComputationalModel.KeyPairs.html" class="Module">ComputationalModel.KeyPairs</a> <a id="737" href="ComputationalModel.Strategy.html#410" class="Bound">Participant</a> <a id="749" href="ComputationalModel.Strategy.html#525" class="Bound">keypairs</a> <a id="758" class="Keyword">public</a>

<a id="766" class="Comment">-- Computational runs.</a>

<a id="Message"></a><a id="790" href="ComputationalModel.Strategy.html#790" class="Function">Message</a> <a id="798" class="Symbol">=</a> <a id="800" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="805" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a>

<a id="808" class="Keyword">data</a> <a id="Label"></a><a id="813" href="ComputationalModel.Strategy.html#813" class="Datatype">Label</a> <a id="819" class="Symbol">:</a> <a id="821" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="825" class="Keyword">where</a>
  <a id="833" class="Comment">-- broadcast message</a>
  <a id="Label._→∗∶_"></a><a id="856" href="ComputationalModel.Strategy.html#856" class="InductiveConstructor Operator">_→∗∶_</a> <a id="862" class="Symbol">:</a> <a id="864" href="ComputationalModel.Strategy.html#410" class="Bound">Participant</a> <a id="876" class="Symbol">→</a> <a id="878" href="ComputationalModel.Strategy.html#790" class="Function">Message</a> <a id="886" class="Symbol">→</a> <a id="888" href="ComputationalModel.Strategy.html#813" class="Datatype">Label</a>

  <a id="897" class="Comment">-- append new transaction</a>
  <a id="Label.submit"></a><a id="925" href="ComputationalModel.Strategy.html#925" class="InductiveConstructor">submit</a> <a id="932" class="Symbol">:</a> <a id="934" href="Bitcoin.Tx.Base.html#1255" class="Function">∃Tx</a> <a id="938" class="Symbol">→</a> <a id="940" href="ComputationalModel.Strategy.html#813" class="Datatype">Label</a>

  <a id="949" class="Comment">-- perform a delay</a>
  <a id="Label.delay"></a><a id="970" href="ComputationalModel.Strategy.html#970" class="InductiveConstructor">delay</a> <a id="976" class="Symbol">:</a> <a id="978" href="Bitcoin.BasicTypes.html#245" class="Function">Time</a> <a id="983" class="Symbol">→</a> <a id="985" href="ComputationalModel.Strategy.html#813" class="Datatype">Label</a>

  <a id="994" class="Comment">-- send hash request to oracle</a>
  <a id="Label._→O∶_"></a><a id="1027" href="ComputationalModel.Strategy.html#1027" class="InductiveConstructor Operator">_→O∶_</a>  <a id="1034" class="Symbol">:</a> <a id="1036" href="ComputationalModel.Strategy.html#410" class="Bound">Participant</a> <a id="1048" class="Symbol">→</a> <a id="1050" href="ComputationalModel.Strategy.html#790" class="Function">Message</a> <a id="1058" class="Symbol">→</a> <a id="1060" href="ComputationalModel.Strategy.html#813" class="Datatype">Label</a>

  <a id="1069" class="Comment">-- receive hash from oracle</a>
  <a id="Label.O→_∶_"></a><a id="1099" href="ComputationalModel.Strategy.html#1099" class="InductiveConstructor Operator">O→_∶_</a> <a id="1105" class="Symbol">:</a> <a id="1107" href="ComputationalModel.Strategy.html#410" class="Bound">Participant</a> <a id="1119" class="Symbol">→</a> <a id="1121" href="ComputationalModel.Strategy.html#790" class="Function">Message</a> <a id="1129" class="Symbol">→</a> <a id="1131" href="ComputationalModel.Strategy.html#813" class="Datatype">Label</a>

<a id="Run"></a><a id="1138" href="ComputationalModel.Strategy.html#1138" class="Function">Run</a>    <a id="1145" class="Symbol">=</a> <a id="1147" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1152" href="ComputationalModel.Strategy.html#813" class="Datatype">Label</a>
<a id="Labels"></a><a id="1158" href="ComputationalModel.Strategy.html#1158" class="Function">Labels</a> <a id="1165" class="Symbol">=</a> <a id="1167" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1172" href="ComputationalModel.Strategy.html#813" class="Datatype">Label</a>

<a id="1179" class="Keyword">variable</a>
  <a id="1190" href="ComputationalModel.Strategy.html#1190" class="Generalizable">m</a> <a id="1192" href="ComputationalModel.Strategy.html#1192" class="Generalizable">m′</a> <a id="1195" class="Symbol">:</a> <a id="1197" href="ComputationalModel.Strategy.html#790" class="Function">Message</a>
  <a id="1207" href="ComputationalModel.Strategy.html#1207" class="Generalizable">R</a> <a id="1209" href="ComputationalModel.Strategy.html#1209" class="Generalizable">R′</a> <a id="1212" href="ComputationalModel.Strategy.html#1212" class="Generalizable">R″</a> <a id="1215" href="ComputationalModel.Strategy.html#1215" class="Generalizable">Rᶜ</a> <a id="1218" class="Symbol">:</a> <a id="1220" href="ComputationalModel.Strategy.html#1138" class="Function">Run</a>
  <a id="1226" href="ComputationalModel.Strategy.html#1226" class="Generalizable">λᶜ</a> <a id="1229" class="Symbol">:</a> <a id="1231" href="ComputationalModel.Strategy.html#813" class="Datatype">Label</a>

<a id="strip"></a><a id="1238" href="ComputationalModel.Strategy.html#1238" class="Function">strip</a> <a id="1244" class="Symbol">:</a> <a id="1246" href="ComputationalModel.Strategy.html#410" class="Bound">Participant</a> <a id="1258" class="Symbol">→</a> <a id="1260" href="ComputationalModel.Strategy.html#1138" class="Function">Run</a> <a id="1264" class="Symbol">→</a> <a id="1266" href="ComputationalModel.Strategy.html#1138" class="Function">Run</a>
<a id="1270" href="ComputationalModel.Strategy.html#1238" class="Function">strip</a> <a id="1276" href="ComputationalModel.Strategy.html#1276" class="Bound">A</a> <a id="1278" class="Symbol">=</a> <a id="1280" href="Data.List.Base.html#1629" class="Function">mapMaybe</a> <a id="1289" href="ComputationalModel.Strategy.html#1304" class="Function">go</a>
  <a id="1294" class="Keyword">where</a>
    <a id="1304" href="ComputationalModel.Strategy.html#1304" class="Function">go</a> <a id="1307" class="Symbol">:</a> <a id="1309" href="ComputationalModel.Strategy.html#813" class="Datatype">Label</a> <a id="1315" class="Symbol">→</a> <a id="1317" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="1323" href="ComputationalModel.Strategy.html#813" class="Datatype">Label</a>
    <a id="1333" href="ComputationalModel.Strategy.html#1304" class="Function">go</a> <a id="1336" href="ComputationalModel.Strategy.html#1336" class="Bound">l</a><a id="1337" class="Symbol">@(</a><a id="1339" href="ComputationalModel.Strategy.html#1339" class="Bound">B</a> <a id="1341" href="ComputationalModel.Strategy.html#1027" class="InductiveConstructor Operator">→O∶</a>  <a id="1346" class="Symbol">_)</a> <a id="1349" class="Symbol">=</a> <a id="1351" href="Data.Bool.Base.html#1283" class="Function Operator">if</a> <a id="1354" href="ComputationalModel.Strategy.html#1276" class="Bound">A</a> <a id="1356" href="Prelude.DecEq.Core.html#173" class="Function Operator">==</a> <a id="1359" href="ComputationalModel.Strategy.html#1339" class="Bound">B</a> <a id="1361" href="Data.Bool.Base.html#1283" class="Function Operator">then</a> <a id="1366" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="1371" href="ComputationalModel.Strategy.html#1336" class="Bound">l</a> <a id="1373" href="Data.Bool.Base.html#1283" class="Function Operator">else</a> <a id="1378" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a>
    <a id="1390" href="ComputationalModel.Strategy.html#1304" class="Function">go</a> <a id="1393" href="ComputationalModel.Strategy.html#1393" class="Bound">l</a><a id="1394" class="Symbol">@(</a><a id="1396" href="ComputationalModel.Strategy.html#1099" class="InductiveConstructor Operator">O→</a> <a id="1399" href="ComputationalModel.Strategy.html#1399" class="Bound">B</a> <a id="1401" href="ComputationalModel.Strategy.html#1099" class="InductiveConstructor Operator">∶</a> <a id="1403" class="Symbol">_)</a> <a id="1406" class="Symbol">=</a> <a id="1408" href="Data.Bool.Base.html#1283" class="Function Operator">if</a> <a id="1411" href="ComputationalModel.Strategy.html#1276" class="Bound">A</a> <a id="1413" href="Prelude.DecEq.Core.html#173" class="Function Operator">==</a> <a id="1416" href="ComputationalModel.Strategy.html#1399" class="Bound">B</a> <a id="1418" href="Data.Bool.Base.html#1283" class="Function Operator">then</a> <a id="1423" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="1428" href="ComputationalModel.Strategy.html#1393" class="Bound">l</a> <a id="1430" href="Data.Bool.Base.html#1283" class="Function Operator">else</a> <a id="1435" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a>
    <a id="1447" href="ComputationalModel.Strategy.html#1304" class="CatchallClause Function">go</a><a id="1449" class="CatchallClause"> </a><a id="1450" href="ComputationalModel.Strategy.html#1450" class="CatchallClause Bound">x</a>            <a id="1463" class="Symbol">=</a> <a id="1465" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="1470" href="ComputationalModel.Strategy.html#1450" class="Bound">x</a>

<a id="δʳ"></a><a id="1473" href="ComputationalModel.Strategy.html#1473" class="Function">δʳ</a> <a id="1476" class="Symbol">:</a> <a id="1478" href="ComputationalModel.Strategy.html#1138" class="Function">Run</a> <a id="1482" class="Symbol">→</a> <a id="1484" href="Bitcoin.BasicTypes.html#245" class="Function">Time</a>
<a id="1489" href="ComputationalModel.Strategy.html#1473" class="Function">δʳ</a> <a id="1492" class="Symbol">=</a> <a id="1494" href="Data.List.Base.html#4784" class="Function">sum</a> <a id="1498" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="1500" href="Data.List.Base.html#1544" class="Function">map</a> <a id="1504" href="ComputationalModel.Strategy.html#1519" class="Function">δˡ</a>
  <a id="1509" class="Keyword">where</a>
    <a id="1519" href="ComputationalModel.Strategy.html#1519" class="Function">δˡ</a> <a id="1522" class="Symbol">:</a> <a id="1524" href="ComputationalModel.Strategy.html#813" class="Datatype">Label</a> <a id="1530" class="Symbol">→</a> <a id="1532" href="Bitcoin.BasicTypes.html#245" class="Function">Time</a>
    <a id="1541" href="ComputationalModel.Strategy.html#1519" class="Function">δˡ</a> <a id="1544" class="Symbol">(</a><a id="1545" href="ComputationalModel.Strategy.html#970" class="InductiveConstructor">delay</a> <a id="1551" href="ComputationalModel.Strategy.html#1551" class="Bound">t</a><a id="1552" class="Symbol">)</a> <a id="1554" class="Symbol">=</a> <a id="1556" href="ComputationalModel.Strategy.html#1551" class="Bound">t</a>
    <a id="1562" href="ComputationalModel.Strategy.html#1519" class="CatchallClause Function">δˡ</a><a id="1564" class="CatchallClause"> </a><a id="1565" class="CatchallClause Symbol">_</a>         <a id="1575" class="Symbol">=</a> <a id="1577" class="Number">0</a>

<a id="𝔹"></a><a id="1580" href="ComputationalModel.Strategy.html#1580" class="Function">𝔹</a> <a id="1582" class="Symbol">:</a> <a id="1584" href="ComputationalModel.Strategy.html#1138" class="Function">Run</a> <a id="1588" class="Symbol">→</a> <a id="1590" href="Bitcoin.Consistency.html#615" class="Function">Blockchain</a>
<a id="1601" href="ComputationalModel.Strategy.html#1580" class="Function">𝔹</a> <a id="1603" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="1606" class="Symbol">=</a> <a id="1608" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
<a id="1611" href="ComputationalModel.Strategy.html#1580" class="Function">𝔹</a> <a id="1613" class="Symbol">(</a><a id="1614" href="ComputationalModel.Strategy.html#1614" class="Bound">l</a> <a id="1616" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1618" href="ComputationalModel.Strategy.html#1618" class="Bound">ls</a><a id="1620" class="Symbol">)</a> <a id="1622" class="Keyword">with</a> <a id="1627" href="ComputationalModel.Strategy.html#1614" class="Bound">l</a>
<a id="1629" class="Symbol">...</a> <a id="1633" class="Symbol">|</a> <a id="1635" href="ComputationalModel.Strategy.html#925" class="InductiveConstructor">submit</a> <a id="1642" href="ComputationalModel.Strategy.html#1642" class="Bound">tx</a> <a id="1645" class="Symbol">=</a> <a id="1647" class="Symbol">(</a><a id="1648" href="ComputationalModel.Strategy.html#1642" class="Bound">tx</a> <a id="1651" href="Bitcoin.Tx.Base.html#2376" class="InductiveConstructor Operator">at</a> <a id="1654" class="Symbol">(</a><a id="1655" href="ComputationalModel.Strategy.html#1473" class="Function">δʳ</a> <a id="1658" class="Bound">ls</a><a id="1660" class="Symbol">))</a> <a id="1663" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1665" href="ComputationalModel.Strategy.html#1580" class="Function">𝔹</a> <a id="1667" class="Bound">ls</a>
<a id="1670" class="CatchallClause Symbol">...</a><a id="1673" class="CatchallClause"> </a><a id="1674" class="CatchallClause Symbol">|</a><a id="1675" class="CatchallClause"> </a><a id="1676" class="CatchallClause Symbol">_</a>         <a id="1686" class="Symbol">=</a> <a id="1688" href="ComputationalModel.Strategy.html#1580" class="Function">𝔹</a> <a id="1690" class="Bound">ls</a>

<a id="1694" class="Comment">-- For each participant, the coinbase transaction contains an output redeemable with his/her private key.</a>
<a id="Coinbase"></a><a id="1800" href="ComputationalModel.Strategy.html#1800" class="Function">Coinbase</a> <a id="1809" class="Symbol">:</a> <a id="1811" href="Bitcoin.Tx.Base.html#1255" class="Function">∃Tx</a> <a id="1815" class="Symbol">→</a> <a id="1817" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="1821" href="ComputationalModel.Strategy.html#1800" class="Function">Coinbase</a> <a id="1830" class="Symbol">(_</a> <a id="1833" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1835" class="Symbol">_</a> <a id="1837" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1839" href="ComputationalModel.Strategy.html#1839" class="Bound">tx</a><a id="1841" class="Symbol">)</a> <a id="1843" class="Symbol">=</a>
  <a id="1847" class="Symbol">∀</a> <a id="1849" class="Symbol">{</a><a id="1850" href="ComputationalModel.Strategy.html#1850" class="Bound">A</a><a id="1851" class="Symbol">}</a> <a id="1853" class="Symbol">→</a> <a id="1855" href="ComputationalModel.Strategy.html#1850" class="Bound">A</a> <a id="1857" href="Prelude.Membership.html#384" class="Field Operator">∈</a> <a id="1859" href="ComputationalModel.Strategy.html#627" class="Function">allParticipants</a> <a id="1875" class="Symbol">→</a>
    <a id="1881" class="Symbol">(</a><a id="1882" href="Bitcoin.Script.Base.html#375" class="InductiveConstructor">Ctx</a> <a id="1886" class="Number">1</a> <a id="1888" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1890" class="Symbol">(</a><a id="1891" href="Bitcoin.Script.Base.html#2174" class="InductiveConstructor Operator">ƛ</a> <a id="1893" class="Symbol">(</a><a id="1894" href="Bitcoin.Script.Base.html#1413" class="InductiveConstructor">versig</a> <a id="1901" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="1903" href="ComputationalModel.KeyPairs.html#297" class="Function">K̂</a> <a id="1906" href="ComputationalModel.Strategy.html#1850" class="Bound">A</a> <a id="1908" href="Data.List.Base.html#5025" class="Function Operator">]</a> <a id="1910" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="1912" href="Data.Fin.html#730" class="Function Operator">#</a> <a id="1914" class="Number">0</a> <a id="1916" href="Data.List.Base.html#5025" class="Function Operator">]</a><a id="1917" class="Symbol">)))</a> <a id="1921" href="Prelude.Membership.html#384" class="Field Operator">∈</a> <a id="1923" href="Data.List.Base.html#1544" class="Function">map</a> <a id="1927" class="Symbol">(</a><a id="1928" class="Comment">{-map₂-}</a> <a id="1937" class="Symbol">λ{</a> <a id="1940" class="Symbol">(</a><a id="1941" href="ComputationalModel.Strategy.html#1941" class="Bound">x</a> <a id="1943" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1945" href="ComputationalModel.Strategy.html#1945" class="Bound">y</a><a id="1946" class="Symbol">)</a> <a id="1948" class="Symbol">→</a> <a id="1950" href="ComputationalModel.Strategy.html#1941" class="Bound">x</a> <a id="1952" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1954" href="Bitcoin.Tx.Base.html#680" class="Field">validator</a> <a id="1964" href="ComputationalModel.Strategy.html#1945" class="Bound">y</a> <a id="1966" class="Symbol">})</a> <a id="1969" class="Symbol">(</a><a id="1970" href="Data.Vec.Base.html#7438" class="Function">V.toList</a> <a id="1979" class="Symbol">(</a><a id="1980" href="Bitcoin.Tx.Base.html#1090" class="Field">outputs</a> <a id="1988" href="ComputationalModel.Strategy.html#1839" class="Bound">tx</a><a id="1990" class="Symbol">))</a>

<a id="1994" class="Comment">-- Initially, all participants broadcast both their public keys.</a>
<a id="initialBroadcasts"></a><a id="2059" href="ComputationalModel.Strategy.html#2059" class="Function">initialBroadcasts</a> <a id="2077" class="Symbol">:</a> <a id="2079" href="ComputationalModel.Strategy.html#1158" class="Function">Labels</a>
<a id="2086" href="ComputationalModel.Strategy.html#2059" class="Function">initialBroadcasts</a> <a id="2104" class="Symbol">=</a> <a id="2106" href="Data.List.Base.html#1544" class="Function">map</a> <a id="2110" href="ComputationalModel.Strategy.html#2168" class="Function">go</a> <a id="2113" href="ComputationalModel.Strategy.html#627" class="Function">allParticipants</a>
  <a id="2131" class="Keyword">module</a> <a id="∣initialBroadcasts∣"></a><a id="2138" href="ComputationalModel.Strategy.html#2138" class="Module">∣initialBroadcasts∣</a> <a id="2158" class="Keyword">where</a>
    <a id="∣initialBroadcasts∣.go"></a><a id="2168" href="ComputationalModel.Strategy.html#2168" class="Function">go</a> <a id="2171" class="Symbol">:</a> <a id="2173" href="ComputationalModel.Strategy.html#410" class="Bound">Participant</a> <a id="2185" class="Symbol">→</a> <a id="2187" href="ComputationalModel.Strategy.html#813" class="Datatype">Label</a>
    <a id="2197" href="ComputationalModel.Strategy.html#2168" class="Function">go</a> <a id="2200" href="ComputationalModel.Strategy.html#2200" class="Bound">A</a> <a id="2202" class="Symbol">=</a> <a id="2204" href="ComputationalModel.Strategy.html#2200" class="Bound">A</a> <a id="2206" href="ComputationalModel.Strategy.html#856" class="InductiveConstructor Operator">→∗∶</a> <a id="2210" class="Symbol">(</a><a id="2211" href="ComputationalModel.KeyPairs.html#347" class="Function">Kᵖ</a> <a id="2214" href="ComputationalModel.Strategy.html#2200" class="Bound">A</a> <a id="2216" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2218" href="ComputationalModel.KeyPairs.html#417" class="Function">K̂ᵖ</a> <a id="2222" href="ComputationalModel.Strategy.html#2200" class="Bound">A</a> <a id="2224" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2226" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="2228" class="Symbol">)</a>

<a id="2231" class="Comment">-- An initial run begins with a coinbase transaction and all appropriate initial broadcasts.</a>
<a id="Initial"></a><a id="2324" href="ComputationalModel.Strategy.html#2324" class="Function">Initial</a> <a id="2332" class="Symbol">:</a> <a id="2334" href="ComputationalModel.Strategy.html#1138" class="Function">Run</a> <a id="2338" class="Symbol">→</a> <a id="2340" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="2344" href="ComputationalModel.Strategy.html#2324" class="Function">Initial</a> <a id="2352" href="ComputationalModel.Strategy.html#2352" class="Bound">R</a> <a id="2354" class="Symbol">=</a> <a id="2356" href="Data.Product.html#1806" class="Function">∃[</a> <a id="2359" href="ComputationalModel.Strategy.html#2359" class="Bound">T₀</a> <a id="2362" href="Data.Product.html#1806" class="Function">]</a> <a id="2364" class="Symbol">(</a><a id="2365" href="ComputationalModel.Strategy.html#1800" class="Function">Coinbase</a> <a id="2374" href="ComputationalModel.Strategy.html#2359" class="Bound">T₀</a> <a id="2377" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2379" class="Symbol">(</a><a id="2380" href="ComputationalModel.Strategy.html#2352" class="Bound">R</a> <a id="2382" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2384" class="Symbol">(</a><a id="2385" href="ComputationalModel.Strategy.html#925" class="InductiveConstructor">submit</a> <a id="2392" href="ComputationalModel.Strategy.html#2359" class="Bound">T₀</a> <a id="2395" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2397" href="ComputationalModel.Strategy.html#2059" class="Function">initialBroadcasts</a><a id="2414" class="Symbol">)))</a>

<a id="2419" class="Comment">-- A run is valid, when it has an initial run as a prefix.</a>
<a id="Valid"></a><a id="2478" href="ComputationalModel.Strategy.html#2478" class="Function">Valid</a> <a id="2484" class="Symbol">:</a> <a id="2486" href="ComputationalModel.Strategy.html#1138" class="Function">Run</a> <a id="2490" class="Symbol">→</a> <a id="2492" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="2496" href="ComputationalModel.Strategy.html#2478" class="Function">Valid</a> <a id="2502" href="ComputationalModel.Strategy.html#2502" class="Bound">R</a> <a id="2504" class="Symbol">=</a> <a id="2506" href="Data.Product.html#1806" class="Function">∃[</a> <a id="2509" href="ComputationalModel.Strategy.html#2509" class="Bound">R₀</a> <a id="2512" href="Data.Product.html#1806" class="Function">]</a> <a id="2514" class="Symbol">(</a><a id="2515" href="ComputationalModel.Strategy.html#2324" class="Function">Initial</a> <a id="2523" href="ComputationalModel.Strategy.html#2509" class="Bound">R₀</a> <a id="2526" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2528" href="Data.List.Relation.Binary.Prefix.Heterogeneous.html#685" class="Datatype">Prefix</a> <a id="2535" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a> <a id="2539" href="ComputationalModel.Strategy.html#2509" class="Bound">R₀</a> <a id="2542" href="ComputationalModel.Strategy.html#2502" class="Bound">R</a><a id="2543" class="Symbol">)</a>

<a id="oracleMessages"></a><a id="2546" href="ComputationalModel.Strategy.html#2546" class="Function">oracleMessages</a> <a id="2561" class="Symbol">:</a> <a id="2563" href="ComputationalModel.Strategy.html#1138" class="Function">Run</a> <a id="2567" class="Symbol">→</a> <a id="2569" href="ComputationalModel.Strategy.html#1158" class="Function">Labels</a>
<a id="2576" href="ComputationalModel.Strategy.html#2546" class="Function">oracleMessages</a> <a id="2591" class="Symbol">=</a> <a id="2593" href="Data.List.Base.html#1629" class="Function">mapMaybe</a> <a id="2602" href="ComputationalModel.Strategy.html#2617" class="Function">go</a>
  <a id="2607" class="Keyword">where</a>
    <a id="2617" href="ComputationalModel.Strategy.html#2617" class="Function">go</a> <a id="2620" class="Symbol">:</a> <a id="2622" href="ComputationalModel.Strategy.html#813" class="Datatype">Label</a> <a id="2628" class="Symbol">→</a> <a id="2630" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="2636" href="ComputationalModel.Strategy.html#813" class="Datatype">Label</a>
    <a id="2646" href="ComputationalModel.Strategy.html#2617" class="Function">go</a> <a id="2649" href="ComputationalModel.Strategy.html#2649" class="Bound">l</a><a id="2650" class="Symbol">@(_</a> <a id="2654" href="ComputationalModel.Strategy.html#1027" class="InductiveConstructor Operator">→O∶</a>  <a id="2659" class="Symbol">_)</a> <a id="2662" class="Symbol">=</a> <a id="2664" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="2669" href="ComputationalModel.Strategy.html#2649" class="Bound">l</a>
    <a id="2675" href="ComputationalModel.Strategy.html#2617" class="Function">go</a> <a id="2678" href="ComputationalModel.Strategy.html#2678" class="Bound">l</a><a id="2679" class="Symbol">@(</a><a id="2681" href="ComputationalModel.Strategy.html#1099" class="InductiveConstructor Operator">O→</a> <a id="2684" class="Symbol">_</a> <a id="2686" href="ComputationalModel.Strategy.html#1099" class="InductiveConstructor Operator">∶</a> <a id="2688" class="Symbol">_)</a> <a id="2691" class="Symbol">=</a> <a id="2693" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="2698" href="ComputationalModel.Strategy.html#2678" class="Bound">l</a>
    <a id="2704" href="ComputationalModel.Strategy.html#2617" class="CatchallClause Function">go</a><a id="2706" class="CatchallClause"> </a><a id="2707" class="CatchallClause Symbol">_</a>            <a id="2720" class="Symbol">=</a> <a id="2722" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a>

<a id="OracleQuery"></a><a id="2731" href="ComputationalModel.Strategy.html#2731" class="Function">OracleQuery</a> <a id="2743" class="Symbol">=</a> <a id="2745" href="ComputationalModel.Strategy.html#410" class="Bound">Participant</a> <a id="2757" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2759" href="ComputationalModel.Strategy.html#790" class="Function">Message</a>
<a id="OracleReply"></a><a id="2767" href="ComputationalModel.Strategy.html#2767" class="Function">OracleReply</a> <a id="2779" class="Symbol">=</a> <a id="2781" href="ComputationalModel.Strategy.html#410" class="Bound">Participant</a> <a id="2793" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2795" href="ComputationalModel.Strategy.html#790" class="Function">Message</a>
<a id="OracleInteraction"></a><a id="2803" href="ComputationalModel.Strategy.html#2803" class="Function">OracleInteraction</a> <a id="2821" class="Symbol">=</a> <a id="2823" href="ComputationalModel.Strategy.html#410" class="Bound">Participant</a> <a id="2835" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2837" href="ComputationalModel.Strategy.html#790" class="Function">Message</a> <a id="2845" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2847" href="ComputationalModel.Strategy.html#790" class="Function">Message</a>

<a id="oracleRequests"></a><a id="2856" href="ComputationalModel.Strategy.html#2856" class="Function">oracleRequests</a> <a id="2871" class="Symbol">:</a> <a id="2873" href="ComputationalModel.Strategy.html#410" class="Bound">Participant</a> <a id="2885" class="Symbol">→</a> <a id="2887" href="ComputationalModel.Strategy.html#1138" class="Function">Run</a> <a id="2891" class="Symbol">→</a> <a id="2893" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2898" class="Symbol">(</a><a id="2899" href="ComputationalModel.Strategy.html#813" class="Datatype">Label</a> <a id="2905" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2907" href="ComputationalModel.Strategy.html#813" class="Datatype">Label</a><a id="2912" class="Symbol">)</a>
<a id="2914" href="ComputationalModel.Strategy.html#2856" class="Function">oracleRequests</a> <a id="2929" href="ComputationalModel.Strategy.html#2929" class="Bound">A</a> <a id="2931" class="Symbol">(</a><a id="2932" href="ComputationalModel.Strategy.html#2932" class="Bound">l</a><a id="2933" class="Symbol">@(</a><a id="2935" href="ComputationalModel.Strategy.html#2935" class="Bound">A′</a> <a id="2938" href="ComputationalModel.Strategy.html#1027" class="InductiveConstructor Operator">→O∶</a> <a id="2942" href="ComputationalModel.Strategy.html#2942" class="Bound">m</a><a id="2943" class="Symbol">)</a> <a id="2945" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2947" href="ComputationalModel.Strategy.html#2947" class="Bound">l′</a><a id="2949" class="Symbol">@(</a><a id="2951" href="ComputationalModel.Strategy.html#1099" class="InductiveConstructor Operator">O→</a> <a id="2954" href="ComputationalModel.Strategy.html#2954" class="Bound">A″</a> <a id="2957" href="ComputationalModel.Strategy.html#1099" class="InductiveConstructor Operator">∶</a> <a id="2959" href="ComputationalModel.Strategy.html#2959" class="Bound">hm</a><a id="2961" class="Symbol">)</a> <a id="2963" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2965" href="ComputationalModel.Strategy.html#2965" class="Bound">R</a><a id="2966" class="Symbol">)</a> <a id="2968" class="Keyword">with</a> <a id="2973" href="ComputationalModel.Strategy.html#2929" class="Bound">A</a> <a id="2975" href="Prelude.DecEq.Core.html#141" class="Field Operator">≟</a> <a id="2977" href="ComputationalModel.Strategy.html#2935" class="Bound">A′</a> <a id="2980" class="Symbol">|</a> <a id="2982" href="ComputationalModel.Strategy.html#2935" class="Bound">A′</a> <a id="2985" href="Prelude.DecEq.Core.html#141" class="Field Operator">≟</a> <a id="2987" href="ComputationalModel.Strategy.html#2954" class="Bound">A″</a>
<a id="2990" class="Symbol">...</a> <a id="2994" class="Symbol">|</a> <a id="2996" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="3000" class="Symbol">_</a> <a id="3002" class="Symbol">|</a> <a id="3004" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="3008" class="Symbol">_</a>      <a id="3015" class="Symbol">=</a> <a id="3017" class="Symbol">(</a><a id="3018" class="Bound">l</a> <a id="3020" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3022" class="Bound">l′</a><a id="3024" class="Symbol">)</a> <a id="3026" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3028" href="ComputationalModel.Strategy.html#2856" class="Function">oracleRequests</a> <a id="3043" class="Bound">A</a> <a id="3045" class="Bound">R</a>
<a id="3047" class="CatchallClause Symbol">...</a><a id="3050" class="CatchallClause"> </a><a id="3051" class="CatchallClause Symbol">|</a><a id="3052" class="CatchallClause"> </a><a id="3053" class="CatchallClause Symbol">_</a><a id="3054" class="CatchallClause">     </a><a id="3059" class="CatchallClause Symbol">|</a><a id="3060" class="CatchallClause"> </a><a id="3061" class="CatchallClause Symbol">_</a>          <a id="3072" class="Symbol">=</a> <a id="3074" href="ComputationalModel.Strategy.html#2856" class="Function">oracleRequests</a> <a id="3089" class="Bound">A</a> <a id="3091" class="Bound">R</a>
<a id="3093" href="ComputationalModel.Strategy.html#2856" class="CatchallClause Function">oracleRequests</a><a id="3107" class="CatchallClause"> </a><a id="3108" href="ComputationalModel.Strategy.html#3108" class="CatchallClause Bound">A</a><a id="3109" class="CatchallClause"> </a><a id="3110" class="CatchallClause Symbol">(_</a><a id="3112" class="CatchallClause"> </a><a id="3113" href="Agda.Builtin.List.html#200" class="CatchallClause InductiveConstructor Operator">∷</a><a id="3114" class="CatchallClause"> </a><a id="3115" href="ComputationalModel.Strategy.html#3115" class="CatchallClause Bound">R</a><a id="3116" class="CatchallClause Symbol">)</a> <a id="3118" class="Symbol">=</a> <a id="3120" href="ComputationalModel.Strategy.html#2856" class="Function">oracleRequests</a> <a id="3135" href="ComputationalModel.Strategy.html#3108" class="Bound">A</a> <a id="3137" href="ComputationalModel.Strategy.html#3115" class="Bound">R</a>
<a id="3139" href="ComputationalModel.Strategy.html#2856" class="Function">oracleRequests</a> <a id="3154" class="Symbol">_</a> <a id="3156" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>      <a id="3164" class="Symbol">=</a> <a id="3166" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>

<a id="oracleInteractions"></a><a id="3170" href="ComputationalModel.Strategy.html#3170" class="Function">oracleInteractions</a> <a id="3189" class="Symbol">:</a> <a id="3191" href="ComputationalModel.Strategy.html#1138" class="Function">Run</a> <a id="3195" class="Symbol">→</a> <a id="3197" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="3202" href="ComputationalModel.Strategy.html#2803" class="Function">OracleInteraction</a>
<a id="3220" href="ComputationalModel.Strategy.html#3170" class="Function">oracleInteractions</a> <a id="3239" href="ComputationalModel.Strategy.html#3239" class="Bound">r</a> <a id="3241" class="Symbol">=</a> <a id="3243" href="ComputationalModel.Strategy.html#3263" class="Function">go</a> <a id="3246" href="ComputationalModel.Strategy.html#3239" class="Bound">r</a> <a id="3248" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
  <a id="3253" class="Keyword">where</a>
    <a id="3263" href="ComputationalModel.Strategy.html#3263" class="Function">go</a> <a id="3266" class="Symbol">:</a> <a id="3268" href="ComputationalModel.Strategy.html#1138" class="Function">Run</a> <a id="3272" class="Symbol">→</a> <a id="3274" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="3279" href="ComputationalModel.Strategy.html#2731" class="Function">OracleQuery</a> <a id="3291" class="Symbol">→</a> <a id="3293" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="3298" href="ComputationalModel.Strategy.html#2803" class="Function">OracleInteraction</a>
    <a id="3320" href="ComputationalModel.Strategy.html#3263" class="Function">go</a> <a id="3323" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>       <a id="3332" href="ComputationalModel.Strategy.html#3332" class="Bound">ws</a> <a id="3335" class="Symbol">=</a> <a id="3337" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
    <a id="3344" href="ComputationalModel.Strategy.html#3263" class="Function">go</a> <a id="3347" class="Symbol">(</a><a id="3348" href="ComputationalModel.Strategy.html#3348" class="Bound">l</a> <a id="3350" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3352" href="ComputationalModel.Strategy.html#3352" class="Bound">ls</a><a id="3354" class="Symbol">)</a> <a id="3356" href="ComputationalModel.Strategy.html#3356" class="Bound">ws</a>
       <a id="3366" class="Keyword">with</a> <a id="3371" href="ComputationalModel.Strategy.html#3348" class="Bound">l</a>
    <a id="3377" class="Symbol">...</a> <a id="3381" class="Symbol">|</a> <a id="3383" href="ComputationalModel.Strategy.html#3383" class="Bound">A</a> <a id="3385" href="ComputationalModel.Strategy.html#1027" class="InductiveConstructor Operator">→O∶</a> <a id="3389" href="ComputationalModel.Strategy.html#3389" class="Bound">m</a>   <a id="3393" class="Symbol">=</a> <a id="3395" href="ComputationalModel.Strategy.html#3263" class="Function">go</a> <a id="3398" class="Bound">ls</a> <a id="3401" class="Symbol">((</a><a id="3403" href="ComputationalModel.Strategy.html#3383" class="Bound">A</a> <a id="3405" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3407" href="ComputationalModel.Strategy.html#3389" class="Bound">m</a><a id="3408" class="Symbol">)</a> <a id="3410" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3412" class="Bound">ws</a><a id="3414" class="Symbol">)</a>
    <a id="3420" class="Symbol">...</a> <a id="3424" class="Symbol">|</a> <a id="3426" href="ComputationalModel.Strategy.html#1099" class="InductiveConstructor Operator">O→</a> <a id="3429" href="ComputationalModel.Strategy.html#3429" class="Bound">A</a> <a id="3431" href="ComputationalModel.Strategy.html#1099" class="InductiveConstructor Operator">∶</a> <a id="3433" href="ComputationalModel.Strategy.html#3433" class="Bound">m′</a> <a id="3436" class="Symbol">=</a> <a id="3438" href="Function.Base.html#4121" class="Function Operator">case</a> <a id="3443" href="Prelude.Lists.html#10316" class="Function">findElem</a> <a id="3452" class="Symbol">((</a><a id="3454" href="Prelude.DecEq.Core.html#141" class="Field Operator">_≟</a> <a id="3457" href="ComputationalModel.Strategy.html#3429" class="Bound">A</a><a id="3458" class="Symbol">)</a> <a id="3460" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="3462" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a><a id="3467" class="Symbol">)</a> <a id="3469" class="Bound">ws</a> <a id="3472" href="Function.Base.html#4121" class="Function Operator">of</a> <a id="3475" class="Symbol">λ</a>
      <a id="3483" class="Symbol">{</a> <a id="3485" class="Symbol">(</a><a id="3486" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="3491" class="Symbol">(</a><a id="3492" href="ComputationalModel.Strategy.html#3492" class="Bound">m</a> <a id="3494" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3496" href="ComputationalModel.Strategy.html#3496" class="Bound">ws′</a><a id="3499" class="Symbol">))</a> <a id="3502" class="Symbol">→</a> <a id="3504" class="Symbol">(</a><a id="3505" href="ComputationalModel.Strategy.html#3429" class="Bound">A</a> <a id="3507" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3509" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="3515" href="ComputationalModel.Strategy.html#3492" class="Bound">m</a> <a id="3517" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3519" href="ComputationalModel.Strategy.html#3433" class="Bound">m′</a><a id="3521" class="Symbol">)</a> <a id="3523" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3525" href="ComputationalModel.Strategy.html#3263" class="Function">go</a> <a id="3528" class="Bound">ls</a> <a id="3531" href="ComputationalModel.Strategy.html#3496" class="Bound">ws′</a>
      <a id="3541" class="Symbol">;</a> <a id="3543" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a>          <a id="3560" class="Symbol">→</a> <a id="3562" href="ComputationalModel.Strategy.html#3263" class="Function">go</a> <a id="3565" class="Bound">ls</a> <a id="3568" class="Bound">ws</a> <a id="3571" class="Symbol">}</a>
    <a id="3577" class="CatchallClause Symbol">...</a><a id="3580" class="CatchallClause"> </a><a id="3581" class="CatchallClause Symbol">|</a><a id="3582" class="CatchallClause"> </a><a id="3583" class="CatchallClause Symbol">_</a>         <a id="3593" class="Symbol">=</a> <a id="3595" href="ComputationalModel.Strategy.html#3263" class="Function">go</a> <a id="3598" class="Bound">ls</a> <a id="3601" class="Bound">ws</a>

<a id="3605" class="Comment">----------------------------------</a>
<a id="3640" class="Comment">-- Computational strategies.</a>


<a id="3671" class="Comment">-- Consistent update of the blockchain, in a run where certain components of the transaction have been made public.</a>
<a id="_▷ʳ_"></a><a id="3787" href="ComputationalModel.Strategy.html#3787" class="Function Operator">_▷ʳ_</a> <a id="3792" class="Symbol">:</a> <a id="3794" href="ComputationalModel.Strategy.html#1138" class="Function">Run</a> <a id="3798" class="Symbol">→</a> <a id="3800" href="Bitcoin.Tx.Base.html#1255" class="Function">∃Tx</a> <a id="3804" class="Symbol">→</a> <a id="3806" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="3810" href="ComputationalModel.Strategy.html#3810" class="Bound">R</a> <a id="3812" href="ComputationalModel.Strategy.html#3787" class="Function Operator">▷ʳ</a> <a id="3815" href="ComputationalModel.Strategy.html#3815" class="Bound">∃tx</a> <a id="3819" class="Symbol">=</a>
  <a id="3823" class="Keyword">let</a> <a id="3827" href="ComputationalModel.Strategy.html#3827" class="Bound">tx</a> <a id="3830" class="Symbol">=</a> <a id="3832" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="3838" class="Symbol">(</a><a id="3839" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="3845" href="ComputationalModel.Strategy.html#3815" class="Bound">∃tx</a><a id="3848" class="Symbol">)</a> <a id="3850" class="Keyword">in</a>
    <a id="3857" class="Symbol">(</a><a id="3858" href="ComputationalModel.Strategy.html#1580" class="Function">𝔹</a> <a id="3860" href="ComputationalModel.Strategy.html#3810" class="Bound">R</a> <a id="3862" href="Bitcoin.Consistency.html#1598" class="Record Operator">▷</a> <a id="3864" href="ComputationalModel.Strategy.html#3827" class="Bound">tx</a> <a id="3867" href="Bitcoin.Consistency.html#1598" class="Record Operator">,</a> <a id="3869" href="ComputationalModel.Strategy.html#1473" class="Function">δʳ</a> <a id="3872" href="ComputationalModel.Strategy.html#3810" class="Bound">R</a><a id="3873" class="Symbol">)</a>
  <a id="3877" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="3879" href="Data.Product.html#1806" class="Function">∃[</a> <a id="3882" href="ComputationalModel.Strategy.html#3882" class="Bound">B</a> <a id="3884" href="Data.Product.html#1806" class="Function">]</a> <a id="3886" class="Symbol">(</a><a id="3887" href="ComputationalModel.Strategy.html#3882" class="Bound">B</a> <a id="3889" href="ComputationalModel.Strategy.html#856" class="InductiveConstructor Operator">→∗∶</a> <a id="3893" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="3895" href="ComputationalModel.Strategy.html#3815" class="Bound">∃tx</a> <a id="3899" href="Bitcoin.Crypto.html#826" class="Field Operator">♯</a> <a id="3901" href="Data.List.Base.html#5025" class="Function Operator">]</a> <a id="3903" href="Prelude.Membership.html#384" class="Field Operator">∈</a> <a id="3905" href="ComputationalModel.Strategy.html#3810" class="Bound">R</a><a id="3906" class="Symbol">)</a>
  <a id="3910" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="3912" href="Data.Vec.Relation.Unary.All.html#1073" class="Datatype">V.All.All</a> <a id="3922" class="Symbol">(λ</a> <a id="3925" href="ComputationalModel.Strategy.html#3925" class="Bound">i</a> <a id="3927" class="Symbol">→</a> <a id="3929" href="Data.Product.html#1806" class="Function">∃[</a> <a id="3932" href="ComputationalModel.Strategy.html#3932" class="Bound">tx′</a> <a id="3936" href="Data.Product.html#1806" class="Function">]</a> <a id="3938" class="Symbol">((</a><a id="3940" href="ComputationalModel.Strategy.html#925" class="InductiveConstructor">submit</a> <a id="3947" href="ComputationalModel.Strategy.html#3932" class="Bound">tx′</a> <a id="3951" href="Prelude.Membership.html#384" class="Field Operator">∈</a> <a id="3953" href="ComputationalModel.Strategy.html#3810" class="Bound">R</a><a id="3954" class="Symbol">)</a> <a id="3956" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="3958" class="Symbol">(</a><a id="3959" href="ComputationalModel.Strategy.html#3932" class="Bound">tx′</a> <a id="3963" href="Bitcoin.Crypto.html#826" class="Field Operator">♯</a> <a id="3965" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="3967" href="Bitcoin.Tx.Base.html#394" class="Field">txId</a> <a id="3972" href="ComputationalModel.Strategy.html#3925" class="Bound">i</a><a id="3973" class="Symbol">)))</a> <a id="3977" class="Symbol">(</a><a id="3978" href="Bitcoin.Tx.Base.html#940" class="Field">inputs</a> <a id="3985" href="ComputationalModel.Strategy.html#3827" class="Bound">tx</a><a id="3987" class="Symbol">)</a>
  <a id="3991" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="3993" href="Data.Vec.Relation.Unary.All.html#1073" class="Datatype">V.All.All</a> <a id="4003" class="Symbol">(λ</a> <a id="4006" href="ComputationalModel.Strategy.html#4006" class="Bound">w</a> <a id="4008" class="Symbol">→</a> <a id="4010" href="Data.Product.html#1806" class="Function">∃[</a> <a id="4013" href="ComputationalModel.Strategy.html#4013" class="Bound">B</a> <a id="4015" href="Data.Product.html#1806" class="Function">]</a> <a id="4017" class="Symbol">(</a><a id="4018" href="ComputationalModel.Strategy.html#4013" class="Bound">B</a> <a id="4020" href="ComputationalModel.Strategy.html#856" class="InductiveConstructor Operator">→∗∶</a> <a id="4024" href="Data.Vec.Base.html#7438" class="Function">V.toList</a> <a id="4033" class="Symbol">(</a><a id="4034" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="4040" href="ComputationalModel.Strategy.html#4006" class="Bound">w</a><a id="4041" class="Symbol">)</a> <a id="4043" href="Prelude.Membership.html#384" class="Field Operator">∈</a> <a id="4045" href="ComputationalModel.Strategy.html#3810" class="Bound">R</a><a id="4046" class="Symbol">))</a> <a id="4049" class="Symbol">(</a><a id="4050" href="Bitcoin.Tx.Base.html#981" class="Field">wit</a> <a id="4054" href="ComputationalModel.Strategy.html#3827" class="Bound">tx</a><a id="4056" class="Symbol">)</a>

<a id="4059" class="Keyword">record</a> <a id="ParticipantStrategy"></a><a id="4066" href="ComputationalModel.Strategy.html#4066" class="Record">ParticipantStrategy</a> <a id="4086" class="Symbol">(</a><a id="4087" href="ComputationalModel.Strategy.html#4087" class="Bound">A</a> <a id="4089" class="Symbol">:</a> <a id="4091" href="ComputationalModel.Strategy.html#410" class="Bound">Participant</a><a id="4102" class="Symbol">)</a> <a id="4104" class="Symbol">:</a> <a id="4106" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="4110" class="Keyword">where</a>
  <a id="4118" class="Keyword">field</a>
    <a id="ParticipantStrategy.Σ"></a><a id="4128" href="ComputationalModel.Strategy.html#4128" class="Field">Σ</a> <a id="4130" class="Symbol">:</a> <a id="4132" href="ComputationalModel.Strategy.html#1138" class="Function">Run</a> <a id="4136" class="Symbol">→</a> <a id="4138" href="ComputationalModel.Strategy.html#1158" class="Function">Labels</a>

    <a id="ParticipantStrategy.valid"></a><a id="4150" href="ComputationalModel.Strategy.html#4150" class="Field">valid</a> <a id="4156" class="Symbol">:</a> <a id="4158" class="Comment">-- participant is honest</a>
            <a id="4195" href="ComputationalModel.Strategy.html#4087" class="Bound">A</a> <a id="4197" href="Prelude.Membership.html#384" class="Field Operator">∈</a> <a id="4199" href="ComputationalModel.Strategy.html#578" class="Function">Hon</a>
            <a id="4215" class="Comment">-- only valid computational labels</a>
          <a id="4260" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4262" class="Symbol">(∀</a> <a id="4265" class="Symbol">{</a><a id="4266" href="ComputationalModel.Strategy.html#4266" class="Bound">R</a> <a id="4268" href="ComputationalModel.Strategy.html#4268" class="Bound">α</a><a id="4269" class="Symbol">}</a> <a id="4271" class="Symbol">→</a> <a id="4273" class="Keyword">let</a> <a id="4277" href="ComputationalModel.Strategy.html#4277" class="Bound">R∗</a> <a id="4280" class="Symbol">=</a> <a id="4282" href="ComputationalModel.Strategy.html#1238" class="Function">strip</a> <a id="4288" href="ComputationalModel.Strategy.html#4087" class="Bound">A</a> <a id="4290" href="ComputationalModel.Strategy.html#4266" class="Bound">R</a> <a id="4292" class="Keyword">in</a>
               <a id="4310" href="ComputationalModel.Strategy.html#4268" class="Bound">α</a> <a id="4312" href="Prelude.Membership.html#384" class="Field Operator">∈</a> <a id="4314" href="ComputationalModel.Strategy.html#4128" class="Field">Σ</a> <a id="4316" href="ComputationalModel.Strategy.html#4277" class="Bound">R∗</a>
             <a id="4332" class="Symbol">→</a> <a id="4334" class="Symbol">(</a> <a id="4336" class="Comment">-- (1) message from A</a>
                 <a id="4375" href="Data.Product.html#1806" class="Function">∃[</a> <a id="4378" href="ComputationalModel.Strategy.html#4378" class="Bound">m</a> <a id="4380" href="Data.Product.html#1806" class="Function">]</a>
                   <a id="4401" class="Symbol">(</a> <a id="4403" class="Symbol">(</a><a id="4404" href="ComputationalModel.Strategy.html#4268" class="Bound">α</a> <a id="4406" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4408" href="ComputationalModel.Strategy.html#4087" class="Bound">A</a> <a id="4410" href="ComputationalModel.Strategy.html#856" class="InductiveConstructor Operator">→∗∶</a> <a id="4414" href="ComputationalModel.Strategy.html#4378" class="Bound">m</a><a id="4415" class="Symbol">)</a>
                   <a id="4436" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="4438" class="Symbol">(</a><a id="4439" href="ComputationalModel.Strategy.html#4268" class="Bound">α</a> <a id="4441" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4443" href="ComputationalModel.Strategy.html#4087" class="Bound">A</a> <a id="4445" href="ComputationalModel.Strategy.html#1027" class="InductiveConstructor Operator">→O∶</a> <a id="4449" href="ComputationalModel.Strategy.html#4378" class="Bound">m</a><a id="4450" class="Symbol">)</a> <a id="4452" class="Symbol">)</a>
                 <a id="4471" class="Comment">-- (2) new transaction</a>
               <a id="4509" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="4511" href="Data.Product.html#1806" class="Function">∃[</a> <a id="4514" href="ComputationalModel.Strategy.html#4514" class="Bound">tx</a> <a id="4517" href="Data.Product.html#1806" class="Function">]</a>
                    <a id="4539" class="Symbol">(</a> <a id="4541" class="Symbol">(</a><a id="4542" href="ComputationalModel.Strategy.html#4268" class="Bound">α</a> <a id="4544" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4546" href="ComputationalModel.Strategy.html#925" class="InductiveConstructor">submit</a> <a id="4553" href="ComputationalModel.Strategy.html#4514" class="Bound">tx</a><a id="4555" class="Symbol">)</a>
                    <a id="4577" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4579" class="Symbol">(</a><a id="4580" href="ComputationalModel.Strategy.html#4277" class="Bound">R∗</a> <a id="4583" href="ComputationalModel.Strategy.html#3787" class="Function Operator">▷ʳ</a> <a id="4586" href="ComputationalModel.Strategy.html#4514" class="Bound">tx</a><a id="4588" class="Symbol">)</a> <a id="4590" class="Symbol">)</a>
                 <a id="4609" class="Comment">-- (3) delay</a>
               <a id="4637" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="4639" href="Data.Product.html#1806" class="Function">∃[</a> <a id="4642" href="ComputationalModel.Strategy.html#4642" class="Bound">δ</a> <a id="4644" href="Data.Product.html#1806" class="Function">]</a> <a id="4646" class="Symbol">(</a><a id="4647" href="ComputationalModel.Strategy.html#4268" class="Bound">α</a> <a id="4649" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4651" href="ComputationalModel.Strategy.html#970" class="InductiveConstructor">delay</a> <a id="4657" href="ComputationalModel.Strategy.html#4642" class="Bound">δ</a><a id="4658" class="Symbol">)</a>
               <a id="4675" class="Symbol">)</a>
            <a id="4689" class="Symbol">)</a>
            <a id="4703" class="Comment">-- persistence</a>
          <a id="4728" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4730" class="Symbol">(∀</a> <a id="4733" class="Symbol">{</a><a id="4734" href="ComputationalModel.Strategy.html#4734" class="Bound">R</a> <a id="4736" href="ComputationalModel.Strategy.html#4736" class="Bound">α</a><a id="4737" class="Symbol">}</a>
             <a id="4752" class="Symbol">→</a> <a id="4754" class="Keyword">let</a>
                 <a id="4775" href="ComputationalModel.Strategy.html#4775" class="Bound">R∗</a> <a id="4778" class="Symbol">=</a> <a id="4780" href="ComputationalModel.Strategy.html#1238" class="Function">strip</a> <a id="4786" href="ComputationalModel.Strategy.html#4087" class="Bound">A</a> <a id="4788" href="ComputationalModel.Strategy.html#4734" class="Bound">R</a>
                 <a id="4807" href="ComputationalModel.Strategy.html#4807" class="Bound">Λ</a>  <a id="4810" class="Symbol">=</a> <a id="4812" href="ComputationalModel.Strategy.html#4128" class="Field">Σ</a> <a id="4814" href="ComputationalModel.Strategy.html#4775" class="Bound">R∗</a>
                 <a id="4834" href="ComputationalModel.Strategy.html#4834" class="Bound">R′</a> <a id="4837" class="Symbol">=</a> <a id="4839" href="ComputationalModel.Strategy.html#4736" class="Bound">α</a> <a id="4841" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="4843" href="ComputationalModel.Strategy.html#4775" class="Bound">R∗</a>
                 <a id="4863" href="ComputationalModel.Strategy.html#4863" class="Bound">Λ′</a> <a id="4866" class="Symbol">=</a> <a id="4868" href="ComputationalModel.Strategy.html#4128" class="Field">Σ</a> <a id="4870" href="ComputationalModel.Strategy.html#4834" class="Bound">R′</a>
               <a id="4888" class="Keyword">in</a>
               <a id="4906" href="ComputationalModel.Strategy.html#4736" class="Bound">α</a> <a id="4908" href="Prelude.Membership.html#384" class="Field Operator">∈</a> <a id="4910" href="ComputationalModel.Strategy.html#4807" class="Bound">Λ</a>
             <a id="4925" class="Symbol">→</a> <a id="4927" href="Bitcoin.Consistency.html#2957" class="Datatype">ConsistentBlockchain</a> <a id="4948" class="Symbol">(</a><a id="4949" href="ComputationalModel.Strategy.html#1580" class="Function">𝔹</a> <a id="4951" href="ComputationalModel.Strategy.html#4834" class="Bound">R′</a><a id="4953" class="Symbol">)</a>
             <a id="4968" class="Symbol">→</a> <a id="4970" class="Symbol">(∀</a> <a id="4973" class="Symbol">{</a><a id="4974" href="ComputationalModel.Strategy.html#4974" class="Bound">α′</a><a id="4976" class="Symbol">}</a> <a id="4978" class="Symbol">→</a> <a id="4980" href="ComputationalModel.Strategy.html#4974" class="Bound">α′</a> <a id="4983" href="Prelude.Membership.html#384" class="Field Operator">∈</a> <a id="4985" href="ComputationalModel.Strategy.html#4807" class="Bound">Λ</a> <a id="4987" class="Symbol">→</a> <a id="4989" href="ComputationalModel.Strategy.html#4974" class="Bound">α′</a> <a id="4992" href="Relation.Binary.PropositionalEquality.Core.html#830" class="Function Operator">≢</a> <a id="4994" href="ComputationalModel.Strategy.html#4736" class="Bound">α</a> <a id="4996" class="Symbol">→</a> <a id="4998" href="ComputationalModel.Strategy.html#4974" class="Bound">α′</a> <a id="5001" href="Prelude.Membership.html#384" class="Field Operator">∈</a> <a id="5003" href="ComputationalModel.Strategy.html#4863" class="Bound">Λ′</a><a id="5005" class="Symbol">)</a>
             <a id="5020" class="Comment">-- → (∀ {tx} → submit tx ∈ Λ → 𝔹 R′ → submit tx ∈ Λ′)</a>
             <a id="5087" class="Comment">-- × (∀ {m} → (A →∗∶ m) ∈ Λ → (A →∗∶ m) ≢ α → (A →∗∶ m) ∈ Λ′)</a>
             <a id="5162" class="Comment">-- × (∀ {m} → (A →O∶ m) ∈ Λ → (A →O∶ m) ≢ α → (A →O∶ m) ∈ Λ′)</a>
            <a id="5236" class="Symbol">)</a>

<a id="5239" class="Keyword">open</a> <a id="5244" href="ComputationalModel.Strategy.html#4066" class="Module">ParticipantStrategy</a> <a id="5264" class="Keyword">public</a>


<a id="HonestStrategies"></a><a id="5273" href="ComputationalModel.Strategy.html#5273" class="Function">HonestStrategies</a> <a id="5290" class="Symbol">:</a> <a id="5292" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="5296" href="ComputationalModel.Strategy.html#5273" class="Function">HonestStrategies</a> <a id="5313" class="Symbol">=</a> <a id="5315" class="Symbol">∀</a> <a id="5317" class="Symbol">{</a><a id="5318" href="ComputationalModel.Strategy.html#5318" class="Bound">A</a><a id="5319" class="Symbol">}</a> <a id="5321" class="Symbol">→</a> <a id="5323" href="ComputationalModel.Strategy.html#5318" class="Bound">A</a> <a id="5325" href="Prelude.Membership.html#384" class="Field Operator">∈</a> <a id="5327" href="ComputationalModel.Strategy.html#578" class="Function">Hon</a> <a id="5331" class="Symbol">→</a> <a id="5333" href="ComputationalModel.Strategy.html#4066" class="Record">ParticipantStrategy</a> <a id="5353" href="ComputationalModel.Strategy.html#5318" class="Bound">A</a>

<a id="HonestMoves"></a><a id="5356" href="ComputationalModel.Strategy.html#5356" class="Function">HonestMoves</a> <a id="5368" class="Symbol">:</a> <a id="5370" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="5374" href="ComputationalModel.Strategy.html#5356" class="Function">HonestMoves</a> <a id="5386" class="Symbol">=</a> <a id="5388" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="5393" class="Symbol">(</a><a id="5394" href="ComputationalModel.Strategy.html#410" class="Bound">Participant</a> <a id="5406" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="5408" href="ComputationalModel.Strategy.html#1158" class="Function">Labels</a><a id="5414" class="Symbol">)</a>

<a id="5417" class="Keyword">variable</a>
  <a id="5428" href="ComputationalModel.Strategy.html#5428" class="Generalizable">moves</a> <a id="5434" class="Symbol">:</a> <a id="5436" href="ComputationalModel.Strategy.html#5356" class="Function">HonestMoves</a>

<a id="5449" class="Keyword">module</a> <a id="AdvM"></a><a id="5456" href="ComputationalModel.Strategy.html#5456" class="Module">AdvM</a> <a id="5461" class="Symbol">(</a><a id="5462" href="ComputationalModel.Strategy.html#5462" class="Bound">Adv</a> <a id="5466" class="Symbol">:</a> <a id="5468" href="ComputationalModel.Strategy.html#410" class="Bound">Participant</a><a id="5479" class="Symbol">)</a> <a id="5481" class="Symbol">(</a><a id="5482" href="ComputationalModel.Strategy.html#5482" class="Bound">Adv∉</a> <a id="5487" class="Symbol">:</a> <a id="5489" href="ComputationalModel.Strategy.html#5462" class="Bound">Adv</a> <a id="5493" href="Prelude.Membership.html#457" class="Function Operator">∉</a> <a id="5495" href="ComputationalModel.Strategy.html#578" class="Function">Hon</a><a id="5498" class="Symbol">)</a> <a id="5500" class="Keyword">where</a>

  <a id="5509" class="Keyword">record</a> <a id="AdvM.AdversaryStrategy"></a><a id="5516" href="ComputationalModel.Strategy.html#5516" class="Record">AdversaryStrategy</a> <a id="5534" class="Symbol">:</a> <a id="5536" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="5540" class="Keyword">where</a>
    <a id="5550" class="Keyword">field</a>
      <a id="AdvM.AdversaryStrategy.Σₐ"></a><a id="5562" href="ComputationalModel.Strategy.html#5562" class="Field">Σₐ</a> <a id="5565" class="Symbol">:</a> <a id="5567" href="ComputationalModel.Strategy.html#1138" class="Function">Run</a> <a id="5571" class="Symbol">→</a> <a id="5573" href="ComputationalModel.Strategy.html#5356" class="Function">HonestMoves</a> <a id="5585" class="Symbol">→</a> <a id="5587" href="ComputationalModel.Strategy.html#813" class="Datatype">Label</a>

      <a id="AdvM.AdversaryStrategy.valid"></a><a id="5600" href="ComputationalModel.Strategy.html#5600" class="Field">valid</a> <a id="5606" class="Symbol">:</a>
        <a id="5616" class="Symbol">∀</a> <a id="5618" class="Symbol">{</a><a id="5619" href="ComputationalModel.Strategy.html#5619" class="Bound">R</a> <a id="5621" href="ComputationalModel.Strategy.html#5621" class="Bound">moves</a><a id="5626" class="Symbol">}</a> <a id="5628" class="Symbol">→</a>
          <a id="5640" class="Keyword">let</a>
            <a id="5656" href="ComputationalModel.Strategy.html#5656" class="Bound">R∗</a> <a id="5659" class="Symbol">=</a> <a id="5661" href="ComputationalModel.Strategy.html#1238" class="Function">strip</a> <a id="5667" href="ComputationalModel.Strategy.html#5462" class="Bound">Adv</a> <a id="5671" href="ComputationalModel.Strategy.html#5619" class="Bound">R</a>
            <a id="5685" href="ComputationalModel.Strategy.html#5685" class="Bound">α</a>  <a id="5688" class="Symbol">=</a> <a id="5690" href="ComputationalModel.Strategy.html#5562" class="Field">Σₐ</a> <a id="5693" href="ComputationalModel.Strategy.html#5656" class="Bound">R∗</a> <a id="5696" href="ComputationalModel.Strategy.html#5621" class="Bound">moves</a> <a id="5702" class="Comment">-- T0D0 should the honest moves be stripped?</a>
          <a id="5757" class="Keyword">in</a>
          <a id="5770" class="Symbol">(</a> <a id="5772" class="Comment">-- (1) impersonate another participant</a>
            <a id="5823" href="Data.Product.html#1806" class="Function">∃[</a> <a id="5826" href="ComputationalModel.Strategy.html#5826" class="Bound">m</a> <a id="5828" href="Data.Product.html#1806" class="Function">]</a>
              <a id="5844" class="Symbol">(</a> <a id="5846" href="Data.Product.html#1806" class="Function">∃[</a> <a id="5849" href="ComputationalModel.Strategy.html#5849" class="Bound">A</a> <a id="5851" href="Data.Product.html#1806" class="Function">]</a> <a id="5853" class="Symbol">(</a><a id="5854" href="ComputationalModel.Strategy.html#5685" class="Bound">α</a> <a id="5856" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="5858" href="ComputationalModel.Strategy.html#5849" class="Bound">A</a> <a id="5860" href="ComputationalModel.Strategy.html#856" class="InductiveConstructor Operator">→∗∶</a> <a id="5864" href="ComputationalModel.Strategy.html#5826" class="Bound">m</a><a id="5865" class="Symbol">)</a>
              <a id="5881" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="5883" class="Symbol">(</a><a id="5884" href="ComputationalModel.Strategy.html#5685" class="Bound">α</a> <a id="5886" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="5888" href="ComputationalModel.Strategy.html#5462" class="Bound">Adv</a> <a id="5892" href="ComputationalModel.Strategy.html#1027" class="InductiveConstructor Operator">→O∶</a> <a id="5896" href="ComputationalModel.Strategy.html#5826" class="Bound">m</a><a id="5897" class="Symbol">)</a> <a id="5899" class="Symbol">)</a>
            <a id="5913" class="Comment">-- (2) consistently update the blockchain</a>
          <a id="5965" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="5967" href="Data.Product.html#1806" class="Function">∃[</a> <a id="5970" href="ComputationalModel.Strategy.html#5970" class="Bound">tx</a> <a id="5973" href="Data.Product.html#1806" class="Function">]</a>
              <a id="5989" class="Symbol">(</a> <a id="5991" class="Symbol">(</a><a id="5992" href="ComputationalModel.Strategy.html#5685" class="Bound">α</a> <a id="5994" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="5996" href="ComputationalModel.Strategy.html#925" class="InductiveConstructor">submit</a> <a id="6003" href="ComputationalModel.Strategy.html#5970" class="Bound">tx</a><a id="6005" class="Symbol">)</a>
              <a id="6021" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="6023" class="Symbol">(</a><a id="6024" href="ComputationalModel.Strategy.html#5656" class="Bound">R∗</a> <a id="6027" href="ComputationalModel.Strategy.html#3787" class="Function Operator">▷ʳ</a> <a id="6030" href="ComputationalModel.Strategy.html#5970" class="Bound">tx</a><a id="6032" class="Symbol">)</a> <a id="6034" class="Symbol">)</a>
            <a id="6048" class="Comment">-- (3) delay, if all honest participants agree</a>
          <a id="6105" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="6107" href="Data.Product.html#1806" class="Function">∃[</a> <a id="6110" href="ComputationalModel.Strategy.html#6110" class="Bound">δ</a> <a id="6112" href="Data.Product.html#1806" class="Function">]</a>
              <a id="6128" class="Symbol">(</a> <a id="6130" class="Symbol">(</a><a id="6131" href="ComputationalModel.Strategy.html#5685" class="Bound">α</a> <a id="6133" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="6135" href="ComputationalModel.Strategy.html#970" class="InductiveConstructor">delay</a> <a id="6141" href="ComputationalModel.Strategy.html#6110" class="Bound">δ</a><a id="6142" class="Symbol">)</a>
              <a id="6158" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="6160" href="Data.List.Relation.Unary.All.html#1444" class="Datatype">All</a> <a id="6164" class="Symbol">(λ{</a> <a id="6168" class="Symbol">(_</a> <a id="6171" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6173" href="ComputationalModel.Strategy.html#6173" class="Bound">Λ</a><a id="6174" class="Symbol">)</a> <a id="6176" class="Symbol">→</a> <a id="6178" class="Symbol">(</a><a id="6179" href="ComputationalModel.Strategy.html#6173" class="Bound">Λ</a> <a id="6181" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="6183" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="6185" class="Symbol">)</a> <a id="6187" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="6189" href="Data.List.Relation.Unary.Any.html#1156" class="Datatype">Any</a> <a id="6193" class="Symbol">(λ{</a> <a id="6197" class="Symbol">(</a><a id="6198" href="ComputationalModel.Strategy.html#970" class="InductiveConstructor">delay</a> <a id="6204" href="ComputationalModel.Strategy.html#6204" class="Bound">δ′</a><a id="6206" class="Symbol">)</a> <a id="6208" class="Symbol">→</a> <a id="6210" href="ComputationalModel.Strategy.html#6204" class="Bound">δ′</a> <a id="6213" href="Prelude.Ord.html#269" class="Function Operator">≥</a> <a id="6215" href="ComputationalModel.Strategy.html#6110" class="Bound">δ</a> <a id="6217" class="Symbol">;</a> <a id="6219" class="CatchallClause Symbol">_</a> <a id="6221" class="Symbol">→</a> <a id="6223" href="Data.Empty.html#526" class="Datatype">⊥</a> <a id="6225" class="Symbol">})</a> <a id="6228" href="ComputationalModel.Strategy.html#6173" class="Bound">Λ</a><a id="6229" class="Symbol">})</a> <a id="6232" href="ComputationalModel.Strategy.html#5621" class="Bound">moves</a> <a id="6238" class="Symbol">)</a>
          <a id="6250" class="Symbol">)</a>

  <a id="6255" class="Keyword">open</a> <a id="6260" href="ComputationalModel.Strategy.html#5516" class="Module">AdversaryStrategy</a> <a id="6278" class="Keyword">public</a>

  <a id="AdvM.Strategies"></a><a id="6288" href="ComputationalModel.Strategy.html#6288" class="Function">Strategies</a> <a id="6299" class="Symbol">:</a> <a id="6301" href="Agda.Primitive.html#326" class="Primitive">Set</a>
  <a id="6307" href="ComputationalModel.Strategy.html#6288" class="Function">Strategies</a> <a id="6318" class="Symbol">=</a> <a id="6320" href="ComputationalModel.Strategy.html#5516" class="Record">AdversaryStrategy</a> <a id="6338" class="Comment">-- adversarial strategy</a>
             <a id="6375" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="6377" href="ComputationalModel.Strategy.html#5273" class="Function">HonestStrategies</a>  <a id="6395" class="Comment">-- participant strategies</a>

  <a id="6424" class="Keyword">variable</a>
    <a id="6437" href="ComputationalModel.Strategy.html#6437" class="Generalizable">SS</a> <a id="6440" class="Symbol">:</a> <a id="6442" href="ComputationalModel.Strategy.html#6288" class="Function">Strategies</a>

  <a id="AdvM.runHonestAll"></a><a id="6456" href="ComputationalModel.Strategy.html#6456" class="Function">runHonestAll</a> <a id="6469" class="Symbol">:</a> <a id="6471" href="ComputationalModel.Strategy.html#1138" class="Function">Run</a> <a id="6475" class="Symbol">→</a> <a id="6477" href="ComputationalModel.Strategy.html#5273" class="Function">HonestStrategies</a> <a id="6494" class="Symbol">→</a> <a id="6496" href="ComputationalModel.Strategy.html#5356" class="Function">HonestMoves</a>
  <a id="6510" href="ComputationalModel.Strategy.html#6456" class="Function">runHonestAll</a> <a id="6523" href="ComputationalModel.Strategy.html#6523" class="Bound">R</a> <a id="6525" href="ComputationalModel.Strategy.html#6525" class="Bound">S</a> <a id="6527" class="Symbol">=</a> <a id="6529" href="Prelude.Membership.html#1190" class="Field">mapWith∈</a> <a id="6538" href="ComputationalModel.Strategy.html#578" class="Function">Hon</a> <a id="6542" class="Symbol">(λ</a> <a id="6545" class="Symbol">{</a><a id="6546" href="ComputationalModel.Strategy.html#6546" class="Bound">A</a><a id="6547" class="Symbol">}</a> <a id="6549" href="ComputationalModel.Strategy.html#6549" class="Bound">A∈</a> <a id="6552" class="Symbol">→</a> <a id="6554" href="ComputationalModel.Strategy.html#6546" class="Bound">A</a> <a id="6556" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6558" href="ComputationalModel.Strategy.html#4128" class="Field">Σ</a> <a id="6560" class="Symbol">(</a><a id="6561" href="ComputationalModel.Strategy.html#6525" class="Bound">S</a> <a id="6563" href="ComputationalModel.Strategy.html#6549" class="Bound">A∈</a><a id="6565" class="Symbol">)</a> <a id="6567" class="Symbol">(</a><a id="6568" href="ComputationalModel.Strategy.html#1238" class="Function">strip</a> <a id="6574" href="ComputationalModel.Strategy.html#6546" class="Bound">A</a> <a id="6576" href="ComputationalModel.Strategy.html#6523" class="Bound">R</a><a id="6577" class="Symbol">))</a>

  <a id="AdvM.runAdversary"></a><a id="6583" href="ComputationalModel.Strategy.html#6583" class="Function">runAdversary</a> <a id="6596" class="Symbol">:</a> <a id="6598" href="ComputationalModel.Strategy.html#6288" class="Function">Strategies</a> <a id="6609" class="Symbol">→</a> <a id="6611" href="ComputationalModel.Strategy.html#1138" class="Function">Run</a> <a id="6615" class="Symbol">→</a> <a id="6617" href="ComputationalModel.Strategy.html#813" class="Datatype">Label</a>
  <a id="6625" href="ComputationalModel.Strategy.html#6583" class="Function">runAdversary</a> <a id="6638" class="Symbol">(</a><a id="6639" href="ComputationalModel.Strategy.html#6639" class="Bound">S†</a> <a id="6642" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6644" href="ComputationalModel.Strategy.html#6644" class="Bound">S</a><a id="6645" class="Symbol">)</a> <a id="6647" href="ComputationalModel.Strategy.html#6647" class="Bound">R</a> <a id="6649" class="Symbol">=</a> <a id="6651" href="ComputationalModel.Strategy.html#5562" class="Field">Σₐ</a> <a id="6654" href="ComputationalModel.Strategy.html#6639" class="Bound">S†</a> <a id="6657" class="Symbol">(</a><a id="6658" href="ComputationalModel.Strategy.html#1238" class="Function">strip</a> <a id="6664" href="ComputationalModel.Strategy.html#5462" class="Bound">Adv</a> <a id="6668" href="ComputationalModel.Strategy.html#6647" class="Bound">R</a><a id="6669" class="Symbol">)</a> <a id="6671" class="Symbol">(</a><a id="6672" href="ComputationalModel.Strategy.html#6456" class="Function">runHonestAll</a> <a id="6685" href="ComputationalModel.Strategy.html#6647" class="Bound">R</a> <a id="6687" href="ComputationalModel.Strategy.html#6644" class="Bound">S</a><a id="6688" class="Symbol">)</a>

  <a id="6693" class="Keyword">infix</a> <a id="6699" class="Number">-1</a> <a id="6702" href="ComputationalModel.Strategy.html#6729" class="Datatype Operator">_-pre-conforms-to-_</a>
  <a id="6724" class="Keyword">data</a> <a id="AdvM._-pre-conforms-to-_"></a><a id="6729" href="ComputationalModel.Strategy.html#6729" class="Datatype Operator">_-pre-conforms-to-_</a> <a id="6749" class="Symbol">:</a> <a id="6751" href="ComputationalModel.Strategy.html#1138" class="Function">Run</a> <a id="6755" class="Symbol">→</a> <a id="6757" href="ComputationalModel.Strategy.html#6288" class="Function">Strategies</a> <a id="6768" class="Symbol">→</a> <a id="6770" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="6774" class="Keyword">where</a>

    <a id="AdvM._-pre-conforms-to-_.base"></a><a id="6785" href="ComputationalModel.Strategy.html#6785" class="InductiveConstructor">base</a> <a id="6790" class="Symbol">:</a> <a id="6792" href="ComputationalModel.Strategy.html#2324" class="Function">Initial</a> <a id="6800" href="ComputationalModel.Strategy.html#1207" class="Generalizable">R</a>
           <a id="6813" class="Comment">----------------------</a>
         <a id="6845" class="Symbol">→</a> <a id="6847" href="ComputationalModel.Strategy.html#1207" class="Generalizable">R</a> <a id="6849" href="ComputationalModel.Strategy.html#6729" class="Datatype Operator">-pre-conforms-to-</a> <a id="6867" href="ComputationalModel.Strategy.html#6437" class="Generalizable">SS</a>

    <a id="AdvM._-pre-conforms-to-_.step"></a><a id="6875" href="ComputationalModel.Strategy.html#6875" class="InductiveConstructor">step</a> <a id="6880" class="Symbol">:</a>
      <a id="6888" class="Keyword">let</a>
        <a id="6900" class="Symbol">(</a><a id="6901" href="ComputationalModel.Strategy.html#6901" class="Bound">S†</a> <a id="6904" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6906" href="ComputationalModel.Strategy.html#6906" class="Bound">S</a><a id="6907" class="Symbol">)</a> <a id="6909" class="Symbol">=</a> <a id="6911" href="ComputationalModel.Strategy.html#6437" class="Generalizable">SS</a>
        <a id="6922" href="ComputationalModel.Strategy.html#6922" class="Bound">moves</a> <a id="6928" class="Symbol">=</a> <a id="6930" href="ComputationalModel.Strategy.html#6456" class="Function">runHonestAll</a> <a id="6943" href="ComputationalModel.Strategy.html#1207" class="Generalizable">R</a> <a id="6945" href="ComputationalModel.Strategy.html#6906" class="Bound">S</a>
        <a id="6955" href="ComputationalModel.Strategy.html#6955" class="Bound">Λ</a> <a id="6957" class="Symbol">=</a> <a id="6959" href="Data.List.Base.html#1544" class="Function">map</a> <a id="6963" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="6969" href="ComputationalModel.Strategy.html#6922" class="Bound">moves</a>
        <a id="6983" href="ComputationalModel.Strategy.html#6983" class="Bound">α</a> <a id="6985" class="Symbol">=</a> <a id="6987" href="ComputationalModel.Strategy.html#5562" class="Field">Σₐ</a> <a id="6990" href="ComputationalModel.Strategy.html#6901" class="Bound">S†</a> <a id="6993" class="Symbol">(</a><a id="6994" href="ComputationalModel.Strategy.html#1238" class="Function">strip</a> <a id="7000" href="ComputationalModel.Strategy.html#5462" class="Bound">Adv</a> <a id="7004" href="ComputationalModel.Strategy.html#1207" class="Generalizable">R</a><a id="7005" class="Symbol">)</a> <a id="7007" href="ComputationalModel.Strategy.html#6922" class="Bound">moves</a>
      <a id="7019" class="Keyword">in</a>
        <a id="7030" href="ComputationalModel.Strategy.html#1207" class="Generalizable">R</a> <a id="7032" href="ComputationalModel.Strategy.html#6729" class="Datatype Operator">-pre-conforms-to-</a> <a id="7050" href="ComputationalModel.Strategy.html#6437" class="Generalizable">SS</a>
      <a id="7059" class="Symbol">→</a> <a id="7061" href="ComputationalModel.Strategy.html#2546" class="Function">oracleMessages</a> <a id="7076" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="7078" href="ComputationalModel.Strategy.html#6983" class="Bound">α</a> <a id="7080" href="Data.List.Base.html#5025" class="Function Operator">]</a> <a id="7082" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7084" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
      <a id="7093" class="Symbol">→</a> <a id="7095" href="Data.List.Base.html#4450" class="Function">concatMap</a> <a id="7105" href="ComputationalModel.Strategy.html#2546" class="Function">oracleMessages</a> <a id="7120" href="ComputationalModel.Strategy.html#6955" class="Bound">Λ</a> <a id="7122" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7124" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
        <a id="7135" class="Comment">-------------------------------</a>
      <a id="7173" class="Symbol">→</a> <a id="7175" href="ComputationalModel.Strategy.html#6983" class="Bound">α</a> <a id="7177" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="7179" href="ComputationalModel.Strategy.html#1207" class="Generalizable">R</a> <a id="7181" href="ComputationalModel.Strategy.html#6729" class="Datatype Operator">-pre-conforms-to-</a> <a id="7199" href="ComputationalModel.Strategy.html#6437" class="Generalizable">SS</a>

    <a id="AdvM._-pre-conforms-to-_.oracle-adv"></a><a id="7207" href="ComputationalModel.Strategy.html#7207" class="InductiveConstructor">oracle-adv</a> <a id="7218" class="Symbol">:</a> <a id="7220" class="Symbol">∀</a> <a id="7222" class="Symbol">{</a><a id="7223" href="ComputationalModel.Strategy.html#7223" class="Bound">m</a> <a id="7225" href="ComputationalModel.Strategy.html#7225" class="Bound">hm</a> <a id="7228" class="Symbol">:</a> <a id="7230" href="ComputationalModel.Strategy.html#790" class="Function">Message</a><a id="7237" class="Symbol">}</a> <a id="7239" class="Symbol">→</a>
      <a id="7247" class="Keyword">let</a>
        <a id="7259" class="Symbol">(</a><a id="7260" href="ComputationalModel.Strategy.html#7260" class="Bound">S†</a> <a id="7263" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7265" href="ComputationalModel.Strategy.html#7265" class="Bound">S</a><a id="7266" class="Symbol">)</a> <a id="7268" class="Symbol">=</a> <a id="7270" href="ComputationalModel.Strategy.html#6437" class="Generalizable">SS</a>
        <a id="7281" href="ComputationalModel.Strategy.html#7281" class="Bound">moves</a> <a id="7287" class="Symbol">=</a> <a id="7289" href="ComputationalModel.Strategy.html#6456" class="Function">runHonestAll</a> <a id="7302" href="ComputationalModel.Strategy.html#1207" class="Generalizable">R</a> <a id="7304" href="ComputationalModel.Strategy.html#7265" class="Bound">S</a>
        <a id="7314" href="ComputationalModel.Strategy.html#7314" class="Bound">Λ</a> <a id="7316" class="Symbol">=</a> <a id="7318" href="Data.List.Base.html#1544" class="Function">map</a> <a id="7322" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="7328" href="ComputationalModel.Strategy.html#7281" class="Bound">moves</a>
        <a id="7342" href="ComputationalModel.Strategy.html#7342" class="Bound">α</a> <a id="7344" class="Symbol">=</a> <a id="7346" href="ComputationalModel.Strategy.html#5562" class="Field">Σₐ</a> <a id="7349" href="ComputationalModel.Strategy.html#7260" class="Bound">S†</a> <a id="7352" class="Symbol">(</a><a id="7353" href="ComputationalModel.Strategy.html#1238" class="Function">strip</a> <a id="7359" href="ComputationalModel.Strategy.html#5462" class="Bound">Adv</a> <a id="7363" href="ComputationalModel.Strategy.html#1207" class="Generalizable">R</a><a id="7364" class="Symbol">)</a> <a id="7366" href="ComputationalModel.Strategy.html#7281" class="Bound">moves</a>
      <a id="7378" class="Keyword">in</a>
        <a id="7389" href="ComputationalModel.Strategy.html#1207" class="Generalizable">R</a> <a id="7391" href="ComputationalModel.Strategy.html#6729" class="Datatype Operator">-pre-conforms-to-</a> <a id="7409" href="ComputationalModel.Strategy.html#6437" class="Generalizable">SS</a>
      <a id="7418" class="Symbol">→</a> <a id="7420" href="ComputationalModel.Strategy.html#7342" class="Bound">α</a> <a id="7422" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7424" href="ComputationalModel.Strategy.html#5462" class="Bound">Adv</a> <a id="7428" href="ComputationalModel.Strategy.html#1027" class="InductiveConstructor Operator">→O∶</a> <a id="7432" href="ComputationalModel.Strategy.html#7223" class="Bound">m</a>
      <a id="7440" class="Symbol">→</a> <a id="7442" href="Data.List.Base.html#4450" class="Function">concatMap</a> <a id="7452" href="ComputationalModel.Strategy.html#2546" class="Function">oracleMessages</a> <a id="7467" href="ComputationalModel.Strategy.html#7314" class="Bound">Λ</a> <a id="7469" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7471" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
      <a id="7480" class="Symbol">→</a> <a id="7482" class="Symbol">(∀</a> <a id="7485" class="Symbol">{</a><a id="7486" href="ComputationalModel.Strategy.html#7486" class="Bound">hm′</a><a id="7489" class="Symbol">}</a> <a id="7491" class="Symbol">→</a> <a id="7493" class="Symbol">(</a><a id="7494" href="ComputationalModel.Strategy.html#5462" class="Bound">Adv</a> <a id="7498" href="ComputationalModel.Strategy.html#1027" class="InductiveConstructor Operator">→O∶</a> <a id="7502" href="ComputationalModel.Strategy.html#7223" class="Bound">m</a> <a id="7504" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7506" href="ComputationalModel.Strategy.html#1099" class="InductiveConstructor Operator">O→</a> <a id="7509" href="ComputationalModel.Strategy.html#5462" class="Bound">Adv</a> <a id="7513" href="ComputationalModel.Strategy.html#1099" class="InductiveConstructor Operator">∶</a> <a id="7515" href="ComputationalModel.Strategy.html#7486" class="Bound">hm′</a> <a id="7519" class="Symbol">)</a> <a id="7521" href="Prelude.Membership.html#384" class="Field Operator">∈</a> <a id="7523" href="ComputationalModel.Strategy.html#2856" class="Function">oracleRequests</a> <a id="7538" href="ComputationalModel.Strategy.html#5462" class="Bound">Adv</a> <a id="7542" href="ComputationalModel.Strategy.html#1207" class="Generalizable">R</a>
                 <a id="7561" class="Symbol">→</a> <a id="7563" href="ComputationalModel.Strategy.html#7225" class="Bound">hm</a> <a id="7566" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7568" href="ComputationalModel.Strategy.html#7486" class="Bound">hm′</a><a id="7571" class="Symbol">)</a>
        <a id="7581" class="Comment">-------------------------------------------------------------</a>
      <a id="7649" class="Symbol">→</a> <a id="7651" class="Symbol">(</a><a id="7652" href="ComputationalModel.Strategy.html#5462" class="Bound">Adv</a> <a id="7656" href="ComputationalModel.Strategy.html#1027" class="InductiveConstructor Operator">→O∶</a> <a id="7660" href="ComputationalModel.Strategy.html#7223" class="Bound">m</a><a id="7661" class="Symbol">)</a> <a id="7663" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="7665" class="Symbol">(</a><a id="7666" href="ComputationalModel.Strategy.html#1099" class="InductiveConstructor Operator">O→</a> <a id="7669" href="ComputationalModel.Strategy.html#5462" class="Bound">Adv</a> <a id="7673" href="ComputationalModel.Strategy.html#1099" class="InductiveConstructor Operator">∶</a> <a id="7675" href="ComputationalModel.Strategy.html#7225" class="Bound">hm</a><a id="7677" class="Symbol">)</a> <a id="7679" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="7681" href="ComputationalModel.Strategy.html#1207" class="Generalizable">R</a> <a id="7683" href="ComputationalModel.Strategy.html#6729" class="Datatype Operator">-pre-conforms-to-</a> <a id="7701" href="ComputationalModel.Strategy.html#6437" class="Generalizable">SS</a>

    <a id="AdvM._-pre-conforms-to-_.oracle-hon"></a><a id="7709" href="ComputationalModel.Strategy.html#7709" class="InductiveConstructor">oracle-hon</a> <a id="7720" class="Symbol">:</a> <a id="7722" class="Symbol">∀</a> <a id="7724" class="Symbol">{</a><a id="7725" href="ComputationalModel.Strategy.html#7725" class="Bound">A</a><a id="7726" class="Symbol">}</a> <a id="7728" class="Symbol">{</a><a id="7729" href="ComputationalModel.Strategy.html#7729" class="Bound">A∈</a> <a id="7732" class="Symbol">:</a> <a id="7734" href="ComputationalModel.Strategy.html#7725" class="Bound">A</a> <a id="7736" href="Prelude.Membership.html#384" class="Field Operator">∈</a> <a id="7738" href="ComputationalModel.Strategy.html#578" class="Function">Hon</a><a id="7741" class="Symbol">}</a> <a id="7743" class="Symbol">{</a><a id="7744" href="ComputationalModel.Strategy.html#7744" class="Bound">m</a> <a id="7746" href="ComputationalModel.Strategy.html#7746" class="Bound">hm</a> <a id="7749" class="Symbol">:</a> <a id="7751" href="ComputationalModel.Strategy.html#790" class="Function">Message</a><a id="7758" class="Symbol">}</a> <a id="7760" class="Symbol">→</a>
      <a id="7768" class="Keyword">let</a>
        <a id="7780" class="Symbol">(_</a> <a id="7783" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7785" href="ComputationalModel.Strategy.html#7785" class="Bound">S</a><a id="7786" class="Symbol">)</a> <a id="7788" class="Symbol">=</a> <a id="7790" href="ComputationalModel.Strategy.html#6437" class="Generalizable">SS</a>
        <a id="7801" href="ComputationalModel.Strategy.html#7801" class="Bound">Λ</a> <a id="7803" class="Symbol">=</a> <a id="7805" href="ComputationalModel.Strategy.html#4128" class="Field">Σ</a> <a id="7807" class="Symbol">(</a><a id="7808" href="ComputationalModel.Strategy.html#7785" class="Bound">S</a> <a id="7810" href="ComputationalModel.Strategy.html#7729" class="Bound">A∈</a><a id="7812" class="Symbol">)</a> <a id="7814" class="Symbol">(</a><a id="7815" href="ComputationalModel.Strategy.html#1238" class="Function">strip</a> <a id="7821" href="ComputationalModel.Strategy.html#7725" class="Bound">A</a> <a id="7823" href="ComputationalModel.Strategy.html#1207" class="Generalizable">R</a><a id="7824" class="Symbol">)</a>
      <a id="7832" class="Keyword">in</a>
        <a id="7843" href="ComputationalModel.Strategy.html#1207" class="Generalizable">R</a> <a id="7845" href="ComputationalModel.Strategy.html#6729" class="Datatype Operator">-pre-conforms-to-</a> <a id="7863" href="ComputationalModel.Strategy.html#6437" class="Generalizable">SS</a>
      <a id="7872" class="Symbol">→</a> <a id="7874" href="Data.List.Base.html#7061" class="Function">L.head</a> <a id="7881" class="Symbol">(</a><a id="7882" href="ComputationalModel.Strategy.html#2546" class="Function">oracleMessages</a> <a id="7897" href="ComputationalModel.Strategy.html#7801" class="Bound">Λ</a><a id="7898" class="Symbol">)</a> <a id="7900" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7902" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="7907" class="Symbol">(</a><a id="7908" href="ComputationalModel.Strategy.html#5462" class="Bound">Adv</a> <a id="7912" href="ComputationalModel.Strategy.html#1027" class="InductiveConstructor Operator">→O∶</a> <a id="7916" href="ComputationalModel.Strategy.html#7744" class="Bound">m</a><a id="7917" class="Symbol">)</a>
      <a id="7925" class="Symbol">→</a> <a id="7927" class="Symbol">(∀</a> <a id="7930" class="Symbol">{</a><a id="7931" href="ComputationalModel.Strategy.html#7931" class="Bound">hm′</a><a id="7934" class="Symbol">}</a> <a id="7936" class="Symbol">→</a> <a id="7938" class="Symbol">(</a><a id="7939" href="ComputationalModel.Strategy.html#7725" class="Bound">A</a> <a id="7941" href="ComputationalModel.Strategy.html#1027" class="InductiveConstructor Operator">→O∶</a> <a id="7945" href="ComputationalModel.Strategy.html#7744" class="Bound">m</a> <a id="7947" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7949" href="ComputationalModel.Strategy.html#1099" class="InductiveConstructor Operator">O→</a> <a id="7952" href="ComputationalModel.Strategy.html#7725" class="Bound">A</a> <a id="7954" href="ComputationalModel.Strategy.html#1099" class="InductiveConstructor Operator">∶</a> <a id="7956" href="ComputationalModel.Strategy.html#7931" class="Bound">hm′</a> <a id="7960" class="Symbol">)</a> <a id="7962" href="Prelude.Membership.html#384" class="Field Operator">∈</a> <a id="7964" href="ComputationalModel.Strategy.html#2856" class="Function">oracleRequests</a> <a id="7979" href="ComputationalModel.Strategy.html#7725" class="Bound">A</a> <a id="7981" href="ComputationalModel.Strategy.html#1207" class="Generalizable">R</a>
                 <a id="8000" class="Symbol">→</a> <a id="8002" href="ComputationalModel.Strategy.html#7746" class="Bound">hm</a> <a id="8005" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="8007" href="ComputationalModel.Strategy.html#7931" class="Bound">hm′</a><a id="8010" class="Symbol">)</a>
        <a id="8020" class="Comment">-------------------------------------------------------</a>
      <a id="8082" class="Symbol">→</a> <a id="8084" class="Symbol">(</a><a id="8085" href="ComputationalModel.Strategy.html#7725" class="Bound">A</a> <a id="8087" href="ComputationalModel.Strategy.html#1027" class="InductiveConstructor Operator">→O∶</a> <a id="8091" href="ComputationalModel.Strategy.html#7744" class="Bound">m</a><a id="8092" class="Symbol">)</a> <a id="8094" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="8096" class="Symbol">(</a><a id="8097" href="ComputationalModel.Strategy.html#1099" class="InductiveConstructor Operator">O→</a> <a id="8100" href="ComputationalModel.Strategy.html#7725" class="Bound">A</a> <a id="8102" href="ComputationalModel.Strategy.html#1099" class="InductiveConstructor Operator">∶</a> <a id="8104" href="ComputationalModel.Strategy.html#7746" class="Bound">hm</a><a id="8106" class="Symbol">)</a> <a id="8108" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="8110" href="ComputationalModel.Strategy.html#1207" class="Generalizable">R</a> <a id="8112" href="ComputationalModel.Strategy.html#6729" class="Datatype Operator">-pre-conforms-to-</a> <a id="8130" href="ComputationalModel.Strategy.html#6437" class="Generalizable">SS</a>

  <a id="8136" class="Keyword">infix</a> <a id="8142" class="Number">-1</a> <a id="8145" href="ComputationalModel.Strategy.html#8163" class="Function Operator">_-conforms-to-_</a>
  <a id="AdvM._-conforms-to-_"></a><a id="8163" href="ComputationalModel.Strategy.html#8163" class="Function Operator">_-conforms-to-_</a> <a id="8179" class="Symbol">:</a> <a id="8181" href="ComputationalModel.Strategy.html#1138" class="Function">Run</a> <a id="8185" class="Symbol">→</a> <a id="8187" href="ComputationalModel.Strategy.html#6288" class="Function">Strategies</a> <a id="8198" class="Symbol">→</a> <a id="8200" href="Agda.Primitive.html#326" class="Primitive">Set</a>
  <a id="8206" href="ComputationalModel.Strategy.html#8206" class="Bound">R</a> <a id="8208" href="ComputationalModel.Strategy.html#8163" class="Function Operator">-conforms-to-</a> <a id="8222" href="ComputationalModel.Strategy.html#8222" class="Bound">SS</a> <a id="8225" class="Symbol">=</a> <a id="8227" href="Data.Product.html#1806" class="Function">∃[</a> <a id="8230" href="ComputationalModel.Strategy.html#8230" class="Bound">R′</a> <a id="8233" href="Data.Product.html#1806" class="Function">]</a> <a id="8235" class="Symbol">(</a><a id="8236" href="Data.List.Relation.Binary.Prefix.Heterogeneous.html#685" class="Datatype">Prefix</a> <a id="8243" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a> <a id="8247" href="ComputationalModel.Strategy.html#8206" class="Bound">R</a> <a id="8249" href="ComputationalModel.Strategy.html#8230" class="Bound">R′</a> <a id="8252" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="8254" class="Symbol">(</a><a id="8255" href="ComputationalModel.Strategy.html#8230" class="Bound">R′</a> <a id="8258" href="ComputationalModel.Strategy.html#6729" class="Datatype Operator">-pre-conforms-to-</a> <a id="8276" href="ComputationalModel.Strategy.html#8222" class="Bound">SS</a><a id="8278" class="Symbol">))</a>
</pre></body></html>