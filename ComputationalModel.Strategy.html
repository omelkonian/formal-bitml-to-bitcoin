<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>ComputationalModel.Strategy</title><link rel="stylesheet" href="css/Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Computational strategies.</a>
<a id="103" class="Comment">------------------------------------------------------------------------</a>

<a id="177" class="Keyword">open</a> <a id="182" class="Keyword">import</a> <a id="189" href="Function.html" class="Module">Function</a> <a id="198" class="Keyword">using</a> <a id="204" class="Symbol">(</a><a id="205" href="Function.Base.html#992" class="Function Operator">_∘_</a><a id="208" class="Symbol">;</a> <a id="210" href="Function.Base.html#4269" class="Function Operator">_∋_</a><a id="213" class="Symbol">)</a>

<a id="216" class="Keyword">open</a> <a id="221" class="Keyword">import</a> <a id="228" href="Data.Empty.html" class="Module">Data.Empty</a>        <a id="246" class="Keyword">using</a> <a id="252" class="Symbol">(</a><a id="253" href="Data.Empty.html#526" class="Datatype">⊥</a><a id="254" class="Symbol">)</a>
<a id="256" class="Keyword">open</a> <a id="261" class="Keyword">import</a> <a id="268" href="Data.Unit.html" class="Module">Data.Unit</a>         <a id="286" class="Keyword">using</a> <a id="292" class="Symbol">(</a><a id="293" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a><a id="294" class="Symbol">)</a>
<a id="296" class="Keyword">open</a> <a id="301" class="Keyword">import</a> <a id="308" href="Data.Product.html" class="Module">Data.Product</a>      <a id="326" class="Keyword">using</a> <a id="332" class="Symbol">(</a><a id="333" href="Data.Product.html#1788" class="Function">∃-syntax</a><a id="341" class="Symbol">;</a> <a id="343" href="Data.Product.html#916" class="Function">Σ-syntax</a><a id="351" class="Symbol">;</a> <a id="353" href="Data.Product.html#1167" class="Function Operator">_×_</a><a id="356" class="Symbol">;</a> <a id="358" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a><a id="361" class="Symbol">;</a> <a id="363" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a><a id="368" class="Symbol">;</a> <a id="370" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a><a id="375" class="Symbol">;</a> <a id="377" href="Data.Product.html#2624" class="Function">map₂</a><a id="381" class="Symbol">)</a>
<a id="383" class="Keyword">open</a> <a id="388" class="Keyword">import</a> <a id="395" href="Data.Sum.html" class="Module">Data.Sum</a>          <a id="413" class="Keyword">using</a> <a id="419" class="Symbol">(</a><a id="420" href="Data.Sum.Base.html#728" class="Datatype Operator">_⊎_</a><a id="423" class="Symbol">)</a>
<a id="425" class="Keyword">open</a> <a id="430" class="Keyword">import</a> <a id="437" href="Data.Nat.html" class="Module">Data.Nat</a>          <a id="455" class="Keyword">using</a> <a id="461" class="Symbol">(</a><a id="462" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="463" class="Symbol">;</a> <a id="465" href="Data.Nat.Base.html#1111" class="Function Operator">_&gt;_</a><a id="468" class="Symbol">;</a> <a id="470" href="Data.Nat.Base.html#1081" class="Function Operator">_≥_</a><a id="473" class="Symbol">)</a>
<a id="475" class="Keyword">open</a> <a id="480" class="Keyword">import</a> <a id="487" href="Data.Integer.html" class="Module">Data.Integer</a>      <a id="505" class="Keyword">using</a> <a id="511" class="Symbol">(</a><a id="512" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a><a id="513" class="Symbol">)</a>
<a id="515" class="Keyword">open</a> <a id="520" class="Keyword">import</a> <a id="527" href="Data.Fin.html" class="Module">Data.Fin</a>          <a id="545" class="Keyword">using</a> <a id="551" class="Symbol">(</a><a id="552" href="Data.Fin.Base.html#1066" class="Datatype">Fin</a><a id="555" class="Symbol">)</a>
<a id="557" class="Keyword">open</a> <a id="562" class="Keyword">import</a> <a id="569" href="Data.Fin.Patterns.html" class="Module">Data.Fin.Patterns</a> <a id="587" class="Keyword">using</a> <a id="593" class="Symbol">(</a><a id="594" href="Data.Fin.Patterns.html#390" class="InductiveConstructor">0F</a><a id="596" class="Symbol">)</a>
<a id="598" class="Keyword">open</a> <a id="603" class="Keyword">import</a> <a id="610" href="Data.Maybe.html" class="Module">Data.Maybe</a>        <a id="628" class="Keyword">using</a> <a id="634" class="Symbol">(</a><a id="635" href="Data.Maybe.Base.html#838" class="Datatype">Maybe</a><a id="640" class="Symbol">;</a> <a id="642" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a><a id="646" class="Symbol">;</a> <a id="648" href="Data.Maybe.Base.html#872" class="InductiveConstructor">nothing</a><a id="655" class="Symbol">)</a>
<a id="657" class="Keyword">open</a> <a id="662" class="Keyword">import</a> <a id="669" href="Data.List.html" class="Module">Data.List</a>         <a id="687" class="Keyword">using</a> <a id="693" class="Symbol">(</a><a id="694" href="Agda.Builtin.List.html#148" class="Datatype">List</a><a id="698" class="Symbol">;</a> <a id="700" href="Data.List.Base.html#9701" class="InductiveConstructor">[]</a><a id="702" class="Symbol">;</a> <a id="704" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">_∷_</a><a id="707" class="Symbol">;</a> <a id="709" href="Data.List.Base.html#4458" class="Function Operator">[_]</a><a id="712" class="Symbol">;</a> <a id="714" href="Data.List.Base.html#4297" class="Function">length</a><a id="720" class="Symbol">;</a> <a id="722" href="Data.List.Base.html#1497" class="Function">map</a><a id="725" class="Symbol">;</a> <a id="727" href="Data.List.Base.html#3883" class="Function">concatMap</a><a id="736" class="Symbol">;</a> <a id="738" href="Data.List.Base.html#4217" class="Function">sum</a><a id="741" class="Symbol">;</a> <a id="743" href="Data.List.Base.html#1582" class="Function">mapMaybe</a><a id="751" class="Symbol">;</a> <a id="753" href="Data.List.Base.html#3372" class="Function">unzip</a><a id="758" class="Symbol">;</a> <a id="760" href="Data.List.Base.html#6501" class="Function">head</a><a id="764" class="Symbol">)</a>
<a id="766" class="Keyword">import</a> <a id="773" href="Data.Vec.html" class="Module">Data.Vec</a> <a id="782" class="Symbol">as</a> <a id="785" class="Module">V</a>


<a id="789" class="Keyword">open</a> <a id="794" class="Keyword">import</a> <a id="801" href="Data.List.Membership.Propositional.html" class="Module">Data.List.Membership.Propositional</a>                  <a id="853" class="Keyword">using</a> <a id="859" class="Symbol">(</a><a id="860" href="Data.List.Membership.Setoid.html#882" class="Function Operator">_∈_</a><a id="863" class="Symbol">;</a> <a id="865" href="Data.List.Membership.Setoid.html#931" class="Function Operator">_∉_</a><a id="868" class="Symbol">;</a> <a id="870" href="Data.List.Membership.Setoid.html#1123" class="Function">mapWith∈</a><a id="878" class="Symbol">)</a>
<a id="880" class="Keyword">open</a> <a id="885" class="Keyword">import</a> <a id="892" href="Data.List.Relation.Binary.Permutation.Propositional.html" class="Module">Data.List.Relation.Binary.Permutation.Propositional</a> <a id="944" class="Keyword">using</a> <a id="950" class="Symbol">(</a><a id="951" href="Data.List.Relation.Binary.Permutation.Propositional.html#1041" class="Datatype Operator">_↭_</a><a id="954" class="Symbol">)</a>
<a id="956" class="Keyword">open</a> <a id="961" class="Keyword">import</a> <a id="968" href="Data.List.Relation.Binary.Prefix.Heterogeneous.html" class="Module">Data.List.Relation.Binary.Prefix.Heterogeneous</a>      <a id="1020" class="Keyword">using</a> <a id="1026" class="Symbol">(</a><a id="1027" href="Data.List.Relation.Binary.Prefix.Heterogeneous.html#664" class="Datatype">Prefix</a><a id="1033" class="Symbol">)</a>
<a id="1035" class="Keyword">open</a> <a id="1040" class="Keyword">import</a> <a id="1047" href="Data.List.Relation.Binary.Sublist.Propositional.html" class="Module">Data.List.Relation.Binary.Sublist.Propositional</a>     <a id="1099" class="Keyword">using</a> <a id="1105" class="Symbol">(</a><a id="1106" href="Data.List.Relation.Binary.Sublist.Setoid.html#1328" class="Function Operator">_⊆_</a><a id="1109" class="Symbol">)</a>
<a id="1111" class="Keyword">open</a> <a id="1116" class="Keyword">import</a> <a id="1123" href="Data.List.Relation.Unary.All.html" class="Module">Data.List.Relation.Unary.All</a>                        <a id="1175" class="Keyword">using</a> <a id="1181" class="Symbol">(</a><a id="1182" href="Data.List.Relation.Unary.All.html#1274" class="Datatype">All</a><a id="1185" class="Symbol">)</a>
<a id="1187" class="Keyword">open</a> <a id="1192" class="Keyword">import</a> <a id="1199" href="Data.List.Relation.Unary.Any.html" class="Module">Data.List.Relation.Unary.Any</a>                        <a id="1251" class="Keyword">using</a> <a id="1257" class="Symbol">(</a><a id="1258" href="Data.List.Relation.Unary.Any.html#1111" class="Datatype">Any</a><a id="1261" class="Symbol">)</a>

<a id="1264" class="Keyword">open</a> <a id="1269" class="Keyword">import</a> <a id="1276" href="Data.Vec.Relation.Unary.All.html" class="Module">Data.Vec.Relation.Unary.All</a> <a id="1304" class="Keyword">using</a> <a id="1310" class="Symbol">()</a>
  <a id="1315" class="Keyword">renaming</a> <a id="1324" class="Symbol">(</a><a id="1325" href="Data.Vec.Relation.Unary.All.html#1068" class="Datatype">All</a> <a id="1329" class="Symbol">to</a> <a id="Relation.Unary.All.All"></a><a id="1332" href="ComputationalModel.Strategy.html#1332" class="Datatype">Allᵥ</a><a id="1336" class="Symbol">)</a>

<a id="1339" class="Keyword">open</a> <a id="1344" class="Keyword">import</a> <a id="1351" href="Data.Maybe.Relation.Unary.All.html" class="Module">Data.Maybe.Relation.Unary.All</a> <a id="1381" class="Keyword">using</a> <a id="1387" class="Symbol">()</a>
  <a id="1392" class="Keyword">renaming</a> <a id="1401" class="Symbol">(</a><a id="1402" href="Data.Maybe.Relation.Unary.All.html#943" class="Datatype">All</a> <a id="1406" class="Symbol">to</a> <a id="Relation.Unary.All.All"></a><a id="1409" href="ComputationalModel.Strategy.html#1409" class="Datatype">Allₘ</a><a id="1413" class="Symbol">)</a>

<a id="1416" class="Keyword">open</a> <a id="1421" class="Keyword">import</a> <a id="1428" href="Relation.Nullary.html" class="Module">Relation.Nullary</a>                      <a id="1466" class="Keyword">using</a> <a id="1472" class="Symbol">(</a><a id="1473" href="Relation.Nullary.html#1645" class="InductiveConstructor">yes</a><a id="1476" class="Symbol">;</a> <a id="1478" href="Relation.Nullary.html#1682" class="InductiveConstructor">no</a><a id="1480" class="Symbol">)</a>
<a id="1482" class="Keyword">open</a> <a id="1487" class="Keyword">import</a> <a id="1494" href="Relation.Binary.html" class="Module">Relation.Binary</a>                       <a id="1532" class="Keyword">using</a> <a id="1538" class="Symbol">(</a><a id="1539" href="Relation.Binary.Definitions.html#4575" class="Function">Decidable</a><a id="1548" class="Symbol">)</a>
<a id="1550" class="Keyword">open</a> <a id="1555" class="Keyword">import</a> <a id="1562" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="1600" class="Keyword">using</a> <a id="1606" class="Symbol">(</a><a id="1607" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="1610" class="Symbol">;</a> <a id="1612" href="Relation.Binary.PropositionalEquality.Core.html#840" class="Function Operator">_≢_</a><a id="1615" class="Symbol">)</a>

<a id="1618" class="Keyword">open</a> <a id="1623" class="Keyword">import</a> <a id="1630" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>
<a id="1644" class="Keyword">import</a> <a id="1651" href="Prelude.Set%2527.html" class="Module">Prelude.Set&#39;</a> <a id="1664" class="Symbol">as</a> <a id="1667" class="Module">SET</a>

<a id="1672" class="Keyword">open</a> <a id="1677" class="Keyword">import</a> <a id="1684" href="Bitcoin.Crypto.html" class="Module">Bitcoin.Crypto</a>                <a id="1714" class="Keyword">using</a> <a id="1720" class="Symbol">(</a><a id="1721" href="Bitcoin.Crypto.html#320" class="Record">KeyPair</a><a id="1728" class="Symbol">;</a> <a id="1730" href="Bitcoin.Crypto.html#352" class="Field">pub</a><a id="1733" class="Symbol">;</a> <a id="1735" href="Bitcoin.Crypto.html#364" class="Field">sec</a><a id="1738" class="Symbol">)</a>
<a id="1740" class="Keyword">open</a> <a id="1745" class="Keyword">import</a> <a id="1752" href="Bitcoin.BasicTypes.html" class="Module">Bitcoin.BasicTypes</a>            <a id="1782" class="Keyword">using</a> <a id="1788" class="Symbol">(</a><a id="1789" href="Bitcoin.BasicTypes.html#309" class="Function">Time</a><a id="1793" class="Symbol">)</a>
<a id="1795" class="Keyword">open</a> <a id="1800" class="Keyword">import</a> <a id="1807" href="Bitcoin.Script.Base.html" class="Module">Bitcoin.Script.Base</a>           <a id="1837" class="Keyword">using</a> <a id="1843" class="Symbol">(</a><a id="1844" href="Bitcoin.Script.Base.html#2373" class="InductiveConstructor Operator">ƛ_</a><a id="1846" class="Symbol">;</a> <a id="1848" href="Bitcoin.Script.Base.html#1695" class="InductiveConstructor">versig</a><a id="1854" class="Symbol">;</a> <a id="1856" href="Bitcoin.Script.Base.html#794" class="InductiveConstructor">Ctx</a><a id="1859" class="Symbol">)</a>
<a id="1861" class="Keyword">open</a> <a id="1866" class="Keyword">import</a> <a id="1873" href="Bitcoin.Tx.Base.html" class="Module">Bitcoin.Tx.Base</a>               <a id="1903" class="Keyword">using</a> <a id="1909" class="Symbol">(</a><a id="1910" href="Bitcoin.Tx.Base.html#1252" class="Function">∃Tx</a><a id="1913" class="Symbol">;</a> <a id="1915" href="Bitcoin.Tx.Base.html#1147" class="Field">outputs</a><a id="1922" class="Symbol">;</a> <a id="1924" href="Bitcoin.Tx.Base.html#997" class="Field">inputs</a><a id="1930" class="Symbol">;</a> <a id="1932" href="Bitcoin.Tx.Base.html#1038" class="Field">wit</a><a id="1935" class="Symbol">;</a> <a id="1937" href="Bitcoin.Tx.Base.html#557" class="InductiveConstructor Operator">_at_</a><a id="1941" class="Symbol">;</a> <a id="1943" href="Bitcoin.Tx.Base.html#799" class="Field">validator</a><a id="1952" class="Symbol">;</a> <a id="1954" href="Bitcoin.Tx.Base.html#574" class="Field">txId</a><a id="1958" class="Symbol">)</a>
<a id="1960" class="Keyword">open</a> <a id="1965" class="Keyword">import</a> <a id="1972" href="Bitcoin.Tx.Crypto.html" class="Module">Bitcoin.Tx.Crypto</a>             <a id="2002" class="Keyword">using</a> <a id="2008" class="Symbol">(</a><a id="2009" href="Bitcoin.Tx.Crypto.html#1073" class="Function">hashTx</a><a id="2015" class="Symbol">)</a>
<a id="2017" class="Keyword">open</a> <a id="2022" class="Keyword">import</a> <a id="2029" href="Bitcoin.Semantics.Consistency.html" class="Module">Bitcoin.Semantics.Consistency</a> <a id="2059" class="Keyword">using</a> <a id="2065" class="Symbol">(</a><a id="2066" href="Bitcoin.Semantics.Consistency.html#1171" class="Function">Blockchain</a><a id="2076" class="Symbol">;</a> <a id="2078" href="Bitcoin.Semantics.Consistency.html#2111" class="Record Operator">_▷_,_</a><a id="2083" class="Symbol">;</a> <a id="2085" href="Bitcoin.Semantics.Consistency.html#3513" class="Datatype">ConsistentBlockchain</a><a id="2105" class="Symbol">)</a>

<a id="2108" class="Comment">-- open import BitML.BasicTypes</a>

<a id="2141" class="Keyword">module</a> <a id="2148" href="ComputationalModel.Strategy.html" class="Module">ComputationalModel.Strategy</a>
  <a id="2178" class="Symbol">(</a><a id="2179" href="ComputationalModel.Strategy.html#2179" class="Bound">Participant</a> <a id="2191" class="Symbol">:</a> <a id="2193" class="PrimitiveType">Set</a><a id="2196" class="Symbol">)</a>
  <a id="2200" class="Symbol">(</a><a id="2201" href="ComputationalModel.Strategy.html#2201" class="Bound Operator">_≟ₚ_</a> <a id="2206" class="Symbol">:</a> <a id="2208" href="Relation.Binary.Definitions.html#4575" class="Function">Decidable</a> <a id="2218" class="Symbol">{</a><a id="2219" class="Argument">A</a> <a id="2221" class="Symbol">=</a> <a id="2223" href="ComputationalModel.Strategy.html#2179" class="Bound">Participant</a><a id="2234" class="Symbol">}</a> <a id="2236" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="2239" class="Symbol">)</a>
  <a id="2243" class="Symbol">(</a><a id="2244" href="ComputationalModel.Strategy.html#2244" class="Bound">Honest</a> <a id="2251" class="Symbol">:</a> <a id="2253" href="Data.Product.html#916" class="Function">Σ[</a> <a id="2256" href="ComputationalModel.Strategy.html#2256" class="Bound">ps</a> <a id="2259" href="Data.Product.html#916" class="Function">∈</a> <a id="2261" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2266" href="ComputationalModel.Strategy.html#2179" class="Bound">Participant</a> <a id="2278" href="Data.Product.html#916" class="Function">]</a> <a id="2280" class="Symbol">(</a><a id="2281" href="Data.List.Base.html#4297" class="Function">length</a> <a id="2288" href="ComputationalModel.Strategy.html#2256" class="Bound">ps</a> <a id="2291" href="Data.Nat.Base.html#1111" class="Function Operator">&gt;</a> <a id="2293" class="Number">0</a><a id="2294" class="Symbol">))</a>

  <a id="2300" class="Symbol">(</a><a id="2301" href="ComputationalModel.Strategy.html#2301" class="Bound">finPart</a> <a id="2309" class="Symbol">:</a> <a id="2311" href="Prelude.Lists.html#19289" class="Function">Finite</a> <a id="2318" href="ComputationalModel.Strategy.html#2179" class="Bound">Participant</a><a id="2329" class="Symbol">)</a>
  <a id="2333" class="Symbol">(</a><a id="2334" href="ComputationalModel.Strategy.html#2334" class="Bound">keypairs</a> <a id="2343" class="Symbol">:</a> <a id="2345" class="Symbol">∀</a> <a id="2347" class="Symbol">(</a><a id="2348" href="ComputationalModel.Strategy.html#2348" class="Bound">A</a> <a id="2350" class="Symbol">:</a> <a id="2352" href="ComputationalModel.Strategy.html#2179" class="Bound">Participant</a><a id="2363" class="Symbol">)</a> <a id="2365" class="Symbol">→</a> <a id="2367" href="Bitcoin.Crypto.html#320" class="Record">KeyPair</a> <a id="2375" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2377" href="Bitcoin.Crypto.html#320" class="Record">KeyPair</a><a id="2384" class="Symbol">)</a>
  <a id="2388" class="Keyword">where</a>

<a id="Hon"></a><a id="2395" href="ComputationalModel.Strategy.html#2395" class="Function">Hon</a> <a id="2399" class="Symbol">:</a> <a id="2401" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2406" href="ComputationalModel.Strategy.html#2179" class="Bound">Participant</a>
<a id="2418" href="ComputationalModel.Strategy.html#2395" class="Function">Hon</a> <a id="2422" class="Symbol">=</a> <a id="2424" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="2430" href="ComputationalModel.Strategy.html#2244" class="Bound">Honest</a>

<a id="allParticipants"></a><a id="2438" href="ComputationalModel.Strategy.html#2438" class="Function">allParticipants</a> <a id="2454" class="Symbol">:</a> <a id="2456" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2461" href="ComputationalModel.Strategy.html#2179" class="Bound">Participant</a>
<a id="2473" href="ComputationalModel.Strategy.html#2438" class="Function">allParticipants</a> <a id="2489" class="Symbol">=</a> <a id="2491" href="Prelude.Lists.html#19339" class="Function">finList</a> <a id="2499" href="ComputationalModel.Strategy.html#2301" class="Bound">finPart</a>

<a id="2508" class="Comment">-- Key pairs.</a>
<a id="K"></a><a id="2522" href="ComputationalModel.Strategy.html#2522" class="Function">K</a> <a id="2524" class="Symbol">:</a> <a id="2526" href="ComputationalModel.Strategy.html#2179" class="Bound">Participant</a> <a id="2538" class="Symbol">→</a> <a id="2540" href="Bitcoin.Crypto.html#320" class="Record">KeyPair</a>
<a id="2548" href="ComputationalModel.Strategy.html#2522" class="Function">K</a> <a id="2550" class="Symbol">=</a> <a id="2552" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="2558" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="2560" href="ComputationalModel.Strategy.html#2334" class="Bound">keypairs</a>

<a id="K̂"></a><a id="2570" href="ComputationalModel.Strategy.html#2570" class="Function">K̂</a> <a id="2573" class="Symbol">:</a> <a id="2575" href="ComputationalModel.Strategy.html#2179" class="Bound">Participant</a> <a id="2587" class="Symbol">→</a> <a id="2589" href="Bitcoin.Crypto.html#320" class="Record">KeyPair</a>
<a id="2597" href="ComputationalModel.Strategy.html#2570" class="Function">K̂</a> <a id="2600" class="Symbol">=</a> <a id="2602" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="2608" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="2610" href="ComputationalModel.Strategy.html#2334" class="Bound">keypairs</a>

<a id="Kᵖ"></a><a id="2620" href="ComputationalModel.Strategy.html#2620" class="Function">Kᵖ</a> <a id="2623" class="Symbol">:</a> <a id="2625" href="ComputationalModel.Strategy.html#2179" class="Bound">Participant</a> <a id="2637" class="Symbol">→</a> <a id="2639" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a>
<a id="2641" href="ComputationalModel.Strategy.html#2620" class="Function">Kᵖ</a> <a id="2644" class="Symbol">=</a> <a id="2646" href="Bitcoin.Crypto.html#352" class="Field">pub</a> <a id="2650" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="2652" href="ComputationalModel.Strategy.html#2522" class="Function">K</a>

<a id="K̂ᵖ"></a><a id="2655" href="ComputationalModel.Strategy.html#2655" class="Function">K̂ᵖ</a> <a id="2659" class="Symbol">:</a> <a id="2661" href="ComputationalModel.Strategy.html#2179" class="Bound">Participant</a> <a id="2673" class="Symbol">→</a> <a id="2675" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a>
<a id="2677" href="ComputationalModel.Strategy.html#2655" class="Function">K̂ᵖ</a> <a id="2681" class="Symbol">=</a> <a id="2683" href="Bitcoin.Crypto.html#352" class="Field">pub</a> <a id="2687" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="2689" href="ComputationalModel.Strategy.html#2570" class="Function">K̂</a>

<a id="2693" class="Comment">-- Computational runs.</a>

<a id="Message"></a><a id="2717" href="ComputationalModel.Strategy.html#2717" class="Function">Message</a> <a id="2725" class="Symbol">=</a> <a id="2727" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2732" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a>

<a id="2735" class="Keyword">data</a> <a id="Label"></a><a id="2740" href="ComputationalModel.Strategy.html#2740" class="Datatype">Label</a> <a id="2746" class="Symbol">:</a> <a id="2748" class="PrimitiveType">Set</a> <a id="2752" class="Keyword">where</a>
  <a id="2760" class="Comment">-- broadcast message</a>
  <a id="Label._→✴∶_"></a><a id="2783" href="ComputationalModel.Strategy.html#2783" class="InductiveConstructor Operator">_→✴∶_</a> <a id="2789" class="Symbol">:</a> <a id="2791" href="ComputationalModel.Strategy.html#2179" class="Bound">Participant</a> <a id="2803" class="Symbol">→</a> <a id="2805" href="ComputationalModel.Strategy.html#2717" class="Function">Message</a> <a id="2813" class="Symbol">→</a> <a id="2815" href="ComputationalModel.Strategy.html#2740" class="Datatype">Label</a>

  <a id="2824" class="Comment">-- append new transaction</a>
  <a id="Label.submit"></a><a id="2852" href="ComputationalModel.Strategy.html#2852" class="InductiveConstructor">submit</a> <a id="2859" class="Symbol">:</a> <a id="2861" href="Bitcoin.Tx.Base.html#1252" class="Function">∃Tx</a> <a id="2865" class="Symbol">→</a> <a id="2867" href="ComputationalModel.Strategy.html#2740" class="Datatype">Label</a>

  <a id="2876" class="Comment">-- perform a delay</a>
  <a id="Label.delay"></a><a id="2897" href="ComputationalModel.Strategy.html#2897" class="InductiveConstructor">delay</a> <a id="2903" class="Symbol">:</a> <a id="2905" href="Bitcoin.BasicTypes.html#309" class="Function">Time</a> <a id="2910" class="Symbol">→</a> <a id="2912" href="ComputationalModel.Strategy.html#2740" class="Datatype">Label</a>

  <a id="2921" class="Comment">-- send hash request to oracle</a>
  <a id="Label._→O∶_"></a><a id="2954" href="ComputationalModel.Strategy.html#2954" class="InductiveConstructor Operator">_→O∶_</a>  <a id="2961" class="Symbol">:</a> <a id="2963" href="ComputationalModel.Strategy.html#2179" class="Bound">Participant</a> <a id="2975" class="Symbol">→</a> <a id="2977" href="ComputationalModel.Strategy.html#2717" class="Function">Message</a> <a id="2985" class="Symbol">→</a> <a id="2987" href="ComputationalModel.Strategy.html#2740" class="Datatype">Label</a>

  <a id="2996" class="Comment">-- receive hash from oracle</a>
  <a id="Label.O→_∶_"></a><a id="3026" href="ComputationalModel.Strategy.html#3026" class="InductiveConstructor Operator">O→_∶_</a> <a id="3032" class="Symbol">:</a> <a id="3034" href="ComputationalModel.Strategy.html#2179" class="Bound">Participant</a> <a id="3046" class="Symbol">→</a> <a id="3048" href="ComputationalModel.Strategy.html#2717" class="Function">Message</a> <a id="3056" class="Symbol">→</a> <a id="3058" href="ComputationalModel.Strategy.html#2740" class="Datatype">Label</a>

<a id="Run"></a><a id="3065" href="ComputationalModel.Strategy.html#3065" class="Function">Run</a>    <a id="3072" class="Symbol">=</a> <a id="3074" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="3079" href="ComputationalModel.Strategy.html#2740" class="Datatype">Label</a>
<a id="Labels"></a><a id="3085" href="ComputationalModel.Strategy.html#3085" class="Function">Labels</a> <a id="3092" class="Symbol">=</a> <a id="3094" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="3099" href="ComputationalModel.Strategy.html#2740" class="Datatype">Label</a>

<a id="3106" class="Keyword">variable</a>
  <a id="3117" href="ComputationalModel.Strategy.html#3117" class="Generalizable">R</a> <a id="3119" href="ComputationalModel.Strategy.html#3119" class="Generalizable">R′</a> <a id="3122" href="ComputationalModel.Strategy.html#3122" class="Generalizable">R″</a> <a id="3125" class="Symbol">:</a> <a id="3127" href="ComputationalModel.Strategy.html#3065" class="Function">Run</a>

<a id="strip"></a><a id="3132" href="ComputationalModel.Strategy.html#3132" class="Function">strip</a> <a id="3138" class="Symbol">:</a> <a id="3140" href="ComputationalModel.Strategy.html#2179" class="Bound">Participant</a> <a id="3152" class="Symbol">→</a> <a id="3154" href="ComputationalModel.Strategy.html#3065" class="Function">Run</a> <a id="3158" class="Symbol">→</a> <a id="3160" href="ComputationalModel.Strategy.html#3065" class="Function">Run</a>
<a id="3164" href="ComputationalModel.Strategy.html#3132" class="Function">strip</a> <a id="3170" href="ComputationalModel.Strategy.html#3170" class="Bound">A</a> <a id="3172" class="Symbol">=</a> <a id="3174" href="Data.List.Base.html#1582" class="Function">mapMaybe</a> <a id="3183" href="ComputationalModel.Strategy.html#3198" class="Function">go</a>
  <a id="3188" class="Keyword">where</a>
    <a id="3198" href="ComputationalModel.Strategy.html#3198" class="Function">go</a> <a id="3201" class="Symbol">:</a> <a id="3203" href="ComputationalModel.Strategy.html#2740" class="Datatype">Label</a> <a id="3209" class="Symbol">→</a> <a id="3211" href="Data.Maybe.Base.html#838" class="Datatype">Maybe</a> <a id="3217" href="ComputationalModel.Strategy.html#2740" class="Datatype">Label</a>
    <a id="3227" href="ComputationalModel.Strategy.html#3198" class="Function">go</a> <a id="3230" href="ComputationalModel.Strategy.html#3230" class="Bound">l</a><a id="3231" class="Symbol">@(</a><a id="3233" href="ComputationalModel.Strategy.html#3233" class="Bound">B</a> <a id="3235" href="ComputationalModel.Strategy.html#2954" class="InductiveConstructor Operator">→O∶</a>  <a id="3240" class="Symbol">_)</a> <a id="3243" class="Keyword">with</a> <a id="3248" href="ComputationalModel.Strategy.html#3170" class="Bound">A</a> <a id="3250" href="ComputationalModel.Strategy.html#2201" class="Bound Operator">≟ₚ</a> <a id="3253" href="ComputationalModel.Strategy.html#3233" class="Bound">B</a>
    <a id="3259" class="Symbol">...</a> <a id="3263" class="Symbol">|</a> <a id="3265" href="Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="3269" class="Symbol">_</a> <a id="3271" class="Symbol">=</a> <a id="3273" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="3278" class="Bound">l</a>
    <a id="3284" class="Symbol">...</a> <a id="3288" class="Symbol">|</a> <a id="3290" href="Relation.Nullary.html#1682" class="InductiveConstructor">no</a>  <a id="3294" class="Symbol">_</a> <a id="3296" class="Symbol">=</a> <a id="3298" href="Data.Maybe.Base.html#872" class="InductiveConstructor">nothing</a>
    <a id="3310" href="ComputationalModel.Strategy.html#3198" class="Function">go</a> <a id="3313" href="ComputationalModel.Strategy.html#3313" class="Bound">l</a><a id="3314" class="Symbol">@(</a><a id="3316" href="ComputationalModel.Strategy.html#3026" class="InductiveConstructor Operator">O→</a> <a id="3319" href="ComputationalModel.Strategy.html#3319" class="Bound">B</a> <a id="3321" href="ComputationalModel.Strategy.html#3026" class="InductiveConstructor Operator">∶</a> <a id="3323" class="Symbol">_)</a> <a id="3326" class="Keyword">with</a> <a id="3331" href="ComputationalModel.Strategy.html#3170" class="Bound">A</a> <a id="3333" href="ComputationalModel.Strategy.html#2201" class="Bound Operator">≟ₚ</a> <a id="3336" href="ComputationalModel.Strategy.html#3319" class="Bound">B</a>
    <a id="3342" class="Symbol">...</a> <a id="3346" class="Symbol">|</a> <a id="3348" href="Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="3352" class="Symbol">_</a> <a id="3354" class="Symbol">=</a> <a id="3356" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="3361" class="Bound">l</a>
    <a id="3367" class="Symbol">...</a> <a id="3371" class="Symbol">|</a> <a id="3373" href="Relation.Nullary.html#1682" class="InductiveConstructor">no</a>  <a id="3377" class="Symbol">_</a> <a id="3379" class="Symbol">=</a> <a id="3381" href="Data.Maybe.Base.html#872" class="InductiveConstructor">nothing</a>
    <a id="3393" href="ComputationalModel.Strategy.html#3198" class="CatchallClause Function">go</a><a id="3395" class="CatchallClause"> </a><a id="3396" href="ComputationalModel.Strategy.html#3396" class="CatchallClause Bound">x</a> <a id="3398" class="Symbol">=</a> <a id="3400" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="3405" href="ComputationalModel.Strategy.html#3396" class="Bound">x</a>

<a id="δʳ"></a><a id="3408" href="ComputationalModel.Strategy.html#3408" class="Function">δʳ</a> <a id="3411" class="Symbol">:</a> <a id="3413" href="ComputationalModel.Strategy.html#3065" class="Function">Run</a> <a id="3417" class="Symbol">→</a> <a id="3419" href="Bitcoin.BasicTypes.html#309" class="Function">Time</a>
<a id="3424" href="ComputationalModel.Strategy.html#3408" class="Function">δʳ</a> <a id="3427" class="Symbol">=</a> <a id="3429" href="Data.List.Base.html#4217" class="Function">sum</a> <a id="3433" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="3435" href="Data.List.Base.html#1497" class="Function">map</a> <a id="3439" href="ComputationalModel.Strategy.html#3454" class="Function">δˡ</a>
  <a id="3444" class="Keyword">where</a>
    <a id="3454" href="ComputationalModel.Strategy.html#3454" class="Function">δˡ</a> <a id="3457" class="Symbol">:</a> <a id="3459" href="ComputationalModel.Strategy.html#2740" class="Datatype">Label</a> <a id="3465" class="Symbol">→</a> <a id="3467" href="Bitcoin.BasicTypes.html#309" class="Function">Time</a>
    <a id="3476" href="ComputationalModel.Strategy.html#3454" class="Function">δˡ</a> <a id="3479" class="Symbol">(</a><a id="3480" href="ComputationalModel.Strategy.html#2897" class="InductiveConstructor">delay</a> <a id="3486" href="ComputationalModel.Strategy.html#3486" class="Bound">t</a><a id="3487" class="Symbol">)</a> <a id="3489" class="Symbol">=</a> <a id="3491" href="ComputationalModel.Strategy.html#3486" class="Bound">t</a>
    <a id="3497" href="ComputationalModel.Strategy.html#3454" class="CatchallClause Function">δˡ</a><a id="3499" class="CatchallClause"> </a><a id="3500" class="CatchallClause Symbol">_</a>         <a id="3510" class="Symbol">=</a> <a id="3512" class="Number">0</a>

<a id="𝔹"></a><a id="3515" href="ComputationalModel.Strategy.html#3515" class="Function">𝔹</a> <a id="3517" class="Symbol">:</a> <a id="3519" href="ComputationalModel.Strategy.html#3065" class="Function">Run</a> <a id="3523" class="Symbol">→</a> <a id="3525" href="Bitcoin.Semantics.Consistency.html#1171" class="Function">Blockchain</a>
<a id="3536" href="ComputationalModel.Strategy.html#3515" class="Function">𝔹</a> <a id="3538" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="3541" class="Symbol">=</a> <a id="3543" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
<a id="3546" href="ComputationalModel.Strategy.html#3515" class="Function">𝔹</a> <a id="3548" class="Symbol">(</a><a id="3549" href="ComputationalModel.Strategy.html#3549" class="Bound">l</a> <a id="3551" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3553" href="ComputationalModel.Strategy.html#3553" class="Bound">ls</a><a id="3555" class="Symbol">)</a> <a id="3557" class="Keyword">with</a> <a id="3562" href="ComputationalModel.Strategy.html#3549" class="Bound">l</a>
<a id="3564" class="Symbol">...</a> <a id="3568" class="Symbol">|</a> <a id="3570" href="ComputationalModel.Strategy.html#2852" class="InductiveConstructor">submit</a> <a id="3577" href="ComputationalModel.Strategy.html#3577" class="Bound">tx</a> <a id="3580" class="Symbol">=</a> <a id="3582" class="Symbol">(</a><a id="3583" href="ComputationalModel.Strategy.html#3577" class="Bound">tx</a> <a id="3586" href="Bitcoin.Tx.Base.html#1723" class="InductiveConstructor Operator">at</a> <a id="3589" class="Symbol">(</a><a id="3590" href="ComputationalModel.Strategy.html#3408" class="Function">δʳ</a> <a id="3593" class="Bound">ls</a><a id="3595" class="Symbol">))</a> <a id="3598" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3600" href="ComputationalModel.Strategy.html#3515" class="Function">𝔹</a> <a id="3602" class="Bound">ls</a>
<a id="3605" class="CatchallClause Symbol">...</a><a id="3608" class="CatchallClause"> </a><a id="3609" class="CatchallClause Symbol">|</a><a id="3610" class="CatchallClause"> </a><a id="3611" class="CatchallClause Symbol">_</a>         <a id="3621" class="Symbol">=</a> <a id="3623" href="ComputationalModel.Strategy.html#3515" class="Function">𝔹</a> <a id="3625" class="Bound">ls</a>

<a id="3629" class="Comment">-- For each participant, the coinbase transaction contains an output redeemable with his/her private key.</a>
<a id="Coinbase"></a><a id="3735" href="ComputationalModel.Strategy.html#3735" class="Function">Coinbase</a> <a id="3744" class="Symbol">:</a> <a id="3746" href="Bitcoin.Tx.Base.html#1252" class="Function">∃Tx</a> <a id="3750" class="Symbol">→</a> <a id="3752" class="PrimitiveType">Set</a>
<a id="3756" href="ComputationalModel.Strategy.html#3735" class="Function">Coinbase</a> <a id="3765" class="Symbol">(_</a> <a id="3768" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3770" class="Symbol">_</a> <a id="3772" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3774" href="ComputationalModel.Strategy.html#3774" class="Bound">tx</a><a id="3776" class="Symbol">)</a> <a id="3778" class="Symbol">=</a>
  <a id="3782" class="Symbol">∀</a> <a id="3784" class="Symbol">{</a><a id="3785" href="ComputationalModel.Strategy.html#3785" class="Bound">A</a><a id="3786" class="Symbol">}</a> <a id="3788" class="Symbol">→</a> <a id="3790" href="ComputationalModel.Strategy.html#3785" class="Bound">A</a> <a id="3792" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="3794" href="ComputationalModel.Strategy.html#2438" class="Function">allParticipants</a> <a id="3810" class="Symbol">→</a>
    <a id="3816" class="Symbol">(</a><a id="3817" href="Bitcoin.Script.Base.html#794" class="InductiveConstructor">Ctx</a> <a id="3821" class="Number">1</a> <a id="3823" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3825" class="Symbol">(</a><a id="3826" href="Bitcoin.Script.Base.html#2373" class="InductiveConstructor Operator">ƛ</a> <a id="3828" class="Symbol">(</a><a id="3829" href="Bitcoin.Script.Base.html#1695" class="InductiveConstructor">versig</a> <a id="3836" href="Data.List.Base.html#4458" class="Function Operator">[</a> <a id="3838" href="ComputationalModel.Strategy.html#2570" class="Function">K̂</a> <a id="3841" href="ComputationalModel.Strategy.html#3785" class="Bound">A</a> <a id="3843" href="Data.List.Base.html#4458" class="Function Operator">]</a> <a id="3845" href="Data.List.Base.html#4458" class="Function Operator">[</a> <a id="3847" href="Data.Fin.Patterns.html#390" class="InductiveConstructor">0F</a> <a id="3850" href="Data.List.Base.html#4458" class="Function Operator">]</a><a id="3851" class="Symbol">)))</a> <a id="3855" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="3857" href="Data.List.Base.html#1497" class="Function">map</a> <a id="3861" class="Symbol">(</a><a id="3862" href="Data.Product.html#2624" class="Function">map₂</a> <a id="3867" href="Bitcoin.Tx.Base.html#799" class="Field">validator</a><a id="3876" class="Symbol">)</a> <a id="3878" class="Symbol">(</a><a id="3879" href="Data.Vec.Base.html#7399" class="Function">V.toList</a> <a id="3888" class="Symbol">(</a><a id="3889" href="Bitcoin.Tx.Base.html#1147" class="Field">outputs</a> <a id="3897" href="ComputationalModel.Strategy.html#3774" class="Bound">tx</a><a id="3899" class="Symbol">))</a>

<a id="3903" class="Comment">-- Initially, all participants broadcast both their public keys.</a>
<a id="initialBroadcasts"></a><a id="3968" href="ComputationalModel.Strategy.html#3968" class="Function">initialBroadcasts</a> <a id="3986" class="Symbol">:</a> <a id="3988" href="ComputationalModel.Strategy.html#3085" class="Function">Labels</a>
<a id="3995" href="ComputationalModel.Strategy.html#3968" class="Function">initialBroadcasts</a> <a id="4013" class="Symbol">=</a> <a id="4015" href="Data.List.Base.html#1497" class="Function">map</a> <a id="4019" href="ComputationalModel.Strategy.html#4050" class="Function">go</a> <a id="4022" href="ComputationalModel.Strategy.html#2438" class="Function">allParticipants</a>
  <a id="4040" class="Keyword">where</a>
    <a id="4050" href="ComputationalModel.Strategy.html#4050" class="Function">go</a> <a id="4053" class="Symbol">:</a> <a id="4055" href="ComputationalModel.Strategy.html#2179" class="Bound">Participant</a> <a id="4067" class="Symbol">→</a> <a id="4069" href="ComputationalModel.Strategy.html#2740" class="Datatype">Label</a>
    <a id="4079" href="ComputationalModel.Strategy.html#4050" class="Function">go</a> <a id="4082" href="ComputationalModel.Strategy.html#4082" class="Bound">A</a> <a id="4084" class="Symbol">=</a> <a id="4086" href="ComputationalModel.Strategy.html#4082" class="Bound">A</a> <a id="4088" href="ComputationalModel.Strategy.html#2783" class="InductiveConstructor Operator">→✴∶</a> <a id="4092" class="Symbol">(</a><a id="4093" href="ComputationalModel.Strategy.html#2620" class="Function">Kᵖ</a> <a id="4096" href="ComputationalModel.Strategy.html#4082" class="Bound">A</a> <a id="4098" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="4100" href="ComputationalModel.Strategy.html#2655" class="Function">K̂ᵖ</a> <a id="4104" href="ComputationalModel.Strategy.html#4082" class="Bound">A</a> <a id="4106" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="4108" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="4110" class="Symbol">)</a>

<a id="4113" class="Comment">-- An initial run begins with a coinbase transaction and all appropriate initial broadcasts.</a>
<a id="Initial"></a><a id="4206" href="ComputationalModel.Strategy.html#4206" class="Function">Initial</a> <a id="4214" class="Symbol">:</a> <a id="4216" href="ComputationalModel.Strategy.html#3065" class="Function">Run</a> <a id="4220" class="Symbol">→</a> <a id="4222" class="PrimitiveType">Set</a>
<a id="4226" href="ComputationalModel.Strategy.html#4206" class="Function">Initial</a> <a id="4234" href="ComputationalModel.Strategy.html#4234" class="Bound">R</a> <a id="4236" class="Symbol">=</a> <a id="4238" href="Data.Product.html#1788" class="Function">∃[</a> <a id="4241" href="ComputationalModel.Strategy.html#4241" class="Bound">T₀</a> <a id="4244" href="Data.Product.html#1788" class="Function">]</a> <a id="4246" class="Symbol">(</a><a id="4247" href="ComputationalModel.Strategy.html#3735" class="Function">Coinbase</a> <a id="4256" href="ComputationalModel.Strategy.html#4241" class="Bound">T₀</a> <a id="4259" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4261" class="Symbol">(</a><a id="4262" href="ComputationalModel.Strategy.html#4234" class="Bound">R</a> <a id="4264" href="Data.List.Relation.Binary.Permutation.Propositional.html#1041" class="Datatype Operator">↭</a> <a id="4266" class="Symbol">(</a><a id="4267" href="ComputationalModel.Strategy.html#2852" class="InductiveConstructor">submit</a> <a id="4274" href="ComputationalModel.Strategy.html#4241" class="Bound">T₀</a> <a id="4277" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="4279" href="ComputationalModel.Strategy.html#3968" class="Function">initialBroadcasts</a><a id="4296" class="Symbol">)))</a>

<a id="4301" class="Comment">-- A run is valid, when it has an initial run as a prefix.</a>
<a id="Valid"></a><a id="4360" href="ComputationalModel.Strategy.html#4360" class="Function">Valid</a> <a id="4366" class="Symbol">:</a> <a id="4368" href="ComputationalModel.Strategy.html#3065" class="Function">Run</a> <a id="4372" class="Symbol">→</a> <a id="4374" class="PrimitiveType">Set</a>
<a id="4378" href="ComputationalModel.Strategy.html#4360" class="Function">Valid</a> <a id="4384" href="ComputationalModel.Strategy.html#4384" class="Bound">R</a> <a id="4386" class="Symbol">=</a> <a id="4388" href="Data.Product.html#1788" class="Function">∃[</a> <a id="4391" href="ComputationalModel.Strategy.html#4391" class="Bound">R₀</a> <a id="4394" href="Data.Product.html#1788" class="Function">]</a> <a id="4396" class="Symbol">(</a><a id="4397" href="ComputationalModel.Strategy.html#4206" class="Function">Initial</a> <a id="4405" href="ComputationalModel.Strategy.html#4391" class="Bound">R₀</a> <a id="4408" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4410" href="Data.List.Relation.Binary.Prefix.Heterogeneous.html#664" class="Datatype">Prefix</a> <a id="4417" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a> <a id="4421" href="ComputationalModel.Strategy.html#4391" class="Bound">R₀</a> <a id="4424" href="ComputationalModel.Strategy.html#4384" class="Bound">R</a><a id="4425" class="Symbol">)</a>

<a id="4428" class="Comment">----------------------------------</a>
<a id="4463" class="Comment">-- Computational strategies.</a>


<a id="4494" class="Comment">-- Consistent update of the blockchain, in a run where certain components of the transaction have been made public.</a>
<a id="_▷ʳ_"></a><a id="4610" href="ComputationalModel.Strategy.html#4610" class="Function Operator">_▷ʳ_</a> <a id="4615" class="Symbol">:</a> <a id="4617" href="ComputationalModel.Strategy.html#3065" class="Function">Run</a> <a id="4621" class="Symbol">→</a> <a id="4623" href="Bitcoin.Tx.Base.html#1252" class="Function">∃Tx</a> <a id="4627" class="Symbol">→</a> <a id="4629" class="PrimitiveType">Set</a>
<a id="4633" href="ComputationalModel.Strategy.html#4633" class="Bound">R</a> <a id="4635" href="ComputationalModel.Strategy.html#4610" class="Function Operator">▷ʳ</a> <a id="4638" href="ComputationalModel.Strategy.html#4638" class="Bound">∃tx</a> <a id="4642" class="Symbol">=</a>
  <a id="4646" class="Keyword">let</a> <a id="4650" href="ComputationalModel.Strategy.html#4650" class="Bound">tx</a> <a id="4653" class="Symbol">=</a> <a id="4655" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="4661" class="Symbol">(</a><a id="4662" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="4668" href="ComputationalModel.Strategy.html#4638" class="Bound">∃tx</a><a id="4671" class="Symbol">)</a> <a id="4673" class="Keyword">in</a>
    <a id="4680" class="Symbol">(</a><a id="4681" href="ComputationalModel.Strategy.html#3515" class="Function">𝔹</a> <a id="4683" href="ComputationalModel.Strategy.html#4633" class="Bound">R</a> <a id="4685" href="Bitcoin.Semantics.Consistency.html#2111" class="Record Operator">▷</a> <a id="4687" href="ComputationalModel.Strategy.html#4650" class="Bound">tx</a> <a id="4690" href="Bitcoin.Semantics.Consistency.html#2111" class="Record Operator">,</a> <a id="4692" href="ComputationalModel.Strategy.html#3408" class="Function">δʳ</a> <a id="4695" href="ComputationalModel.Strategy.html#4633" class="Bound">R</a><a id="4696" class="Symbol">)</a>
  <a id="4700" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4702" href="Data.Product.html#1788" class="Function">∃[</a> <a id="4705" href="ComputationalModel.Strategy.html#4705" class="Bound">B</a> <a id="4707" href="Data.Product.html#1788" class="Function">]</a> <a id="4709" class="Symbol">(</a><a id="4710" href="ComputationalModel.Strategy.html#4705" class="Bound">B</a> <a id="4712" href="ComputationalModel.Strategy.html#2783" class="InductiveConstructor Operator">→✴∶</a> <a id="4716" href="Data.List.Base.html#4458" class="Function Operator">[</a> <a id="4718" href="Bitcoin.Tx.Crypto.html#1073" class="Function">hashTx</a> <a id="4725" href="ComputationalModel.Strategy.html#4638" class="Bound">∃tx</a> <a id="4729" href="Data.List.Base.html#4458" class="Function Operator">]</a> <a id="4731" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="4733" href="ComputationalModel.Strategy.html#4633" class="Bound">R</a><a id="4734" class="Symbol">)</a>
  <a id="4738" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4740" href="ComputationalModel.Strategy.html#1332" class="Datatype">Allᵥ</a> <a id="4745" class="Symbol">(λ</a> <a id="4748" href="ComputationalModel.Strategy.html#4748" class="Bound">i</a> <a id="4750" class="Symbol">→</a> <a id="4752" href="Data.Product.html#1788" class="Function">∃[</a> <a id="4755" href="ComputationalModel.Strategy.html#4755" class="Bound">tx′</a> <a id="4759" href="Data.Product.html#1788" class="Function">]</a> <a id="4761" class="Symbol">((</a><a id="4763" href="ComputationalModel.Strategy.html#2852" class="InductiveConstructor">submit</a> <a id="4770" href="ComputationalModel.Strategy.html#4755" class="Bound">tx′</a> <a id="4774" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="4776" href="ComputationalModel.Strategy.html#4633" class="Bound">R</a><a id="4777" class="Symbol">)</a> <a id="4779" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4781" class="Symbol">(</a><a id="4782" href="Bitcoin.Tx.Crypto.html#1073" class="Function">hashTx</a> <a id="4789" href="ComputationalModel.Strategy.html#4755" class="Bound">tx′</a> <a id="4793" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4795" href="Bitcoin.Tx.Base.html#574" class="Field">txId</a> <a id="4800" href="ComputationalModel.Strategy.html#4748" class="Bound">i</a><a id="4801" class="Symbol">)))</a> <a id="4805" class="Symbol">(</a><a id="4806" href="Bitcoin.Tx.Base.html#997" class="Field">inputs</a> <a id="4813" href="ComputationalModel.Strategy.html#4650" class="Bound">tx</a><a id="4815" class="Symbol">)</a>
  <a id="4819" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4821" href="ComputationalModel.Strategy.html#1332" class="Datatype">Allᵥ</a> <a id="4826" class="Symbol">(λ</a> <a id="4829" href="ComputationalModel.Strategy.html#4829" class="Bound">w</a> <a id="4831" class="Symbol">→</a> <a id="4833" href="Data.Product.html#1788" class="Function">∃[</a> <a id="4836" href="ComputationalModel.Strategy.html#4836" class="Bound">B</a> <a id="4838" href="Data.Product.html#1788" class="Function">]</a> <a id="4840" class="Symbol">(</a><a id="4841" href="ComputationalModel.Strategy.html#4836" class="Bound">B</a> <a id="4843" href="ComputationalModel.Strategy.html#2783" class="InductiveConstructor Operator">→✴∶</a> <a id="4847" href="Data.Vec.Base.html#7399" class="Function">V.toList</a> <a id="4856" class="Symbol">(</a><a id="4857" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="4863" href="ComputationalModel.Strategy.html#4829" class="Bound">w</a><a id="4864" class="Symbol">)</a> <a id="4866" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="4868" href="ComputationalModel.Strategy.html#4633" class="Bound">R</a><a id="4869" class="Symbol">))</a> <a id="4872" class="Symbol">(</a><a id="4873" href="Bitcoin.Tx.Base.html#1038" class="Field">wit</a> <a id="4877" href="ComputationalModel.Strategy.html#4650" class="Bound">tx</a><a id="4879" class="Symbol">)</a>

<a id="4882" class="Keyword">record</a> <a id="ParticipantStrategy"></a><a id="4889" href="ComputationalModel.Strategy.html#4889" class="Record">ParticipantStrategy</a> <a id="4909" class="Symbol">(</a><a id="4910" href="ComputationalModel.Strategy.html#4910" class="Bound">A</a> <a id="4912" class="Symbol">:</a> <a id="4914" href="ComputationalModel.Strategy.html#2179" class="Bound">Participant</a><a id="4925" class="Symbol">)</a> <a id="4927" class="Symbol">:</a> <a id="4929" class="PrimitiveType">Set</a> <a id="4933" class="Keyword">where</a>
  <a id="4941" class="Keyword">field</a>
    <a id="ParticipantStrategy.Σ"></a><a id="4951" href="ComputationalModel.Strategy.html#4951" class="Field">Σ</a> <a id="4953" class="Symbol">:</a> <a id="4955" href="ComputationalModel.Strategy.html#3065" class="Function">Run</a> <a id="4959" class="Symbol">→</a> <a id="4961" href="ComputationalModel.Strategy.html#3085" class="Function">Labels</a>

    <a id="ParticipantStrategy.valid"></a><a id="4973" href="ComputationalModel.Strategy.html#4973" class="Field">valid</a> <a id="4979" class="Symbol">:</a> <a id="4981" class="Comment">-- participant is honest</a>
            <a id="5018" href="ComputationalModel.Strategy.html#4910" class="Bound">A</a> <a id="5020" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="5022" href="ComputationalModel.Strategy.html#2395" class="Function">Hon</a>
            <a id="5038" class="Comment">-- only valid computational labels</a>
          <a id="5083" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="5085" class="Symbol">(∀</a> <a id="5088" class="Symbol">{</a><a id="5089" href="ComputationalModel.Strategy.html#5089" class="Bound">R</a> <a id="5091" href="ComputationalModel.Strategy.html#5091" class="Bound">α</a><a id="5092" class="Symbol">}</a> <a id="5094" class="Symbol">→</a> <a id="5096" class="Keyword">let</a> <a id="5100" href="ComputationalModel.Strategy.html#5100" class="Bound">R✴</a> <a id="5103" class="Symbol">=</a> <a id="5105" href="ComputationalModel.Strategy.html#3132" class="Function">strip</a> <a id="5111" href="ComputationalModel.Strategy.html#4910" class="Bound">A</a> <a id="5113" href="ComputationalModel.Strategy.html#5089" class="Bound">R</a> <a id="5115" class="Keyword">in</a>
               <a id="5133" href="ComputationalModel.Strategy.html#5091" class="Bound">α</a> <a id="5135" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="5137" href="ComputationalModel.Strategy.html#4951" class="Field">Σ</a> <a id="5139" href="ComputationalModel.Strategy.html#5100" class="Bound">R✴</a>
             <a id="5155" class="Symbol">→</a> <a id="5157" class="Symbol">(</a> <a id="5159" class="Comment">-- (1) message from A</a>
                 <a id="5198" href="Data.Product.html#1788" class="Function">∃[</a> <a id="5201" href="ComputationalModel.Strategy.html#5201" class="Bound">m</a> <a id="5203" href="Data.Product.html#1788" class="Function">]</a>
                   <a id="5224" class="Symbol">(</a> <a id="5226" class="Symbol">(</a><a id="5227" href="ComputationalModel.Strategy.html#5091" class="Bound">α</a> <a id="5229" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="5231" href="ComputationalModel.Strategy.html#4910" class="Bound">A</a> <a id="5233" href="ComputationalModel.Strategy.html#2783" class="InductiveConstructor Operator">→✴∶</a> <a id="5237" href="ComputationalModel.Strategy.html#5201" class="Bound">m</a><a id="5238" class="Symbol">)</a>
                   <a id="5259" href="Data.Sum.Base.html#728" class="Datatype Operator">⊎</a> <a id="5261" class="Symbol">(</a><a id="5262" href="ComputationalModel.Strategy.html#5091" class="Bound">α</a> <a id="5264" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="5266" href="ComputationalModel.Strategy.html#4910" class="Bound">A</a> <a id="5268" href="ComputationalModel.Strategy.html#2954" class="InductiveConstructor Operator">→O∶</a> <a id="5272" href="ComputationalModel.Strategy.html#5201" class="Bound">m</a><a id="5273" class="Symbol">)</a> <a id="5275" class="Symbol">)</a>
                 <a id="5294" class="Comment">-- (2) new transaction</a>
               <a id="5332" href="Data.Sum.Base.html#728" class="Datatype Operator">⊎</a> <a id="5334" href="Data.Product.html#1788" class="Function">∃[</a> <a id="5337" href="ComputationalModel.Strategy.html#5337" class="Bound">tx</a> <a id="5340" href="Data.Product.html#1788" class="Function">]</a>
                    <a id="5362" class="Symbol">(</a> <a id="5364" class="Symbol">(</a><a id="5365" href="ComputationalModel.Strategy.html#5091" class="Bound">α</a> <a id="5367" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="5369" href="ComputationalModel.Strategy.html#2852" class="InductiveConstructor">submit</a> <a id="5376" href="ComputationalModel.Strategy.html#5337" class="Bound">tx</a><a id="5378" class="Symbol">)</a>
                    <a id="5400" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="5402" class="Symbol">(</a><a id="5403" href="ComputationalModel.Strategy.html#5100" class="Bound">R✴</a> <a id="5406" href="ComputationalModel.Strategy.html#4610" class="Function Operator">▷ʳ</a> <a id="5409" href="ComputationalModel.Strategy.html#5337" class="Bound">tx</a><a id="5411" class="Symbol">)</a> <a id="5413" class="Symbol">)</a>
                 <a id="5432" class="Comment">-- (3) delay</a>
               <a id="5460" href="Data.Sum.Base.html#728" class="Datatype Operator">⊎</a> <a id="5462" href="Data.Product.html#1788" class="Function">∃[</a> <a id="5465" href="ComputationalModel.Strategy.html#5465" class="Bound">δ</a> <a id="5467" href="Data.Product.html#1788" class="Function">]</a> <a id="5469" class="Symbol">(</a><a id="5470" href="ComputationalModel.Strategy.html#5091" class="Bound">α</a> <a id="5472" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="5474" href="ComputationalModel.Strategy.html#2897" class="InductiveConstructor">delay</a> <a id="5480" href="ComputationalModel.Strategy.html#5465" class="Bound">δ</a><a id="5481" class="Symbol">)</a>
               <a id="5498" class="Symbol">)</a>
            <a id="5512" class="Symbol">)</a>
            <a id="5526" class="Comment">-- persistence</a>
          <a id="5551" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="5553" class="Symbol">(∀</a> <a id="5556" class="Symbol">{</a><a id="5557" href="ComputationalModel.Strategy.html#5557" class="Bound">R</a> <a id="5559" href="ComputationalModel.Strategy.html#5559" class="Bound">α</a><a id="5560" class="Symbol">}</a>
             <a id="5575" class="Symbol">→</a> <a id="5577" class="Keyword">let</a>
                 <a id="5598" href="ComputationalModel.Strategy.html#5598" class="Bound">R✴</a> <a id="5601" class="Symbol">=</a> <a id="5603" href="ComputationalModel.Strategy.html#3132" class="Function">strip</a> <a id="5609" href="ComputationalModel.Strategy.html#4910" class="Bound">A</a> <a id="5611" href="ComputationalModel.Strategy.html#5557" class="Bound">R</a>
                 <a id="5630" href="ComputationalModel.Strategy.html#5630" class="Bound">Λ</a>  <a id="5633" class="Symbol">=</a> <a id="5635" href="ComputationalModel.Strategy.html#4951" class="Field">Σ</a> <a id="5637" href="ComputationalModel.Strategy.html#5598" class="Bound">R✴</a>
                 <a id="5657" href="ComputationalModel.Strategy.html#5657" class="Bound">R′</a> <a id="5660" class="Symbol">=</a> <a id="5662" href="ComputationalModel.Strategy.html#5559" class="Bound">α</a> <a id="5664" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="5666" href="ComputationalModel.Strategy.html#5598" class="Bound">R✴</a>
                 <a id="5686" href="ComputationalModel.Strategy.html#5686" class="Bound">Λ′</a> <a id="5689" class="Symbol">=</a> <a id="5691" href="ComputationalModel.Strategy.html#4951" class="Field">Σ</a> <a id="5693" href="ComputationalModel.Strategy.html#5657" class="Bound">R′</a>
               <a id="5711" class="Keyword">in</a>
               <a id="5729" href="ComputationalModel.Strategy.html#5559" class="Bound">α</a> <a id="5731" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="5733" href="ComputationalModel.Strategy.html#5630" class="Bound">Λ</a>
             <a id="5748" class="Symbol">→</a> <a id="5750" href="Bitcoin.Semantics.Consistency.html#3513" class="Datatype">ConsistentBlockchain</a> <a id="5771" class="Symbol">(</a><a id="5772" href="ComputationalModel.Strategy.html#3515" class="Function">𝔹</a> <a id="5774" href="ComputationalModel.Strategy.html#5657" class="Bound">R′</a><a id="5776" class="Symbol">)</a>
             <a id="5791" class="Symbol">→</a> <a id="5793" class="Symbol">(∀</a> <a id="5796" class="Symbol">{</a><a id="5797" href="ComputationalModel.Strategy.html#5797" class="Bound">α′</a><a id="5799" class="Symbol">}</a> <a id="5801" class="Symbol">→</a> <a id="5803" href="ComputationalModel.Strategy.html#5797" class="Bound">α′</a> <a id="5806" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="5808" href="ComputationalModel.Strategy.html#5630" class="Bound">Λ</a> <a id="5810" class="Symbol">→</a> <a id="5812" href="ComputationalModel.Strategy.html#5797" class="Bound">α′</a> <a id="5815" href="Relation.Binary.PropositionalEquality.Core.html#840" class="Function Operator">≢</a> <a id="5817" href="ComputationalModel.Strategy.html#5559" class="Bound">α</a> <a id="5819" class="Symbol">→</a> <a id="5821" href="ComputationalModel.Strategy.html#5797" class="Bound">α′</a> <a id="5824" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="5826" href="ComputationalModel.Strategy.html#5686" class="Bound">Λ′</a><a id="5828" class="Symbol">)</a>
             <a id="5843" class="Comment">-- → (∀ {tx} → submit tx ∈ Λ → 𝔹 R′ → submit tx ∈ Λ′)</a>
             <a id="5910" class="Comment">-- × (∀ {m} → (A →✴∶ m) ∈ Λ → (A →✴∶ m) ≢ α → (A →✴∶ m) ∈ Λ′)</a>
             <a id="5985" class="Comment">-- × (∀ {m} → (A →O∶ m) ∈ Λ → (A →O∶ m) ≢ α → (A →O∶ m) ∈ Λ′)</a>
            <a id="6059" class="Symbol">)</a>

<a id="6062" class="Keyword">open</a> <a id="6067" href="ComputationalModel.Strategy.html#4889" class="Module">ParticipantStrategy</a> <a id="6087" class="Keyword">public</a>


<a id="HonestStrategies"></a><a id="6096" href="ComputationalModel.Strategy.html#6096" class="Function">HonestStrategies</a> <a id="6113" class="Symbol">:</a> <a id="6115" class="PrimitiveType">Set</a>
<a id="6119" href="ComputationalModel.Strategy.html#6096" class="Function">HonestStrategies</a> <a id="6136" class="Symbol">=</a> <a id="6138" class="Symbol">∀</a> <a id="6140" class="Symbol">{</a><a id="6141" href="ComputationalModel.Strategy.html#6141" class="Bound">A</a><a id="6142" class="Symbol">}</a> <a id="6144" class="Symbol">→</a> <a id="6146" href="ComputationalModel.Strategy.html#6141" class="Bound">A</a> <a id="6148" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="6150" href="ComputationalModel.Strategy.html#2395" class="Function">Hon</a> <a id="6154" class="Symbol">→</a> <a id="6156" href="ComputationalModel.Strategy.html#4889" class="Record">ParticipantStrategy</a> <a id="6176" href="ComputationalModel.Strategy.html#6141" class="Bound">A</a>

<a id="HonestMoves"></a><a id="6179" href="ComputationalModel.Strategy.html#6179" class="Function">HonestMoves</a> <a id="6191" class="Symbol">:</a> <a id="6193" class="PrimitiveType">Set</a>
<a id="6197" href="ComputationalModel.Strategy.html#6179" class="Function">HonestMoves</a> <a id="6209" class="Symbol">=</a> <a id="6211" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="6216" class="Symbol">(</a><a id="6217" href="ComputationalModel.Strategy.html#2179" class="Bound">Participant</a> <a id="6229" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="6231" href="ComputationalModel.Strategy.html#3085" class="Function">Labels</a><a id="6237" class="Symbol">)</a>

<a id="6240" class="Keyword">variable</a>
  <a id="6251" href="ComputationalModel.Strategy.html#6251" class="Generalizable">moves</a> <a id="6257" class="Symbol">:</a> <a id="6259" href="ComputationalModel.Strategy.html#6179" class="Function">HonestMoves</a>

<a id="6272" class="Keyword">module</a> <a id="AdvM"></a><a id="6279" href="ComputationalModel.Strategy.html#6279" class="Module">AdvM</a> <a id="6284" class="Symbol">(</a><a id="6285" href="ComputationalModel.Strategy.html#6285" class="Bound">Adv</a> <a id="6289" class="Symbol">:</a> <a id="6291" href="ComputationalModel.Strategy.html#2179" class="Bound">Participant</a><a id="6302" class="Symbol">)</a> <a id="6304" class="Symbol">(</a><a id="6305" href="ComputationalModel.Strategy.html#6305" class="Bound">Adv∉</a> <a id="6310" class="Symbol">:</a> <a id="6312" href="ComputationalModel.Strategy.html#6285" class="Bound">Adv</a> <a id="6316" href="Data.List.Membership.Setoid.html#931" class="Function Operator">∉</a> <a id="6318" href="ComputationalModel.Strategy.html#2395" class="Function">Hon</a><a id="6321" class="Symbol">)</a> <a id="6323" class="Keyword">where</a>

  <a id="6332" class="Keyword">record</a> <a id="AdvM.AdversaryStrategy"></a><a id="6339" href="ComputationalModel.Strategy.html#6339" class="Record">AdversaryStrategy</a> <a id="6357" class="Symbol">:</a> <a id="6359" class="PrimitiveType">Set</a> <a id="6363" class="Keyword">where</a>
    <a id="6373" class="Keyword">field</a>
      <a id="AdvM.AdversaryStrategy.Σₐ"></a><a id="6385" href="ComputationalModel.Strategy.html#6385" class="Field">Σₐ</a> <a id="6388" class="Symbol">:</a> <a id="6390" href="ComputationalModel.Strategy.html#3065" class="Function">Run</a> <a id="6394" class="Symbol">→</a> <a id="6396" href="ComputationalModel.Strategy.html#6179" class="Function">HonestMoves</a> <a id="6408" class="Symbol">→</a> <a id="6410" href="ComputationalModel.Strategy.html#2740" class="Datatype">Label</a>

      <a id="AdvM.AdversaryStrategy.valid"></a><a id="6423" href="ComputationalModel.Strategy.html#6423" class="Field">valid</a> <a id="6429" class="Symbol">:</a>
        <a id="6439" class="Symbol">∀</a> <a id="6441" class="Symbol">{</a><a id="6442" href="ComputationalModel.Strategy.html#6442" class="Bound">R</a> <a id="6444" href="ComputationalModel.Strategy.html#6444" class="Bound">moves</a><a id="6449" class="Symbol">}</a> <a id="6451" class="Symbol">→</a>
          <a id="6463" class="Keyword">let</a>
            <a id="6479" href="ComputationalModel.Strategy.html#6479" class="Bound">R✴</a> <a id="6482" class="Symbol">=</a> <a id="6484" href="ComputationalModel.Strategy.html#3132" class="Function">strip</a> <a id="6490" href="ComputationalModel.Strategy.html#6285" class="Bound">Adv</a> <a id="6494" href="ComputationalModel.Strategy.html#6442" class="Bound">R</a>
            <a id="6508" href="ComputationalModel.Strategy.html#6508" class="Bound">α</a>  <a id="6511" class="Symbol">=</a> <a id="6513" href="ComputationalModel.Strategy.html#6385" class="Field">Σₐ</a> <a id="6516" href="ComputationalModel.Strategy.html#6479" class="Bound">R✴</a> <a id="6519" href="ComputationalModel.Strategy.html#6444" class="Bound">moves</a> <a id="6525" class="Comment">-- T0D0 should the honest moves be stripped?</a>
          <a id="6580" class="Keyword">in</a>
          <a id="6593" class="Symbol">(</a> <a id="6595" class="Comment">-- (1) impersonate another participant</a>
            <a id="6646" href="Data.Product.html#1788" class="Function">∃[</a> <a id="6649" href="ComputationalModel.Strategy.html#6649" class="Bound">m</a> <a id="6651" href="Data.Product.html#1788" class="Function">]</a>
              <a id="6667" class="Symbol">(</a> <a id="6669" href="Data.Product.html#1788" class="Function">∃[</a> <a id="6672" href="ComputationalModel.Strategy.html#6672" class="Bound">A</a> <a id="6674" href="Data.Product.html#1788" class="Function">]</a> <a id="6676" class="Symbol">(</a><a id="6677" href="ComputationalModel.Strategy.html#6508" class="Bound">α</a> <a id="6679" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="6681" href="ComputationalModel.Strategy.html#6672" class="Bound">A</a> <a id="6683" href="ComputationalModel.Strategy.html#2783" class="InductiveConstructor Operator">→✴∶</a> <a id="6687" href="ComputationalModel.Strategy.html#6649" class="Bound">m</a><a id="6688" class="Symbol">)</a>
              <a id="6704" href="Data.Sum.Base.html#728" class="Datatype Operator">⊎</a> <a id="6706" class="Symbol">(</a><a id="6707" href="ComputationalModel.Strategy.html#6508" class="Bound">α</a> <a id="6709" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="6711" href="ComputationalModel.Strategy.html#6285" class="Bound">Adv</a> <a id="6715" href="ComputationalModel.Strategy.html#2954" class="InductiveConstructor Operator">→O∶</a> <a id="6719" href="ComputationalModel.Strategy.html#6649" class="Bound">m</a><a id="6720" class="Symbol">)</a> <a id="6722" class="Symbol">)</a>
            <a id="6736" class="Comment">-- (2) consistently update the blockchain</a>
          <a id="6788" href="Data.Sum.Base.html#728" class="Datatype Operator">⊎</a> <a id="6790" href="Data.Product.html#1788" class="Function">∃[</a> <a id="6793" href="ComputationalModel.Strategy.html#6793" class="Bound">tx</a> <a id="6796" href="Data.Product.html#1788" class="Function">]</a>
              <a id="6812" class="Symbol">(</a> <a id="6814" class="Symbol">(</a><a id="6815" href="ComputationalModel.Strategy.html#6508" class="Bound">α</a> <a id="6817" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="6819" href="ComputationalModel.Strategy.html#2852" class="InductiveConstructor">submit</a> <a id="6826" href="ComputationalModel.Strategy.html#6793" class="Bound">tx</a><a id="6828" class="Symbol">)</a>
              <a id="6844" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="6846" class="Symbol">(</a><a id="6847" href="ComputationalModel.Strategy.html#6479" class="Bound">R✴</a> <a id="6850" href="ComputationalModel.Strategy.html#4610" class="Function Operator">▷ʳ</a> <a id="6853" href="ComputationalModel.Strategy.html#6793" class="Bound">tx</a><a id="6855" class="Symbol">)</a> <a id="6857" class="Symbol">)</a>
            <a id="6871" class="Comment">-- (3) delay, if all honest participants agree</a>
          <a id="6928" href="Data.Sum.Base.html#728" class="Datatype Operator">⊎</a> <a id="6930" href="Data.Product.html#1788" class="Function">∃[</a> <a id="6933" href="ComputationalModel.Strategy.html#6933" class="Bound">δ</a> <a id="6935" href="Data.Product.html#1788" class="Function">]</a>
              <a id="6951" class="Symbol">(</a> <a id="6953" class="Symbol">(</a><a id="6954" href="ComputationalModel.Strategy.html#6508" class="Bound">α</a> <a id="6956" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="6958" href="ComputationalModel.Strategy.html#2897" class="InductiveConstructor">delay</a> <a id="6964" href="ComputationalModel.Strategy.html#6933" class="Bound">δ</a><a id="6965" class="Symbol">)</a>
              <a id="6981" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="6983" href="Data.List.Relation.Unary.All.html#1274" class="Datatype">All</a> <a id="6987" class="Symbol">(λ{</a> <a id="6991" class="Symbol">(_</a> <a id="6994" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6996" href="ComputationalModel.Strategy.html#6996" class="Bound">Λ</a><a id="6997" class="Symbol">)</a> <a id="6999" class="Symbol">→</a> <a id="7001" class="Symbol">(</a><a id="7002" href="ComputationalModel.Strategy.html#6996" class="Bound">Λ</a> <a id="7004" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7006" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="7008" class="Symbol">)</a> <a id="7010" href="Data.Sum.Base.html#728" class="Datatype Operator">⊎</a> <a id="7012" href="Data.List.Relation.Unary.Any.html#1111" class="Datatype">Any</a> <a id="7016" class="Symbol">(λ{</a> <a id="7020" class="Symbol">(</a><a id="7021" href="ComputationalModel.Strategy.html#2897" class="InductiveConstructor">delay</a> <a id="7027" href="ComputationalModel.Strategy.html#7027" class="Bound">δ′</a><a id="7029" class="Symbol">)</a> <a id="7031" class="Symbol">→</a> <a id="7033" href="ComputationalModel.Strategy.html#7027" class="Bound">δ′</a> <a id="7036" href="Data.Nat.Base.html#1081" class="Function Operator">≥</a> <a id="7038" href="ComputationalModel.Strategy.html#6933" class="Bound">δ</a> <a id="7040" class="Symbol">;</a> <a id="7042" class="CatchallClause Symbol">_</a> <a id="7044" class="Symbol">→</a> <a id="7046" href="Data.Empty.html#526" class="Datatype">⊥</a> <a id="7048" class="Symbol">})</a> <a id="7051" href="ComputationalModel.Strategy.html#6996" class="Bound">Λ</a><a id="7052" class="Symbol">})</a> <a id="7055" href="ComputationalModel.Strategy.html#6444" class="Bound">moves</a> <a id="7061" class="Symbol">)</a>
          <a id="7073" class="Symbol">)</a>

  <a id="7078" class="Keyword">open</a> <a id="7083" href="ComputationalModel.Strategy.html#6339" class="Module">AdversaryStrategy</a> <a id="7101" class="Keyword">public</a>

  <a id="AdvM.Strategies"></a><a id="7111" href="ComputationalModel.Strategy.html#7111" class="Function">Strategies</a> <a id="7122" class="Symbol">:</a> <a id="7124" class="PrimitiveType">Set</a>
  <a id="7130" href="ComputationalModel.Strategy.html#7111" class="Function">Strategies</a> <a id="7141" class="Symbol">=</a> <a id="7143" href="ComputationalModel.Strategy.html#6339" class="Record">AdversaryStrategy</a> <a id="7161" class="Comment">-- adversarial strategy</a>
             <a id="7198" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="7200" href="ComputationalModel.Strategy.html#6096" class="Function">HonestStrategies</a>  <a id="7218" class="Comment">-- participant strategies</a>

  <a id="7247" class="Keyword">variable</a>
    <a id="7260" href="ComputationalModel.Strategy.html#7260" class="Generalizable">SS</a> <a id="7263" class="Symbol">:</a> <a id="7265" href="ComputationalModel.Strategy.html#7111" class="Function">Strategies</a>

  <a id="AdvM.runHonestAll"></a><a id="7279" href="ComputationalModel.Strategy.html#7279" class="Function">runHonestAll</a> <a id="7292" class="Symbol">:</a> <a id="7294" href="ComputationalModel.Strategy.html#3065" class="Function">Run</a> <a id="7298" class="Symbol">→</a> <a id="7300" href="ComputationalModel.Strategy.html#6096" class="Function">HonestStrategies</a> <a id="7317" class="Symbol">→</a> <a id="7319" href="ComputationalModel.Strategy.html#6179" class="Function">HonestMoves</a>
  <a id="7333" href="ComputationalModel.Strategy.html#7279" class="Function">runHonestAll</a> <a id="7346" href="ComputationalModel.Strategy.html#7346" class="Bound">R</a> <a id="7348" href="ComputationalModel.Strategy.html#7348" class="Bound">S</a> <a id="7350" class="Symbol">=</a> <a id="7352" href="Data.List.Membership.Setoid.html#1123" class="Function">mapWith∈</a> <a id="7361" href="ComputationalModel.Strategy.html#2395" class="Function">Hon</a> <a id="7365" class="Symbol">(λ</a> <a id="7368" class="Symbol">{</a><a id="7369" href="ComputationalModel.Strategy.html#7369" class="Bound">A</a><a id="7370" class="Symbol">}</a> <a id="7372" href="ComputationalModel.Strategy.html#7372" class="Bound">A∈</a> <a id="7375" class="Symbol">→</a> <a id="7377" href="ComputationalModel.Strategy.html#7369" class="Bound">A</a> <a id="7379" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7381" href="ComputationalModel.Strategy.html#4951" class="Field">Σ</a> <a id="7383" class="Symbol">(</a><a id="7384" href="ComputationalModel.Strategy.html#7348" class="Bound">S</a> <a id="7386" href="ComputationalModel.Strategy.html#7372" class="Bound">A∈</a><a id="7388" class="Symbol">)</a> <a id="7390" class="Symbol">(</a><a id="7391" href="ComputationalModel.Strategy.html#3132" class="Function">strip</a> <a id="7397" href="ComputationalModel.Strategy.html#7369" class="Bound">A</a> <a id="7399" href="ComputationalModel.Strategy.html#7346" class="Bound">R</a><a id="7400" class="Symbol">))</a>

  <a id="AdvM.runAdversary"></a><a id="7406" href="ComputationalModel.Strategy.html#7406" class="Function">runAdversary</a> <a id="7419" class="Symbol">:</a> <a id="7421" href="ComputationalModel.Strategy.html#7111" class="Function">Strategies</a> <a id="7432" class="Symbol">→</a> <a id="7434" href="ComputationalModel.Strategy.html#3065" class="Function">Run</a> <a id="7438" class="Symbol">→</a> <a id="7440" href="ComputationalModel.Strategy.html#2740" class="Datatype">Label</a>
  <a id="7448" href="ComputationalModel.Strategy.html#7406" class="Function">runAdversary</a> <a id="7461" class="Symbol">(</a><a id="7462" href="ComputationalModel.Strategy.html#7462" class="Bound">S†</a> <a id="7465" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7467" href="ComputationalModel.Strategy.html#7467" class="Bound">S</a><a id="7468" class="Symbol">)</a> <a id="7470" href="ComputationalModel.Strategy.html#7470" class="Bound">R</a> <a id="7472" class="Symbol">=</a> <a id="7474" href="ComputationalModel.Strategy.html#6385" class="Field">Σₐ</a> <a id="7477" href="ComputationalModel.Strategy.html#7462" class="Bound">S†</a> <a id="7480" class="Symbol">(</a><a id="7481" href="ComputationalModel.Strategy.html#3132" class="Function">strip</a> <a id="7487" href="ComputationalModel.Strategy.html#6285" class="Bound">Adv</a> <a id="7491" href="ComputationalModel.Strategy.html#7470" class="Bound">R</a><a id="7492" class="Symbol">)</a> <a id="7494" class="Symbol">(</a><a id="7495" href="ComputationalModel.Strategy.html#7279" class="Function">runHonestAll</a> <a id="7508" href="ComputationalModel.Strategy.html#7470" class="Bound">R</a> <a id="7510" href="ComputationalModel.Strategy.html#7467" class="Bound">S</a><a id="7511" class="Symbol">)</a>

  <a id="AdvM.oracleMessages"></a><a id="7516" href="ComputationalModel.Strategy.html#7516" class="Function">oracleMessages</a> <a id="7531" class="Symbol">:</a> <a id="7533" href="ComputationalModel.Strategy.html#3085" class="Function">Labels</a> <a id="7540" class="Symbol">→</a> <a id="7542" href="ComputationalModel.Strategy.html#3085" class="Function">Labels</a>
  <a id="7551" href="ComputationalModel.Strategy.html#7516" class="Function">oracleMessages</a> <a id="7566" class="Symbol">=</a> <a id="7568" href="Data.List.Base.html#1582" class="Function">mapMaybe</a> <a id="7577" href="ComputationalModel.Strategy.html#7596" class="Function">go</a>
    <a id="7584" class="Keyword">where</a>
      <a id="7596" href="ComputationalModel.Strategy.html#7596" class="Function">go</a> <a id="7599" class="Symbol">:</a> <a id="7601" href="ComputationalModel.Strategy.html#2740" class="Datatype">Label</a> <a id="7607" class="Symbol">→</a> <a id="7609" href="Data.Maybe.Base.html#838" class="Datatype">Maybe</a> <a id="7615" href="ComputationalModel.Strategy.html#2740" class="Datatype">Label</a>
      <a id="7627" href="ComputationalModel.Strategy.html#7596" class="Function">go</a> <a id="7630" href="ComputationalModel.Strategy.html#7630" class="Bound">l</a><a id="7631" class="Symbol">@(_</a> <a id="7635" href="ComputationalModel.Strategy.html#2954" class="InductiveConstructor Operator">→O∶</a>  <a id="7640" class="Symbol">_)</a> <a id="7643" class="Symbol">=</a> <a id="7645" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="7650" href="ComputationalModel.Strategy.html#7630" class="Bound">l</a>
      <a id="7658" href="ComputationalModel.Strategy.html#7596" class="Function">go</a> <a id="7661" href="ComputationalModel.Strategy.html#7661" class="Bound">l</a><a id="7662" class="Symbol">@(</a><a id="7664" href="ComputationalModel.Strategy.html#3026" class="InductiveConstructor Operator">O→</a> <a id="7667" class="Symbol">_</a> <a id="7669" href="ComputationalModel.Strategy.html#3026" class="InductiveConstructor Operator">∶</a> <a id="7671" class="Symbol">_)</a> <a id="7674" class="Symbol">=</a> <a id="7676" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="7681" href="ComputationalModel.Strategy.html#7661" class="Bound">l</a>
      <a id="7689" href="ComputationalModel.Strategy.html#7596" class="CatchallClause Function">go</a><a id="7691" class="CatchallClause"> </a><a id="7692" class="CatchallClause Symbol">_</a>            <a id="7705" class="Symbol">=</a> <a id="7707" href="Data.Maybe.Base.html#872" class="InductiveConstructor">nothing</a>

  <a id="AdvM.oracleRequests"></a><a id="7718" href="ComputationalModel.Strategy.html#7718" class="Function">oracleRequests</a> <a id="7733" class="Symbol">:</a> <a id="7735" href="ComputationalModel.Strategy.html#2179" class="Bound">Participant</a> <a id="7747" class="Symbol">→</a> <a id="7749" href="ComputationalModel.Strategy.html#3065" class="Function">Run</a> <a id="7753" class="Symbol">→</a> <a id="7755" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="7760" class="Symbol">(</a><a id="7761" href="ComputationalModel.Strategy.html#2740" class="Datatype">Label</a> <a id="7767" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="7769" href="ComputationalModel.Strategy.html#2740" class="Datatype">Label</a><a id="7774" class="Symbol">)</a>
  <a id="7778" href="ComputationalModel.Strategy.html#7718" class="Function">oracleRequests</a> <a id="7793" href="ComputationalModel.Strategy.html#7793" class="Bound">A</a> <a id="7795" class="Symbol">(</a><a id="7796" href="ComputationalModel.Strategy.html#7796" class="Bound">l</a><a id="7797" class="Symbol">@(</a><a id="7799" href="ComputationalModel.Strategy.html#7799" class="Bound">A′</a> <a id="7802" href="ComputationalModel.Strategy.html#2954" class="InductiveConstructor Operator">→O∶</a> <a id="7806" href="ComputationalModel.Strategy.html#7806" class="Bound">m</a><a id="7807" class="Symbol">)</a> <a id="7809" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="7811" href="ComputationalModel.Strategy.html#7811" class="Bound">l′</a><a id="7813" class="Symbol">@(</a><a id="7815" href="ComputationalModel.Strategy.html#3026" class="InductiveConstructor Operator">O→</a> <a id="7818" href="ComputationalModel.Strategy.html#7818" class="Bound">A″</a> <a id="7821" href="ComputationalModel.Strategy.html#3026" class="InductiveConstructor Operator">∶</a> <a id="7823" href="ComputationalModel.Strategy.html#7823" class="Bound">hm</a><a id="7825" class="Symbol">)</a> <a id="7827" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="7829" href="ComputationalModel.Strategy.html#7829" class="Bound">R</a><a id="7830" class="Symbol">)</a> <a id="7832" class="Keyword">with</a> <a id="7837" href="ComputationalModel.Strategy.html#7793" class="Bound">A</a> <a id="7839" href="ComputationalModel.Strategy.html#2201" class="Bound Operator">≟ₚ</a> <a id="7842" href="ComputationalModel.Strategy.html#7799" class="Bound">A′</a> <a id="7845" class="Symbol">|</a> <a id="7847" href="ComputationalModel.Strategy.html#7799" class="Bound">A′</a> <a id="7850" href="ComputationalModel.Strategy.html#2201" class="Bound Operator">≟ₚ</a> <a id="7853" href="ComputationalModel.Strategy.html#7818" class="Bound">A″</a>
  <a id="7858" class="Symbol">...</a> <a id="7862" class="Symbol">|</a> <a id="7864" href="Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="7868" class="Symbol">_</a> <a id="7870" class="Symbol">|</a> <a id="7872" href="Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="7876" class="Symbol">_</a>      <a id="7883" class="Symbol">=</a> <a id="7885" class="Symbol">(</a><a id="7886" class="Bound">l</a> <a id="7888" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7890" class="Bound">l′</a><a id="7892" class="Symbol">)</a> <a id="7894" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="7896" href="ComputationalModel.Strategy.html#7718" class="Function">oracleRequests</a> <a id="7911" class="Bound">A</a> <a id="7913" class="Bound">R</a>
  <a id="7917" class="CatchallClause Symbol">...</a><a id="7920" class="CatchallClause"> </a><a id="7921" class="CatchallClause Symbol">|</a><a id="7922" class="CatchallClause"> </a><a id="7923" class="CatchallClause Symbol">_</a><a id="7924" class="CatchallClause">     </a><a id="7929" class="CatchallClause Symbol">|</a><a id="7930" class="CatchallClause"> </a><a id="7931" class="CatchallClause Symbol">_</a>          <a id="7942" class="Symbol">=</a> <a id="7944" href="ComputationalModel.Strategy.html#7718" class="Function">oracleRequests</a> <a id="7959" class="Bound">A</a> <a id="7961" class="Bound">R</a>
  <a id="7965" href="ComputationalModel.Strategy.html#7718" class="CatchallClause Function">oracleRequests</a><a id="7979" class="CatchallClause"> </a><a id="7980" href="ComputationalModel.Strategy.html#7980" class="CatchallClause Bound">A</a><a id="7981" class="CatchallClause"> </a><a id="7982" class="CatchallClause Symbol">(_</a><a id="7984" class="CatchallClause"> </a><a id="7985" href="Agda.Builtin.List.html#200" class="CatchallClause InductiveConstructor Operator">∷</a><a id="7986" class="CatchallClause"> </a><a id="7987" href="ComputationalModel.Strategy.html#7987" class="CatchallClause Bound">R</a><a id="7988" class="CatchallClause Symbol">)</a> <a id="7990" class="Symbol">=</a> <a id="7992" href="ComputationalModel.Strategy.html#7718" class="Function">oracleRequests</a> <a id="8007" href="ComputationalModel.Strategy.html#7980" class="Bound">A</a> <a id="8009" href="ComputationalModel.Strategy.html#7987" class="Bound">R</a>
  <a id="8013" href="ComputationalModel.Strategy.html#7718" class="Function">oracleRequests</a> <a id="8028" class="Symbol">_</a> <a id="8030" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>      <a id="8038" class="Symbol">=</a> <a id="8040" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>

  <a id="8046" class="Keyword">infix</a> <a id="8052" class="Number">-1</a> <a id="8055" href="ComputationalModel.Strategy.html#8082" class="Datatype Operator">_-pre-conforms-to-_</a>
  <a id="8077" class="Keyword">data</a> <a id="AdvM._-pre-conforms-to-_"></a><a id="8082" href="ComputationalModel.Strategy.html#8082" class="Datatype Operator">_-pre-conforms-to-_</a> <a id="8102" class="Symbol">:</a> <a id="8104" href="ComputationalModel.Strategy.html#3065" class="Function">Run</a> <a id="8108" class="Symbol">→</a> <a id="8110" href="ComputationalModel.Strategy.html#7111" class="Function">Strategies</a> <a id="8121" class="Symbol">→</a> <a id="8123" class="PrimitiveType">Set</a> <a id="8127" class="Keyword">where</a>

    <a id="AdvM._-pre-conforms-to-_.base"></a><a id="8138" href="ComputationalModel.Strategy.html#8138" class="InductiveConstructor">base</a> <a id="8143" class="Symbol">:</a> <a id="8145" href="ComputationalModel.Strategy.html#4206" class="Function">Initial</a> <a id="8153" href="ComputationalModel.Strategy.html#3117" class="Generalizable">R</a>
           <a id="8166" class="Comment">----------------------</a>
         <a id="8198" class="Symbol">→</a> <a id="8200" href="ComputationalModel.Strategy.html#3117" class="Generalizable">R</a> <a id="8202" href="ComputationalModel.Strategy.html#8082" class="Datatype Operator">-pre-conforms-to-</a> <a id="8220" href="ComputationalModel.Strategy.html#7260" class="Generalizable">SS</a>

    <a id="AdvM._-pre-conforms-to-_.step"></a><a id="8228" href="ComputationalModel.Strategy.html#8228" class="InductiveConstructor">step</a> <a id="8233" class="Symbol">:</a>
      <a id="8241" class="Keyword">let</a>
        <a id="8253" class="Symbol">(</a><a id="8254" href="ComputationalModel.Strategy.html#8254" class="Bound">S†</a> <a id="8257" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8259" href="ComputationalModel.Strategy.html#8259" class="Bound">S</a><a id="8260" class="Symbol">)</a> <a id="8262" class="Symbol">=</a> <a id="8264" href="ComputationalModel.Strategy.html#7260" class="Generalizable">SS</a>
        <a id="8275" href="ComputationalModel.Strategy.html#8275" class="Bound">moves</a> <a id="8281" class="Symbol">=</a> <a id="8283" href="ComputationalModel.Strategy.html#7279" class="Function">runHonestAll</a> <a id="8296" href="ComputationalModel.Strategy.html#3117" class="Generalizable">R</a> <a id="8298" href="ComputationalModel.Strategy.html#8259" class="Bound">S</a>
        <a id="8308" href="ComputationalModel.Strategy.html#8308" class="Bound">Λ</a> <a id="8310" class="Symbol">=</a> <a id="8312" href="Data.List.Base.html#1497" class="Function">map</a> <a id="8316" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="8322" href="ComputationalModel.Strategy.html#8275" class="Bound">moves</a>
        <a id="8336" href="ComputationalModel.Strategy.html#8336" class="Bound">α</a> <a id="8338" class="Symbol">=</a> <a id="8340" href="ComputationalModel.Strategy.html#6385" class="Field">Σₐ</a> <a id="8343" href="ComputationalModel.Strategy.html#8254" class="Bound">S†</a> <a id="8346" class="Symbol">(</a><a id="8347" href="ComputationalModel.Strategy.html#3132" class="Function">strip</a> <a id="8353" href="ComputationalModel.Strategy.html#6285" class="Bound">Adv</a> <a id="8357" href="ComputationalModel.Strategy.html#3117" class="Generalizable">R</a><a id="8358" class="Symbol">)</a> <a id="8360" href="ComputationalModel.Strategy.html#8275" class="Bound">moves</a>
      <a id="8372" class="Keyword">in</a>
        <a id="8383" href="ComputationalModel.Strategy.html#3117" class="Generalizable">R</a> <a id="8385" href="ComputationalModel.Strategy.html#8082" class="Datatype Operator">-pre-conforms-to-</a> <a id="8403" href="ComputationalModel.Strategy.html#7260" class="Generalizable">SS</a>
      <a id="8412" class="Symbol">→</a> <a id="8414" href="ComputationalModel.Strategy.html#7516" class="Function">oracleMessages</a> <a id="8429" href="Data.List.Base.html#4458" class="Function Operator">[</a> <a id="8431" href="ComputationalModel.Strategy.html#8336" class="Bound">α</a> <a id="8433" href="Data.List.Base.html#4458" class="Function Operator">]</a> <a id="8435" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="8437" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
      <a id="8446" class="Symbol">→</a> <a id="8448" href="Data.List.Base.html#3883" class="Function">concatMap</a> <a id="8458" href="ComputationalModel.Strategy.html#7516" class="Function">oracleMessages</a> <a id="8473" href="ComputationalModel.Strategy.html#8308" class="Bound">Λ</a> <a id="8475" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="8477" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
        <a id="8488" class="Comment">-------------------------------</a>
      <a id="8526" class="Symbol">→</a> <a id="8528" href="ComputationalModel.Strategy.html#8336" class="Bound">α</a> <a id="8530" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="8532" href="ComputationalModel.Strategy.html#3117" class="Generalizable">R</a> <a id="8534" href="ComputationalModel.Strategy.html#8082" class="Datatype Operator">-pre-conforms-to-</a> <a id="8552" href="ComputationalModel.Strategy.html#7260" class="Generalizable">SS</a>

    <a id="AdvM._-pre-conforms-to-_.oracle-adv"></a><a id="8560" href="ComputationalModel.Strategy.html#8560" class="InductiveConstructor">oracle-adv</a> <a id="8571" class="Symbol">:</a> <a id="8573" class="Symbol">∀</a> <a id="8575" class="Symbol">{</a><a id="8576" href="ComputationalModel.Strategy.html#8576" class="Bound">m</a> <a id="8578" href="ComputationalModel.Strategy.html#8578" class="Bound">hm</a> <a id="8581" class="Symbol">:</a> <a id="8583" href="ComputationalModel.Strategy.html#2717" class="Function">Message</a><a id="8590" class="Symbol">}</a> <a id="8592" class="Symbol">→</a>
      <a id="8600" class="Keyword">let</a>
        <a id="8612" class="Symbol">(</a><a id="8613" href="ComputationalModel.Strategy.html#8613" class="Bound">S†</a> <a id="8616" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8618" href="ComputationalModel.Strategy.html#8618" class="Bound">S</a><a id="8619" class="Symbol">)</a> <a id="8621" class="Symbol">=</a> <a id="8623" href="ComputationalModel.Strategy.html#7260" class="Generalizable">SS</a>
        <a id="8634" href="ComputationalModel.Strategy.html#8634" class="Bound">moves</a> <a id="8640" class="Symbol">=</a> <a id="8642" href="ComputationalModel.Strategy.html#7279" class="Function">runHonestAll</a> <a id="8655" href="ComputationalModel.Strategy.html#3117" class="Generalizable">R</a> <a id="8657" href="ComputationalModel.Strategy.html#8618" class="Bound">S</a>
        <a id="8667" href="ComputationalModel.Strategy.html#8667" class="Bound">Λ</a> <a id="8669" class="Symbol">=</a> <a id="8671" href="Data.List.Base.html#1497" class="Function">map</a> <a id="8675" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="8681" href="ComputationalModel.Strategy.html#8634" class="Bound">moves</a>
        <a id="8695" href="ComputationalModel.Strategy.html#8695" class="Bound">α</a> <a id="8697" class="Symbol">=</a> <a id="8699" href="ComputationalModel.Strategy.html#6385" class="Field">Σₐ</a> <a id="8702" href="ComputationalModel.Strategy.html#8613" class="Bound">S†</a> <a id="8705" class="Symbol">(</a><a id="8706" href="ComputationalModel.Strategy.html#3132" class="Function">strip</a> <a id="8712" href="ComputationalModel.Strategy.html#6285" class="Bound">Adv</a> <a id="8716" href="ComputationalModel.Strategy.html#3117" class="Generalizable">R</a><a id="8717" class="Symbol">)</a> <a id="8719" href="ComputationalModel.Strategy.html#8634" class="Bound">moves</a>
      <a id="8731" class="Keyword">in</a>
        <a id="8742" href="ComputationalModel.Strategy.html#3117" class="Generalizable">R</a> <a id="8744" href="ComputationalModel.Strategy.html#8082" class="Datatype Operator">-pre-conforms-to-</a> <a id="8762" href="ComputationalModel.Strategy.html#7260" class="Generalizable">SS</a>
      <a id="8771" class="Symbol">→</a> <a id="8773" href="ComputationalModel.Strategy.html#8695" class="Bound">α</a> <a id="8775" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="8777" href="ComputationalModel.Strategy.html#6285" class="Bound">Adv</a> <a id="8781" href="ComputationalModel.Strategy.html#2954" class="InductiveConstructor Operator">→O∶</a> <a id="8785" href="ComputationalModel.Strategy.html#8576" class="Bound">m</a>
      <a id="8793" class="Symbol">→</a> <a id="8795" href="Data.List.Base.html#3883" class="Function">concatMap</a> <a id="8805" href="ComputationalModel.Strategy.html#7516" class="Function">oracleMessages</a> <a id="8820" href="ComputationalModel.Strategy.html#8667" class="Bound">Λ</a> <a id="8822" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="8824" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
      <a id="8833" class="Symbol">→</a> <a id="8835" class="Symbol">(∀</a> <a id="8838" class="Symbol">{</a><a id="8839" href="ComputationalModel.Strategy.html#8839" class="Bound">hm′</a><a id="8842" class="Symbol">}</a> <a id="8844" class="Symbol">→</a> <a id="8846" class="Symbol">(</a><a id="8847" href="ComputationalModel.Strategy.html#6285" class="Bound">Adv</a> <a id="8851" href="ComputationalModel.Strategy.html#2954" class="InductiveConstructor Operator">→O∶</a> <a id="8855" href="ComputationalModel.Strategy.html#8576" class="Bound">m</a> <a id="8857" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8859" href="ComputationalModel.Strategy.html#3026" class="InductiveConstructor Operator">O→</a> <a id="8862" href="ComputationalModel.Strategy.html#6285" class="Bound">Adv</a> <a id="8866" href="ComputationalModel.Strategy.html#3026" class="InductiveConstructor Operator">∶</a> <a id="8868" href="ComputationalModel.Strategy.html#8839" class="Bound">hm′</a> <a id="8872" class="Symbol">)</a> <a id="8874" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="8876" href="ComputationalModel.Strategy.html#7718" class="Function">oracleRequests</a> <a id="8891" href="ComputationalModel.Strategy.html#6285" class="Bound">Adv</a> <a id="8895" href="ComputationalModel.Strategy.html#3117" class="Generalizable">R</a>
                 <a id="8914" class="Symbol">→</a> <a id="8916" href="ComputationalModel.Strategy.html#8578" class="Bound">hm</a> <a id="8919" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="8921" href="ComputationalModel.Strategy.html#8839" class="Bound">hm′</a><a id="8924" class="Symbol">)</a>
        <a id="8934" class="Comment">-------------------------------------------------------------</a>
      <a id="9002" class="Symbol">→</a> <a id="9004" class="Symbol">(</a><a id="9005" href="ComputationalModel.Strategy.html#6285" class="Bound">Adv</a> <a id="9009" href="ComputationalModel.Strategy.html#2954" class="InductiveConstructor Operator">→O∶</a> <a id="9013" href="ComputationalModel.Strategy.html#8576" class="Bound">m</a><a id="9014" class="Symbol">)</a> <a id="9016" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="9018" class="Symbol">(</a><a id="9019" href="ComputationalModel.Strategy.html#3026" class="InductiveConstructor Operator">O→</a> <a id="9022" href="ComputationalModel.Strategy.html#6285" class="Bound">Adv</a> <a id="9026" href="ComputationalModel.Strategy.html#3026" class="InductiveConstructor Operator">∶</a> <a id="9028" href="ComputationalModel.Strategy.html#8578" class="Bound">hm</a><a id="9030" class="Symbol">)</a> <a id="9032" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="9034" href="ComputationalModel.Strategy.html#3117" class="Generalizable">R</a> <a id="9036" href="ComputationalModel.Strategy.html#8082" class="Datatype Operator">-pre-conforms-to-</a> <a id="9054" href="ComputationalModel.Strategy.html#7260" class="Generalizable">SS</a>

    <a id="AdvM._-pre-conforms-to-_.oracle-hon"></a><a id="9062" href="ComputationalModel.Strategy.html#9062" class="InductiveConstructor">oracle-hon</a> <a id="9073" class="Symbol">:</a> <a id="9075" class="Symbol">∀</a> <a id="9077" class="Symbol">{</a><a id="9078" href="ComputationalModel.Strategy.html#9078" class="Bound">A</a><a id="9079" class="Symbol">}</a> <a id="9081" class="Symbol">{</a><a id="9082" href="ComputationalModel.Strategy.html#9082" class="Bound">A∈</a> <a id="9085" class="Symbol">:</a> <a id="9087" href="ComputationalModel.Strategy.html#9078" class="Bound">A</a> <a id="9089" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="9091" href="ComputationalModel.Strategy.html#2395" class="Function">Hon</a><a id="9094" class="Symbol">}</a> <a id="9096" class="Symbol">{</a><a id="9097" href="ComputationalModel.Strategy.html#9097" class="Bound">m</a> <a id="9099" href="ComputationalModel.Strategy.html#9099" class="Bound">hm</a> <a id="9102" class="Symbol">:</a> <a id="9104" href="ComputationalModel.Strategy.html#2717" class="Function">Message</a><a id="9111" class="Symbol">}</a> <a id="9113" class="Symbol">→</a>
      <a id="9121" class="Keyword">let</a>
        <a id="9133" class="Symbol">(_</a> <a id="9136" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9138" href="ComputationalModel.Strategy.html#9138" class="Bound">S</a><a id="9139" class="Symbol">)</a> <a id="9141" class="Symbol">=</a> <a id="9143" href="ComputationalModel.Strategy.html#7260" class="Generalizable">SS</a>
        <a id="9154" href="ComputationalModel.Strategy.html#9154" class="Bound">Λ</a> <a id="9156" class="Symbol">=</a> <a id="9158" href="ComputationalModel.Strategy.html#4951" class="Field">Σ</a> <a id="9160" class="Symbol">(</a><a id="9161" href="ComputationalModel.Strategy.html#9138" class="Bound">S</a> <a id="9163" href="ComputationalModel.Strategy.html#9082" class="Bound">A∈</a><a id="9165" class="Symbol">)</a> <a id="9167" class="Symbol">(</a><a id="9168" href="ComputationalModel.Strategy.html#3132" class="Function">strip</a> <a id="9174" href="ComputationalModel.Strategy.html#9078" class="Bound">A</a> <a id="9176" href="ComputationalModel.Strategy.html#3117" class="Generalizable">R</a><a id="9177" class="Symbol">)</a>
      <a id="9185" class="Keyword">in</a>
        <a id="9196" href="ComputationalModel.Strategy.html#3117" class="Generalizable">R</a> <a id="9198" href="ComputationalModel.Strategy.html#8082" class="Datatype Operator">-pre-conforms-to-</a> <a id="9216" href="ComputationalModel.Strategy.html#7260" class="Generalizable">SS</a>
      <a id="9225" class="Symbol">→</a> <a id="9227" href="Data.List.Base.html#6501" class="Function">head</a> <a id="9232" class="Symbol">(</a><a id="9233" href="ComputationalModel.Strategy.html#7516" class="Function">oracleMessages</a> <a id="9248" href="ComputationalModel.Strategy.html#9154" class="Bound">Λ</a><a id="9249" class="Symbol">)</a> <a id="9251" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="9253" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="9258" class="Symbol">(</a><a id="9259" href="ComputationalModel.Strategy.html#6285" class="Bound">Adv</a> <a id="9263" href="ComputationalModel.Strategy.html#2954" class="InductiveConstructor Operator">→O∶</a> <a id="9267" href="ComputationalModel.Strategy.html#9097" class="Bound">m</a><a id="9268" class="Symbol">)</a>
      <a id="9276" class="Symbol">→</a> <a id="9278" class="Symbol">(∀</a> <a id="9281" class="Symbol">{</a><a id="9282" href="ComputationalModel.Strategy.html#9282" class="Bound">hm′</a><a id="9285" class="Symbol">}</a> <a id="9287" class="Symbol">→</a> <a id="9289" class="Symbol">(</a><a id="9290" href="ComputationalModel.Strategy.html#9078" class="Bound">A</a> <a id="9292" href="ComputationalModel.Strategy.html#2954" class="InductiveConstructor Operator">→O∶</a> <a id="9296" href="ComputationalModel.Strategy.html#9097" class="Bound">m</a> <a id="9298" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9300" href="ComputationalModel.Strategy.html#3026" class="InductiveConstructor Operator">O→</a> <a id="9303" href="ComputationalModel.Strategy.html#9078" class="Bound">A</a> <a id="9305" href="ComputationalModel.Strategy.html#3026" class="InductiveConstructor Operator">∶</a> <a id="9307" href="ComputationalModel.Strategy.html#9282" class="Bound">hm′</a> <a id="9311" class="Symbol">)</a> <a id="9313" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="9315" href="ComputationalModel.Strategy.html#7718" class="Function">oracleRequests</a> <a id="9330" href="ComputationalModel.Strategy.html#9078" class="Bound">A</a> <a id="9332" href="ComputationalModel.Strategy.html#3117" class="Generalizable">R</a>
                 <a id="9351" class="Symbol">→</a> <a id="9353" href="ComputationalModel.Strategy.html#9099" class="Bound">hm</a> <a id="9356" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="9358" href="ComputationalModel.Strategy.html#9282" class="Bound">hm′</a><a id="9361" class="Symbol">)</a>
        <a id="9371" class="Comment">-------------------------------------------------------</a>
      <a id="9433" class="Symbol">→</a> <a id="9435" class="Symbol">(</a><a id="9436" href="ComputationalModel.Strategy.html#9078" class="Bound">A</a> <a id="9438" href="ComputationalModel.Strategy.html#2954" class="InductiveConstructor Operator">→O∶</a> <a id="9442" href="ComputationalModel.Strategy.html#9097" class="Bound">m</a><a id="9443" class="Symbol">)</a> <a id="9445" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="9447" class="Symbol">(</a><a id="9448" href="ComputationalModel.Strategy.html#3026" class="InductiveConstructor Operator">O→</a> <a id="9451" href="ComputationalModel.Strategy.html#9078" class="Bound">A</a> <a id="9453" href="ComputationalModel.Strategy.html#3026" class="InductiveConstructor Operator">∶</a> <a id="9455" href="ComputationalModel.Strategy.html#9099" class="Bound">hm</a><a id="9457" class="Symbol">)</a> <a id="9459" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="9461" href="ComputationalModel.Strategy.html#3117" class="Generalizable">R</a> <a id="9463" href="ComputationalModel.Strategy.html#8082" class="Datatype Operator">-pre-conforms-to-</a> <a id="9481" href="ComputationalModel.Strategy.html#7260" class="Generalizable">SS</a>

  <a id="9487" class="Keyword">infix</a> <a id="9493" class="Number">-1</a> <a id="9496" href="ComputationalModel.Strategy.html#9514" class="Function Operator">_-conforms-to-_</a>
  <a id="AdvM._-conforms-to-_"></a><a id="9514" href="ComputationalModel.Strategy.html#9514" class="Function Operator">_-conforms-to-_</a> <a id="9530" class="Symbol">:</a> <a id="9532" href="ComputationalModel.Strategy.html#3065" class="Function">Run</a> <a id="9536" class="Symbol">→</a> <a id="9538" href="ComputationalModel.Strategy.html#7111" class="Function">Strategies</a> <a id="9549" class="Symbol">→</a> <a id="9551" class="PrimitiveType">Set</a>
  <a id="9557" href="ComputationalModel.Strategy.html#9557" class="Bound">R</a> <a id="9559" href="ComputationalModel.Strategy.html#9514" class="Function Operator">-conforms-to-</a> <a id="9573" href="ComputationalModel.Strategy.html#9573" class="Bound">SS</a> <a id="9576" class="Symbol">=</a> <a id="9578" href="Data.Product.html#1788" class="Function">∃[</a> <a id="9581" href="ComputationalModel.Strategy.html#9581" class="Bound">R′</a> <a id="9584" href="Data.Product.html#1788" class="Function">]</a> <a id="9586" class="Symbol">(</a><a id="9587" href="Data.List.Relation.Binary.Prefix.Heterogeneous.html#664" class="Datatype">Prefix</a> <a id="9594" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a> <a id="9598" href="ComputationalModel.Strategy.html#9557" class="Bound">R</a> <a id="9600" href="ComputationalModel.Strategy.html#9581" class="Bound">R′</a> <a id="9603" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="9605" class="Symbol">(</a><a id="9606" href="ComputationalModel.Strategy.html#9581" class="Bound">R′</a> <a id="9609" href="ComputationalModel.Strategy.html#8082" class="Datatype Operator">-pre-conforms-to-</a> <a id="9627" href="ComputationalModel.Strategy.html#9573" class="Bound">SS</a><a id="9629" class="Symbol">))</a>
</pre></body></html>