<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>ComputationalModel.Strategy</title><link rel="stylesheet" href="css/Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Computational strategies.</a>
<a id="103" class="Comment">------------------------------------------------------------------------</a>

<a id="177" class="Keyword">open</a> <a id="182" class="Keyword">import</a> <a id="189" href="Prelude.Init.html" class="Module">Prelude.Init</a> <a id="202" class="Keyword">hiding</a> <a id="209" class="Symbol">(</a><a id="210" href="Agda.Builtin.Sigma.html#166" class="Record">Σ</a><a id="211" class="Symbol">)</a>
<a id="213" class="Keyword">open</a> <a id="218" class="Keyword">import</a> <a id="225" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>
<a id="239" class="Keyword">open</a> <a id="244" class="Keyword">import</a> <a id="251" href="Prelude.Membership.html" class="Module">Prelude.Membership</a>
<a id="270" class="Keyword">open</a> <a id="275" class="Keyword">import</a> <a id="282" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>
<a id="296" class="Keyword">open</a> <a id="301" class="Keyword">import</a> <a id="308" href="Prelude.Bifunctor.html" class="Module">Prelude.Bifunctor</a>
<a id="326" class="Keyword">open</a> <a id="331" class="Keyword">import</a> <a id="338" href="Prelude.Ord.html" class="Module">Prelude.Ord</a>
<a id="350" class="Keyword">open</a> <a id="355" class="Keyword">import</a> <a id="362" href="Prelude.Validity.html" class="Module">Prelude.Validity</a>

<a id="380" class="Keyword">open</a> <a id="385" class="Keyword">import</a> <a id="392" href="Bitcoin.html" class="Module">Bitcoin</a>

<a id="401" class="Keyword">module</a> <a id="408" href="ComputationalModel.Strategy.html" class="Module">ComputationalModel.Strategy</a>
  <a id="438" class="Symbol">(</a><a id="439" href="ComputationalModel.Strategy.html#439" class="Bound">Participant</a> <a id="451" class="Symbol">:</a> <a id="453" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="456" class="Symbol">)</a>
  <a id="460" class="Symbol">⦃</a> <a id="462" href="ComputationalModel.Strategy.html#462" class="Bound">_</a> <a id="464" class="Symbol">:</a> <a id="466" href="Prelude.DecEq.Core.html#97" class="Record">DecEq</a> <a id="472" href="ComputationalModel.Strategy.html#439" class="Bound">Participant</a> <a id="484" class="Symbol">⦄</a>
  <a id="488" class="Symbol">(</a><a id="489" href="ComputationalModel.Strategy.html#489" class="Bound">Honest</a> <a id="496" class="Symbol">:</a> <a id="498" href="Data.List.NonEmpty.Base.html#1079" class="Record">List⁺</a> <a id="504" href="ComputationalModel.Strategy.html#439" class="Bound">Participant</a><a id="515" class="Symbol">)</a>

  <a id="520" class="Symbol">(</a><a id="521" href="ComputationalModel.Strategy.html#521" class="Bound">finPart</a> <a id="529" class="Symbol">:</a> <a id="531" href="Prelude.Lists.html#2284" class="Function">Finite</a> <a id="538" href="ComputationalModel.Strategy.html#439" class="Bound">Participant</a><a id="549" class="Symbol">)</a>
  <a id="553" class="Symbol">(</a><a id="554" href="ComputationalModel.Strategy.html#554" class="Bound">keypairs</a> <a id="563" class="Symbol">:</a> <a id="565" href="ComputationalModel.Strategy.html#439" class="Bound">Participant</a> <a id="577" class="Symbol">→</a> <a id="579" href="Bitcoin.Crypto.html#345" class="Record">KeyPair</a> <a id="587" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="589" href="Bitcoin.Crypto.html#345" class="Record">KeyPair</a><a id="596" class="Symbol">)</a>
  <a id="600" class="Keyword">where</a>

<a id="Hon"></a><a id="607" href="ComputationalModel.Strategy.html#607" class="Function">Hon</a> <a id="611" class="Symbol">:</a> <a id="613" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="618" href="ComputationalModel.Strategy.html#439" class="Bound">Participant</a>
<a id="630" href="ComputationalModel.Strategy.html#607" class="Function">Hon</a> <a id="634" class="Symbol">=</a> <a id="636" href="Data.List.NonEmpty.Base.html#1521" class="Function">L.NE.toList</a> <a id="648" href="ComputationalModel.Strategy.html#489" class="Bound">Honest</a>

<a id="allParticipants"></a><a id="656" href="ComputationalModel.Strategy.html#656" class="Function">allParticipants</a> <a id="672" class="Symbol">:</a> <a id="674" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="679" href="ComputationalModel.Strategy.html#439" class="Bound">Participant</a>
<a id="691" href="ComputationalModel.Strategy.html#656" class="Function">allParticipants</a> <a id="707" class="Symbol">=</a> <a id="709" href="Prelude.Lists.html#2342" class="Function">finList</a> <a id="717" href="ComputationalModel.Strategy.html#521" class="Bound">finPart</a>

<a id="726" class="Keyword">open</a> <a id="731" class="Keyword">import</a> <a id="738" href="ComputationalModel.KeyPairs.html" class="Module">ComputationalModel.KeyPairs</a> <a id="766" href="ComputationalModel.Strategy.html#439" class="Bound">Participant</a> <a id="778" href="ComputationalModel.Strategy.html#554" class="Bound">keypairs</a>

<a id="788" class="Comment">-- Computational runs.</a>

<a id="Message"></a><a id="812" href="ComputationalModel.Strategy.html#812" class="Function">Message</a> <a id="820" class="Symbol">=</a> <a id="822" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="827" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a>

<a id="830" class="Keyword">data</a> <a id="Label"></a><a id="835" href="ComputationalModel.Strategy.html#835" class="Datatype">Label</a> <a id="841" class="Symbol">:</a> <a id="843" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="847" class="Keyword">where</a>
  <a id="855" class="Comment">-- broadcast message</a>
  <a id="Label._→∗∶_"></a><a id="878" href="ComputationalModel.Strategy.html#878" class="InductiveConstructor Operator">_→∗∶_</a> <a id="884" class="Symbol">:</a> <a id="886" href="ComputationalModel.Strategy.html#439" class="Bound">Participant</a> <a id="898" class="Symbol">→</a> <a id="900" href="ComputationalModel.Strategy.html#812" class="Function">Message</a> <a id="908" class="Symbol">→</a> <a id="910" href="ComputationalModel.Strategy.html#835" class="Datatype">Label</a>

  <a id="919" class="Comment">-- append new transaction</a>
  <a id="Label.submit"></a><a id="947" href="ComputationalModel.Strategy.html#947" class="InductiveConstructor">submit</a> <a id="954" class="Symbol">:</a> <a id="956" href="Bitcoin.Tx.Base.html#1255" class="Function">∃Tx</a> <a id="960" class="Symbol">→</a> <a id="962" href="ComputationalModel.Strategy.html#835" class="Datatype">Label</a>

  <a id="971" class="Comment">-- perform a delay</a>
  <a id="Label.delay"></a><a id="992" href="ComputationalModel.Strategy.html#992" class="InductiveConstructor">delay</a> <a id="998" class="Symbol">:</a> <a id="1000" href="Bitcoin.BasicTypes.html#245" class="Function">Time</a> <a id="1005" class="Symbol">→</a> <a id="1007" href="ComputationalModel.Strategy.html#835" class="Datatype">Label</a>

  <a id="1016" class="Comment">-- send hash request to oracle</a>
  <a id="Label._→O∶_"></a><a id="1049" href="ComputationalModel.Strategy.html#1049" class="InductiveConstructor Operator">_→O∶_</a>  <a id="1056" class="Symbol">:</a> <a id="1058" href="ComputationalModel.Strategy.html#439" class="Bound">Participant</a> <a id="1070" class="Symbol">→</a> <a id="1072" href="ComputationalModel.Strategy.html#812" class="Function">Message</a> <a id="1080" class="Symbol">→</a> <a id="1082" href="ComputationalModel.Strategy.html#835" class="Datatype">Label</a>

  <a id="1091" class="Comment">-- receive hash from oracle</a>
  <a id="Label.O→_∶_"></a><a id="1121" href="ComputationalModel.Strategy.html#1121" class="InductiveConstructor Operator">O→_∶_</a> <a id="1127" class="Symbol">:</a> <a id="1129" href="ComputationalModel.Strategy.html#439" class="Bound">Participant</a> <a id="1141" class="Symbol">→</a> <a id="1143" href="ComputationalModel.Strategy.html#812" class="Function">Message</a> <a id="1151" class="Symbol">→</a> <a id="1153" href="ComputationalModel.Strategy.html#835" class="Datatype">Label</a>

<a id="Run"></a><a id="1160" href="ComputationalModel.Strategy.html#1160" class="Function">Run</a>    <a id="1167" class="Symbol">=</a> <a id="1169" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1174" href="ComputationalModel.Strategy.html#835" class="Datatype">Label</a>
<a id="Labels"></a><a id="1180" href="ComputationalModel.Strategy.html#1180" class="Function">Labels</a> <a id="1187" class="Symbol">=</a> <a id="1189" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1194" href="ComputationalModel.Strategy.html#835" class="Datatype">Label</a>

<a id="1201" class="Keyword">variable</a>
  <a id="1212" href="ComputationalModel.Strategy.html#1212" class="Generalizable">m</a> <a id="1214" href="ComputationalModel.Strategy.html#1214" class="Generalizable">m′</a> <a id="1217" class="Symbol">:</a> <a id="1219" href="ComputationalModel.Strategy.html#812" class="Function">Message</a>
  <a id="1229" href="ComputationalModel.Strategy.html#1229" class="Generalizable">R</a> <a id="1231" href="ComputationalModel.Strategy.html#1231" class="Generalizable">R′</a> <a id="1234" href="ComputationalModel.Strategy.html#1234" class="Generalizable">R″</a> <a id="1237" href="ComputationalModel.Strategy.html#1237" class="Generalizable">Rᶜ</a> <a id="1240" class="Symbol">:</a> <a id="1242" href="ComputationalModel.Strategy.html#1160" class="Function">Run</a>
  <a id="1248" href="ComputationalModel.Strategy.html#1248" class="Generalizable">λᶜ</a> <a id="1251" class="Symbol">:</a> <a id="1253" href="ComputationalModel.Strategy.html#835" class="Datatype">Label</a>

<a id="strip"></a><a id="1260" href="ComputationalModel.Strategy.html#1260" class="Function">strip</a> <a id="1266" class="Symbol">:</a> <a id="1268" href="ComputationalModel.Strategy.html#439" class="Bound">Participant</a> <a id="1280" class="Symbol">→</a> <a id="1282" href="ComputationalModel.Strategy.html#1160" class="Function">Run</a> <a id="1286" class="Symbol">→</a> <a id="1288" href="ComputationalModel.Strategy.html#1160" class="Function">Run</a>
<a id="1292" href="ComputationalModel.Strategy.html#1260" class="Function">strip</a> <a id="1298" href="ComputationalModel.Strategy.html#1298" class="Bound">A</a> <a id="1300" class="Symbol">=</a> <a id="1302" href="Data.List.Base.html#1629" class="Function">mapMaybe</a> <a id="1311" href="ComputationalModel.Strategy.html#1326" class="Function">go</a>
  <a id="1316" class="Keyword">where</a>
    <a id="1326" href="ComputationalModel.Strategy.html#1326" class="Function">go</a> <a id="1329" class="Symbol">:</a> <a id="1331" href="ComputationalModel.Strategy.html#835" class="Datatype">Label</a> <a id="1337" class="Symbol">→</a> <a id="1339" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="1345" href="ComputationalModel.Strategy.html#835" class="Datatype">Label</a>
    <a id="1355" href="ComputationalModel.Strategy.html#1326" class="Function">go</a> <a id="1358" href="ComputationalModel.Strategy.html#1358" class="Bound">l</a><a id="1359" class="Symbol">@(</a><a id="1361" href="ComputationalModel.Strategy.html#1361" class="Bound">B</a> <a id="1363" href="ComputationalModel.Strategy.html#1049" class="InductiveConstructor Operator">→O∶</a>  <a id="1368" class="Symbol">_)</a> <a id="1371" class="Symbol">=</a> <a id="1373" href="Data.Bool.Base.html#1283" class="Function Operator">if</a> <a id="1376" href="ComputationalModel.Strategy.html#1298" class="Bound">A</a> <a id="1378" href="Prelude.DecEq.Core.html#169" class="Function Operator">==</a> <a id="1381" href="ComputationalModel.Strategy.html#1361" class="Bound">B</a> <a id="1383" href="Data.Bool.Base.html#1283" class="Function Operator">then</a> <a id="1388" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="1393" href="ComputationalModel.Strategy.html#1358" class="Bound">l</a> <a id="1395" href="Data.Bool.Base.html#1283" class="Function Operator">else</a> <a id="1400" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a>
    <a id="1412" href="ComputationalModel.Strategy.html#1326" class="Function">go</a> <a id="1415" href="ComputationalModel.Strategy.html#1415" class="Bound">l</a><a id="1416" class="Symbol">@(</a><a id="1418" href="ComputationalModel.Strategy.html#1121" class="InductiveConstructor Operator">O→</a> <a id="1421" href="ComputationalModel.Strategy.html#1421" class="Bound">B</a> <a id="1423" href="ComputationalModel.Strategy.html#1121" class="InductiveConstructor Operator">∶</a> <a id="1425" class="Symbol">_)</a> <a id="1428" class="Symbol">=</a> <a id="1430" href="Data.Bool.Base.html#1283" class="Function Operator">if</a> <a id="1433" href="ComputationalModel.Strategy.html#1298" class="Bound">A</a> <a id="1435" href="Prelude.DecEq.Core.html#169" class="Function Operator">==</a> <a id="1438" href="ComputationalModel.Strategy.html#1421" class="Bound">B</a> <a id="1440" href="Data.Bool.Base.html#1283" class="Function Operator">then</a> <a id="1445" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="1450" href="ComputationalModel.Strategy.html#1415" class="Bound">l</a> <a id="1452" href="Data.Bool.Base.html#1283" class="Function Operator">else</a> <a id="1457" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a>
    <a id="1469" href="ComputationalModel.Strategy.html#1326" class="CatchallClause Function">go</a><a id="1471" class="CatchallClause"> </a><a id="1472" href="ComputationalModel.Strategy.html#1472" class="CatchallClause Bound">x</a>            <a id="1485" class="Symbol">=</a> <a id="1487" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="1492" href="ComputationalModel.Strategy.html#1472" class="Bound">x</a>

<a id="δʳ"></a><a id="1495" href="ComputationalModel.Strategy.html#1495" class="Function">δʳ</a> <a id="1498" class="Symbol">:</a> <a id="1500" href="ComputationalModel.Strategy.html#1160" class="Function">Run</a> <a id="1504" class="Symbol">→</a> <a id="1506" href="Bitcoin.BasicTypes.html#245" class="Function">Time</a>
<a id="1511" href="ComputationalModel.Strategy.html#1495" class="Function">δʳ</a> <a id="1514" class="Symbol">=</a> <a id="1516" href="Data.List.Base.html#4784" class="Function">sum</a> <a id="1520" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="1522" href="Data.List.Base.html#1544" class="Function">map</a> <a id="1526" href="ComputationalModel.Strategy.html#1541" class="Function">δˡ</a>
  <a id="1531" class="Keyword">where</a>
    <a id="1541" href="ComputationalModel.Strategy.html#1541" class="Function">δˡ</a> <a id="1544" class="Symbol">:</a> <a id="1546" href="ComputationalModel.Strategy.html#835" class="Datatype">Label</a> <a id="1552" class="Symbol">→</a> <a id="1554" href="Bitcoin.BasicTypes.html#245" class="Function">Time</a>
    <a id="1563" href="ComputationalModel.Strategy.html#1541" class="Function">δˡ</a> <a id="1566" class="Symbol">(</a><a id="1567" href="ComputationalModel.Strategy.html#992" class="InductiveConstructor">delay</a> <a id="1573" href="ComputationalModel.Strategy.html#1573" class="Bound">t</a><a id="1574" class="Symbol">)</a> <a id="1576" class="Symbol">=</a> <a id="1578" href="ComputationalModel.Strategy.html#1573" class="Bound">t</a>
    <a id="1584" href="ComputationalModel.Strategy.html#1541" class="CatchallClause Function">δˡ</a><a id="1586" class="CatchallClause"> </a><a id="1587" class="CatchallClause Symbol">_</a>         <a id="1597" class="Symbol">=</a> <a id="1599" class="Number">0</a>

<a id="𝔹"></a><a id="1602" href="ComputationalModel.Strategy.html#1602" class="Function">𝔹</a> <a id="1604" class="Symbol">:</a> <a id="1606" href="ComputationalModel.Strategy.html#1160" class="Function">Run</a> <a id="1610" class="Symbol">→</a> <a id="1612" href="Bitcoin.Consistency.html#650" class="Function">Blockchain</a>
<a id="1623" href="ComputationalModel.Strategy.html#1602" class="Function">𝔹</a> <a id="1625" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="1628" class="Symbol">=</a> <a id="1630" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
<a id="1633" href="ComputationalModel.Strategy.html#1602" class="Function">𝔹</a> <a id="1635" class="Symbol">(</a><a id="1636" href="ComputationalModel.Strategy.html#1636" class="Bound">l</a> <a id="1638" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1640" href="ComputationalModel.Strategy.html#1640" class="Bound">ls</a><a id="1642" class="Symbol">)</a> <a id="1644" class="Keyword">with</a> <a id="1649" href="ComputationalModel.Strategy.html#1636" class="Bound">l</a>
<a id="1651" class="Symbol">...</a> <a id="1655" class="Symbol">|</a> <a id="1657" href="ComputationalModel.Strategy.html#947" class="InductiveConstructor">submit</a> <a id="1664" href="ComputationalModel.Strategy.html#1664" class="Bound">tx</a> <a id="1667" class="Symbol">=</a> <a id="1669" class="Symbol">(</a><a id="1670" href="ComputationalModel.Strategy.html#1664" class="Bound">tx</a> <a id="1673" href="Bitcoin.Tx.Base.html#2376" class="InductiveConstructor Operator">at</a> <a id="1676" class="Symbol">(</a><a id="1677" href="ComputationalModel.Strategy.html#1495" class="Function">δʳ</a> <a id="1680" class="Bound">ls</a><a id="1682" class="Symbol">))</a> <a id="1685" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1687" href="ComputationalModel.Strategy.html#1602" class="Function">𝔹</a> <a id="1689" class="Bound">ls</a>
<a id="1692" class="CatchallClause Symbol">...</a><a id="1695" class="CatchallClause"> </a><a id="1696" class="CatchallClause Symbol">|</a><a id="1697" class="CatchallClause"> </a><a id="1698" class="CatchallClause Symbol">_</a>         <a id="1708" class="Symbol">=</a> <a id="1710" href="ComputationalModel.Strategy.html#1602" class="Function">𝔹</a> <a id="1712" class="Bound">ls</a>

<a id="1716" class="Comment">-- For each participant, the coinbase transaction contains an output redeemable with his/her private key.</a>
<a id="Coinbase"></a><a id="1822" href="ComputationalModel.Strategy.html#1822" class="Function">Coinbase</a> <a id="1831" class="Symbol">:</a> <a id="1833" href="Bitcoin.Tx.Base.html#1255" class="Function">∃Tx</a> <a id="1837" class="Symbol">→</a> <a id="1839" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="1843" href="ComputationalModel.Strategy.html#1822" class="Function">Coinbase</a> <a id="1852" class="Symbol">(_</a> <a id="1855" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1857" class="Symbol">_</a> <a id="1859" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1861" href="ComputationalModel.Strategy.html#1861" class="Bound">tx</a><a id="1863" class="Symbol">)</a> <a id="1865" class="Symbol">=</a>
  <a id="1869" class="Symbol">∀</a> <a id="1871" class="Symbol">{</a><a id="1872" href="ComputationalModel.Strategy.html#1872" class="Bound">A</a><a id="1873" class="Symbol">}</a> <a id="1875" class="Symbol">→</a> <a id="1877" href="ComputationalModel.Strategy.html#1872" class="Bound">A</a> <a id="1879" href="Prelude.Membership.html#379" class="Field Operator">∈</a> <a id="1881" href="ComputationalModel.Strategy.html#656" class="Function">allParticipants</a> <a id="1897" class="Symbol">→</a>
    <a id="1903" class="Symbol">(</a><a id="1904" href="Bitcoin.Script.Base.html#375" class="InductiveConstructor">Ctx</a> <a id="1908" class="Number">1</a> <a id="1910" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1912" class="Symbol">(</a><a id="1913" href="Bitcoin.Script.Base.html#2174" class="InductiveConstructor Operator">ƛ</a> <a id="1915" class="Symbol">(</a><a id="1916" href="Bitcoin.Script.Base.html#1413" class="InductiveConstructor">versig</a> <a id="1923" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="1925" href="ComputationalModel.KeyPairs.html#297" class="Function">K̂</a> <a id="1928" href="ComputationalModel.Strategy.html#1872" class="Bound">A</a> <a id="1930" href="Data.List.Base.html#5025" class="Function Operator">]</a> <a id="1932" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="1934" href="Data.Fin.html#730" class="Function Operator">#</a> <a id="1936" class="Number">0</a> <a id="1938" href="Data.List.Base.html#5025" class="Function Operator">]</a><a id="1939" class="Symbol">)))</a> <a id="1943" href="Prelude.Membership.html#379" class="Field Operator">∈</a> <a id="1945" href="Data.List.Base.html#1544" class="Function">map</a> <a id="1949" class="Symbol">(</a><a id="1950" class="Comment">{-map₂-}</a> <a id="1959" class="Symbol">λ{</a> <a id="1962" class="Symbol">(</a><a id="1963" href="ComputationalModel.Strategy.html#1963" class="Bound">x</a> <a id="1965" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1967" href="ComputationalModel.Strategy.html#1967" class="Bound">y</a><a id="1968" class="Symbol">)</a> <a id="1970" class="Symbol">→</a> <a id="1972" href="ComputationalModel.Strategy.html#1963" class="Bound">x</a> <a id="1974" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1976" href="Bitcoin.Tx.Base.html#680" class="Field">validator</a> <a id="1986" href="ComputationalModel.Strategy.html#1967" class="Bound">y</a> <a id="1988" class="Symbol">})</a> <a id="1991" class="Symbol">(</a><a id="1992" href="Data.Vec.Base.html#7438" class="Function">V.toList</a> <a id="2001" class="Symbol">(</a><a id="2002" href="Bitcoin.Tx.Base.html#1090" class="Field">outputs</a> <a id="2010" href="ComputationalModel.Strategy.html#1861" class="Bound">tx</a><a id="2012" class="Symbol">))</a>

<a id="2016" class="Comment">-- Initially, all participants broadcast both their public keys.</a>
<a id="initialBroadcasts"></a><a id="2081" href="ComputationalModel.Strategy.html#2081" class="Function">initialBroadcasts</a> <a id="2099" class="Symbol">:</a> <a id="2101" href="ComputationalModel.Strategy.html#1180" class="Function">Labels</a>
<a id="2108" href="ComputationalModel.Strategy.html#2081" class="Function">initialBroadcasts</a> <a id="2126" class="Symbol">=</a> <a id="2128" href="Data.List.Base.html#1544" class="Function">map</a> <a id="2132" href="ComputationalModel.Strategy.html#2190" class="Function">go</a> <a id="2135" href="ComputationalModel.Strategy.html#656" class="Function">allParticipants</a>
  <a id="2153" class="Keyword">module</a> <a id="∣initialBroadcasts∣"></a><a id="2160" href="ComputationalModel.Strategy.html#2160" class="Module">∣initialBroadcasts∣</a> <a id="2180" class="Keyword">where</a>
    <a id="∣initialBroadcasts∣.go"></a><a id="2190" href="ComputationalModel.Strategy.html#2190" class="Function">go</a> <a id="2193" class="Symbol">:</a> <a id="2195" href="ComputationalModel.Strategy.html#439" class="Bound">Participant</a> <a id="2207" class="Symbol">→</a> <a id="2209" href="ComputationalModel.Strategy.html#835" class="Datatype">Label</a>
    <a id="2219" href="ComputationalModel.Strategy.html#2190" class="Function">go</a> <a id="2222" href="ComputationalModel.Strategy.html#2222" class="Bound">A</a> <a id="2224" class="Symbol">=</a> <a id="2226" href="ComputationalModel.Strategy.html#2222" class="Bound">A</a> <a id="2228" href="ComputationalModel.Strategy.html#878" class="InductiveConstructor Operator">→∗∶</a> <a id="2232" class="Symbol">(</a><a id="2233" href="ComputationalModel.KeyPairs.html#347" class="Function">Kᵖ</a> <a id="2236" href="ComputationalModel.Strategy.html#2222" class="Bound">A</a> <a id="2238" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2240" href="ComputationalModel.KeyPairs.html#417" class="Function">K̂ᵖ</a> <a id="2244" href="ComputationalModel.Strategy.html#2222" class="Bound">A</a> <a id="2246" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2248" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="2250" class="Symbol">)</a>

<a id="2253" class="Comment">-- An initial run begins with a coinbase transaction and all appropriate initial broadcasts.</a>
<a id="Initial"></a><a id="2346" href="ComputationalModel.Strategy.html#2346" class="Function">Initial</a> <a id="2354" class="Symbol">:</a> <a id="2356" href="ComputationalModel.Strategy.html#1160" class="Function">Run</a> <a id="2360" class="Symbol">→</a> <a id="2362" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="2366" href="ComputationalModel.Strategy.html#2346" class="Function">Initial</a> <a id="2374" href="ComputationalModel.Strategy.html#2374" class="Bound">R</a> <a id="2376" class="Symbol">=</a> <a id="2378" href="Data.Product.html#1806" class="Function">∃[</a> <a id="2381" href="ComputationalModel.Strategy.html#2381" class="Bound">T₀</a> <a id="2384" href="Data.Product.html#1806" class="Function">]</a> <a id="2386" class="Symbol">(</a><a id="2387" href="ComputationalModel.Strategy.html#1822" class="Function">Coinbase</a> <a id="2396" href="ComputationalModel.Strategy.html#2381" class="Bound">T₀</a> <a id="2399" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2401" class="Symbol">(</a><a id="2402" href="ComputationalModel.Strategy.html#2374" class="Bound">R</a> <a id="2404" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2406" class="Symbol">(</a><a id="2407" href="ComputationalModel.Strategy.html#947" class="InductiveConstructor">submit</a> <a id="2414" href="ComputationalModel.Strategy.html#2381" class="Bound">T₀</a> <a id="2417" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2419" href="ComputationalModel.Strategy.html#2081" class="Function">initialBroadcasts</a><a id="2436" class="Symbol">)))</a>

<a id="2441" class="Comment">-- A run is valid, when it has an initial run as a prefix.</a>
<a id="2500" class="Keyword">instance</a>
  <a id="Valid-Run"></a><a id="2511" href="ComputationalModel.Strategy.html#2511" class="Function">Valid-Run</a> <a id="2521" class="Symbol">:</a> <a id="2523" href="Prelude.Validity.html#245" class="Record">Validable</a> <a id="2533" href="ComputationalModel.Strategy.html#1160" class="Function">Run</a>
  <a id="2539" href="ComputationalModel.Strategy.html#2511" class="Function">Valid-Run</a> <a id="2549" class="Symbol">.</a><a id="2550" href="Prelude.Validity.html#302" class="Field">Valid</a> <a id="2556" href="ComputationalModel.Strategy.html#2556" class="Bound">R</a> <a id="2558" class="Symbol">=</a> <a id="2560" href="Data.Product.html#1806" class="Function">∃[</a> <a id="2563" href="ComputationalModel.Strategy.html#2563" class="Bound">R₀</a> <a id="2566" href="Data.Product.html#1806" class="Function">]</a> <a id="2568" class="Symbol">(</a><a id="2569" href="ComputationalModel.Strategy.html#2346" class="Function">Initial</a> <a id="2577" href="ComputationalModel.Strategy.html#2563" class="Bound">R₀</a> <a id="2580" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2582" href="Data.List.Relation.Binary.Prefix.Heterogeneous.html#685" class="Datatype">Prefix</a> <a id="2589" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a> <a id="2593" href="ComputationalModel.Strategy.html#2563" class="Bound">R₀</a> <a id="2596" href="ComputationalModel.Strategy.html#2556" class="Bound">R</a><a id="2597" class="Symbol">)</a>

<a id="oracleMessages"></a><a id="2600" href="ComputationalModel.Strategy.html#2600" class="Function">oracleMessages</a> <a id="2615" class="Symbol">:</a> <a id="2617" href="ComputationalModel.Strategy.html#1160" class="Function">Run</a> <a id="2621" class="Symbol">→</a> <a id="2623" href="ComputationalModel.Strategy.html#1180" class="Function">Labels</a>
<a id="2630" href="ComputationalModel.Strategy.html#2600" class="Function">oracleMessages</a> <a id="2645" class="Symbol">=</a> <a id="2647" href="Data.List.Base.html#1629" class="Function">mapMaybe</a> <a id="2656" href="ComputationalModel.Strategy.html#2671" class="Function">go</a>
  <a id="2661" class="Keyword">where</a>
    <a id="2671" href="ComputationalModel.Strategy.html#2671" class="Function">go</a> <a id="2674" class="Symbol">:</a> <a id="2676" href="ComputationalModel.Strategy.html#835" class="Datatype">Label</a> <a id="2682" class="Symbol">→</a> <a id="2684" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="2690" href="ComputationalModel.Strategy.html#835" class="Datatype">Label</a>
    <a id="2700" href="ComputationalModel.Strategy.html#2671" class="Function">go</a> <a id="2703" href="ComputationalModel.Strategy.html#2703" class="Bound">l</a><a id="2704" class="Symbol">@(_</a> <a id="2708" href="ComputationalModel.Strategy.html#1049" class="InductiveConstructor Operator">→O∶</a>  <a id="2713" class="Symbol">_)</a> <a id="2716" class="Symbol">=</a> <a id="2718" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="2723" href="ComputationalModel.Strategy.html#2703" class="Bound">l</a>
    <a id="2729" href="ComputationalModel.Strategy.html#2671" class="Function">go</a> <a id="2732" href="ComputationalModel.Strategy.html#2732" class="Bound">l</a><a id="2733" class="Symbol">@(</a><a id="2735" href="ComputationalModel.Strategy.html#1121" class="InductiveConstructor Operator">O→</a> <a id="2738" class="Symbol">_</a> <a id="2740" href="ComputationalModel.Strategy.html#1121" class="InductiveConstructor Operator">∶</a> <a id="2742" class="Symbol">_)</a> <a id="2745" class="Symbol">=</a> <a id="2747" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="2752" href="ComputationalModel.Strategy.html#2732" class="Bound">l</a>
    <a id="2758" href="ComputationalModel.Strategy.html#2671" class="CatchallClause Function">go</a><a id="2760" class="CatchallClause"> </a><a id="2761" class="CatchallClause Symbol">_</a>            <a id="2774" class="Symbol">=</a> <a id="2776" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a>

<a id="OracleQuery"></a><a id="2785" href="ComputationalModel.Strategy.html#2785" class="Function">OracleQuery</a> <a id="2797" class="Symbol">=</a> <a id="2799" href="ComputationalModel.Strategy.html#439" class="Bound">Participant</a> <a id="2811" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2813" href="ComputationalModel.Strategy.html#812" class="Function">Message</a>
<a id="OracleReply"></a><a id="2821" href="ComputationalModel.Strategy.html#2821" class="Function">OracleReply</a> <a id="2833" class="Symbol">=</a> <a id="2835" href="ComputationalModel.Strategy.html#439" class="Bound">Participant</a> <a id="2847" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2849" href="ComputationalModel.Strategy.html#812" class="Function">Message</a>
<a id="OracleInteraction"></a><a id="2857" href="ComputationalModel.Strategy.html#2857" class="Function">OracleInteraction</a> <a id="2875" class="Symbol">=</a> <a id="2877" href="ComputationalModel.Strategy.html#439" class="Bound">Participant</a> <a id="2889" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2891" href="ComputationalModel.Strategy.html#812" class="Function">Message</a> <a id="2899" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2901" href="ComputationalModel.Strategy.html#812" class="Function">Message</a>

<a id="oracleRequests"></a><a id="2910" href="ComputationalModel.Strategy.html#2910" class="Function">oracleRequests</a> <a id="2925" class="Symbol">:</a> <a id="2927" href="ComputationalModel.Strategy.html#439" class="Bound">Participant</a> <a id="2939" class="Symbol">→</a> <a id="2941" href="ComputationalModel.Strategy.html#1160" class="Function">Run</a> <a id="2945" class="Symbol">→</a> <a id="2947" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2952" class="Symbol">(</a><a id="2953" href="ComputationalModel.Strategy.html#835" class="Datatype">Label</a> <a id="2959" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2961" href="ComputationalModel.Strategy.html#835" class="Datatype">Label</a><a id="2966" class="Symbol">)</a>
<a id="2968" href="ComputationalModel.Strategy.html#2910" class="Function">oracleRequests</a> <a id="2983" href="ComputationalModel.Strategy.html#2983" class="Bound">A</a> <a id="2985" class="Symbol">(</a><a id="2986" href="ComputationalModel.Strategy.html#2986" class="Bound">l</a><a id="2987" class="Symbol">@(</a><a id="2989" href="ComputationalModel.Strategy.html#2989" class="Bound">A′</a> <a id="2992" href="ComputationalModel.Strategy.html#1049" class="InductiveConstructor Operator">→O∶</a> <a id="2996" href="ComputationalModel.Strategy.html#2996" class="Bound">m</a><a id="2997" class="Symbol">)</a> <a id="2999" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3001" href="ComputationalModel.Strategy.html#3001" class="Bound">l′</a><a id="3003" class="Symbol">@(</a><a id="3005" href="ComputationalModel.Strategy.html#1121" class="InductiveConstructor Operator">O→</a> <a id="3008" href="ComputationalModel.Strategy.html#3008" class="Bound">A″</a> <a id="3011" href="ComputationalModel.Strategy.html#1121" class="InductiveConstructor Operator">∶</a> <a id="3013" href="ComputationalModel.Strategy.html#3013" class="Bound">hm</a><a id="3015" class="Symbol">)</a> <a id="3017" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3019" href="ComputationalModel.Strategy.html#3019" class="Bound">R</a><a id="3020" class="Symbol">)</a> <a id="3022" class="Keyword">with</a> <a id="3027" href="ComputationalModel.Strategy.html#2983" class="Bound">A</a> <a id="3029" href="Prelude.DecEq.Core.html#137" class="Field Operator">≟</a> <a id="3031" href="ComputationalModel.Strategy.html#2989" class="Bound">A′</a> <a id="3034" class="Symbol">|</a> <a id="3036" href="ComputationalModel.Strategy.html#2989" class="Bound">A′</a> <a id="3039" href="Prelude.DecEq.Core.html#137" class="Field Operator">≟</a> <a id="3041" href="ComputationalModel.Strategy.html#3008" class="Bound">A″</a>
<a id="3044" class="Symbol">...</a> <a id="3048" class="Symbol">|</a> <a id="3050" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="3054" class="Symbol">_</a> <a id="3056" class="Symbol">|</a> <a id="3058" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="3062" class="Symbol">_</a>      <a id="3069" class="Symbol">=</a> <a id="3071" class="Symbol">(</a><a id="3072" class="Bound">l</a> <a id="3074" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3076" class="Bound">l′</a><a id="3078" class="Symbol">)</a> <a id="3080" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3082" href="ComputationalModel.Strategy.html#2910" class="Function">oracleRequests</a> <a id="3097" class="Bound">A</a> <a id="3099" class="Bound">R</a>
<a id="3101" class="CatchallClause Symbol">...</a><a id="3104" class="CatchallClause"> </a><a id="3105" class="CatchallClause Symbol">|</a><a id="3106" class="CatchallClause"> </a><a id="3107" class="CatchallClause Symbol">_</a><a id="3108" class="CatchallClause">     </a><a id="3113" class="CatchallClause Symbol">|</a><a id="3114" class="CatchallClause"> </a><a id="3115" class="CatchallClause Symbol">_</a>          <a id="3126" class="Symbol">=</a> <a id="3128" href="ComputationalModel.Strategy.html#2910" class="Function">oracleRequests</a> <a id="3143" class="Bound">A</a> <a id="3145" class="Bound">R</a>
<a id="3147" href="ComputationalModel.Strategy.html#2910" class="CatchallClause Function">oracleRequests</a><a id="3161" class="CatchallClause"> </a><a id="3162" href="ComputationalModel.Strategy.html#3162" class="CatchallClause Bound">A</a><a id="3163" class="CatchallClause"> </a><a id="3164" class="CatchallClause Symbol">(_</a><a id="3166" class="CatchallClause"> </a><a id="3167" href="Agda.Builtin.List.html#200" class="CatchallClause InductiveConstructor Operator">∷</a><a id="3168" class="CatchallClause"> </a><a id="3169" href="ComputationalModel.Strategy.html#3169" class="CatchallClause Bound">R</a><a id="3170" class="CatchallClause Symbol">)</a> <a id="3172" class="Symbol">=</a> <a id="3174" href="ComputationalModel.Strategy.html#2910" class="Function">oracleRequests</a> <a id="3189" href="ComputationalModel.Strategy.html#3162" class="Bound">A</a> <a id="3191" href="ComputationalModel.Strategy.html#3169" class="Bound">R</a>
<a id="3193" href="ComputationalModel.Strategy.html#2910" class="Function">oracleRequests</a> <a id="3208" class="Symbol">_</a> <a id="3210" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>      <a id="3218" class="Symbol">=</a> <a id="3220" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>

<a id="oracleInteractions"></a><a id="3224" href="ComputationalModel.Strategy.html#3224" class="Function">oracleInteractions</a> <a id="3243" class="Symbol">:</a> <a id="3245" href="ComputationalModel.Strategy.html#1160" class="Function">Run</a> <a id="3249" class="Symbol">→</a> <a id="3251" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="3256" href="ComputationalModel.Strategy.html#2857" class="Function">OracleInteraction</a>
<a id="3274" href="ComputationalModel.Strategy.html#3224" class="Function">oracleInteractions</a> <a id="3293" href="ComputationalModel.Strategy.html#3293" class="Bound">r</a> <a id="3295" class="Symbol">=</a> <a id="3297" href="ComputationalModel.Strategy.html#3317" class="Function">go</a> <a id="3300" href="ComputationalModel.Strategy.html#3293" class="Bound">r</a> <a id="3302" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
  <a id="3307" class="Keyword">where</a>
    <a id="3317" href="ComputationalModel.Strategy.html#3317" class="Function">go</a> <a id="3320" class="Symbol">:</a> <a id="3322" href="ComputationalModel.Strategy.html#1160" class="Function">Run</a> <a id="3326" class="Symbol">→</a> <a id="3328" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="3333" href="ComputationalModel.Strategy.html#2785" class="Function">OracleQuery</a> <a id="3345" class="Symbol">→</a> <a id="3347" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="3352" href="ComputationalModel.Strategy.html#2857" class="Function">OracleInteraction</a>
    <a id="3374" href="ComputationalModel.Strategy.html#3317" class="Function">go</a> <a id="3377" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>       <a id="3386" href="ComputationalModel.Strategy.html#3386" class="Bound">ws</a> <a id="3389" class="Symbol">=</a> <a id="3391" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
    <a id="3398" href="ComputationalModel.Strategy.html#3317" class="Function">go</a> <a id="3401" class="Symbol">(</a><a id="3402" href="ComputationalModel.Strategy.html#3402" class="Bound">l</a> <a id="3404" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3406" href="ComputationalModel.Strategy.html#3406" class="Bound">ls</a><a id="3408" class="Symbol">)</a> <a id="3410" href="ComputationalModel.Strategy.html#3410" class="Bound">ws</a>
       <a id="3420" class="Keyword">with</a> <a id="3425" href="ComputationalModel.Strategy.html#3402" class="Bound">l</a>
    <a id="3431" class="Symbol">...</a> <a id="3435" class="Symbol">|</a> <a id="3437" href="ComputationalModel.Strategy.html#3437" class="Bound">A</a> <a id="3439" href="ComputationalModel.Strategy.html#1049" class="InductiveConstructor Operator">→O∶</a> <a id="3443" href="ComputationalModel.Strategy.html#3443" class="Bound">m</a>   <a id="3447" class="Symbol">=</a> <a id="3449" href="ComputationalModel.Strategy.html#3317" class="Function">go</a> <a id="3452" class="Bound">ls</a> <a id="3455" class="Symbol">((</a><a id="3457" href="ComputationalModel.Strategy.html#3437" class="Bound">A</a> <a id="3459" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3461" href="ComputationalModel.Strategy.html#3443" class="Bound">m</a><a id="3462" class="Symbol">)</a> <a id="3464" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3466" class="Bound">ws</a><a id="3468" class="Symbol">)</a>
    <a id="3474" class="Symbol">...</a> <a id="3478" class="Symbol">|</a> <a id="3480" href="ComputationalModel.Strategy.html#1121" class="InductiveConstructor Operator">O→</a> <a id="3483" href="ComputationalModel.Strategy.html#3483" class="Bound">A</a> <a id="3485" href="ComputationalModel.Strategy.html#1121" class="InductiveConstructor Operator">∶</a> <a id="3487" href="ComputationalModel.Strategy.html#3487" class="Bound">m′</a> <a id="3490" class="Symbol">=</a> <a id="3492" href="Function.Base.html#4121" class="Function Operator">case</a> <a id="3497" href="Prelude.Lists.Indexed.html#1628" class="Function">findElem</a> <a id="3506" class="Symbol">((</a><a id="3508" href="Prelude.DecEq.Core.html#137" class="Field Operator">_≟</a> <a id="3511" href="ComputationalModel.Strategy.html#3483" class="Bound">A</a><a id="3512" class="Symbol">)</a> <a id="3514" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="3516" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a><a id="3521" class="Symbol">)</a> <a id="3523" class="Bound">ws</a> <a id="3526" href="Function.Base.html#4121" class="Function Operator">of</a> <a id="3529" class="Symbol">λ</a>
      <a id="3537" class="Symbol">{</a> <a id="3539" class="Symbol">(</a><a id="3540" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="3545" class="Symbol">(</a><a id="3546" href="ComputationalModel.Strategy.html#3546" class="Bound">m</a> <a id="3548" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3550" href="ComputationalModel.Strategy.html#3550" class="Bound">ws′</a><a id="3553" class="Symbol">))</a> <a id="3556" class="Symbol">→</a> <a id="3558" class="Symbol">(</a><a id="3559" href="ComputationalModel.Strategy.html#3483" class="Bound">A</a> <a id="3561" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3563" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="3569" href="ComputationalModel.Strategy.html#3546" class="Bound">m</a> <a id="3571" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3573" href="ComputationalModel.Strategy.html#3487" class="Bound">m′</a><a id="3575" class="Symbol">)</a> <a id="3577" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3579" href="ComputationalModel.Strategy.html#3317" class="Function">go</a> <a id="3582" class="Bound">ls</a> <a id="3585" href="ComputationalModel.Strategy.html#3550" class="Bound">ws′</a>
      <a id="3595" class="Symbol">;</a> <a id="3597" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a>          <a id="3614" class="Symbol">→</a> <a id="3616" href="ComputationalModel.Strategy.html#3317" class="Function">go</a> <a id="3619" class="Bound">ls</a> <a id="3622" class="Bound">ws</a> <a id="3625" class="Symbol">}</a>
    <a id="3631" class="CatchallClause Symbol">...</a><a id="3634" class="CatchallClause"> </a><a id="3635" class="CatchallClause Symbol">|</a><a id="3636" class="CatchallClause"> </a><a id="3637" class="CatchallClause Symbol">_</a>         <a id="3647" class="Symbol">=</a> <a id="3649" href="ComputationalModel.Strategy.html#3317" class="Function">go</a> <a id="3652" class="Bound">ls</a> <a id="3655" class="Bound">ws</a>

<a id="3659" class="Comment">----------------------------------</a>
<a id="3694" class="Comment">-- Computational strategies.</a>


<a id="3725" class="Comment">-- Consistent update of the blockchain, in a run where certain components of the transaction have been made public.</a>
<a id="_▷ʳ_"></a><a id="3841" href="ComputationalModel.Strategy.html#3841" class="Function Operator">_▷ʳ_</a> <a id="3846" class="Symbol">:</a> <a id="3848" href="ComputationalModel.Strategy.html#1160" class="Function">Run</a> <a id="3852" class="Symbol">→</a> <a id="3854" href="Bitcoin.Tx.Base.html#1255" class="Function">∃Tx</a> <a id="3858" class="Symbol">→</a> <a id="3860" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="3864" href="ComputationalModel.Strategy.html#3864" class="Bound">R</a> <a id="3866" href="ComputationalModel.Strategy.html#3841" class="Function Operator">▷ʳ</a> <a id="3869" href="ComputationalModel.Strategy.html#3869" class="Bound">∃tx</a> <a id="3873" class="Symbol">=</a>
  <a id="3877" class="Keyword">let</a> <a id="3881" href="ComputationalModel.Strategy.html#3881" class="Bound">tx</a> <a id="3884" class="Symbol">=</a> <a id="3886" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="3892" class="Symbol">(</a><a id="3893" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="3899" href="ComputationalModel.Strategy.html#3869" class="Bound">∃tx</a><a id="3902" class="Symbol">)</a> <a id="3904" class="Keyword">in</a>
    <a id="3911" class="Symbol">(</a><a id="3912" href="ComputationalModel.Strategy.html#1602" class="Function">𝔹</a> <a id="3914" href="ComputationalModel.Strategy.html#3864" class="Bound">R</a> <a id="3916" href="Bitcoin.Consistency.html#1633" class="Record Operator">▷</a> <a id="3918" href="ComputationalModel.Strategy.html#3881" class="Bound">tx</a> <a id="3921" href="Bitcoin.Consistency.html#1633" class="Record Operator">,</a> <a id="3923" href="ComputationalModel.Strategy.html#1495" class="Function">δʳ</a> <a id="3926" href="ComputationalModel.Strategy.html#3864" class="Bound">R</a><a id="3927" class="Symbol">)</a>
  <a id="3931" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="3933" href="Data.Product.html#1806" class="Function">∃[</a> <a id="3936" href="ComputationalModel.Strategy.html#3936" class="Bound">B</a> <a id="3938" href="Data.Product.html#1806" class="Function">]</a> <a id="3940" class="Symbol">(</a><a id="3941" href="ComputationalModel.Strategy.html#3936" class="Bound">B</a> <a id="3943" href="ComputationalModel.Strategy.html#878" class="InductiveConstructor Operator">→∗∶</a> <a id="3947" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="3949" href="ComputationalModel.Strategy.html#3869" class="Bound">∃tx</a> <a id="3953" href="Bitcoin.Crypto.html#826" class="Field Operator">♯</a> <a id="3955" href="Data.List.Base.html#5025" class="Function Operator">]</a> <a id="3957" href="Prelude.Membership.html#379" class="Field Operator">∈</a> <a id="3959" href="ComputationalModel.Strategy.html#3864" class="Bound">R</a><a id="3960" class="Symbol">)</a>
  <a id="3964" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="3966" href="Data.Vec.Relation.Unary.All.html#1073" class="Datatype">V.All.All</a> <a id="3976" class="Symbol">(λ</a> <a id="3979" href="ComputationalModel.Strategy.html#3979" class="Bound">i</a> <a id="3981" class="Symbol">→</a> <a id="3983" href="Data.Product.html#1806" class="Function">∃[</a> <a id="3986" href="ComputationalModel.Strategy.html#3986" class="Bound">tx′</a> <a id="3990" href="Data.Product.html#1806" class="Function">]</a> <a id="3992" class="Symbol">((</a><a id="3994" href="ComputationalModel.Strategy.html#947" class="InductiveConstructor">submit</a> <a id="4001" href="ComputationalModel.Strategy.html#3986" class="Bound">tx′</a> <a id="4005" href="Prelude.Membership.html#379" class="Field Operator">∈</a> <a id="4007" href="ComputationalModel.Strategy.html#3864" class="Bound">R</a><a id="4008" class="Symbol">)</a> <a id="4010" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4012" class="Symbol">(</a><a id="4013" href="ComputationalModel.Strategy.html#3986" class="Bound">tx′</a> <a id="4017" href="Bitcoin.Crypto.html#826" class="Field Operator">♯</a> <a id="4019" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4021" href="Bitcoin.Tx.Base.html#394" class="Field">txId</a> <a id="4026" href="ComputationalModel.Strategy.html#3979" class="Bound">i</a><a id="4027" class="Symbol">)))</a> <a id="4031" class="Symbol">(</a><a id="4032" href="Bitcoin.Tx.Base.html#940" class="Field">inputs</a> <a id="4039" href="ComputationalModel.Strategy.html#3881" class="Bound">tx</a><a id="4041" class="Symbol">)</a>
  <a id="4045" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4047" href="Data.Vec.Relation.Unary.All.html#1073" class="Datatype">V.All.All</a> <a id="4057" class="Symbol">(λ</a> <a id="4060" href="ComputationalModel.Strategy.html#4060" class="Bound">w</a> <a id="4062" class="Symbol">→</a> <a id="4064" href="Data.Product.html#1806" class="Function">∃[</a> <a id="4067" href="ComputationalModel.Strategy.html#4067" class="Bound">B</a> <a id="4069" href="Data.Product.html#1806" class="Function">]</a> <a id="4071" class="Symbol">(</a><a id="4072" href="ComputationalModel.Strategy.html#4067" class="Bound">B</a> <a id="4074" href="ComputationalModel.Strategy.html#878" class="InductiveConstructor Operator">→∗∶</a> <a id="4078" href="Data.Vec.Base.html#7438" class="Function">V.toList</a> <a id="4087" class="Symbol">(</a><a id="4088" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="4094" href="ComputationalModel.Strategy.html#4060" class="Bound">w</a><a id="4095" class="Symbol">)</a> <a id="4097" href="Prelude.Membership.html#379" class="Field Operator">∈</a> <a id="4099" href="ComputationalModel.Strategy.html#3864" class="Bound">R</a><a id="4100" class="Symbol">))</a> <a id="4103" class="Symbol">(</a><a id="4104" href="Bitcoin.Tx.Base.html#981" class="Field">wit</a> <a id="4108" href="ComputationalModel.Strategy.html#3881" class="Bound">tx</a><a id="4110" class="Symbol">)</a>

<a id="4113" class="Keyword">record</a> <a id="ParticipantStrategy"></a><a id="4120" href="ComputationalModel.Strategy.html#4120" class="Record">ParticipantStrategy</a> <a id="4140" class="Symbol">(</a><a id="4141" href="ComputationalModel.Strategy.html#4141" class="Bound">A</a> <a id="4143" class="Symbol">:</a> <a id="4145" href="ComputationalModel.Strategy.html#439" class="Bound">Participant</a><a id="4156" class="Symbol">)</a> <a id="4158" class="Symbol">:</a> <a id="4160" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="4164" class="Keyword">where</a>
  <a id="4172" class="Keyword">field</a> <a id="ParticipantStrategy.Σ"></a><a id="4178" href="ComputationalModel.Strategy.html#4178" class="Field">Σ</a> <a id="4180" class="Symbol">:</a> <a id="4182" href="ComputationalModel.Strategy.html#1160" class="Function">Run</a> <a id="4186" class="Symbol">→</a> <a id="4188" href="ComputationalModel.Strategy.html#1180" class="Function">Labels</a>
<a id="4195" class="Keyword">open</a> <a id="4200" href="ComputationalModel.Strategy.html#4120" class="Module">ParticipantStrategy</a> <a id="4220" class="Keyword">public</a>

<a id="4228" class="Keyword">instance</a>
  <a id="Valid-Strategy"></a><a id="4239" href="ComputationalModel.Strategy.html#4239" class="Function">Valid-Strategy</a> <a id="4254" class="Symbol">:</a> <a id="4256" class="Symbol">∀</a> <a id="4258" class="Symbol">{</a><a id="4259" href="ComputationalModel.Strategy.html#4259" class="Bound">A</a><a id="4260" class="Symbol">}</a> <a id="4262" class="Symbol">→</a> <a id="4264" href="Prelude.Validity.html#245" class="Record">Validable</a> <a id="4274" class="Symbol">(</a><a id="4275" href="ComputationalModel.Strategy.html#4120" class="Record">ParticipantStrategy</a> <a id="4295" href="ComputationalModel.Strategy.html#4259" class="Bound">A</a><a id="4296" class="Symbol">)</a>
  <a id="4300" href="ComputationalModel.Strategy.html#4239" class="Function">Valid-Strategy</a> <a id="4315" class="Symbol">{</a><a id="4316" class="Argument">A</a> <a id="4318" class="Symbol">=</a> <a id="4320" href="ComputationalModel.Strategy.html#4320" class="Bound">A</a><a id="4321" class="Symbol">}</a> <a id="4323" class="Symbol">.</a><a id="4324" href="Prelude.Validity.html#302" class="Field">Valid</a> <a id="4330" class="Symbol">(</a><a id="4331" class="Keyword">record</a> <a id="4338" class="Symbol">{</a><a id="4339" href="ComputationalModel.Strategy.html#4178" class="Field">Σ</a> <a id="4341" class="Symbol">=</a> <a id="4343" href="ComputationalModel.Strategy.html#4343" class="Bound">Σ</a><a id="4344" class="Symbol">})</a> <a id="4347" class="Symbol">=</a>
      <a id="4355" class="Comment">-- participant is honest</a>
      <a id="4386" href="ComputationalModel.Strategy.html#4320" class="Bound">A</a> <a id="4388" href="Prelude.Membership.html#379" class="Field Operator">∈</a> <a id="4390" href="ComputationalModel.Strategy.html#607" class="Function">Hon</a>
      <a id="4400" class="Comment">-- only valid computational labels</a>
    <a id="4439" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4441" class="Symbol">(∀</a> <a id="4444" class="Symbol">{</a><a id="4445" href="ComputationalModel.Strategy.html#4445" class="Bound">R</a> <a id="4447" href="ComputationalModel.Strategy.html#4447" class="Bound">α</a><a id="4448" class="Symbol">}</a> <a id="4450" class="Symbol">→</a> <a id="4452" class="Keyword">let</a> <a id="4456" href="ComputationalModel.Strategy.html#4456" class="Bound">R∗</a> <a id="4459" class="Symbol">=</a> <a id="4461" href="ComputationalModel.Strategy.html#1260" class="Function">strip</a> <a id="4467" href="ComputationalModel.Strategy.html#4320" class="Bound">A</a> <a id="4469" href="ComputationalModel.Strategy.html#4445" class="Bound">R</a> <a id="4471" class="Keyword">in</a>
          <a id="4484" href="ComputationalModel.Strategy.html#4447" class="Bound">α</a> <a id="4486" href="Prelude.Membership.html#379" class="Field Operator">∈</a> <a id="4488" href="ComputationalModel.Strategy.html#4343" class="Bound">Σ</a> <a id="4490" href="ComputationalModel.Strategy.html#4456" class="Bound">R∗</a>
        <a id="4501" class="Symbol">→</a> <a id="4503" class="Symbol">(</a> <a id="4505" class="Comment">-- (1) message from A</a>
            <a id="4539" href="Data.Product.html#1806" class="Function">∃[</a> <a id="4542" href="ComputationalModel.Strategy.html#4542" class="Bound">m</a> <a id="4544" href="Data.Product.html#1806" class="Function">]</a>
              <a id="4560" class="Symbol">(</a> <a id="4562" class="Symbol">(</a><a id="4563" href="ComputationalModel.Strategy.html#4447" class="Bound">α</a> <a id="4565" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4567" href="ComputationalModel.Strategy.html#4320" class="Bound">A</a> <a id="4569" href="ComputationalModel.Strategy.html#878" class="InductiveConstructor Operator">→∗∶</a> <a id="4573" href="ComputationalModel.Strategy.html#4542" class="Bound">m</a><a id="4574" class="Symbol">)</a>
              <a id="4590" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="4592" class="Symbol">(</a><a id="4593" href="ComputationalModel.Strategy.html#4447" class="Bound">α</a> <a id="4595" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4597" href="ComputationalModel.Strategy.html#4320" class="Bound">A</a> <a id="4599" href="ComputationalModel.Strategy.html#1049" class="InductiveConstructor Operator">→O∶</a> <a id="4603" href="ComputationalModel.Strategy.html#4542" class="Bound">m</a><a id="4604" class="Symbol">)</a> <a id="4606" class="Symbol">)</a>
            <a id="4620" class="Comment">-- (2) new transaction</a>
          <a id="4653" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="4655" href="Data.Product.html#1806" class="Function">∃[</a> <a id="4658" href="ComputationalModel.Strategy.html#4658" class="Bound">tx</a> <a id="4661" href="Data.Product.html#1806" class="Function">]</a>
              <a id="4677" class="Symbol">(</a> <a id="4679" class="Symbol">(</a><a id="4680" href="ComputationalModel.Strategy.html#4447" class="Bound">α</a> <a id="4682" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4684" href="ComputationalModel.Strategy.html#947" class="InductiveConstructor">submit</a> <a id="4691" href="ComputationalModel.Strategy.html#4658" class="Bound">tx</a><a id="4693" class="Symbol">)</a>
              <a id="4709" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4711" class="Symbol">(</a><a id="4712" href="ComputationalModel.Strategy.html#4456" class="Bound">R∗</a> <a id="4715" href="ComputationalModel.Strategy.html#3841" class="Function Operator">▷ʳ</a> <a id="4718" href="ComputationalModel.Strategy.html#4658" class="Bound">tx</a><a id="4720" class="Symbol">)</a> <a id="4722" class="Symbol">)</a>
            <a id="4736" class="Comment">-- (3) delay</a>
          <a id="4759" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="4761" href="Data.Product.html#1806" class="Function">∃[</a> <a id="4764" href="ComputationalModel.Strategy.html#4764" class="Bound">δ</a> <a id="4766" href="Data.Product.html#1806" class="Function">]</a> <a id="4768" class="Symbol">(</a><a id="4769" href="ComputationalModel.Strategy.html#4447" class="Bound">α</a> <a id="4771" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4773" href="ComputationalModel.Strategy.html#992" class="InductiveConstructor">delay</a> <a id="4779" href="ComputationalModel.Strategy.html#4764" class="Bound">δ</a><a id="4780" class="Symbol">)</a>
          <a id="4792" class="Symbol">))</a>
      <a id="4801" class="Comment">-- persistence</a>
    <a id="4820" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4822" class="Symbol">(∀</a> <a id="4825" class="Symbol">{</a><a id="4826" href="ComputationalModel.Strategy.html#4826" class="Bound">R</a> <a id="4828" href="ComputationalModel.Strategy.html#4828" class="Bound">α</a><a id="4829" class="Symbol">}</a>
        <a id="4839" class="Symbol">→</a> <a id="4841" class="Keyword">let</a>
            <a id="4857" href="ComputationalModel.Strategy.html#4857" class="Bound">R∗</a> <a id="4860" class="Symbol">=</a> <a id="4862" href="ComputationalModel.Strategy.html#1260" class="Function">strip</a> <a id="4868" href="ComputationalModel.Strategy.html#4320" class="Bound">A</a> <a id="4870" href="ComputationalModel.Strategy.html#4826" class="Bound">R</a>
            <a id="4884" href="ComputationalModel.Strategy.html#4884" class="Bound">Λ</a>  <a id="4887" class="Symbol">=</a> <a id="4889" href="ComputationalModel.Strategy.html#4343" class="Bound">Σ</a> <a id="4891" href="ComputationalModel.Strategy.html#4857" class="Bound">R∗</a>
            <a id="4906" href="ComputationalModel.Strategy.html#4906" class="Bound">R′</a> <a id="4909" class="Symbol">=</a> <a id="4911" href="ComputationalModel.Strategy.html#4828" class="Bound">α</a> <a id="4913" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="4915" href="ComputationalModel.Strategy.html#4857" class="Bound">R∗</a>
            <a id="4930" href="ComputationalModel.Strategy.html#4930" class="Bound">Λ′</a> <a id="4933" class="Symbol">=</a> <a id="4935" href="ComputationalModel.Strategy.html#4343" class="Bound">Σ</a> <a id="4937" href="ComputationalModel.Strategy.html#4906" class="Bound">R′</a>
          <a id="4950" class="Keyword">in</a>
          <a id="4963" href="ComputationalModel.Strategy.html#4828" class="Bound">α</a> <a id="4965" href="Prelude.Membership.html#379" class="Field Operator">∈</a> <a id="4967" href="ComputationalModel.Strategy.html#4884" class="Bound">Λ</a>
        <a id="4977" class="Symbol">→</a> <a id="4979" href="Bitcoin.Consistency.html#2992" class="Datatype">ConsistentBlockchain</a> <a id="5000" class="Symbol">(</a><a id="5001" href="ComputationalModel.Strategy.html#1602" class="Function">𝔹</a> <a id="5003" href="ComputationalModel.Strategy.html#4906" class="Bound">R′</a><a id="5005" class="Symbol">)</a>
        <a id="5015" class="Symbol">→</a> <a id="5017" class="Symbol">(∀</a> <a id="5020" class="Symbol">{</a><a id="5021" href="ComputationalModel.Strategy.html#5021" class="Bound">α′</a><a id="5023" class="Symbol">}</a> <a id="5025" class="Symbol">→</a> <a id="5027" href="ComputationalModel.Strategy.html#5021" class="Bound">α′</a> <a id="5030" href="Prelude.Membership.html#379" class="Field Operator">∈</a> <a id="5032" href="ComputationalModel.Strategy.html#4884" class="Bound">Λ</a> <a id="5034" class="Symbol">→</a> <a id="5036" href="ComputationalModel.Strategy.html#5021" class="Bound">α′</a> <a id="5039" href="Relation.Binary.PropositionalEquality.Core.html#830" class="Function Operator">≢</a> <a id="5041" href="ComputationalModel.Strategy.html#4828" class="Bound">α</a> <a id="5043" class="Symbol">→</a> <a id="5045" href="ComputationalModel.Strategy.html#5021" class="Bound">α′</a> <a id="5048" href="Prelude.Membership.html#379" class="Field Operator">∈</a> <a id="5050" href="ComputationalModel.Strategy.html#4930" class="Bound">Λ′</a><a id="5052" class="Symbol">)</a>
        <a id="5062" class="Comment">-- → (∀ {tx} → submit tx ∈ Λ → 𝔹 R′ → submit tx ∈ Λ′)</a>
        <a id="5124" class="Comment">-- × (∀ {m} → (A →∗∶ m) ∈ Λ → (A →∗∶ m) ≢ α → (A →∗∶ m) ∈ Λ′)</a>
        <a id="5194" class="Comment">-- × (∀ {m} → (A →O∶ m) ∈ Λ → (A →O∶ m) ≢ α → (A →O∶ m) ∈ Λ′)</a>
      <a id="5262" class="Symbol">)</a>

<a id="HonestStrategies"></a><a id="5265" href="ComputationalModel.Strategy.html#5265" class="Function">HonestStrategies</a> <a id="5282" class="Symbol">:</a> <a id="5284" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="5288" href="ComputationalModel.Strategy.html#5265" class="Function">HonestStrategies</a> <a id="5305" class="Symbol">=</a> <a id="5307" class="Symbol">∀</a> <a id="5309" class="Symbol">{</a><a id="5310" href="ComputationalModel.Strategy.html#5310" class="Bound">A</a><a id="5311" class="Symbol">}</a> <a id="5313" class="Symbol">→</a> <a id="5315" href="ComputationalModel.Strategy.html#5310" class="Bound">A</a> <a id="5317" href="Prelude.Membership.html#379" class="Field Operator">∈</a> <a id="5319" href="ComputationalModel.Strategy.html#607" class="Function">Hon</a> <a id="5323" class="Symbol">→</a> <a id="5325" href="ComputationalModel.Strategy.html#4120" class="Record">ParticipantStrategy</a> <a id="5345" href="ComputationalModel.Strategy.html#5310" class="Bound">A</a>

<a id="HonestMoves"></a><a id="5348" href="ComputationalModel.Strategy.html#5348" class="Function">HonestMoves</a> <a id="5360" class="Symbol">:</a> <a id="5362" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="5366" href="ComputationalModel.Strategy.html#5348" class="Function">HonestMoves</a> <a id="5378" class="Symbol">=</a> <a id="5380" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="5385" class="Symbol">(</a><a id="5386" href="ComputationalModel.Strategy.html#439" class="Bound">Participant</a> <a id="5398" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="5400" href="ComputationalModel.Strategy.html#1180" class="Function">Labels</a><a id="5406" class="Symbol">)</a>

<a id="5409" class="Keyword">variable</a>
  <a id="5420" href="ComputationalModel.Strategy.html#5420" class="Generalizable">moves</a> <a id="5426" class="Symbol">:</a> <a id="5428" href="ComputationalModel.Strategy.html#5348" class="Function">HonestMoves</a>

<a id="5441" class="Keyword">module</a> <a id="AdvM"></a><a id="5448" href="ComputationalModel.Strategy.html#5448" class="Module">AdvM</a> <a id="5453" class="Symbol">(</a><a id="5454" href="ComputationalModel.Strategy.html#5454" class="Bound">Adv</a> <a id="5458" class="Symbol">:</a> <a id="5460" href="ComputationalModel.Strategy.html#439" class="Bound">Participant</a><a id="5471" class="Symbol">)</a> <a id="5473" class="Symbol">(</a><a id="5474" href="ComputationalModel.Strategy.html#5474" class="Bound">Adv∉</a> <a id="5479" class="Symbol">:</a> <a id="5481" href="ComputationalModel.Strategy.html#5454" class="Bound">Adv</a> <a id="5485" href="Prelude.Membership.html#452" class="Function Operator">∉</a> <a id="5487" href="ComputationalModel.Strategy.html#607" class="Function">Hon</a><a id="5490" class="Symbol">)</a> <a id="5492" class="Keyword">where</a>

  <a id="5501" class="Keyword">record</a> <a id="AdvM.AdversaryStrategy"></a><a id="5508" href="ComputationalModel.Strategy.html#5508" class="Record">AdversaryStrategy</a> <a id="5526" class="Symbol">:</a> <a id="5528" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="5532" class="Keyword">where</a>
    <a id="5542" class="Keyword">field</a>
      <a id="AdvM.AdversaryStrategy.Σₐ"></a><a id="5554" href="ComputationalModel.Strategy.html#5554" class="Field">Σₐ</a> <a id="5557" class="Symbol">:</a> <a id="5559" href="ComputationalModel.Strategy.html#1160" class="Function">Run</a> <a id="5563" class="Symbol">→</a> <a id="5565" href="ComputationalModel.Strategy.html#5348" class="Function">HonestMoves</a> <a id="5577" class="Symbol">→</a> <a id="5579" href="ComputationalModel.Strategy.html#835" class="Datatype">Label</a>

      <a id="AdvM.AdversaryStrategy.valid"></a><a id="5592" href="ComputationalModel.Strategy.html#5592" class="Field">valid</a> <a id="5598" class="Symbol">:</a>
        <a id="5608" class="Symbol">∀</a> <a id="5610" class="Symbol">{</a><a id="5611" href="ComputationalModel.Strategy.html#5611" class="Bound">R</a> <a id="5613" href="ComputationalModel.Strategy.html#5613" class="Bound">moves</a><a id="5618" class="Symbol">}</a> <a id="5620" class="Symbol">→</a>
          <a id="5632" class="Keyword">let</a>
            <a id="5648" href="ComputationalModel.Strategy.html#5648" class="Bound">R∗</a> <a id="5651" class="Symbol">=</a> <a id="5653" href="ComputationalModel.Strategy.html#1260" class="Function">strip</a> <a id="5659" href="ComputationalModel.Strategy.html#5454" class="Bound">Adv</a> <a id="5663" href="ComputationalModel.Strategy.html#5611" class="Bound">R</a>
            <a id="5677" href="ComputationalModel.Strategy.html#5677" class="Bound">α</a>  <a id="5680" class="Symbol">=</a> <a id="5682" href="ComputationalModel.Strategy.html#5554" class="Field">Σₐ</a> <a id="5685" href="ComputationalModel.Strategy.html#5648" class="Bound">R∗</a> <a id="5688" href="ComputationalModel.Strategy.html#5613" class="Bound">moves</a> <a id="5694" class="Comment">-- T0D0 should the honest moves be stripped?</a>
          <a id="5749" class="Keyword">in</a>
          <a id="5762" class="Symbol">(</a> <a id="5764" class="Comment">-- (1) impersonate another participant</a>
            <a id="5815" href="Data.Product.html#1806" class="Function">∃[</a> <a id="5818" href="ComputationalModel.Strategy.html#5818" class="Bound">m</a> <a id="5820" href="Data.Product.html#1806" class="Function">]</a>
              <a id="5836" class="Symbol">(</a> <a id="5838" href="Data.Product.html#1806" class="Function">∃[</a> <a id="5841" href="ComputationalModel.Strategy.html#5841" class="Bound">A</a> <a id="5843" href="Data.Product.html#1806" class="Function">]</a> <a id="5845" class="Symbol">(</a><a id="5846" href="ComputationalModel.Strategy.html#5677" class="Bound">α</a> <a id="5848" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="5850" href="ComputationalModel.Strategy.html#5841" class="Bound">A</a> <a id="5852" href="ComputationalModel.Strategy.html#878" class="InductiveConstructor Operator">→∗∶</a> <a id="5856" href="ComputationalModel.Strategy.html#5818" class="Bound">m</a><a id="5857" class="Symbol">)</a>
              <a id="5873" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="5875" class="Symbol">(</a><a id="5876" href="ComputationalModel.Strategy.html#5677" class="Bound">α</a> <a id="5878" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="5880" href="ComputationalModel.Strategy.html#5454" class="Bound">Adv</a> <a id="5884" href="ComputationalModel.Strategy.html#1049" class="InductiveConstructor Operator">→O∶</a> <a id="5888" href="ComputationalModel.Strategy.html#5818" class="Bound">m</a><a id="5889" class="Symbol">)</a> <a id="5891" class="Symbol">)</a>
            <a id="5905" class="Comment">-- (2) consistently update the blockchain</a>
          <a id="5957" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="5959" href="Data.Product.html#1806" class="Function">∃[</a> <a id="5962" href="ComputationalModel.Strategy.html#5962" class="Bound">tx</a> <a id="5965" href="Data.Product.html#1806" class="Function">]</a>
              <a id="5981" class="Symbol">(</a> <a id="5983" class="Symbol">(</a><a id="5984" href="ComputationalModel.Strategy.html#5677" class="Bound">α</a> <a id="5986" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="5988" href="ComputationalModel.Strategy.html#947" class="InductiveConstructor">submit</a> <a id="5995" href="ComputationalModel.Strategy.html#5962" class="Bound">tx</a><a id="5997" class="Symbol">)</a>
              <a id="6013" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="6015" class="Symbol">(</a><a id="6016" href="ComputationalModel.Strategy.html#5648" class="Bound">R∗</a> <a id="6019" href="ComputationalModel.Strategy.html#3841" class="Function Operator">▷ʳ</a> <a id="6022" href="ComputationalModel.Strategy.html#5962" class="Bound">tx</a><a id="6024" class="Symbol">)</a> <a id="6026" class="Symbol">)</a>
            <a id="6040" class="Comment">-- (3) delay, if all honest participants agree</a>
          <a id="6097" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="6099" href="Data.Product.html#1806" class="Function">∃[</a> <a id="6102" href="ComputationalModel.Strategy.html#6102" class="Bound">δ</a> <a id="6104" href="Data.Product.html#1806" class="Function">]</a>
              <a id="6120" class="Symbol">(</a> <a id="6122" class="Symbol">(</a><a id="6123" href="ComputationalModel.Strategy.html#5677" class="Bound">α</a> <a id="6125" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="6127" href="ComputationalModel.Strategy.html#992" class="InductiveConstructor">delay</a> <a id="6133" href="ComputationalModel.Strategy.html#6102" class="Bound">δ</a><a id="6134" class="Symbol">)</a>
              <a id="6150" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="6152" href="Data.List.Relation.Unary.All.html#1444" class="Datatype">All</a> <a id="6156" class="Symbol">(λ{</a> <a id="6160" class="Symbol">(_</a> <a id="6163" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6165" href="ComputationalModel.Strategy.html#6165" class="Bound">Λ</a><a id="6166" class="Symbol">)</a> <a id="6168" class="Symbol">→</a> <a id="6170" class="Symbol">(</a><a id="6171" href="ComputationalModel.Strategy.html#6165" class="Bound">Λ</a> <a id="6173" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="6175" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="6177" class="Symbol">)</a> <a id="6179" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="6181" href="Data.List.Relation.Unary.Any.html#1156" class="Datatype">Any</a> <a id="6185" class="Symbol">(λ{</a> <a id="6189" class="Symbol">(</a><a id="6190" href="ComputationalModel.Strategy.html#992" class="InductiveConstructor">delay</a> <a id="6196" href="ComputationalModel.Strategy.html#6196" class="Bound">δ′</a><a id="6198" class="Symbol">)</a> <a id="6200" class="Symbol">→</a> <a id="6202" href="ComputationalModel.Strategy.html#6196" class="Bound">δ′</a> <a id="6205" href="Prelude.Ord.html#269" class="Function Operator">≥</a> <a id="6207" href="ComputationalModel.Strategy.html#6102" class="Bound">δ</a> <a id="6209" class="Symbol">;</a> <a id="6211" class="CatchallClause Symbol">_</a> <a id="6213" class="Symbol">→</a> <a id="6215" href="Data.Empty.html#526" class="Datatype">⊥</a> <a id="6217" class="Symbol">})</a> <a id="6220" href="ComputationalModel.Strategy.html#6165" class="Bound">Λ</a><a id="6221" class="Symbol">})</a> <a id="6224" href="ComputationalModel.Strategy.html#5613" class="Bound">moves</a> <a id="6230" class="Symbol">)</a>
          <a id="6242" class="Symbol">)</a>

  <a id="6247" class="Keyword">open</a> <a id="6252" href="ComputationalModel.Strategy.html#5508" class="Module">AdversaryStrategy</a> <a id="6270" class="Keyword">public</a>

  <a id="AdvM.Strategies"></a><a id="6280" href="ComputationalModel.Strategy.html#6280" class="Function">Strategies</a> <a id="6291" class="Symbol">:</a> <a id="6293" href="Agda.Primitive.html#326" class="Primitive">Set</a>
  <a id="6299" href="ComputationalModel.Strategy.html#6280" class="Function">Strategies</a> <a id="6310" class="Symbol">=</a> <a id="6312" href="ComputationalModel.Strategy.html#5508" class="Record">AdversaryStrategy</a> <a id="6330" class="Comment">-- adversarial strategy</a>
             <a id="6367" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="6369" href="ComputationalModel.Strategy.html#5265" class="Function">HonestStrategies</a>  <a id="6387" class="Comment">-- participant strategies</a>

  <a id="6416" class="Keyword">variable</a>
    <a id="6429" href="ComputationalModel.Strategy.html#6429" class="Generalizable">SS</a> <a id="6432" class="Symbol">:</a> <a id="6434" href="ComputationalModel.Strategy.html#6280" class="Function">Strategies</a>

  <a id="AdvM.runHonestAll"></a><a id="6448" href="ComputationalModel.Strategy.html#6448" class="Function">runHonestAll</a> <a id="6461" class="Symbol">:</a> <a id="6463" href="ComputationalModel.Strategy.html#1160" class="Function">Run</a> <a id="6467" class="Symbol">→</a> <a id="6469" href="ComputationalModel.Strategy.html#5265" class="Function">HonestStrategies</a> <a id="6486" class="Symbol">→</a> <a id="6488" href="ComputationalModel.Strategy.html#5348" class="Function">HonestMoves</a>
  <a id="6502" href="ComputationalModel.Strategy.html#6448" class="Function">runHonestAll</a> <a id="6515" href="ComputationalModel.Strategy.html#6515" class="Bound">R</a> <a id="6517" href="ComputationalModel.Strategy.html#6517" class="Bound">S</a> <a id="6519" class="Symbol">=</a> <a id="6521" href="Prelude.Membership.html#1311" class="Field">mapWith∈</a> <a id="6530" href="ComputationalModel.Strategy.html#607" class="Function">Hon</a> <a id="6534" class="Symbol">(λ</a> <a id="6537" class="Symbol">{</a><a id="6538" href="ComputationalModel.Strategy.html#6538" class="Bound">A</a><a id="6539" class="Symbol">}</a> <a id="6541" href="ComputationalModel.Strategy.html#6541" class="Bound">A∈</a> <a id="6544" class="Symbol">→</a> <a id="6546" href="ComputationalModel.Strategy.html#6538" class="Bound">A</a> <a id="6548" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6550" href="ComputationalModel.Strategy.html#4178" class="Field">Σ</a> <a id="6552" class="Symbol">(</a><a id="6553" href="ComputationalModel.Strategy.html#6517" class="Bound">S</a> <a id="6555" href="ComputationalModel.Strategy.html#6541" class="Bound">A∈</a><a id="6557" class="Symbol">)</a> <a id="6559" class="Symbol">(</a><a id="6560" href="ComputationalModel.Strategy.html#1260" class="Function">strip</a> <a id="6566" href="ComputationalModel.Strategy.html#6538" class="Bound">A</a> <a id="6568" href="ComputationalModel.Strategy.html#6515" class="Bound">R</a><a id="6569" class="Symbol">))</a>

  <a id="AdvM.runAdversary"></a><a id="6575" href="ComputationalModel.Strategy.html#6575" class="Function">runAdversary</a> <a id="6588" class="Symbol">:</a> <a id="6590" href="ComputationalModel.Strategy.html#6280" class="Function">Strategies</a> <a id="6601" class="Symbol">→</a> <a id="6603" href="ComputationalModel.Strategy.html#1160" class="Function">Run</a> <a id="6607" class="Symbol">→</a> <a id="6609" href="ComputationalModel.Strategy.html#835" class="Datatype">Label</a>
  <a id="6617" href="ComputationalModel.Strategy.html#6575" class="Function">runAdversary</a> <a id="6630" class="Symbol">(</a><a id="6631" href="ComputationalModel.Strategy.html#6631" class="Bound">S†</a> <a id="6634" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6636" href="ComputationalModel.Strategy.html#6636" class="Bound">S</a><a id="6637" class="Symbol">)</a> <a id="6639" href="ComputationalModel.Strategy.html#6639" class="Bound">R</a> <a id="6641" class="Symbol">=</a> <a id="6643" href="ComputationalModel.Strategy.html#5554" class="Field">Σₐ</a> <a id="6646" href="ComputationalModel.Strategy.html#6631" class="Bound">S†</a> <a id="6649" class="Symbol">(</a><a id="6650" href="ComputationalModel.Strategy.html#1260" class="Function">strip</a> <a id="6656" href="ComputationalModel.Strategy.html#5454" class="Bound">Adv</a> <a id="6660" href="ComputationalModel.Strategy.html#6639" class="Bound">R</a><a id="6661" class="Symbol">)</a> <a id="6663" class="Symbol">(</a><a id="6664" href="ComputationalModel.Strategy.html#6448" class="Function">runHonestAll</a> <a id="6677" href="ComputationalModel.Strategy.html#6639" class="Bound">R</a> <a id="6679" href="ComputationalModel.Strategy.html#6636" class="Bound">S</a><a id="6680" class="Symbol">)</a>

  <a id="6685" class="Keyword">infix</a> <a id="6691" class="Number">-1</a> <a id="6694" href="ComputationalModel.Strategy.html#6721" class="Datatype Operator">_-pre-conforms-to-_</a>
  <a id="6716" class="Keyword">data</a> <a id="AdvM._-pre-conforms-to-_"></a><a id="6721" href="ComputationalModel.Strategy.html#6721" class="Datatype Operator">_-pre-conforms-to-_</a> <a id="6741" class="Symbol">:</a> <a id="6743" href="ComputationalModel.Strategy.html#1160" class="Function">Run</a> <a id="6747" class="Symbol">→</a> <a id="6749" href="ComputationalModel.Strategy.html#6280" class="Function">Strategies</a> <a id="6760" class="Symbol">→</a> <a id="6762" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="6766" class="Keyword">where</a>

    <a id="AdvM._-pre-conforms-to-_.base"></a><a id="6777" href="ComputationalModel.Strategy.html#6777" class="InductiveConstructor">base</a> <a id="6782" class="Symbol">:</a> <a id="6784" href="ComputationalModel.Strategy.html#2346" class="Function">Initial</a> <a id="6792" href="ComputationalModel.Strategy.html#1229" class="Generalizable">R</a>
           <a id="6805" class="Comment">----------------------</a>
         <a id="6837" class="Symbol">→</a> <a id="6839" href="ComputationalModel.Strategy.html#1229" class="Generalizable">R</a> <a id="6841" href="ComputationalModel.Strategy.html#6721" class="Datatype Operator">-pre-conforms-to-</a> <a id="6859" href="ComputationalModel.Strategy.html#6429" class="Generalizable">SS</a>

    <a id="AdvM._-pre-conforms-to-_.step"></a><a id="6867" href="ComputationalModel.Strategy.html#6867" class="InductiveConstructor">step</a> <a id="6872" class="Symbol">:</a>
      <a id="6880" class="Keyword">let</a>
        <a id="6892" class="Symbol">(</a><a id="6893" href="ComputationalModel.Strategy.html#6893" class="Bound">S†</a> <a id="6896" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6898" href="ComputationalModel.Strategy.html#6898" class="Bound">S</a><a id="6899" class="Symbol">)</a> <a id="6901" class="Symbol">=</a> <a id="6903" href="ComputationalModel.Strategy.html#6429" class="Generalizable">SS</a>
        <a id="6914" href="ComputationalModel.Strategy.html#6914" class="Bound">moves</a> <a id="6920" class="Symbol">=</a> <a id="6922" href="ComputationalModel.Strategy.html#6448" class="Function">runHonestAll</a> <a id="6935" href="ComputationalModel.Strategy.html#1229" class="Generalizable">R</a> <a id="6937" href="ComputationalModel.Strategy.html#6898" class="Bound">S</a>
        <a id="6947" href="ComputationalModel.Strategy.html#6947" class="Bound">Λ</a> <a id="6949" class="Symbol">=</a> <a id="6951" href="Data.List.Base.html#1544" class="Function">map</a> <a id="6955" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="6961" href="ComputationalModel.Strategy.html#6914" class="Bound">moves</a>
        <a id="6975" href="ComputationalModel.Strategy.html#6975" class="Bound">α</a> <a id="6977" class="Symbol">=</a> <a id="6979" href="ComputationalModel.Strategy.html#5554" class="Field">Σₐ</a> <a id="6982" href="ComputationalModel.Strategy.html#6893" class="Bound">S†</a> <a id="6985" class="Symbol">(</a><a id="6986" href="ComputationalModel.Strategy.html#1260" class="Function">strip</a> <a id="6992" href="ComputationalModel.Strategy.html#5454" class="Bound">Adv</a> <a id="6996" href="ComputationalModel.Strategy.html#1229" class="Generalizable">R</a><a id="6997" class="Symbol">)</a> <a id="6999" href="ComputationalModel.Strategy.html#6914" class="Bound">moves</a>
      <a id="7011" class="Keyword">in</a>
        <a id="7022" href="ComputationalModel.Strategy.html#1229" class="Generalizable">R</a> <a id="7024" href="ComputationalModel.Strategy.html#6721" class="Datatype Operator">-pre-conforms-to-</a> <a id="7042" href="ComputationalModel.Strategy.html#6429" class="Generalizable">SS</a>
      <a id="7051" class="Symbol">→</a> <a id="7053" href="ComputationalModel.Strategy.html#2600" class="Function">oracleMessages</a> <a id="7068" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="7070" href="ComputationalModel.Strategy.html#6975" class="Bound">α</a> <a id="7072" href="Data.List.Base.html#5025" class="Function Operator">]</a> <a id="7074" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7076" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
      <a id="7085" class="Symbol">→</a> <a id="7087" href="Data.List.Base.html#4450" class="Function">concatMap</a> <a id="7097" href="ComputationalModel.Strategy.html#2600" class="Function">oracleMessages</a> <a id="7112" href="ComputationalModel.Strategy.html#6947" class="Bound">Λ</a> <a id="7114" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7116" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
        <a id="7127" class="Comment">-------------------------------</a>
      <a id="7165" class="Symbol">→</a> <a id="7167" href="ComputationalModel.Strategy.html#6975" class="Bound">α</a> <a id="7169" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="7171" href="ComputationalModel.Strategy.html#1229" class="Generalizable">R</a> <a id="7173" href="ComputationalModel.Strategy.html#6721" class="Datatype Operator">-pre-conforms-to-</a> <a id="7191" href="ComputationalModel.Strategy.html#6429" class="Generalizable">SS</a>

    <a id="AdvM._-pre-conforms-to-_.oracle-adv"></a><a id="7199" href="ComputationalModel.Strategy.html#7199" class="InductiveConstructor">oracle-adv</a> <a id="7210" class="Symbol">:</a> <a id="7212" class="Symbol">∀</a> <a id="7214" class="Symbol">{</a><a id="7215" href="ComputationalModel.Strategy.html#7215" class="Bound">m</a> <a id="7217" href="ComputationalModel.Strategy.html#7217" class="Bound">hm</a> <a id="7220" class="Symbol">:</a> <a id="7222" href="ComputationalModel.Strategy.html#812" class="Function">Message</a><a id="7229" class="Symbol">}</a> <a id="7231" class="Symbol">→</a>
      <a id="7239" class="Keyword">let</a>
        <a id="7251" class="Symbol">(</a><a id="7252" href="ComputationalModel.Strategy.html#7252" class="Bound">S†</a> <a id="7255" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7257" href="ComputationalModel.Strategy.html#7257" class="Bound">S</a><a id="7258" class="Symbol">)</a> <a id="7260" class="Symbol">=</a> <a id="7262" href="ComputationalModel.Strategy.html#6429" class="Generalizable">SS</a>
        <a id="7273" href="ComputationalModel.Strategy.html#7273" class="Bound">moves</a> <a id="7279" class="Symbol">=</a> <a id="7281" href="ComputationalModel.Strategy.html#6448" class="Function">runHonestAll</a> <a id="7294" href="ComputationalModel.Strategy.html#1229" class="Generalizable">R</a> <a id="7296" href="ComputationalModel.Strategy.html#7257" class="Bound">S</a>
        <a id="7306" href="ComputationalModel.Strategy.html#7306" class="Bound">Λ</a> <a id="7308" class="Symbol">=</a> <a id="7310" href="Data.List.Base.html#1544" class="Function">map</a> <a id="7314" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="7320" href="ComputationalModel.Strategy.html#7273" class="Bound">moves</a>
        <a id="7334" href="ComputationalModel.Strategy.html#7334" class="Bound">α</a> <a id="7336" class="Symbol">=</a> <a id="7338" href="ComputationalModel.Strategy.html#5554" class="Field">Σₐ</a> <a id="7341" href="ComputationalModel.Strategy.html#7252" class="Bound">S†</a> <a id="7344" class="Symbol">(</a><a id="7345" href="ComputationalModel.Strategy.html#1260" class="Function">strip</a> <a id="7351" href="ComputationalModel.Strategy.html#5454" class="Bound">Adv</a> <a id="7355" href="ComputationalModel.Strategy.html#1229" class="Generalizable">R</a><a id="7356" class="Symbol">)</a> <a id="7358" href="ComputationalModel.Strategy.html#7273" class="Bound">moves</a>
      <a id="7370" class="Keyword">in</a>
        <a id="7381" href="ComputationalModel.Strategy.html#1229" class="Generalizable">R</a> <a id="7383" href="ComputationalModel.Strategy.html#6721" class="Datatype Operator">-pre-conforms-to-</a> <a id="7401" href="ComputationalModel.Strategy.html#6429" class="Generalizable">SS</a>
      <a id="7410" class="Symbol">→</a> <a id="7412" href="ComputationalModel.Strategy.html#7334" class="Bound">α</a> <a id="7414" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7416" href="ComputationalModel.Strategy.html#5454" class="Bound">Adv</a> <a id="7420" href="ComputationalModel.Strategy.html#1049" class="InductiveConstructor Operator">→O∶</a> <a id="7424" href="ComputationalModel.Strategy.html#7215" class="Bound">m</a>
      <a id="7432" class="Symbol">→</a> <a id="7434" href="Data.List.Base.html#4450" class="Function">concatMap</a> <a id="7444" href="ComputationalModel.Strategy.html#2600" class="Function">oracleMessages</a> <a id="7459" href="ComputationalModel.Strategy.html#7306" class="Bound">Λ</a> <a id="7461" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7463" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
      <a id="7472" class="Symbol">→</a> <a id="7474" class="Symbol">(∀</a> <a id="7477" class="Symbol">{</a><a id="7478" href="ComputationalModel.Strategy.html#7478" class="Bound">hm′</a><a id="7481" class="Symbol">}</a> <a id="7483" class="Symbol">→</a> <a id="7485" class="Symbol">(</a><a id="7486" href="ComputationalModel.Strategy.html#5454" class="Bound">Adv</a> <a id="7490" href="ComputationalModel.Strategy.html#1049" class="InductiveConstructor Operator">→O∶</a> <a id="7494" href="ComputationalModel.Strategy.html#7215" class="Bound">m</a> <a id="7496" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7498" href="ComputationalModel.Strategy.html#1121" class="InductiveConstructor Operator">O→</a> <a id="7501" href="ComputationalModel.Strategy.html#5454" class="Bound">Adv</a> <a id="7505" href="ComputationalModel.Strategy.html#1121" class="InductiveConstructor Operator">∶</a> <a id="7507" href="ComputationalModel.Strategy.html#7478" class="Bound">hm′</a> <a id="7511" class="Symbol">)</a> <a id="7513" href="Prelude.Membership.html#379" class="Field Operator">∈</a> <a id="7515" href="ComputationalModel.Strategy.html#2910" class="Function">oracleRequests</a> <a id="7530" href="ComputationalModel.Strategy.html#5454" class="Bound">Adv</a> <a id="7534" href="ComputationalModel.Strategy.html#1229" class="Generalizable">R</a>
                 <a id="7553" class="Symbol">→</a> <a id="7555" href="ComputationalModel.Strategy.html#7217" class="Bound">hm</a> <a id="7558" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7560" href="ComputationalModel.Strategy.html#7478" class="Bound">hm′</a><a id="7563" class="Symbol">)</a>
        <a id="7573" class="Comment">-------------------------------------------------------------</a>
      <a id="7641" class="Symbol">→</a> <a id="7643" class="Symbol">(</a><a id="7644" href="ComputationalModel.Strategy.html#5454" class="Bound">Adv</a> <a id="7648" href="ComputationalModel.Strategy.html#1049" class="InductiveConstructor Operator">→O∶</a> <a id="7652" href="ComputationalModel.Strategy.html#7215" class="Bound">m</a><a id="7653" class="Symbol">)</a> <a id="7655" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="7657" class="Symbol">(</a><a id="7658" href="ComputationalModel.Strategy.html#1121" class="InductiveConstructor Operator">O→</a> <a id="7661" href="ComputationalModel.Strategy.html#5454" class="Bound">Adv</a> <a id="7665" href="ComputationalModel.Strategy.html#1121" class="InductiveConstructor Operator">∶</a> <a id="7667" href="ComputationalModel.Strategy.html#7217" class="Bound">hm</a><a id="7669" class="Symbol">)</a> <a id="7671" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="7673" href="ComputationalModel.Strategy.html#1229" class="Generalizable">R</a> <a id="7675" href="ComputationalModel.Strategy.html#6721" class="Datatype Operator">-pre-conforms-to-</a> <a id="7693" href="ComputationalModel.Strategy.html#6429" class="Generalizable">SS</a>

    <a id="AdvM._-pre-conforms-to-_.oracle-hon"></a><a id="7701" href="ComputationalModel.Strategy.html#7701" class="InductiveConstructor">oracle-hon</a> <a id="7712" class="Symbol">:</a> <a id="7714" class="Symbol">∀</a> <a id="7716" class="Symbol">{</a><a id="7717" href="ComputationalModel.Strategy.html#7717" class="Bound">A</a><a id="7718" class="Symbol">}</a> <a id="7720" class="Symbol">{</a><a id="7721" href="ComputationalModel.Strategy.html#7721" class="Bound">A∈</a> <a id="7724" class="Symbol">:</a> <a id="7726" href="ComputationalModel.Strategy.html#7717" class="Bound">A</a> <a id="7728" href="Prelude.Membership.html#379" class="Field Operator">∈</a> <a id="7730" href="ComputationalModel.Strategy.html#607" class="Function">Hon</a><a id="7733" class="Symbol">}</a> <a id="7735" class="Symbol">{</a><a id="7736" href="ComputationalModel.Strategy.html#7736" class="Bound">m</a> <a id="7738" href="ComputationalModel.Strategy.html#7738" class="Bound">hm</a> <a id="7741" class="Symbol">:</a> <a id="7743" href="ComputationalModel.Strategy.html#812" class="Function">Message</a><a id="7750" class="Symbol">}</a> <a id="7752" class="Symbol">→</a>
      <a id="7760" class="Keyword">let</a>
        <a id="7772" class="Symbol">(_</a> <a id="7775" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7777" href="ComputationalModel.Strategy.html#7777" class="Bound">S</a><a id="7778" class="Symbol">)</a> <a id="7780" class="Symbol">=</a> <a id="7782" href="ComputationalModel.Strategy.html#6429" class="Generalizable">SS</a>
        <a id="7793" href="ComputationalModel.Strategy.html#7793" class="Bound">Λ</a> <a id="7795" class="Symbol">=</a> <a id="7797" href="ComputationalModel.Strategy.html#4178" class="Field">Σ</a> <a id="7799" class="Symbol">(</a><a id="7800" href="ComputationalModel.Strategy.html#7777" class="Bound">S</a> <a id="7802" href="ComputationalModel.Strategy.html#7721" class="Bound">A∈</a><a id="7804" class="Symbol">)</a> <a id="7806" class="Symbol">(</a><a id="7807" href="ComputationalModel.Strategy.html#1260" class="Function">strip</a> <a id="7813" href="ComputationalModel.Strategy.html#7717" class="Bound">A</a> <a id="7815" href="ComputationalModel.Strategy.html#1229" class="Generalizable">R</a><a id="7816" class="Symbol">)</a>
      <a id="7824" class="Keyword">in</a>
        <a id="7835" href="ComputationalModel.Strategy.html#1229" class="Generalizable">R</a> <a id="7837" href="ComputationalModel.Strategy.html#6721" class="Datatype Operator">-pre-conforms-to-</a> <a id="7855" href="ComputationalModel.Strategy.html#6429" class="Generalizable">SS</a>
      <a id="7864" class="Symbol">→</a> <a id="7866" href="Data.List.Base.html#7061" class="Function">L.head</a> <a id="7873" class="Symbol">(</a><a id="7874" href="ComputationalModel.Strategy.html#2600" class="Function">oracleMessages</a> <a id="7889" href="ComputationalModel.Strategy.html#7793" class="Bound">Λ</a><a id="7890" class="Symbol">)</a> <a id="7892" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7894" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="7899" class="Symbol">(</a><a id="7900" href="ComputationalModel.Strategy.html#5454" class="Bound">Adv</a> <a id="7904" href="ComputationalModel.Strategy.html#1049" class="InductiveConstructor Operator">→O∶</a> <a id="7908" href="ComputationalModel.Strategy.html#7736" class="Bound">m</a><a id="7909" class="Symbol">)</a>
      <a id="7917" class="Symbol">→</a> <a id="7919" class="Symbol">(∀</a> <a id="7922" class="Symbol">{</a><a id="7923" href="ComputationalModel.Strategy.html#7923" class="Bound">hm′</a><a id="7926" class="Symbol">}</a> <a id="7928" class="Symbol">→</a> <a id="7930" class="Symbol">(</a><a id="7931" href="ComputationalModel.Strategy.html#7717" class="Bound">A</a> <a id="7933" href="ComputationalModel.Strategy.html#1049" class="InductiveConstructor Operator">→O∶</a> <a id="7937" href="ComputationalModel.Strategy.html#7736" class="Bound">m</a> <a id="7939" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7941" href="ComputationalModel.Strategy.html#1121" class="InductiveConstructor Operator">O→</a> <a id="7944" href="ComputationalModel.Strategy.html#7717" class="Bound">A</a> <a id="7946" href="ComputationalModel.Strategy.html#1121" class="InductiveConstructor Operator">∶</a> <a id="7948" href="ComputationalModel.Strategy.html#7923" class="Bound">hm′</a> <a id="7952" class="Symbol">)</a> <a id="7954" href="Prelude.Membership.html#379" class="Field Operator">∈</a> <a id="7956" href="ComputationalModel.Strategy.html#2910" class="Function">oracleRequests</a> <a id="7971" href="ComputationalModel.Strategy.html#7717" class="Bound">A</a> <a id="7973" href="ComputationalModel.Strategy.html#1229" class="Generalizable">R</a>
                 <a id="7992" class="Symbol">→</a> <a id="7994" href="ComputationalModel.Strategy.html#7738" class="Bound">hm</a> <a id="7997" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7999" href="ComputationalModel.Strategy.html#7923" class="Bound">hm′</a><a id="8002" class="Symbol">)</a>
        <a id="8012" class="Comment">-------------------------------------------------------</a>
      <a id="8074" class="Symbol">→</a> <a id="8076" class="Symbol">(</a><a id="8077" href="ComputationalModel.Strategy.html#7717" class="Bound">A</a> <a id="8079" href="ComputationalModel.Strategy.html#1049" class="InductiveConstructor Operator">→O∶</a> <a id="8083" href="ComputationalModel.Strategy.html#7736" class="Bound">m</a><a id="8084" class="Symbol">)</a> <a id="8086" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="8088" class="Symbol">(</a><a id="8089" href="ComputationalModel.Strategy.html#1121" class="InductiveConstructor Operator">O→</a> <a id="8092" href="ComputationalModel.Strategy.html#7717" class="Bound">A</a> <a id="8094" href="ComputationalModel.Strategy.html#1121" class="InductiveConstructor Operator">∶</a> <a id="8096" href="ComputationalModel.Strategy.html#7738" class="Bound">hm</a><a id="8098" class="Symbol">)</a> <a id="8100" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="8102" href="ComputationalModel.Strategy.html#1229" class="Generalizable">R</a> <a id="8104" href="ComputationalModel.Strategy.html#6721" class="Datatype Operator">-pre-conforms-to-</a> <a id="8122" href="ComputationalModel.Strategy.html#6429" class="Generalizable">SS</a>

  <a id="8128" class="Keyword">infix</a> <a id="8134" class="Number">-1</a> <a id="8137" href="ComputationalModel.Strategy.html#8155" class="Function Operator">_-conforms-to-_</a>
  <a id="AdvM._-conforms-to-_"></a><a id="8155" href="ComputationalModel.Strategy.html#8155" class="Function Operator">_-conforms-to-_</a> <a id="8171" class="Symbol">:</a> <a id="8173" href="ComputationalModel.Strategy.html#1160" class="Function">Run</a> <a id="8177" class="Symbol">→</a> <a id="8179" href="ComputationalModel.Strategy.html#6280" class="Function">Strategies</a> <a id="8190" class="Symbol">→</a> <a id="8192" href="Agda.Primitive.html#326" class="Primitive">Set</a>
  <a id="8198" href="ComputationalModel.Strategy.html#8198" class="Bound">R</a> <a id="8200" href="ComputationalModel.Strategy.html#8155" class="Function Operator">-conforms-to-</a> <a id="8214" href="ComputationalModel.Strategy.html#8214" class="Bound">SS</a> <a id="8217" class="Symbol">=</a> <a id="8219" href="Data.Product.html#1806" class="Function">∃[</a> <a id="8222" href="ComputationalModel.Strategy.html#8222" class="Bound">R′</a> <a id="8225" href="Data.Product.html#1806" class="Function">]</a> <a id="8227" class="Symbol">(</a><a id="8228" href="Data.List.Relation.Binary.Prefix.Heterogeneous.html#685" class="Datatype">Prefix</a> <a id="8235" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a> <a id="8239" href="ComputationalModel.Strategy.html#8198" class="Bound">R</a> <a id="8241" href="ComputationalModel.Strategy.html#8222" class="Bound">R′</a> <a id="8244" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="8246" class="Symbol">(</a><a id="8247" href="ComputationalModel.Strategy.html#8222" class="Bound">R′</a> <a id="8250" href="ComputationalModel.Strategy.html#6721" class="Datatype Operator">-pre-conforms-to-</a> <a id="8268" href="ComputationalModel.Strategy.html#8214" class="Bound">SS</a><a id="8270" class="Symbol">))</a>
</pre></body></html>